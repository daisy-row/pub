{"id":"38666736172","type":"IssuesEvent","actor":{"id":3984960,"login":"mkannwischer","display_login":"mkannwischer","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","avatar_url":"https://avatars.githubusercontent.com/u/3984960?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/42","repository_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/42/labels{/name}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/42/comments","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/42/events","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/issues/42","id":2314246169,"node_id":"I_kwDOLh-nxs6J8JgZ","number":42,"title":"Code Sharing","user":{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-24T03:12:47Z","updated_at":"2024-05-24T03:12:47Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Right now we do have 3 copies of mostly the same C code: \r\n - https://github.com/pq-code-package/mlkem-c-generic\r\n - https://github.com/pq-code-package/mlkem-c-aarch64\r\n - https://github.com/pq-code-package/mlkem-c-embedded\r\n\r\nIn the long run, we want to share as much as possible between these C projects and (possibly additional ones). Maybe we even want to combine them into a single project at some point. \r\n\r\nThe reason for starting off with separate code bases was the different goals of the projects: In particular, the `generic` project wants to stay in sync with the Kyber teams reference implementation and they want to make as few changes as possible. That's why we started off our own copy and postponed the discussion of code sharing to a later point. (Since nothing has been merged into the generic project so far, I believe this was a good approach). \r\n\r\nCode sharing between embedded and aarch64 should be easier, and we should discuss what is the best way to implement it. \r\nShould we pull out the common code to a separate repository (e.g., mlkem-c-common) and include it into both embedded and aarch64 as a submodule? At the same time we could put in place the the checks for undefined behavious (using e.g., CBMC). \r\n\r\nI have two thoughts about what we definitely need to consider:\r\n - For AArch64, we likely want to support multiple levels of batching Keccak permutations to make best use of hybrid scalar-vector implementations (see https://github.com/pq-code-package/mlkem-c-aarch64/issues/33, https://kannwischer.eu/papers/2022_armv8keccak.pdf). This is something we don't want/need for the embedded implementation. For now we decided to start off with a 4x Keccak API for AArch64 - you definitely don't want to allocate 4 Keccak states for the embedded implementation though. \r\n -  For the embedded implementation, we do implement some stack optimizations that do change some C code significantly. For example, to avoid having to store another ciphertext in re-encryption, we have a variant of the encryption functions that compare to a reference ciphertext in-line. While this is neat when you care about stack usage, it unnecessarily complicates the code if you don't.","reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/42/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/42/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2024-05-24T03:12:49Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"38666755809","type":"IssuesEvent","actor":{"id":3984960,"login":"mkannwischer","display_login":"mkannwischer","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","avatar_url":"https://avatars.githubusercontent.com/u/3984960?"},"repo":{"id":770992871,"name":"pq-code-package/mlkem-c-embedded","url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/44","repository_url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/44/labels{/name}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/44/comments","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/44/events","html_url":"https://github.com/pq-code-package/mlkem-c-embedded/issues/44","id":2314247238,"node_id":"I_kwDOLfRq586J8JxG","number":44,"title":"Code sharing","user":{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-24T03:14:09Z","updated_at":"2024-05-24T03:14:09Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"see https://github.com/pq-code-package/mlkem-c-aarch64/issues/42","reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/44/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/44/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2024-05-24T03:14:10Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"38667318837","type":"IssuesEvent","actor":{"id":26892988,"login":"hanno-becker","display_login":"hanno-becker","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","avatar_url":"https://avatars.githubusercontent.com/u/26892988?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/43","repository_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/43/labels{/name}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/43/comments","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/43/events","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/issues/43","id":2314287968,"node_id":"I_kwDOLh-nxs6J8Ttg","number":43,"title":"Document bounds pre/post conditions for arithmetic functions","user":{"login":"hanno-becker","id":26892988,"node_id":"MDQ6VXNlcjI2ODkyOTg4","avatar_url":"https://avatars.githubusercontent.com/u/26892988?v=4","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","html_url":"https://github.com/hanno-becker","followers_url":"https://api.github.com/users/hanno-becker/followers","following_url":"https://api.github.com/users/hanno-becker/following{/other_user}","gists_url":"https://api.github.com/users/hanno-becker/gists{/gist_id}","starred_url":"https://api.github.com/users/hanno-becker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanno-becker/subscriptions","organizations_url":"https://api.github.com/users/hanno-becker/orgs","repos_url":"https://api.github.com/users/hanno-becker/repos","events_url":"https://api.github.com/users/hanno-becker/events{/privacy}","received_events_url":"https://api.github.com/users/hanno-becker/received_events","type":"User","site_admin":false},"labels":[{"id":6707250812,"node_id":"LA_kwDOLh-nxs8AAAABj8iGfA","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-24T03:53:41Z","updated_at":"2024-05-24T03:53:41Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"There are various internal functions operating on field elements, polynomials or vectors of polynomials. Those functions should have their documentation enhanced to state (a) what bounds assumptions are being made (in case of inputs), (b) what bounds guarantees are being established (in case of outputs).\r\n\r\nAcceptance criteria:\r\n- [ ] Every arithmetic function documents, in natural language, the bounds assumptions and guarantees of its scalar inputs and outputs.","reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/43/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/43/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2024-05-24T03:53:43Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"38669128989","type":"IssuesEvent","actor":{"id":3984960,"login":"mkannwischer","display_login":"mkannwischer","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","avatar_url":"https://avatars.githubusercontent.com/u/3984960?"},"repo":{"id":770992871,"name":"pq-code-package/mlkem-c-embedded","url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/21","repository_url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/21/labels{/name}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/21/comments","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/21/events","html_url":"https://github.com/pq-code-package/mlkem-c-embedded/issues/21","id":2222101054,"node_id":"I_kwDOLfRq586EcpI-","number":21,"title":"Stack optimized Keccak permutation","user":{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false},"labels":[{"id":6681582677,"node_id":"LA_kwDOLfRq588AAAABjkDcVQ","url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-04-03T07:16:27Z","updated_at":"2024-05-24T05:43:28Z","closed_at":"2024-05-24T05:43:28Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The current `KeccakF1600_StatePermute` uses 2984 bytes of stack memory which is quite excessive. \r\nWe probably want to replace that with an in-place variant from https://github.com/XKCP/XKCP/tree/master/lib/low/KeccakP-1600/plain-32bits-inplace. ","reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/21/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pq-code-package/mlkem-c-embedded/issues/21/timeline","performed_via_github_app":null,"state_reason":"completed"}},"public":true,"created_at":"2024-05-24T05:43:29Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
