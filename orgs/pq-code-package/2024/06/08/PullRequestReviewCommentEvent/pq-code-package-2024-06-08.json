{"id":"39113326495","type":"PullRequestReviewCommentEvent","actor":{"id":26892988,"login":"hanno-becker","display_login":"hanno-becker","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","avatar_url":"https://avatars.githubusercontent.com/u/26892988?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855517","pull_request_review_id":2105613733,"id":1631855517,"node_id":"PRRC_kwDOLh-nxs5hRCOd","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy\n+*\n+* Function: void simd_mempcy(void *dst, void *src, size_t length);\n+* Description: optimized memcpy with SIMD instructions for small data\n+*\n+* Arguments:   - void *dst:          pointer to destination buffer\n+*              - void *src:          pointer to source buffer\n+*              - size_t len:         length of src in bytes\n+**************************************************/\n+.align 4\n+.global simd_memcpy\n+.global _simd_memcpy\n+simd_memcpy:\n+_simd_memcpy:\n+    /* Input registers */\n+    dst                         .req x0\n+    src                         .req x1\n+    copylen                     .req x2\n+\n+    /* Temporary registers, no need to preserve */\n+    data                        .req w12\n+    aligned_addr                .req x13\n+    aligned_len                 .req x14\n+    unaligned_len               .req x15\n+\n+    cmp     copylen, #0                     // If copylen is less than or equal to 0\n+    b.le    end                             // then we exit the function\n+    cmp     copylen, #32                    // Check if size is less than 32 bytes\n+    b.lo    small_copy                      // Branch to small copy if size is less than 32\n+\n+    // Align destination address\n+    mov     aligned_addr, dst","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"hanno-becker","id":26892988,"node_id":"MDQ6VXNlcjI2ODkyOTg4","avatar_url":"https://avatars.githubusercontent.com/u/26892988?v=4","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","html_url":"https://github.com/hanno-becker","followers_url":"https://api.github.com/users/hanno-becker/followers","following_url":"https://api.github.com/users/hanno-becker/following{/other_user}","gists_url":"https://api.github.com/users/hanno-becker/gists{/gist_id}","starred_url":"https://api.github.com/users/hanno-becker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanno-becker/subscriptions","organizations_url":"https://api.github.com/users/hanno-becker/orgs","repos_url":"https://api.github.com/users/hanno-becker/repos","events_url":"https://api.github.com/users/hanno-becker/events{/privacy}","received_events_url":"https://api.github.com/users/hanno-becker/received_events","type":"User","site_admin":false},"body":"Why don't we just make it a precondition that `dst` is suitably aligned?","created_at":"2024-06-08T03:49:28Z","updated_at":"2024-06-08T03:49:28Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631855517","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855517"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631855517"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":35,"original_line":35,"side":"RIGHT","original_position":35,"position":35,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T03:49:28Z","closed_at":null,"merged_at":null,"merge_commit_sha":"daca945999a234d48bba438823e34b6d0cb50c31","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-07T18:30:30Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-07T18:30:32Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T03:49:28Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39113337036","type":"PullRequestReviewCommentEvent","actor":{"id":26892988,"login":"hanno-becker","display_login":"hanno-becker","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","avatar_url":"https://avatars.githubusercontent.com/u/26892988?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855685","pull_request_review_id":2105613898,"id":1631855685,"node_id":"PRRC_kwDOLh-nxs5hRCRF","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"hanno-becker","id":26892988,"node_id":"MDQ6VXNlcjI2ODkyOTg4","avatar_url":"https://avatars.githubusercontent.com/u/26892988?v=4","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","html_url":"https://github.com/hanno-becker","followers_url":"https://api.github.com/users/hanno-becker/followers","following_url":"https://api.github.com/users/hanno-becker/following{/other_user}","gists_url":"https://api.github.com/users/hanno-becker/gists{/gist_id}","starred_url":"https://api.github.com/users/hanno-becker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanno-becker/subscriptions","organizations_url":"https://api.github.com/users/hanno-becker/orgs","repos_url":"https://api.github.com/users/hanno-becker/repos","events_url":"https://api.github.com/users/hanno-becker/events{/privacy}","received_events_url":"https://api.github.com/users/hanno-becker/received_events","type":"User","site_admin":false},"body":"I am skeptical that we should write this by hand -- compilers will utilize have a highly-optimized `memcpy` already. What's your motivation here?","created_at":"2024-06-08T03:51:11Z","updated_at":"2024-06-08T03:51:11Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631855685","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855685"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631855685"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":4,"original_line":4,"side":"RIGHT","original_position":4,"position":4,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T03:51:11Z","closed_at":null,"merged_at":null,"merge_commit_sha":"daca945999a234d48bba438823e34b6d0cb50c31","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-07T18:30:30Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-07T18:30:32Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T03:51:11Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39113344946","type":"PullRequestReviewCommentEvent","actor":{"id":26892988,"login":"hanno-becker","display_login":"hanno-becker","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","avatar_url":"https://avatars.githubusercontent.com/u/26892988?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855767","pull_request_review_id":2105615212,"id":1631855767,"node_id":"PRRC_kwDOLh-nxs5hRCSX","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy\n+*\n+* Function: void simd_mempcy(void *dst, void *src, size_t length);\n+* Description: optimized memcpy with SIMD instructions for small data\n+*\n+* Arguments:   - void *dst:          pointer to destination buffer\n+*              - void *src:          pointer to source buffer\n+*              - size_t len:         length of src in bytes\n+**************************************************/\n+.align 4\n+.global simd_memcpy\n+.global _simd_memcpy\n+simd_memcpy:\n+_simd_memcpy:\n+    /* Input registers */\n+    dst                         .req x0\n+    src                         .req x1\n+    copylen                     .req x2\n+\n+    /* Temporary registers, no need to preserve */\n+    data                        .req w12\n+    aligned_addr                .req x13\n+    aligned_len                 .req x14\n+    unaligned_len               .req x15\n+\n+    cmp     copylen, #0                     // If copylen is less than or equal to 0\n+    b.le    end                             // then we exit the function\n+    cmp     copylen, #32                    // Check if size is less than 32 bytes\n+    b.lo    small_copy                      // Branch to small copy if size is less than 32\n+\n+    // Align destination address\n+    mov     aligned_addr, dst\n+    and     aligned_addr, aligned_addr, #15\n+    cbz     aligned_addr, aligned_copy      // If already aligned, jump to aligned copy\n+\n+    mov     unaligned_len, #16\n+    sub     unaligned_len, unaligned_len, aligned_addr\n+    cmp     copylen, unaligned_len\n+    b.lo    small_copy                      // If size is smaller than alignment padding, use small copy\n+    sub     copylen, copylen, unaligned_len\n+\n+    small_align:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    unaligned_len, unaligned_len, #1\n+    b.ne    small_align\n+\n+aligned_copy:\n+    // Main copy loop using 128-bit Neon registers\n+    lsr     aligned_len, copylen, #5        // Calculate the number of 32-byte chunks\n+    cbz     aligned_len, tail_copy          // If no chunks, jump to tail copy\n+\n+    copy_loop:\n+    ldp     q0, q1, [src], #32\n+    stp     q0, q1, [dst], #32\n+    subs    aligned_len, aligned_len, #1\n+    b.ne    copy_loop\n+\n+tail_copy:\n+    // Copy any remaining bytes less than 32 bytes\n+    and     copylen, copylen, #31\n+    cbz     copylen, end\n+\n+small_copy:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    copylen, copylen, #1\n+    b.ne    small_copy\n+\n+end:\n+    ret\n+\n+/*************************************************\n+* Name:        rej_uniform_asm\n+*\n+* Description: Full SIMD lane, run rejection sampling on uniform random bytes to generate\n+*              uniform random integers mod q\n+*\n+* Arguments:   - int16_t *r:          pointer to output buffer\n+*              - unsigned int len:    requested number of 16-bit integers\n+*                                     (uniform mod q)\n+*              - const uint8_t *buf:  pointer to input buffer\n+*                                     (assumed to be uniform random bytes)\n+*              - unsigned int buflen: length of input buffer in bytes\n+*              - unsigned int *consumed: the length of consumed buffer\n+* Returns number of sampled 16-bit integers (at most len)\n+**************************************************/\n+.macro div48    dst, src\n+    mov     w8, #43691\n+    movk    w8, #43690, lsl #16\n+    umull   x8, \\src, w8\n+    lsr     x8, x8, #37\n+    add     w8, w8, w8, lsl #1\n+    lsl     \\dst, w8, #4\n+.endm\n+\n+.align 4\n+.global     rej_uniform_asm\n+.global     _rej_uniform_asm\n+rej_uniform_asm:\n+_rej_uniform_asm:\n+\n+    /* Input registers */\n+    stack                       .req x0\n+    buf                         .req x1\n+    buf_consumed                .req x2\n+    buflen                      .req w3\n+    len                         .req x4\n+    lenw                        .req w4\n+    table_idx                   .req x5\n+    bit_table                   .req x6\n+\n+    /* Output registers */\n+    output                      .req x11\n+    sp_copy                     .req x16\n+    buf_consumed_cpy            .req x17\n+\n+    /* Temporary registers */\n+    tmp                         .req w8\n+    count                       .req w8\n+    bound                       .req w9\n+    minw                        .req w8\n+    min                         .req x8\n+    iterw                       .req w10\n+    iter                        .req x10\n+\n+    rec_idx_0                   .req w12\n+    rec_idx_1                   .req w13\n+    rec_idx_2                   .req w14\n+    rec_idx_3                   .req w15\n+\n+    ctr0                        .req w12\n+    ctr1                        .req w13\n+    ctr2                        .req w14\n+    ctr3                        .req w15\n+\n+    /* Vector registers */\n+\n+    buf0                        .req v0\n+    buf1                        .req v1\n+    buf2                        .req v2\n+\n+    tmp0                        .req v4\n+    tmp1                        .req v5\n+    tmp2                        .req v6\n+    tmp3                        .req v7\n+\n+    sign0                       .req v4\n+    sign1                       .req v5\n+    sign2                       .req v6\n+    sign3                       .req v7\n+\n+    val0                        .req v16\n+    val0q                       .req q16\n+    val1                        .req v17\n+    val1q                       .req q17\n+    val2                        .req v18\n+    val2q                       .req q18\n+    val3                        .req v19\n+    val3q                       .req q19\n+\n+    t0                          .req s20\n+    t1                          .req s21\n+    t2                          .req s22\n+    t3                          .req s23\n+\n+    table0                      .req v24\n+    table0q                     .req q24\n+    table1                      .req v25\n+    table1q                     .req q25\n+    table2                      .req v26\n+    table2q                     .req q26\n+    table3                      .req v27\n+    table3q                     .req q27\n+\n+    kyber_q                     .req v30\n+    bits                        .req v31\n+    bits_q                      .req q31\n+\n+\n+    /* \n+     * Preserve registers and restore at the end of function.\n+     * Stack alignment must be 16 bytes. \n+     */\n+    sub     sp, sp, #0x270","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"hanno-becker","id":26892988,"node_id":"MDQ6VXNlcjI2ODkyOTg4","avatar_url":"https://avatars.githubusercontent.com/u/26892988?v=4","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","html_url":"https://github.com/hanno-becker","followers_url":"https://api.github.com/users/hanno-becker/followers","following_url":"https://api.github.com/users/hanno-becker/following{/other_user}","gists_url":"https://api.github.com/users/hanno-becker/gists{/gist_id}","starred_url":"https://api.github.com/users/hanno-becker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanno-becker/subscriptions","organizations_url":"https://api.github.com/users/hanno-becker/orgs","repos_url":"https://api.github.com/users/hanno-becker/repos","events_url":"https://api.github.com/users/hanno-becker/events{/privacy}","received_events_url":"https://api.github.com/users/hanno-becker/received_events","type":"User","site_admin":false},"body":"Can you leave a comment describing the usage and layout of the stack?","created_at":"2024-06-08T03:52:15Z","updated_at":"2024-06-08T03:52:16Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631855767","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855767"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631855767"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":188,"original_line":188,"side":"RIGHT","original_position":188,"position":188,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T03:52:16Z","closed_at":null,"merged_at":null,"merge_commit_sha":"daca945999a234d48bba438823e34b6d0cb50c31","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-07T18:30:30Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-07T18:30:32Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T03:52:15Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39113348506","type":"PullRequestReviewCommentEvent","actor":{"id":26892988,"login":"hanno-becker","display_login":"hanno-becker","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","avatar_url":"https://avatars.githubusercontent.com/u/26892988?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855804","pull_request_review_id":2105616213,"id":1631855804,"node_id":"PRRC_kwDOLh-nxs5hRCS8","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy\n+*\n+* Function: void simd_mempcy(void *dst, void *src, size_t length);\n+* Description: optimized memcpy with SIMD instructions for small data\n+*\n+* Arguments:   - void *dst:          pointer to destination buffer\n+*              - void *src:          pointer to source buffer\n+*              - size_t len:         length of src in bytes\n+**************************************************/\n+.align 4\n+.global simd_memcpy\n+.global _simd_memcpy\n+simd_memcpy:\n+_simd_memcpy:\n+    /* Input registers */\n+    dst                         .req x0\n+    src                         .req x1\n+    copylen                     .req x2\n+\n+    /* Temporary registers, no need to preserve */\n+    data                        .req w12\n+    aligned_addr                .req x13\n+    aligned_len                 .req x14\n+    unaligned_len               .req x15\n+\n+    cmp     copylen, #0                     // If copylen is less than or equal to 0\n+    b.le    end                             // then we exit the function\n+    cmp     copylen, #32                    // Check if size is less than 32 bytes\n+    b.lo    small_copy                      // Branch to small copy if size is less than 32\n+\n+    // Align destination address\n+    mov     aligned_addr, dst\n+    and     aligned_addr, aligned_addr, #15\n+    cbz     aligned_addr, aligned_copy      // If already aligned, jump to aligned copy\n+\n+    mov     unaligned_len, #16\n+    sub     unaligned_len, unaligned_len, aligned_addr\n+    cmp     copylen, unaligned_len\n+    b.lo    small_copy                      // If size is smaller than alignment padding, use small copy\n+    sub     copylen, copylen, unaligned_len\n+\n+    small_align:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    unaligned_len, unaligned_len, #1\n+    b.ne    small_align\n+\n+aligned_copy:\n+    // Main copy loop using 128-bit Neon registers\n+    lsr     aligned_len, copylen, #5        // Calculate the number of 32-byte chunks\n+    cbz     aligned_len, tail_copy          // If no chunks, jump to tail copy\n+\n+    copy_loop:\n+    ldp     q0, q1, [src], #32\n+    stp     q0, q1, [dst], #32\n+    subs    aligned_len, aligned_len, #1\n+    b.ne    copy_loop\n+\n+tail_copy:\n+    // Copy any remaining bytes less than 32 bytes\n+    and     copylen, copylen, #31\n+    cbz     copylen, end\n+\n+small_copy:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    copylen, copylen, #1\n+    b.ne    small_copy\n+\n+end:\n+    ret\n+\n+/*************************************************\n+* Name:        rej_uniform_asm\n+*\n+* Description: Full SIMD lane, run rejection sampling on uniform random bytes to generate\n+*              uniform random integers mod q\n+*\n+* Arguments:   - int16_t *r:          pointer to output buffer\n+*              - unsigned int len:    requested number of 16-bit integers\n+*                                     (uniform mod q)\n+*              - const uint8_t *buf:  pointer to input buffer\n+*                                     (assumed to be uniform random bytes)\n+*              - unsigned int buflen: length of input buffer in bytes\n+*              - unsigned int *consumed: the length of consumed buffer\n+* Returns number of sampled 16-bit integers (at most len)\n+**************************************************/\n+.macro div48    dst, src","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"hanno-becker","id":26892988,"node_id":"MDQ6VXNlcjI2ODkyOTg4","avatar_url":"https://avatars.githubusercontent.com/u/26892988?v=4","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","html_url":"https://github.com/hanno-becker","followers_url":"https://api.github.com/users/hanno-becker/followers","following_url":"https://api.github.com/users/hanno-becker/following{/other_user}","gists_url":"https://api.github.com/users/hanno-becker/gists{/gist_id}","starred_url":"https://api.github.com/users/hanno-becker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanno-becker/subscriptions","organizations_url":"https://api.github.com/users/hanno-becker/orgs","repos_url":"https://api.github.com/users/hanno-becker/repos","events_url":"https://api.github.com/users/hanno-becker/events{/privacy}","received_events_url":"https://api.github.com/users/hanno-becker/received_events","type":"User","site_admin":false},"body":"This is not a secret division, is it? Can we not just use `div`?","created_at":"2024-06-08T03:52:50Z","updated_at":"2024-06-08T03:52:50Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631855804","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855804"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631855804"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631855804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":91,"original_line":91,"side":"RIGHT","original_position":91,"position":91,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T03:52:50Z","closed_at":null,"merged_at":null,"merge_commit_sha":"daca945999a234d48bba438823e34b6d0cb50c31","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-07T18:30:30Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-07T18:30:32Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T03:52:50Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39113370622","type":"PullRequestReviewCommentEvent","actor":{"id":9219016,"login":"cothan","display_login":"cothan","gravatar_id":"","url":"https://api.github.com/users/cothan","avatar_url":"https://avatars.githubusercontent.com/u/9219016?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631856150","pull_request_review_id":2105620950,"id":1631856150,"node_id":"PRRC_kwDOLh-nxs5hRCYW","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"I couldn't make it compile and link to external memcpy. \r\nI tried `extern memcpy`, still, the compile won't make it compile. I stuck for a while and decided to write my version. \r\nSince the data is small, ~600 bytes, an indepdent memcpy could save some code space. \r\nIs there a way to ask compiler `extern memcpy`? \r\n","created_at":"2024-06-08T03:55:34Z","updated_at":"2024-06-08T03:55:34Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631856150","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631856150"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631856150"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631856150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":4,"original_line":4,"side":"RIGHT","in_reply_to_id":1631855685,"original_position":4,"position":4,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T03:55:34Z","closed_at":null,"merged_at":null,"merge_commit_sha":"daca945999a234d48bba438823e34b6d0cb50c31","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-07T18:30:30Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-07T18:30:32Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T03:55:34Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39113383685","type":"PullRequestReviewCommentEvent","actor":{"id":9219016,"login":"cothan","display_login":"cothan","gravatar_id":"","url":"https://api.github.com/users/cothan","avatar_url":"https://avatars.githubusercontent.com/u/9219016?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631857664","pull_request_review_id":2105621291,"id":1631857664,"node_id":"PRRC_kwDOLh-nxs5hRCwA","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy\n+*\n+* Function: void simd_mempcy(void *dst, void *src, size_t length);\n+* Description: optimized memcpy with SIMD instructions for small data\n+*\n+* Arguments:   - void *dst:          pointer to destination buffer\n+*              - void *src:          pointer to source buffer\n+*              - size_t len:         length of src in bytes\n+**************************************************/\n+.align 4\n+.global simd_memcpy\n+.global _simd_memcpy\n+simd_memcpy:\n+_simd_memcpy:\n+    /* Input registers */\n+    dst                         .req x0\n+    src                         .req x1\n+    copylen                     .req x2\n+\n+    /* Temporary registers, no need to preserve */\n+    data                        .req w12\n+    aligned_addr                .req x13\n+    aligned_len                 .req x14\n+    unaligned_len               .req x15\n+\n+    cmp     copylen, #0                     // If copylen is less than or equal to 0\n+    b.le    end                             // then we exit the function\n+    cmp     copylen, #32                    // Check if size is less than 32 bytes\n+    b.lo    small_copy                      // Branch to small copy if size is less than 32\n+\n+    // Align destination address\n+    mov     aligned_addr, dst\n+    and     aligned_addr, aligned_addr, #15\n+    cbz     aligned_addr, aligned_copy      // If already aligned, jump to aligned copy\n+\n+    mov     unaligned_len, #16\n+    sub     unaligned_len, unaligned_len, aligned_addr\n+    cmp     copylen, unaligned_len\n+    b.lo    small_copy                      // If size is smaller than alignment padding, use small copy\n+    sub     copylen, copylen, unaligned_len\n+\n+    small_align:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    unaligned_len, unaligned_len, #1\n+    b.ne    small_align\n+\n+aligned_copy:\n+    // Main copy loop using 128-bit Neon registers\n+    lsr     aligned_len, copylen, #5        // Calculate the number of 32-byte chunks\n+    cbz     aligned_len, tail_copy          // If no chunks, jump to tail copy\n+\n+    copy_loop:\n+    ldp     q0, q1, [src], #32\n+    stp     q0, q1, [dst], #32\n+    subs    aligned_len, aligned_len, #1\n+    b.ne    copy_loop\n+\n+tail_copy:\n+    // Copy any remaining bytes less than 32 bytes\n+    and     copylen, copylen, #31\n+    cbz     copylen, end\n+\n+small_copy:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    copylen, copylen, #1\n+    b.ne    small_copy\n+\n+end:\n+    ret\n+\n+/*************************************************\n+* Name:        rej_uniform_asm\n+*\n+* Description: Full SIMD lane, run rejection sampling on uniform random bytes to generate\n+*              uniform random integers mod q\n+*\n+* Arguments:   - int16_t *r:          pointer to output buffer\n+*              - unsigned int len:    requested number of 16-bit integers\n+*                                     (uniform mod q)\n+*              - const uint8_t *buf:  pointer to input buffer\n+*                                     (assumed to be uniform random bytes)\n+*              - unsigned int buflen: length of input buffer in bytes\n+*              - unsigned int *consumed: the length of consumed buffer\n+* Returns number of sampled 16-bit integers (at most len)\n+**************************************************/\n+.macro div48    dst, src","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"Correct, it's not secret division, using `div` instruction is not optimized in this case, since we divide by constant. It's faster to multiple with inverse, isn't it? ","created_at":"2024-06-08T03:57:35Z","updated_at":"2024-06-08T03:57:35Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631857664","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631857664"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631857664"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631857664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":91,"original_line":91,"side":"RIGHT","in_reply_to_id":1631855804,"original_position":91,"position":91,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T03:57:35Z","closed_at":null,"merged_at":null,"merge_commit_sha":"daca945999a234d48bba438823e34b6d0cb50c31","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-07T18:30:30Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-07T18:30:32Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T03:57:35Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39113384627","type":"PullRequestReviewCommentEvent","actor":{"id":9219016,"login":"cothan","display_login":"cothan","gravatar_id":"","url":"https://api.github.com/users/cothan","avatar_url":"https://avatars.githubusercontent.com/u/9219016?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631857770","pull_request_review_id":2105621307,"id":1631857770,"node_id":"PRRC_kwDOLh-nxs5hRCxq","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy\n+*\n+* Function: void simd_mempcy(void *dst, void *src, size_t length);\n+* Description: optimized memcpy with SIMD instructions for small data\n+*\n+* Arguments:   - void *dst:          pointer to destination buffer\n+*              - void *src:          pointer to source buffer\n+*              - size_t len:         length of src in bytes\n+**************************************************/\n+.align 4\n+.global simd_memcpy\n+.global _simd_memcpy\n+simd_memcpy:\n+_simd_memcpy:\n+    /* Input registers */\n+    dst                         .req x0\n+    src                         .req x1\n+    copylen                     .req x2\n+\n+    /* Temporary registers, no need to preserve */\n+    data                        .req w12\n+    aligned_addr                .req x13\n+    aligned_len                 .req x14\n+    unaligned_len               .req x15\n+\n+    cmp     copylen, #0                     // If copylen is less than or equal to 0\n+    b.le    end                             // then we exit the function\n+    cmp     copylen, #32                    // Check if size is less than 32 bytes\n+    b.lo    small_copy                      // Branch to small copy if size is less than 32\n+\n+    // Align destination address\n+    mov     aligned_addr, dst\n+    and     aligned_addr, aligned_addr, #15\n+    cbz     aligned_addr, aligned_copy      // If already aligned, jump to aligned copy\n+\n+    mov     unaligned_len, #16\n+    sub     unaligned_len, unaligned_len, aligned_addr\n+    cmp     copylen, unaligned_len\n+    b.lo    small_copy                      // If size is smaller than alignment padding, use small copy\n+    sub     copylen, copylen, unaligned_len\n+\n+    small_align:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    unaligned_len, unaligned_len, #1\n+    b.ne    small_align\n+\n+aligned_copy:\n+    // Main copy loop using 128-bit Neon registers\n+    lsr     aligned_len, copylen, #5        // Calculate the number of 32-byte chunks\n+    cbz     aligned_len, tail_copy          // If no chunks, jump to tail copy\n+\n+    copy_loop:\n+    ldp     q0, q1, [src], #32\n+    stp     q0, q1, [dst], #32\n+    subs    aligned_len, aligned_len, #1\n+    b.ne    copy_loop\n+\n+tail_copy:\n+    // Copy any remaining bytes less than 32 bytes\n+    and     copylen, copylen, #31\n+    cbz     copylen, end\n+\n+small_copy:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    copylen, copylen, #1\n+    b.ne    small_copy\n+\n+end:\n+    ret\n+\n+/*************************************************\n+* Name:        rej_uniform_asm\n+*\n+* Description: Full SIMD lane, run rejection sampling on uniform random bytes to generate\n+*              uniform random integers mod q\n+*\n+* Arguments:   - int16_t *r:          pointer to output buffer\n+*              - unsigned int len:    requested number of 16-bit integers\n+*                                     (uniform mod q)\n+*              - const uint8_t *buf:  pointer to input buffer\n+*                                     (assumed to be uniform random bytes)\n+*              - unsigned int buflen: length of input buffer in bytes\n+*              - unsigned int *consumed: the length of consumed buffer\n+* Returns number of sampled 16-bit integers (at most len)\n+**************************************************/\n+.macro div48    dst, src\n+    mov     w8, #43691\n+    movk    w8, #43690, lsl #16\n+    umull   x8, \\src, w8\n+    lsr     x8, x8, #37\n+    add     w8, w8, w8, lsl #1\n+    lsl     \\dst, w8, #4\n+.endm\n+\n+.align 4\n+.global     rej_uniform_asm\n+.global     _rej_uniform_asm\n+rej_uniform_asm:\n+_rej_uniform_asm:\n+\n+    /* Input registers */\n+    stack                       .req x0\n+    buf                         .req x1\n+    buf_consumed                .req x2\n+    buflen                      .req w3\n+    len                         .req x4\n+    lenw                        .req w4\n+    table_idx                   .req x5\n+    bit_table                   .req x6\n+\n+    /* Output registers */\n+    output                      .req x11\n+    sp_copy                     .req x16\n+    buf_consumed_cpy            .req x17\n+\n+    /* Temporary registers */\n+    tmp                         .req w8\n+    count                       .req w8\n+    bound                       .req w9\n+    minw                        .req w8\n+    min                         .req x8\n+    iterw                       .req w10\n+    iter                        .req x10\n+\n+    rec_idx_0                   .req w12\n+    rec_idx_1                   .req w13\n+    rec_idx_2                   .req w14\n+    rec_idx_3                   .req w15\n+\n+    ctr0                        .req w12\n+    ctr1                        .req w13\n+    ctr2                        .req w14\n+    ctr3                        .req w15\n+\n+    /* Vector registers */\n+\n+    buf0                        .req v0\n+    buf1                        .req v1\n+    buf2                        .req v2\n+\n+    tmp0                        .req v4\n+    tmp1                        .req v5\n+    tmp2                        .req v6\n+    tmp3                        .req v7\n+\n+    sign0                       .req v4\n+    sign1                       .req v5\n+    sign2                       .req v6\n+    sign3                       .req v7\n+\n+    val0                        .req v16\n+    val0q                       .req q16\n+    val1                        .req v17\n+    val1q                       .req q17\n+    val2                        .req v18\n+    val2q                       .req q18\n+    val3                        .req v19\n+    val3q                       .req q19\n+\n+    t0                          .req s20\n+    t1                          .req s21\n+    t2                          .req s22\n+    t3                          .req s23\n+\n+    table0                      .req v24\n+    table0q                     .req q24\n+    table1                      .req v25\n+    table1q                     .req q25\n+    table2                      .req v26\n+    table2q                     .req q26\n+    table3                      .req v27\n+    table3q                     .req q27\n+\n+    kyber_q                     .req v30\n+    bits                        .req v31\n+    bits_q                      .req q31\n+\n+\n+    /* \n+     * Preserve registers and restore at the end of function.\n+     * Stack alignment must be 16 bytes. \n+     */\n+    sub     sp, sp, #0x270","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"Sure, will do now. ","created_at":"2024-06-08T03:57:45Z","updated_at":"2024-06-08T03:57:45Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631857770","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631857770"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631857770"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631857770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":188,"original_line":188,"side":"RIGHT","in_reply_to_id":1631855767,"original_position":188,"position":188,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T03:57:45Z","closed_at":null,"merged_at":null,"merge_commit_sha":"daca945999a234d48bba438823e34b6d0cb50c31","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-07T18:30:30Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-07T18:30:32Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T03:57:45Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39113391344","type":"PullRequestReviewCommentEvent","actor":{"id":26892988,"login":"hanno-becker","display_login":"hanno-becker","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","avatar_url":"https://avatars.githubusercontent.com/u/26892988?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631858544","pull_request_review_id":2105621397,"id":1631858544,"node_id":"PRRC_kwDOLh-nxs5hRC9w","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"hanno-becker","id":26892988,"node_id":"MDQ6VXNlcjI2ODkyOTg4","avatar_url":"https://avatars.githubusercontent.com/u/26892988?v=4","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","html_url":"https://github.com/hanno-becker","followers_url":"https://api.github.com/users/hanno-becker/followers","following_url":"https://api.github.com/users/hanno-becker/following{/other_user}","gists_url":"https://api.github.com/users/hanno-becker/gists{/gist_id}","starred_url":"https://api.github.com/users/hanno-becker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanno-becker/subscriptions","organizations_url":"https://api.github.com/users/hanno-becker/orgs","repos_url":"https://api.github.com/users/hanno-becker/repos","events_url":"https://api.github.com/users/hanno-becker/events{/privacy}","received_events_url":"https://api.github.com/users/hanno-becker/received_events","type":"User","site_admin":false},"body":"I haven't yet read the core assembly below in detail but am surprised that we need a `memcpy` at all, actually.","created_at":"2024-06-08T03:58:52Z","updated_at":"2024-06-08T03:58:53Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631858544","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631858544"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631858544"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631858544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":4,"original_line":4,"side":"RIGHT","in_reply_to_id":1631855685,"original_position":4,"position":4,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T03:58:53Z","closed_at":null,"merged_at":null,"merge_commit_sha":"daca945999a234d48bba438823e34b6d0cb50c31","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-07T18:30:30Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-07T18:30:32Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T03:58:52Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39113492822","type":"PullRequestReviewCommentEvent","actor":{"id":9219016,"login":"cothan","display_login":"cothan","gravatar_id":"","url":"https://api.github.com/users/cothan","avatar_url":"https://avatars.githubusercontent.com/u/9219016?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631865313","pull_request_review_id":2105622896,"id":1631865313,"node_id":"PRRC_kwDOLh-nxs5hREnh","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"Honestly, I don't want to write my own version of `memcpy`. I spent so long and I can't figure out why `extern memcpy` or `.extern memcpy` doesn't compile. If I find a way to link `memcpy` I would definitely remove my own.  ","created_at":"2024-06-08T04:12:51Z","updated_at":"2024-06-08T04:12:51Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631865313","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631865313"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631865313"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631865313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":4,"original_line":4,"side":"RIGHT","in_reply_to_id":1631855685,"original_position":4,"position":4,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T04:12:51Z","closed_at":null,"merged_at":null,"merge_commit_sha":"daca945999a234d48bba438823e34b6d0cb50c31","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-07T18:30:30Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-07T18:30:32Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/f4ead9afa2b892eed146a027a4308c97e4771b9b"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T04:12:51Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39113519236","type":"PullRequestReviewCommentEvent","actor":{"id":9219016,"login":"cothan","display_login":"cothan","gravatar_id":"","url":"https://api.github.com/users/cothan","avatar_url":"https://avatars.githubusercontent.com/u/9219016?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631865696","pull_request_review_id":2105623310,"id":1631865696,"node_id":"PRRC_kwDOLh-nxs5hREtg","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy\n+*\n+* Function: void simd_mempcy(void *dst, void *src, size_t length);\n+* Description: optimized memcpy with SIMD instructions for small data\n+*\n+* Arguments:   - void *dst:          pointer to destination buffer\n+*              - void *src:          pointer to source buffer\n+*              - size_t len:         length of src in bytes\n+**************************************************/\n+.align 4\n+.global simd_memcpy\n+.global _simd_memcpy\n+simd_memcpy:\n+_simd_memcpy:\n+    /* Input registers */\n+    dst                         .req x0\n+    src                         .req x1\n+    copylen                     .req x2\n+\n+    /* Temporary registers, no need to preserve */\n+    data                        .req w12\n+    aligned_addr                .req x13\n+    aligned_len                 .req x14\n+    unaligned_len               .req x15\n+\n+    cmp     copylen, #0                     // If copylen is less than or equal to 0\n+    b.le    end                             // then we exit the function\n+    cmp     copylen, #32                    // Check if size is less than 32 bytes\n+    b.lo    small_copy                      // Branch to small copy if size is less than 32\n+\n+    // Align destination address\n+    mov     aligned_addr, dst\n+    and     aligned_addr, aligned_addr, #15\n+    cbz     aligned_addr, aligned_copy      // If already aligned, jump to aligned copy\n+\n+    mov     unaligned_len, #16\n+    sub     unaligned_len, unaligned_len, aligned_addr\n+    cmp     copylen, unaligned_len\n+    b.lo    small_copy                      // If size is smaller than alignment padding, use small copy\n+    sub     copylen, copylen, unaligned_len\n+\n+    small_align:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    unaligned_len, unaligned_len, #1\n+    b.ne    small_align\n+\n+aligned_copy:\n+    // Main copy loop using 128-bit Neon registers\n+    lsr     aligned_len, copylen, #5        // Calculate the number of 32-byte chunks\n+    cbz     aligned_len, tail_copy          // If no chunks, jump to tail copy\n+\n+    copy_loop:\n+    ldp     q0, q1, [src], #32\n+    stp     q0, q1, [dst], #32\n+    subs    aligned_len, aligned_len, #1\n+    b.ne    copy_loop\n+\n+tail_copy:\n+    // Copy any remaining bytes less than 32 bytes\n+    and     copylen, copylen, #31\n+    cbz     copylen, end\n+\n+small_copy:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    copylen, copylen, #1\n+    b.ne    small_copy\n+\n+end:\n+    ret\n+\n+/*************************************************\n+* Name:        rej_uniform_asm\n+*\n+* Description: Full SIMD lane, run rejection sampling on uniform random bytes to generate\n+*              uniform random integers mod q\n+*\n+* Arguments:   - int16_t *r:          pointer to output buffer\n+*              - unsigned int len:    requested number of 16-bit integers\n+*                                     (uniform mod q)\n+*              - const uint8_t *buf:  pointer to input buffer\n+*                                     (assumed to be uniform random bytes)\n+*              - unsigned int buflen: length of input buffer in bytes\n+*              - unsigned int *consumed: the length of consumed buffer\n+* Returns number of sampled 16-bit integers (at most len)\n+**************************************************/\n+.macro div48    dst, src\n+    mov     w8, #43691\n+    movk    w8, #43690, lsl #16\n+    umull   x8, \\src, w8\n+    lsr     x8, x8, #37\n+    add     w8, w8, w8, lsl #1\n+    lsl     \\dst, w8, #4\n+.endm\n+\n+.align 4\n+.global     rej_uniform_asm\n+.global     _rej_uniform_asm\n+rej_uniform_asm:\n+_rej_uniform_asm:\n+\n+    /* Input registers */\n+    stack                       .req x0\n+    buf                         .req x1\n+    buf_consumed                .req x2\n+    buflen                      .req w3\n+    len                         .req x4\n+    lenw                        .req w4\n+    table_idx                   .req x5\n+    bit_table                   .req x6\n+\n+    /* Output registers */\n+    output                      .req x11\n+    sp_copy                     .req x16\n+    buf_consumed_cpy            .req x17\n+\n+    /* Temporary registers */\n+    tmp                         .req w8\n+    count                       .req w8\n+    bound                       .req w9\n+    minw                        .req w8\n+    min                         .req x8\n+    iterw                       .req w10\n+    iter                        .req x10\n+\n+    rec_idx_0                   .req w12\n+    rec_idx_1                   .req w13\n+    rec_idx_2                   .req w14\n+    rec_idx_3                   .req w15\n+\n+    ctr0                        .req w12\n+    ctr1                        .req w13\n+    ctr2                        .req w14\n+    ctr3                        .req w15\n+\n+    /* Vector registers */\n+\n+    buf0                        .req v0\n+    buf1                        .req v1\n+    buf2                        .req v2\n+\n+    tmp0                        .req v4\n+    tmp1                        .req v5\n+    tmp2                        .req v6\n+    tmp3                        .req v7\n+\n+    sign0                       .req v4\n+    sign1                       .req v5\n+    sign2                       .req v6\n+    sign3                       .req v7\n+\n+    val0                        .req v16\n+    val0q                       .req q16\n+    val1                        .req v17\n+    val1q                       .req q17\n+    val2                        .req v18\n+    val2q                       .req q18\n+    val3                        .req v19\n+    val3q                       .req q19\n+\n+    t0                          .req s20\n+    t1                          .req s21\n+    t2                          .req s22\n+    t3                          .req s23\n+\n+    table0                      .req v24\n+    table0q                     .req q24\n+    table1                      .req v25\n+    table1q                     .req q25\n+    table2                      .req v26\n+    table2q                     .req q26\n+    table3                      .req v27\n+    table3q                     .req q27\n+\n+    kyber_q                     .req v30\n+    bits                        .req v31\n+    bits_q                      .req q31\n+\n+\n+    /* \n+     * Preserve registers and restore at the end of function.\n+     * Stack alignment must be 16 bytes. \n+     */\n+    sub     sp, sp, #0x270","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"added in https://github.com/pq-code-package/mlkem-c-aarch64/pull/47/commits/908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","created_at":"2024-06-08T04:16:40Z","updated_at":"2024-06-08T04:16:40Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631865696","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631865696"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631865696"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631865696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":197,"original_line":188,"side":"RIGHT","in_reply_to_id":1631855767,"original_position":188,"position":197,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T04:16:40Z","closed_at":null,"merged_at":null,"merge_commit_sha":"e5479215ec8a22f8c2d6797f665bd8a4c0dc7860","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-08T04:16:16Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-08T04:16:17Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T04:16:40Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39113536279","type":"PullRequestReviewCommentEvent","actor":{"id":26892988,"login":"hanno-becker","display_login":"hanno-becker","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","avatar_url":"https://avatars.githubusercontent.com/u/26892988?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631865987","pull_request_review_id":2105623561,"id":1631865987,"node_id":"PRRC_kwDOLh-nxs5hREyD","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy\n+*\n+* Function: void simd_mempcy(void *dst, void *src, size_t length);\n+* Description: optimized memcpy with SIMD instructions for small data\n+*\n+* Arguments:   - void *dst:          pointer to destination buffer\n+*              - void *src:          pointer to source buffer\n+*              - size_t len:         length of src in bytes\n+**************************************************/\n+.align 4\n+.global simd_memcpy\n+.global _simd_memcpy\n+simd_memcpy:\n+_simd_memcpy:\n+    /* Input registers */\n+    dst                         .req x0\n+    src                         .req x1\n+    copylen                     .req x2\n+\n+    /* Temporary registers, no need to preserve */\n+    data                        .req w12\n+    aligned_addr                .req x13\n+    aligned_len                 .req x14\n+    unaligned_len               .req x15\n+\n+    cmp     copylen, #0                     // If copylen is less than or equal to 0\n+    b.le    end                             // then we exit the function\n+    cmp     copylen, #32                    // Check if size is less than 32 bytes\n+    b.lo    small_copy                      // Branch to small copy if size is less than 32\n+\n+    // Align destination address\n+    mov     aligned_addr, dst\n+    and     aligned_addr, aligned_addr, #15\n+    cbz     aligned_addr, aligned_copy      // If already aligned, jump to aligned copy\n+\n+    mov     unaligned_len, #16\n+    sub     unaligned_len, unaligned_len, aligned_addr\n+    cmp     copylen, unaligned_len\n+    b.lo    small_copy                      // If size is smaller than alignment padding, use small copy\n+    sub     copylen, copylen, unaligned_len\n+\n+    small_align:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    unaligned_len, unaligned_len, #1\n+    b.ne    small_align\n+\n+aligned_copy:\n+    // Main copy loop using 128-bit Neon registers\n+    lsr     aligned_len, copylen, #5        // Calculate the number of 32-byte chunks\n+    cbz     aligned_len, tail_copy          // If no chunks, jump to tail copy\n+\n+    copy_loop:\n+    ldp     q0, q1, [src], #32\n+    stp     q0, q1, [dst], #32\n+    subs    aligned_len, aligned_len, #1\n+    b.ne    copy_loop\n+\n+tail_copy:\n+    // Copy any remaining bytes less than 32 bytes\n+    and     copylen, copylen, #31\n+    cbz     copylen, end\n+\n+small_copy:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    copylen, copylen, #1\n+    b.ne    small_copy\n+\n+end:\n+    ret\n+\n+/*************************************************\n+* Name:        rej_uniform_asm\n+*\n+* Description: Full SIMD lane, run rejection sampling on uniform random bytes to generate\n+*              uniform random integers mod q\n+*\n+* Arguments:   - int16_t *r:          pointer to output buffer\n+*              - unsigned int len:    requested number of 16-bit integers\n+*                                     (uniform mod q)\n+*              - const uint8_t *buf:  pointer to input buffer\n+*                                     (assumed to be uniform random bytes)\n+*              - unsigned int buflen: length of input buffer in bytes\n+*              - unsigned int *consumed: the length of consumed buffer\n+* Returns number of sampled 16-bit integers (at most len)\n+**************************************************/\n+.macro div48    dst, src","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"hanno-becker","id":26892988,"node_id":"MDQ6VXNlcjI2ODkyOTg4","avatar_url":"https://avatars.githubusercontent.com/u/26892988?v=4","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","html_url":"https://github.com/hanno-becker","followers_url":"https://api.github.com/users/hanno-becker/followers","following_url":"https://api.github.com/users/hanno-becker/following{/other_user}","gists_url":"https://api.github.com/users/hanno-becker/gists{/gist_id}","starred_url":"https://api.github.com/users/hanno-becker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanno-becker/subscriptions","organizations_url":"https://api.github.com/users/hanno-becker/orgs","repos_url":"https://api.github.com/users/hanno-becker/repos","events_url":"https://api.github.com/users/hanno-becker/events{/privacy}","received_events_url":"https://api.github.com/users/hanno-becker/received_events","type":"User","site_admin":false},"body":"I stand corrected, compilers also don't use `div 48` here.\r\n\r\nAlternatively, though, one can just use `sub _, _, #48` in the loop, rather than having an explicit iteration counter. But SLOTHY would not yet support that, so let's leave it.","created_at":"2024-06-08T04:18:59Z","updated_at":"2024-06-08T04:19:00Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631865987","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631865987"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631865987"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631865987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":91,"original_line":91,"side":"RIGHT","in_reply_to_id":1631855804,"original_position":91,"position":91,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T04:19:00Z","closed_at":null,"merged_at":null,"merge_commit_sha":"e5479215ec8a22f8c2d6797f665bd8a4c0dc7860","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-08T04:16:16Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-08T04:16:17Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T04:18:59Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39113554307","type":"PullRequestReviewCommentEvent","actor":{"id":26892988,"login":"hanno-becker","display_login":"hanno-becker","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","avatar_url":"https://avatars.githubusercontent.com/u/26892988?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631866253","pull_request_review_id":2105623798,"id":1631866253,"node_id":"PRRC_kwDOLh-nxs5hRE2N","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy\n+*\n+* Function: void simd_mempcy(void *dst, void *src, size_t length);\n+* Description: optimized memcpy with SIMD instructions for small data\n+*\n+* Arguments:   - void *dst:          pointer to destination buffer\n+*              - void *src:          pointer to source buffer\n+*              - size_t len:         length of src in bytes\n+**************************************************/\n+.align 4\n+.global simd_memcpy\n+.global _simd_memcpy\n+simd_memcpy:\n+_simd_memcpy:\n+    /* Input registers */\n+    dst                         .req x0\n+    src                         .req x1\n+    copylen                     .req x2\n+\n+    /* Temporary registers, no need to preserve */\n+    data                        .req w12\n+    aligned_addr                .req x13\n+    aligned_len                 .req x14\n+    unaligned_len               .req x15\n+\n+    cmp     copylen, #0                     // If copylen is less than or equal to 0\n+    b.le    end                             // then we exit the function\n+    cmp     copylen, #32                    // Check if size is less than 32 bytes\n+    b.lo    small_copy                      // Branch to small copy if size is less than 32\n+\n+    // Align destination address\n+    mov     aligned_addr, dst\n+    and     aligned_addr, aligned_addr, #15\n+    cbz     aligned_addr, aligned_copy      // If already aligned, jump to aligned copy\n+\n+    mov     unaligned_len, #16\n+    sub     unaligned_len, unaligned_len, aligned_addr\n+    cmp     copylen, unaligned_len\n+    b.lo    small_copy                      // If size is smaller than alignment padding, use small copy\n+    sub     copylen, copylen, unaligned_len\n+\n+    small_align:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    unaligned_len, unaligned_len, #1\n+    b.ne    small_align\n+\n+aligned_copy:\n+    // Main copy loop using 128-bit Neon registers\n+    lsr     aligned_len, copylen, #5        // Calculate the number of 32-byte chunks\n+    cbz     aligned_len, tail_copy          // If no chunks, jump to tail copy\n+\n+    copy_loop:\n+    ldp     q0, q1, [src], #32\n+    stp     q0, q1, [dst], #32\n+    subs    aligned_len, aligned_len, #1\n+    b.ne    copy_loop\n+\n+tail_copy:\n+    // Copy any remaining bytes less than 32 bytes\n+    and     copylen, copylen, #31\n+    cbz     copylen, end\n+\n+small_copy:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    copylen, copylen, #1\n+    b.ne    small_copy\n+\n+end:\n+    ret\n+\n+/*************************************************\n+* Name:        rej_uniform_asm\n+*\n+* Description: Full SIMD lane, run rejection sampling on uniform random bytes to generate\n+*              uniform random integers mod q\n+*\n+* Arguments:   - int16_t *r:          pointer to output buffer\n+*              - unsigned int len:    requested number of 16-bit integers\n+*                                     (uniform mod q)\n+*              - const uint8_t *buf:  pointer to input buffer\n+*                                     (assumed to be uniform random bytes)\n+*              - unsigned int buflen: length of input buffer in bytes\n+*              - unsigned int *consumed: the length of consumed buffer\n+* Returns number of sampled 16-bit integers (at most len)\n+**************************************************/\n+.macro div48    dst, src","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"hanno-becker","id":26892988,"node_id":"MDQ6VXNlcjI2ODkyOTg4","avatar_url":"https://avatars.githubusercontent.com/u/26892988?v=4","gravatar_id":"","url":"https://api.github.com/users/hanno-becker","html_url":"https://github.com/hanno-becker","followers_url":"https://api.github.com/users/hanno-becker/followers","following_url":"https://api.github.com/users/hanno-becker/following{/other_user}","gists_url":"https://api.github.com/users/hanno-becker/gists{/gist_id}","starred_url":"https://api.github.com/users/hanno-becker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanno-becker/subscriptions","organizations_url":"https://api.github.com/users/hanno-becker/orgs","repos_url":"https://api.github.com/users/hanno-becker/repos","events_url":"https://api.github.com/users/hanno-becker/events{/privacy}","received_events_url":"https://api.github.com/users/hanno-becker/received_events","type":"User","site_admin":false},"body":"Compilers agree with you that the approach above is faster. Still, this is a one-off, so I don't think this is worth optimizing, given that it comes with some cognitive and verification overhead?","created_at":"2024-06-08T04:21:23Z","updated_at":"2024-06-08T04:21:23Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631866253","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631866253"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1631866253"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1631866253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":91,"original_line":91,"side":"RIGHT","in_reply_to_id":1631855804,"original_position":91,"position":91,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T04:21:23Z","closed_at":null,"merged_at":null,"merge_commit_sha":"e5479215ec8a22f8c2d6797f665bd8a4c0dc7860","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-08T04:16:16Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":87,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-08T04:16:17Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T04:21:23Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39122991746","type":"PullRequestReviewCommentEvent","actor":{"id":9219016,"login":"cothan","display_login":"cothan","gravatar_id":"","url":"https://api.github.com/users/cothan","avatar_url":"https://avatars.githubusercontent.com/u/9219016?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1632119684","pull_request_review_id":2105987556,"id":1632119684,"node_id":"PRRC_kwDOLh-nxs5hSCuE","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy\n+*\n+* Function: void simd_mempcy(void *dst, void *src, size_t length);\n+* Description: optimized memcpy with SIMD instructions for small data\n+*\n+* Arguments:   - void *dst:          pointer to destination buffer\n+*              - void *src:          pointer to source buffer\n+*              - size_t len:         length of src in bytes\n+**************************************************/\n+.align 4\n+.global simd_memcpy\n+.global _simd_memcpy\n+simd_memcpy:\n+_simd_memcpy:\n+    /* Input registers */\n+    dst                         .req x0\n+    src                         .req x1\n+    copylen                     .req x2\n+\n+    /* Temporary registers, no need to preserve */\n+    data                        .req w12\n+    aligned_addr                .req x13\n+    aligned_len                 .req x14\n+    unaligned_len               .req x15\n+\n+    cmp     copylen, #0                     // If copylen is less than or equal to 0\n+    b.le    end                             // then we exit the function\n+    cmp     copylen, #32                    // Check if size is less than 32 bytes\n+    b.lo    small_copy                      // Branch to small copy if size is less than 32\n+\n+    // Align destination address\n+    mov     aligned_addr, dst\n+    and     aligned_addr, aligned_addr, #15\n+    cbz     aligned_addr, aligned_copy      // If already aligned, jump to aligned copy\n+\n+    mov     unaligned_len, #16\n+    sub     unaligned_len, unaligned_len, aligned_addr\n+    cmp     copylen, unaligned_len\n+    b.lo    small_copy                      // If size is smaller than alignment padding, use small copy\n+    sub     copylen, copylen, unaligned_len\n+\n+    small_align:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    unaligned_len, unaligned_len, #1\n+    b.ne    small_align\n+\n+aligned_copy:\n+    // Main copy loop using 128-bit Neon registers\n+    lsr     aligned_len, copylen, #5        // Calculate the number of 32-byte chunks\n+    cbz     aligned_len, tail_copy          // If no chunks, jump to tail copy\n+\n+    copy_loop:\n+    ldp     q0, q1, [src], #32\n+    stp     q0, q1, [dst], #32\n+    subs    aligned_len, aligned_len, #1\n+    b.ne    copy_loop\n+\n+tail_copy:\n+    // Copy any remaining bytes less than 32 bytes\n+    and     copylen, copylen, #31\n+    cbz     copylen, end\n+\n+small_copy:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    copylen, copylen, #1\n+    b.ne    small_copy\n+\n+end:\n+    ret\n+\n+/*************************************************\n+* Name:        rej_uniform_asm\n+*\n+* Description: Full SIMD lane, run rejection sampling on uniform random bytes to generate\n+*              uniform random integers mod q\n+*\n+* Arguments:   - int16_t *r:          pointer to output buffer\n+*              - unsigned int len:    requested number of 16-bit integers\n+*                                     (uniform mod q)\n+*              - const uint8_t *buf:  pointer to input buffer\n+*                                     (assumed to be uniform random bytes)\n+*              - unsigned int buflen: length of input buffer in bytes\n+*              - unsigned int *consumed: the length of consumed buffer\n+* Returns number of sampled 16-bit integers (at most len)\n+**************************************************/\n+.macro div48    dst, src","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"Okay, I'll use `div` instruction directly. Update soon. ","created_at":"2024-06-08T22:08:08Z","updated_at":"2024-06-08T22:08:08Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1632119684","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1632119684"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1632119684"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1632119684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":91,"original_line":91,"side":"RIGHT","in_reply_to_id":1631855804,"original_position":91,"position":91,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T22:08:08Z","closed_at":null,"merged_at":null,"merge_commit_sha":"e5479215ec8a22f8c2d6797f665bd8a4c0dc7860","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-08T04:16:16Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":88,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-08T04:16:17Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/908164c2534b4d6dc24e43cd1ad8cd6fe4ffcbd2"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T22:08:08Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
{"id":"39123130011","type":"PullRequestReviewCommentEvent","actor":{"id":9219016,"login":"cothan","display_login":"cothan","gravatar_id":"","url":"https://api.github.com/users/cothan","avatar_url":"https://avatars.githubusercontent.com/u/9219016?"},"repo":{"id":773826502,"name":"pq-code-package/mlkem-c-aarch64","url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1632121727","pull_request_review_id":2105988986,"id":1632121727,"node_id":"PRRC_kwDOLh-nxs5hSDN_","diff_hunk":"@@ -0,0 +1,369 @@\n+// SPDX-License-Identifier: Apache-2.0\n+\n+/*************************************************\n+* Name:        simd_memcpy\n+*\n+* Function: void simd_mempcy(void *dst, void *src, size_t length);\n+* Description: optimized memcpy with SIMD instructions for small data\n+*\n+* Arguments:   - void *dst:          pointer to destination buffer\n+*              - void *src:          pointer to source buffer\n+*              - size_t len:         length of src in bytes\n+**************************************************/\n+.align 4\n+.global simd_memcpy\n+.global _simd_memcpy\n+simd_memcpy:\n+_simd_memcpy:\n+    /* Input registers */\n+    dst                         .req x0\n+    src                         .req x1\n+    copylen                     .req x2\n+\n+    /* Temporary registers, no need to preserve */\n+    data                        .req w12\n+    aligned_addr                .req x13\n+    aligned_len                 .req x14\n+    unaligned_len               .req x15\n+\n+    cmp     copylen, #0                     // If copylen is less than or equal to 0\n+    b.le    end                             // then we exit the function\n+    cmp     copylen, #32                    // Check if size is less than 32 bytes\n+    b.lo    small_copy                      // Branch to small copy if size is less than 32\n+\n+    // Align destination address\n+    mov     aligned_addr, dst\n+    and     aligned_addr, aligned_addr, #15\n+    cbz     aligned_addr, aligned_copy      // If already aligned, jump to aligned copy\n+\n+    mov     unaligned_len, #16\n+    sub     unaligned_len, unaligned_len, aligned_addr\n+    cmp     copylen, unaligned_len\n+    b.lo    small_copy                      // If size is smaller than alignment padding, use small copy\n+    sub     copylen, copylen, unaligned_len\n+\n+    small_align:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    unaligned_len, unaligned_len, #1\n+    b.ne    small_align\n+\n+aligned_copy:\n+    // Main copy loop using 128-bit Neon registers\n+    lsr     aligned_len, copylen, #5        // Calculate the number of 32-byte chunks\n+    cbz     aligned_len, tail_copy          // If no chunks, jump to tail copy\n+\n+    copy_loop:\n+    ldp     q0, q1, [src], #32\n+    stp     q0, q1, [dst], #32\n+    subs    aligned_len, aligned_len, #1\n+    b.ne    copy_loop\n+\n+tail_copy:\n+    // Copy any remaining bytes less than 32 bytes\n+    and     copylen, copylen, #31\n+    cbz     copylen, end\n+\n+small_copy:\n+    ldrb    data, [src], #1\n+    strb    data, [dst], #1\n+    subs    copylen, copylen, #1\n+    b.ne    small_copy\n+\n+end:\n+    ret\n+\n+/*************************************************\n+* Name:        rej_uniform_asm\n+*\n+* Description: Full SIMD lane, run rejection sampling on uniform random bytes to generate\n+*              uniform random integers mod q\n+*\n+* Arguments:   - int16_t *r:          pointer to output buffer\n+*              - unsigned int len:    requested number of 16-bit integers\n+*                                     (uniform mod q)\n+*              - const uint8_t *buf:  pointer to input buffer\n+*                                     (assumed to be uniform random bytes)\n+*              - unsigned int buflen: length of input buffer in bytes\n+*              - unsigned int *consumed: the length of consumed buffer\n+* Returns number of sampled 16-bit integers (at most len)\n+**************************************************/\n+.macro div48    dst, src","path":"mlkem/asm/clean/rej_uniform_asm.s","commit_id":"b42c7a17e06fd23922bdb6a3ac518cfe517a6e59","original_commit_id":"f4ead9afa2b892eed146a027a4308c97e4771b9b","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"done in https://github.com/pq-code-package/mlkem-c-aarch64/pull/47/commits/b42c7a17e06fd23922bdb6a3ac518cfe517a6e59","created_at":"2024-06-08T22:25:39Z","updated_at":"2024-06-08T22:25:40Z","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1632121727","pull_request_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1632121727"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47#discussion_r1632121727"},"pull_request":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"}},"reactions":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments/1632121727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":null,"original_line":91,"side":"RIGHT","in_reply_to_id":1631855804,"original_position":91,"position":null,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47","id":1902032467,"node_id":"PR_kwDOLh-nxs5xXrZT","html_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47","diff_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.diff","patch_url":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47.patch","issue_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47","number":47,"state":"open","locked":false,"title":"Add NEON assembly for rejection sampling","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"body":"[//]: # (SPDX-License-Identifier: CC-BY-4.0)\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nImprove the performance of Rejection Sampling. \r\n\r\nI should re-arrange the instructions, but I think when we have SLOTHY figures our the best instruction sequences, so I left it as future work. \r\n\r\nPerformance improvement: average 8%. \r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review. -->\r\n","created_at":"2024-06-04T03:25:24Z","updated_at":"2024-06-08T22:25:40Z","closed_at":null,"merged_at":null,"merge_commit_sha":"76797d2edc3fab631065e3d5a519f80a7a3641a3","assignee":null,"assignees":[],"requested_reviewers":[{"login":"mkannwischer","id":3984960,"node_id":"MDQ6VXNlcjM5ODQ5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3984960?v=4","gravatar_id":"","url":"https://api.github.com/users/mkannwischer","html_url":"https://github.com/mkannwischer","followers_url":"https://api.github.com/users/mkannwischer/followers","following_url":"https://api.github.com/users/mkannwischer/following{/other_user}","gists_url":"https://api.github.com/users/mkannwischer/gists{/gist_id}","starred_url":"https://api.github.com/users/mkannwischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkannwischer/subscriptions","organizations_url":"https://api.github.com/users/mkannwischer/orgs","repos_url":"https://api.github.com/users/mkannwischer/repos","events_url":"https://api.github.com/users/mkannwischer/events{/privacy}","received_events_url":"https://api.github.com/users/mkannwischer/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits","review_comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments","review_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/b42c7a17e06fd23922bdb6a3ac518cfe517a6e59","head":{"label":"cothan:rej_uniform","ref":"rej_uniform","sha":"b42c7a17e06fd23922bdb6a3ac518cfe517a6e59","user":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"repo":{"id":776625101,"node_id":"R_kgDOLkpbzQ","name":"mlkem-c-aarch64","full_name":"cothan/mlkem-c-aarch64","private":false,"owner":{"login":"cothan","id":9219016,"node_id":"MDQ6VXNlcjkyMTkwMTY=","avatar_url":"https://avatars.githubusercontent.com/u/9219016?v=4","gravatar_id":"","url":"https://api.github.com/users/cothan","html_url":"https://github.com/cothan","followers_url":"https://api.github.com/users/cothan/followers","following_url":"https://api.github.com/users/cothan/following{/other_user}","gists_url":"https://api.github.com/users/cothan/gists{/gist_id}","starred_url":"https://api.github.com/users/cothan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cothan/subscriptions","organizations_url":"https://api.github.com/users/cothan/orgs","repos_url":"https://api.github.com/users/cothan/repos","events_url":"https://api.github.com/users/cothan/events{/privacy}","received_events_url":"https://api.github.com/users/cothan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/cothan/mlkem-c-aarch64","description":null,"fork":true,"url":"https://api.github.com/repos/cothan/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/cothan/mlkem-c-aarch64/deployments","created_at":"2024-03-24T02:36:53Z","updated_at":"2024-06-06T18:39:46Z","pushed_at":"2024-06-08T22:25:20Z","git_url":"git://github.com/cothan/mlkem-c-aarch64.git","ssh_url":"git@github.com:cothan/mlkem-c-aarch64.git","clone_url":"https://github.com/cothan/mlkem-c-aarch64.git","svn_url":"https://github.com/cothan/mlkem-c-aarch64","homepage":null,"size":88,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"pq-code-package:main","ref":"main","sha":"c1d65ef18d2f4ff213eb462cb60085309d9dd637","user":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"repo":{"id":773826502,"node_id":"R_kgDOLh-nxg","name":"mlkem-c-aarch64","full_name":"pq-code-package/mlkem-c-aarch64","private":false,"owner":{"login":"pq-code-package","id":158063050,"node_id":"O_kgDOCWvZyg","avatar_url":"https://avatars.githubusercontent.com/u/158063050?v=4","gravatar_id":"","url":"https://api.github.com/users/pq-code-package","html_url":"https://github.com/pq-code-package","followers_url":"https://api.github.com/users/pq-code-package/followers","following_url":"https://api.github.com/users/pq-code-package/following{/other_user}","gists_url":"https://api.github.com/users/pq-code-package/gists{/gist_id}","starred_url":"https://api.github.com/users/pq-code-package/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pq-code-package/subscriptions","organizations_url":"https://api.github.com/users/pq-code-package/orgs","repos_url":"https://api.github.com/users/pq-code-package/repos","events_url":"https://api.github.com/users/pq-code-package/events{/privacy}","received_events_url":"https://api.github.com/users/pq-code-package/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/pq-code-package/mlkem-c-aarch64","description":"ML-KEM implementation optimized for aarch64","fork":false,"url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64","forks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/forks","keys_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/teams","hooks_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/hooks","issue_events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/events{/number}","events_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/events","assignees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/assignees{/user}","branches_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/branches{/branch}","tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/tags","blobs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/refs{/sha}","trees_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/{sha}","languages_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/languages","stargazers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/stargazers","contributors_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contributors","subscribers_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscribers","subscription_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/subscription","commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/commits{/sha}","git_commits_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/git/commits{/sha}","comments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/comments{/number}","issue_comment_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/comments{/number}","contents_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/contents/{+path}","compare_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/merges","archive_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/downloads","issues_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues{/number}","pulls_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls{/number}","milestones_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/milestones{/number}","notifications_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/labels{/name}","releases_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/releases{/id}","deployments_url":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/deployments","created_at":"2024-03-18T13:21:26Z","updated_at":"2024-06-06T04:21:32Z","pushed_at":"2024-06-08T22:25:21Z","git_url":"git://github.com/pq-code-package/mlkem-c-aarch64.git","ssh_url":"git@github.com:pq-code-package/mlkem-c-aarch64.git","clone_url":"https://github.com/pq-code-package/mlkem-c-aarch64.git","svn_url":"https://github.com/pq-code-package/mlkem-c-aarch64","homepage":"","size":79,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":13,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":4,"open_issues":13,"watchers":0,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47"},"html":{"href":"https://github.com/pq-code-package/mlkem-c-aarch64/pull/47"},"issue":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47"},"comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/issues/47/comments"},"review_comments":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/comments"},"review_comment":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/pulls/47/commits"},"statuses":{"href":"https://api.github.com/repos/pq-code-package/mlkem-c-aarch64/statuses/b42c7a17e06fd23922bdb6a3ac518cfe517a6e59"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2024-06-08T22:25:39Z","org":{"id":158063050,"login":"pq-code-package","gravatar_id":"","url":"https://api.github.com/orgs/pq-code-package","avatar_url":"https://avatars.githubusercontent.com/u/158063050?"}}
