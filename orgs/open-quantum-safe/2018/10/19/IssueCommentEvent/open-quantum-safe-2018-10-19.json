{"id":"8449701459","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/420","id":371530919,"node_id":"MDU6SXNzdWUzNzE1MzA5MTk=","number":420,"title":"libOQS returns struct with misaligned members","user":{"login":"himsen","id":8680742,"node_id":"MDQ6VXNlcjg2ODA3NDI=","avatar_url":"https://avatars1.githubusercontent.com/u/8680742?v=4","gravatar_id":"","url":"https://api.github.com/users/himsen","html_url":"https://github.com/himsen","followers_url":"https://api.github.com/users/himsen/followers","following_url":"https://api.github.com/users/himsen/following{/other_user}","gists_url":"https://api.github.com/users/himsen/gists{/gist_id}","starred_url":"https://api.github.com/users/himsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himsen/subscriptions","organizations_url":"https://api.github.com/users/himsen/orgs","repos_url":"https://api.github.com/users/himsen/repos","events_url":"https://api.github.com/users/himsen/events{/privacy}","received_events_url":"https://api.github.com/users/himsen/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true},{"id":935327280,"node_id":"MDU6TGFiZWw5MzUzMjcyODA=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/master","name":"master","color":"c918c0","default":false}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-10-18T13:28:58Z","updated_at":"2018-10-19T15:06:55Z","closed_at":null,"author_association":"COLLABORATOR","body":"OpenSSH regression tests currently fail, cf. issue open-quantum-safe/openssh-portable#13. I have tracked the reason down to  the function `OQS_KEM_new` returning a struct with \"misaligned\" members (in lack of a better way to describe it).\r\n\r\nThis occurs independently of OpenSSH, as shown below. This could instead be a platform/compiler specific issue.\r\n\r\nRunning the small program below on my Ubuntu machine outputs the following:\r\n\r\n```\r\nLength pb: 434\r\nLength sk: 402\r\nLength ct: 16\r\nLength ss: 4265680\r\n```\r\nObviously, wrong.\r\n\r\n```C\r\n#include <stdio.h>\r\n\r\n#include \"oqs/oqs.h\"\r\n\r\nint main(int argc, char *argv[]) {\r\n\t\r\n\tOQS_KEM *oqs_kem = NULL;\r\n\r\n\toqs_kem = OQS_KEM_new(OQS_KEM_alg_default);\r\n\r\n\tfprintf(stderr, \"Length pb: %zu\\n\", oqs_kem->length_public_key);\r\n\tfprintf(stderr, \"Length sk: %zu\\n\", oqs_kem->length_secret_key);\r\n\tfprintf(stderr, \"Length ct: %zu\\n\", oqs_kem->length_ciphertext);\r\n\tfprintf(stderr, \"Length ss: %zu\\n\", oqs_kem->length_shared_secret); \t\r\n\r\n\tOQS_KEM_free(oqs_kem);\r\n\r\n\treturn 0;\r\n}\r\n```\r\nCompile and run like this:\r\n```\r\n$gcc -I<path/to/liboqs/folder>/include -c oqs_test.c\r\n$gcc -o oqs_test oqs_test.o -L<path/to/liboqs/folder>/lib -loqs\r\n$./oqs_test\r\n```\r\nAny clues?"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/431395072","html_url":"https://github.com/open-quantum-safe/liboqs/issues/420#issuecomment-431395072","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420","id":431395072,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTM5NTA3Mg==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2018-10-19T15:06:55Z","updated_at":"2018-10-19T15:06:55Z","author_association":"MEMBER","body":"I'm not able to reproduce on my Mac or Ubuntu 18.04 or 14.04 VMs.  What configuration are you using?"}},"public":true,"created_at":"2018-10-19T15:06:55Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"8449893416","type":"IssueCommentEvent","actor":{"id":8680742,"login":"himsen","display_login":"himsen","gravatar_id":"","url":"https://api.github.com/users/himsen","avatar_url":"https://avatars.githubusercontent.com/u/8680742?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/420","id":371530919,"node_id":"MDU6SXNzdWUzNzE1MzA5MTk=","number":420,"title":"libOQS returns struct with misaligned members","user":{"login":"himsen","id":8680742,"node_id":"MDQ6VXNlcjg2ODA3NDI=","avatar_url":"https://avatars1.githubusercontent.com/u/8680742?v=4","gravatar_id":"","url":"https://api.github.com/users/himsen","html_url":"https://github.com/himsen","followers_url":"https://api.github.com/users/himsen/followers","following_url":"https://api.github.com/users/himsen/following{/other_user}","gists_url":"https://api.github.com/users/himsen/gists{/gist_id}","starred_url":"https://api.github.com/users/himsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himsen/subscriptions","organizations_url":"https://api.github.com/users/himsen/orgs","repos_url":"https://api.github.com/users/himsen/repos","events_url":"https://api.github.com/users/himsen/events{/privacy}","received_events_url":"https://api.github.com/users/himsen/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true},{"id":935327280,"node_id":"MDU6TGFiZWw5MzUzMjcyODA=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/master","name":"master","color":"c918c0","default":false}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-10-18T13:28:58Z","updated_at":"2018-10-19T15:37:55Z","closed_at":null,"author_association":"COLLABORATOR","body":"OpenSSH regression tests currently fail, cf. issue open-quantum-safe/openssh-portable#13. I have tracked the reason down to  the function `OQS_KEM_new` returning a struct with \"misaligned\" members (in lack of a better way to describe it).\r\n\r\nThis occurs independently of OpenSSH, as shown below. This could instead be a platform/compiler specific issue.\r\n\r\nRunning the small program below on my Ubuntu machine outputs the following:\r\n\r\n```\r\nLength pb: 434\r\nLength sk: 402\r\nLength ct: 16\r\nLength ss: 4265680\r\n```\r\nObviously, wrong.\r\n\r\n```C\r\n#include <stdio.h>\r\n\r\n#include \"oqs/oqs.h\"\r\n\r\nint main(int argc, char *argv[]) {\r\n\t\r\n\tOQS_KEM *oqs_kem = NULL;\r\n\r\n\toqs_kem = OQS_KEM_new(OQS_KEM_alg_default);\r\n\r\n\tfprintf(stderr, \"Length pb: %zu\\n\", oqs_kem->length_public_key);\r\n\tfprintf(stderr, \"Length sk: %zu\\n\", oqs_kem->length_secret_key);\r\n\tfprintf(stderr, \"Length ct: %zu\\n\", oqs_kem->length_ciphertext);\r\n\tfprintf(stderr, \"Length ss: %zu\\n\", oqs_kem->length_shared_secret); \t\r\n\r\n\tOQS_KEM_free(oqs_kem);\r\n\r\n\treturn 0;\r\n}\r\n```\r\nCompile and run like this:\r\n```\r\n$gcc -I<path/to/liboqs/folder>/include -c oqs_test.c\r\n$gcc -o oqs_test oqs_test.o -L<path/to/liboqs/folder>/lib -loqs\r\n$./oqs_test\r\n```\r\nAny clues?"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/431405549","html_url":"https://github.com/open-quantum-safe/liboqs/issues/420#issuecomment-431405549","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420","id":431405549,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTQwNTU0OQ==","user":{"login":"himsen","id":8680742,"node_id":"MDQ6VXNlcjg2ODA3NDI=","avatar_url":"https://avatars1.githubusercontent.com/u/8680742?v=4","gravatar_id":"","url":"https://api.github.com/users/himsen","html_url":"https://github.com/himsen","followers_url":"https://api.github.com/users/himsen/followers","following_url":"https://api.github.com/users/himsen/following{/other_user}","gists_url":"https://api.github.com/users/himsen/gists{/gist_id}","starred_url":"https://api.github.com/users/himsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himsen/subscriptions","organizations_url":"https://api.github.com/users/himsen/orgs","repos_url":"https://api.github.com/users/himsen/repos","events_url":"https://api.github.com/users/himsen/events{/privacy}","received_events_url":"https://api.github.com/users/himsen/received_events","type":"User","site_admin":false},"created_at":"2018-10-19T15:37:55Z","updated_at":"2018-10-19T15:37:55Z","author_association":"COLLABORATOR","body":"Sorry. I just found the cause of this. It was due to a contaminated repository. I pulled the new repository version of master-branch yesterday, ran `make clean` and re-build. Apparently, this did not remove the old library which I was still linking against when building the small program above and OpenSSH. Wicked...\r\n\r\nYou can close :)."}},"public":true,"created_at":"2018-10-19T15:37:55Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"8449906363","type":"IssueCommentEvent","actor":{"id":8680742,"login":"himsen","display_login":"himsen","gravatar_id":"","url":"https://api.github.com/users/himsen","avatar_url":"https://avatars.githubusercontent.com/u/8680742?"},"repo":{"id":113904471,"name":"open-quantum-safe/openssh-portable","url":"https://api.github.com/repos/open-quantum-safe/openssh-portable"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssh-portable/issues/13","repository_url":"https://api.github.com/repos/open-quantum-safe/openssh-portable","labels_url":"https://api.github.com/repos/open-quantum-safe/openssh-portable/issues/13/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssh-portable/issues/13/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssh-portable/issues/13/events","html_url":"https://github.com/open-quantum-safe/openssh-portable/issues/13","id":371501181,"node_id":"MDU6SXNzdWUzNzE1MDExODE=","number":13,"title":"Regression tests fail","user":{"login":"himsen","id":8680742,"node_id":"MDQ6VXNlcjg2ODA3NDI=","avatar_url":"https://avatars1.githubusercontent.com/u/8680742?v=4","gravatar_id":"","url":"https://api.github.com/users/himsen","html_url":"https://github.com/himsen","followers_url":"https://api.github.com/users/himsen/followers","following_url":"https://api.github.com/users/himsen/following{/other_user}","gists_url":"https://api.github.com/users/himsen/gists{/gist_id}","starred_url":"https://api.github.com/users/himsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himsen/subscriptions","organizations_url":"https://api.github.com/users/himsen/orgs","repos_url":"https://api.github.com/users/himsen/repos","events_url":"https://api.github.com/users/himsen/events{/privacy}","received_events_url":"https://api.github.com/users/himsen/received_events","type":"User","site_admin":false},"labels":[{"id":775961860,"node_id":"MDU6TGFiZWw3NzU5NjE4NjA=","url":"https://api.github.com/repos/open-quantum-safe/openssh-portable/labels/bug","name":"bug","color":"ee0701","default":true}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-10-18T12:15:36Z","updated_at":"2018-10-19T15:40:08Z","closed_at":null,"author_association":"COLLABORATOR","body":"Issue first reported in PR #12 \r\n\r\nA fresh checkout - using the master branch of libOQS - fails the OpenSSH regression tests reporting random looking memory corruption errors. A manual run also does not succeed.\r\n\r\nI tried annotating with a few printf's and it seems that the kem structure returned from libOQS contains obviously wrong values. \r\n\r\n```\r\nHybrid using oqs method: DEFAULT\r\nIn oqs_client_gen()\r\noqs_kem->length_shared_secret: 94821083628384\r\n```\r\n\r\nI need to investigate this further. But this should block any further work on this fork."},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssh-portable/issues/comments/431406260","html_url":"https://github.com/open-quantum-safe/openssh-portable/issues/13#issuecomment-431406260","issue_url":"https://api.github.com/repos/open-quantum-safe/openssh-portable/issues/13","id":431406260,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTQwNjI2MA==","user":{"login":"himsen","id":8680742,"node_id":"MDQ6VXNlcjg2ODA3NDI=","avatar_url":"https://avatars1.githubusercontent.com/u/8680742?v=4","gravatar_id":"","url":"https://api.github.com/users/himsen","html_url":"https://github.com/himsen","followers_url":"https://api.github.com/users/himsen/followers","following_url":"https://api.github.com/users/himsen/following{/other_user}","gists_url":"https://api.github.com/users/himsen/gists{/gist_id}","starred_url":"https://api.github.com/users/himsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himsen/subscriptions","organizations_url":"https://api.github.com/users/himsen/orgs","repos_url":"https://api.github.com/users/himsen/repos","events_url":"https://api.github.com/users/himsen/events{/privacy}","received_events_url":"https://api.github.com/users/himsen/received_events","type":"User","site_admin":false},"created_at":"2018-10-19T15:40:08Z","updated_at":"2018-10-19T15:40:08Z","author_association":"COLLABORATOR","body":"This problem will probably go away after discovering the reason for open-quantum-safe/liboqs#420"}},"public":true,"created_at":"2018-10-19T15:40:08Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"8451234247","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/420","id":371530919,"node_id":"MDU6SXNzdWUzNzE1MzA5MTk=","number":420,"title":"libOQS returns struct with misaligned members","user":{"login":"himsen","id":8680742,"node_id":"MDQ6VXNlcjg2ODA3NDI=","avatar_url":"https://avatars1.githubusercontent.com/u/8680742?v=4","gravatar_id":"","url":"https://api.github.com/users/himsen","html_url":"https://github.com/himsen","followers_url":"https://api.github.com/users/himsen/followers","following_url":"https://api.github.com/users/himsen/following{/other_user}","gists_url":"https://api.github.com/users/himsen/gists{/gist_id}","starred_url":"https://api.github.com/users/himsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himsen/subscriptions","organizations_url":"https://api.github.com/users/himsen/orgs","repos_url":"https://api.github.com/users/himsen/repos","events_url":"https://api.github.com/users/himsen/events{/privacy}","received_events_url":"https://api.github.com/users/himsen/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true},{"id":935327280,"node_id":"MDU6TGFiZWw5MzUzMjcyODA=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/master","name":"master","color":"c918c0","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-10-18T13:28:58Z","updated_at":"2018-10-19T19:59:05Z","closed_at":"2018-10-19T19:58:13Z","author_association":"COLLABORATOR","body":"OpenSSH regression tests currently fail, cf. issue open-quantum-safe/openssh-portable#13. I have tracked the reason down to  the function `OQS_KEM_new` returning a struct with \"misaligned\" members (in lack of a better way to describe it).\r\n\r\nThis occurs independently of OpenSSH, as shown below. This could instead be a platform/compiler specific issue.\r\n\r\nRunning the small program below on my Ubuntu machine outputs the following:\r\n\r\n```\r\nLength pb: 434\r\nLength sk: 402\r\nLength ct: 16\r\nLength ss: 4265680\r\n```\r\nObviously, wrong.\r\n\r\n```C\r\n#include <stdio.h>\r\n\r\n#include \"oqs/oqs.h\"\r\n\r\nint main(int argc, char *argv[]) {\r\n\t\r\n\tOQS_KEM *oqs_kem = NULL;\r\n\r\n\toqs_kem = OQS_KEM_new(OQS_KEM_alg_default);\r\n\r\n\tfprintf(stderr, \"Length pb: %zu\\n\", oqs_kem->length_public_key);\r\n\tfprintf(stderr, \"Length sk: %zu\\n\", oqs_kem->length_secret_key);\r\n\tfprintf(stderr, \"Length ct: %zu\\n\", oqs_kem->length_ciphertext);\r\n\tfprintf(stderr, \"Length ss: %zu\\n\", oqs_kem->length_shared_secret); \t\r\n\r\n\tOQS_KEM_free(oqs_kem);\r\n\r\n\treturn 0;\r\n}\r\n```\r\nCompile and run like this:\r\n```\r\n$gcc -I<path/to/liboqs/folder>/include -c oqs_test.c\r\n$gcc -o oqs_test oqs_test.o -L<path/to/liboqs/folder>/lib -loqs\r\n$./oqs_test\r\n```\r\nAny clues?"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/431481942","html_url":"https://github.com/open-quantum-safe/liboqs/issues/420#issuecomment-431481942","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420","id":431481942,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTQ4MTk0Mg==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2018-10-19T19:59:05Z","updated_at":"2018-10-19T19:59:05Z","author_association":"MEMBER","body":"We recently added a new field in the OQS\\_KEM (`OQS_KEM->alg_version`) which would might be why you were seeing misalignment between versions."}},"public":true,"created_at":"2018-10-19T19:59:05Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
