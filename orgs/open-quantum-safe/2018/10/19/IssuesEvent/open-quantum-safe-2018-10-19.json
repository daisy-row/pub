{"id":"8451230053","type":"IssuesEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/420/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/420","id":371530919,"node_id":"MDU6SXNzdWUzNzE1MzA5MTk=","number":420,"title":"libOQS returns struct with misaligned members","user":{"login":"himsen","id":8680742,"node_id":"MDQ6VXNlcjg2ODA3NDI=","avatar_url":"https://avatars1.githubusercontent.com/u/8680742?v=4","gravatar_id":"","url":"https://api.github.com/users/himsen","html_url":"https://github.com/himsen","followers_url":"https://api.github.com/users/himsen/followers","following_url":"https://api.github.com/users/himsen/following{/other_user}","gists_url":"https://api.github.com/users/himsen/gists{/gist_id}","starred_url":"https://api.github.com/users/himsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himsen/subscriptions","organizations_url":"https://api.github.com/users/himsen/orgs","repos_url":"https://api.github.com/users/himsen/repos","events_url":"https://api.github.com/users/himsen/events{/privacy}","received_events_url":"https://api.github.com/users/himsen/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true},{"id":935327280,"node_id":"MDU6TGFiZWw5MzUzMjcyODA=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/master","name":"master","color":"c918c0","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-10-18T13:28:58Z","updated_at":"2018-10-19T19:58:13Z","closed_at":"2018-10-19T19:58:13Z","author_association":"COLLABORATOR","body":"OpenSSH regression tests currently fail, cf. issue open-quantum-safe/openssh-portable#13. I have tracked the reason down to  the function `OQS_KEM_new` returning a struct with \"misaligned\" members (in lack of a better way to describe it).\r\n\r\nThis occurs independently of OpenSSH, as shown below. This could instead be a platform/compiler specific issue.\r\n\r\nRunning the small program below on my Ubuntu machine outputs the following:\r\n\r\n```\r\nLength pb: 434\r\nLength sk: 402\r\nLength ct: 16\r\nLength ss: 4265680\r\n```\r\nObviously, wrong.\r\n\r\n```C\r\n#include <stdio.h>\r\n\r\n#include \"oqs/oqs.h\"\r\n\r\nint main(int argc, char *argv[]) {\r\n\t\r\n\tOQS_KEM *oqs_kem = NULL;\r\n\r\n\toqs_kem = OQS_KEM_new(OQS_KEM_alg_default);\r\n\r\n\tfprintf(stderr, \"Length pb: %zu\\n\", oqs_kem->length_public_key);\r\n\tfprintf(stderr, \"Length sk: %zu\\n\", oqs_kem->length_secret_key);\r\n\tfprintf(stderr, \"Length ct: %zu\\n\", oqs_kem->length_ciphertext);\r\n\tfprintf(stderr, \"Length ss: %zu\\n\", oqs_kem->length_shared_secret); \t\r\n\r\n\tOQS_KEM_free(oqs_kem);\r\n\r\n\treturn 0;\r\n}\r\n```\r\nCompile and run like this:\r\n```\r\n$gcc -I<path/to/liboqs/folder>/include -c oqs_test.c\r\n$gcc -o oqs_test oqs_test.o -L<path/to/liboqs/folder>/lib -loqs\r\n$./oqs_test\r\n```\r\nAny clues?"}},"public":true,"created_at":"2018-10-19T19:58:14Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
