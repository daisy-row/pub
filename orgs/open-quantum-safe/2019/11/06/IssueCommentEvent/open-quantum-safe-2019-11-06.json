{"id":"10795306159","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/128","id":514122119,"node_id":"MDU6SXNzdWU1MTQxMjIxMTk=","number":128,"title":"Question: Cannot compile standard OpenSSL code using OQS-OpenSSL (already configured and installed)","user":{"login":"syrtap","id":9990094,"node_id":"MDQ6VXNlcjk5OTAwOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/9990094?v=4","gravatar_id":"","url":"https://api.github.com/users/syrtap","html_url":"https://github.com/syrtap","followers_url":"https://api.github.com/users/syrtap/followers","following_url":"https://api.github.com/users/syrtap/following{/other_user}","gists_url":"https://api.github.com/users/syrtap/gists{/gist_id}","starred_url":"https://api.github.com/users/syrtap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syrtap/subscriptions","organizations_url":"https://api.github.com/users/syrtap/orgs","repos_url":"https://api.github.com/users/syrtap/repos","events_url":"https://api.github.com/users/syrtap/events{/privacy}","received_events_url":"https://api.github.com/users/syrtap/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2019-10-29T18:12:02Z","updated_at":"2019-11-06T00:18:17Z","closed_at":null,"author_association":"NONE","body":"I have compiled OQS-OpenSSL on CentOS 7.7 using gcc 7.3.1 by following the instructions (First get OQS-OpenSSL, then build and install liboqs at the root of OQS-OpenSSL and finally build OQS-OpenSSL). \r\n\r\nEverything seems to work during the build process of OQS-OpenSSL, I've installed OQS-OpenSSL into \"/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0\"\r\n\r\n**Issue:**\r\nThe issue I get is when I try to compile code using standard OpenSSL is it complains that \"oqs/oqs.h\" couldn't be found. Indeed \"oqs/oqs.h\" is not installed when I issue a \"make install\" inside the OQS-OpenSSL directory.  Also the instructions doesn't tell to separately install liboqs outside of OQS-OpenSSL.\r\n\r\n**Here's my build process:**\r\n```\r\ncd /root/build/openssl/openssl-OpenSSL_1_1_1d && make clean ; ./Configure shared linux-x86_64 -lm --prefix=\"/usr/local/openssl-1.1.1d\" && make -j 4 && make install\r\ncd /root/build/liboqs/liboqs-0.2.0/ && autoreconf -i\r\ncd /root/build/liboqs/liboqs-0.2.0/ && make clean ; ./configure --enable-shared --prefix=\"/root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10//oqs\" --with-openssl=\"/usr/local/openssl-1.1.1d\" \"--disable-kem-bike\" && make -j 4 && make install\r\ncd /root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10/ && make clean ; ./Configure --prefix=\"/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0\" shared linux-x86_64 -lm && make -j 4 && make install\r\n```\r\nNow, when I try to build code that uses standard OpenSSL with OQS-OpenSSL I get this error (evp.h)\r\n\r\n**Error:**\r\n```\r\n/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0/include/openssl/evp.h:18:11: fatal error: oqs/oqs.h: No such file or directory\r\ninclude <oqs/oqs.h>\r\n       ^~~~~~~~~~~\r\ncompilation terminated.\r\nmake: *** [: OutboundTransferMgr.o] Error 1\r\n[ CHROOT ] bash-4.2$>\r\n```\r\n\r\n\r\n==> How should I use the OpenSSL fork when building software that uses OpenSSL?\r\nI have added \r\n```\r\n\"-I/root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10/oqs/include\"\r\n```\r\nto the Makefile so that \"oqs/oqs.h\" could resolve but I get other strange errors following this.\r\n\r\nThanks for your work here!  I appreciate it :)\r\n\r\nSylvain"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/550083379","html_url":"https://github.com/open-quantum-safe/openssl/issues/128#issuecomment-550083379","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128","id":550083379,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDA4MzM3OQ==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2019-11-06T00:18:17Z","updated_at":"2019-11-06T00:18:17Z","author_association":"MEMBER","body":"To make sure I understand -- @kevinmkane your point is that OQS-OpenSSL should copy the OQS include headers into the same place that OpenSSL installs its header files?"}},"public":true,"created_at":"2019-11-06T00:18:18Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"10795389754","type":"IssueCommentEvent","actor":{"id":18724089,"login":"kevinmkane","display_login":"kevinmkane","gravatar_id":"","url":"https://api.github.com/users/kevinmkane","avatar_url":"https://avatars.githubusercontent.com/u/18724089?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/128","id":514122119,"node_id":"MDU6SXNzdWU1MTQxMjIxMTk=","number":128,"title":"Question: Cannot compile standard OpenSSL code using OQS-OpenSSL (already configured and installed)","user":{"login":"syrtap","id":9990094,"node_id":"MDQ6VXNlcjk5OTAwOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/9990094?v=4","gravatar_id":"","url":"https://api.github.com/users/syrtap","html_url":"https://github.com/syrtap","followers_url":"https://api.github.com/users/syrtap/followers","following_url":"https://api.github.com/users/syrtap/following{/other_user}","gists_url":"https://api.github.com/users/syrtap/gists{/gist_id}","starred_url":"https://api.github.com/users/syrtap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syrtap/subscriptions","organizations_url":"https://api.github.com/users/syrtap/orgs","repos_url":"https://api.github.com/users/syrtap/repos","events_url":"https://api.github.com/users/syrtap/events{/privacy}","received_events_url":"https://api.github.com/users/syrtap/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-10-29T18:12:02Z","updated_at":"2019-11-06T00:33:24Z","closed_at":null,"author_association":"NONE","body":"I have compiled OQS-OpenSSL on CentOS 7.7 using gcc 7.3.1 by following the instructions (First get OQS-OpenSSL, then build and install liboqs at the root of OQS-OpenSSL and finally build OQS-OpenSSL). \r\n\r\nEverything seems to work during the build process of OQS-OpenSSL, I've installed OQS-OpenSSL into \"/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0\"\r\n\r\n**Issue:**\r\nThe issue I get is when I try to compile code using standard OpenSSL is it complains that \"oqs/oqs.h\" couldn't be found. Indeed \"oqs/oqs.h\" is not installed when I issue a \"make install\" inside the OQS-OpenSSL directory.  Also the instructions doesn't tell to separately install liboqs outside of OQS-OpenSSL.\r\n\r\n**Here's my build process:**\r\n```\r\ncd /root/build/openssl/openssl-OpenSSL_1_1_1d && make clean ; ./Configure shared linux-x86_64 -lm --prefix=\"/usr/local/openssl-1.1.1d\" && make -j 4 && make install\r\ncd /root/build/liboqs/liboqs-0.2.0/ && autoreconf -i\r\ncd /root/build/liboqs/liboqs-0.2.0/ && make clean ; ./configure --enable-shared --prefix=\"/root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10//oqs\" --with-openssl=\"/usr/local/openssl-1.1.1d\" \"--disable-kem-bike\" && make -j 4 && make install\r\ncd /root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10/ && make clean ; ./Configure --prefix=\"/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0\" shared linux-x86_64 -lm && make -j 4 && make install\r\n```\r\nNow, when I try to build code that uses standard OpenSSL with OQS-OpenSSL I get this error (evp.h)\r\n\r\n**Error:**\r\n```\r\n/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0/include/openssl/evp.h:18:11: fatal error: oqs/oqs.h: No such file or directory\r\ninclude <oqs/oqs.h>\r\n       ^~~~~~~~~~~\r\ncompilation terminated.\r\nmake: *** [: OutboundTransferMgr.o] Error 1\r\n[ CHROOT ] bash-4.2$>\r\n```\r\n\r\n\r\n==> How should I use the OpenSSL fork when building software that uses OpenSSL?\r\nI have added \r\n```\r\n\"-I/root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10/oqs/include\"\r\n```\r\nto the Makefile so that \"oqs/oqs.h\" could resolve but I get other strange errors following this.\r\n\r\nThanks for your work here!  I appreciate it :)\r\n\r\nSylvain"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/550086943","html_url":"https://github.com/open-quantum-safe/openssl/issues/128#issuecomment-550086943","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128","id":550086943,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDA4Njk0Mw==","user":{"login":"kevinmkane","id":18724089,"node_id":"MDQ6VXNlcjE4NzI0MDg5","avatar_url":"https://avatars3.githubusercontent.com/u/18724089?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmkane","html_url":"https://github.com/kevinmkane","followers_url":"https://api.github.com/users/kevinmkane/followers","following_url":"https://api.github.com/users/kevinmkane/following{/other_user}","gists_url":"https://api.github.com/users/kevinmkane/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmkane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmkane/subscriptions","organizations_url":"https://api.github.com/users/kevinmkane/orgs","repos_url":"https://api.github.com/users/kevinmkane/repos","events_url":"https://api.github.com/users/kevinmkane/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmkane/received_events","type":"User","site_admin":false},"created_at":"2019-11-06T00:33:23Z","updated_at":"2019-11-06T00:33:23Z","author_association":"NONE","body":"> To make sure I understand -- @kevinmkane your point is that OQS-OpenSSL should copy the OQS include headers into the same place that OpenSSL installs its header files?\r\n\r\nMy point is better phrased in terms of the goal: Applications building against OQS-OpenSSL should be able to successfully build, link, and run based on only the products that get installed as part of `make install`.\r\n\r\nIf need be I think it's fair to require these be applications built specifically to work with OQS-OpenSSL (as opposed to regular, unmodified OpenSSL-using applications -- though building them out of the box would be nice if possible), but `make install` should provide everything they need.\r\n\r\nWhether this is best accomplished by copying OQS's header files, or just specific ones as needed by applications, or by removing that dependency in evp.h, or something else to accomplish this goal, I leave that to the experts on the code to decide on the best way of accomplishing this goal.\r\n\r\nDoes that make sense, @dstebila ?"}},"public":true,"created_at":"2019-11-06T00:33:24Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"10797898734","type":"IssueCommentEvent","actor":{"id":29727445,"login":"zrlmib","display_login":"zrlmib","gravatar_id":"","url":"https://api.github.com/users/zrlmib","avatar_url":"https://avatars.githubusercontent.com/u/29727445?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/128","id":514122119,"node_id":"MDU6SXNzdWU1MTQxMjIxMTk=","number":128,"title":"Question: Cannot compile standard OpenSSL code using OQS-OpenSSL (already configured and installed)","user":{"login":"syrtap","id":9990094,"node_id":"MDQ6VXNlcjk5OTAwOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/9990094?v=4","gravatar_id":"","url":"https://api.github.com/users/syrtap","html_url":"https://github.com/syrtap","followers_url":"https://api.github.com/users/syrtap/followers","following_url":"https://api.github.com/users/syrtap/following{/other_user}","gists_url":"https://api.github.com/users/syrtap/gists{/gist_id}","starred_url":"https://api.github.com/users/syrtap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syrtap/subscriptions","organizations_url":"https://api.github.com/users/syrtap/orgs","repos_url":"https://api.github.com/users/syrtap/repos","events_url":"https://api.github.com/users/syrtap/events{/privacy}","received_events_url":"https://api.github.com/users/syrtap/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2019-10-29T18:12:02Z","updated_at":"2019-11-06T08:57:16Z","closed_at":null,"author_association":"NONE","body":"I have compiled OQS-OpenSSL on CentOS 7.7 using gcc 7.3.1 by following the instructions (First get OQS-OpenSSL, then build and install liboqs at the root of OQS-OpenSSL and finally build OQS-OpenSSL). \r\n\r\nEverything seems to work during the build process of OQS-OpenSSL, I've installed OQS-OpenSSL into \"/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0\"\r\n\r\n**Issue:**\r\nThe issue I get is when I try to compile code using standard OpenSSL is it complains that \"oqs/oqs.h\" couldn't be found. Indeed \"oqs/oqs.h\" is not installed when I issue a \"make install\" inside the OQS-OpenSSL directory.  Also the instructions doesn't tell to separately install liboqs outside of OQS-OpenSSL.\r\n\r\n**Here's my build process:**\r\n```\r\ncd /root/build/openssl/openssl-OpenSSL_1_1_1d && make clean ; ./Configure shared linux-x86_64 -lm --prefix=\"/usr/local/openssl-1.1.1d\" && make -j 4 && make install\r\ncd /root/build/liboqs/liboqs-0.2.0/ && autoreconf -i\r\ncd /root/build/liboqs/liboqs-0.2.0/ && make clean ; ./configure --enable-shared --prefix=\"/root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10//oqs\" --with-openssl=\"/usr/local/openssl-1.1.1d\" \"--disable-kem-bike\" && make -j 4 && make install\r\ncd /root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10/ && make clean ; ./Configure --prefix=\"/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0\" shared linux-x86_64 -lm && make -j 4 && make install\r\n```\r\nNow, when I try to build code that uses standard OpenSSL with OQS-OpenSSL I get this error (evp.h)\r\n\r\n**Error:**\r\n```\r\n/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0/include/openssl/evp.h:18:11: fatal error: oqs/oqs.h: No such file or directory\r\ninclude <oqs/oqs.h>\r\n       ^~~~~~~~~~~\r\ncompilation terminated.\r\nmake: *** [: OutboundTransferMgr.o] Error 1\r\n[ CHROOT ] bash-4.2$>\r\n```\r\n\r\n\r\n==> How should I use the OpenSSL fork when building software that uses OpenSSL?\r\nI have added \r\n```\r\n\"-I/root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10/oqs/include\"\r\n```\r\nto the Makefile so that \"oqs/oqs.h\" could resolve but I get other strange errors following this.\r\n\r\nThanks for your work here!  I appreciate it :)\r\n\r\nSylvain"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/550211362","html_url":"https://github.com/open-quantum-safe/openssl/issues/128#issuecomment-550211362","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128","id":550211362,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDIxMTM2Mg==","user":{"login":"zrlmib","id":29727445,"node_id":"MDQ6VXNlcjI5NzI3NDQ1","avatar_url":"https://avatars1.githubusercontent.com/u/29727445?v=4","gravatar_id":"","url":"https://api.github.com/users/zrlmib","html_url":"https://github.com/zrlmib","followers_url":"https://api.github.com/users/zrlmib/followers","following_url":"https://api.github.com/users/zrlmib/following{/other_user}","gists_url":"https://api.github.com/users/zrlmib/gists{/gist_id}","starred_url":"https://api.github.com/users/zrlmib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zrlmib/subscriptions","organizations_url":"https://api.github.com/users/zrlmib/orgs","repos_url":"https://api.github.com/users/zrlmib/repos","events_url":"https://api.github.com/users/zrlmib/events{/privacy}","received_events_url":"https://api.github.com/users/zrlmib/received_events","type":"User","site_admin":false},"created_at":"2019-11-06T08:57:16Z","updated_at":"2019-11-06T08:57:16Z","author_association":"NONE","body":"@kevinmkane Thanks for the good (target state) summary. What about phrasing it even shorter: **All (plain) openssl-enabled apps should build out-of-the-box if passed OQS-openssl in the typical '--with-openssl' config parameter pointing to OQSSL.** Would that what you'd be looking for?\r\n\r\nFWIW, I'm still digging into pkgconfig and autoconf to find out how to make this come to pass and suggested to @dstebila an API change that's also required for this. As a kind of stop-gap until that's achieved, I put some completely built oqssl development docker images on [Dockerhub](https://hub.docker.com) (search for openqsafe-***-dev) that facilitate pretty rapid building/'OQS-enabling' of normal openssl-based applications."}},"public":true,"created_at":"2019-11-06T08:57:16Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"10801205742","type":"IssueCommentEvent","actor":{"id":18724089,"login":"kevinmkane","display_login":"kevinmkane","gravatar_id":"","url":"https://api.github.com/users/kevinmkane","avatar_url":"https://avatars.githubusercontent.com/u/18724089?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/128","id":514122119,"node_id":"MDU6SXNzdWU1MTQxMjIxMTk=","number":128,"title":"Question: Cannot compile standard OpenSSL code using OQS-OpenSSL (already configured and installed)","user":{"login":"syrtap","id":9990094,"node_id":"MDQ6VXNlcjk5OTAwOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/9990094?v=4","gravatar_id":"","url":"https://api.github.com/users/syrtap","html_url":"https://github.com/syrtap","followers_url":"https://api.github.com/users/syrtap/followers","following_url":"https://api.github.com/users/syrtap/following{/other_user}","gists_url":"https://api.github.com/users/syrtap/gists{/gist_id}","starred_url":"https://api.github.com/users/syrtap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syrtap/subscriptions","organizations_url":"https://api.github.com/users/syrtap/orgs","repos_url":"https://api.github.com/users/syrtap/repos","events_url":"https://api.github.com/users/syrtap/events{/privacy}","received_events_url":"https://api.github.com/users/syrtap/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2019-10-29T18:12:02Z","updated_at":"2019-11-06T15:32:25Z","closed_at":null,"author_association":"NONE","body":"I have compiled OQS-OpenSSL on CentOS 7.7 using gcc 7.3.1 by following the instructions (First get OQS-OpenSSL, then build and install liboqs at the root of OQS-OpenSSL and finally build OQS-OpenSSL). \r\n\r\nEverything seems to work during the build process of OQS-OpenSSL, I've installed OQS-OpenSSL into \"/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0\"\r\n\r\n**Issue:**\r\nThe issue I get is when I try to compile code using standard OpenSSL is it complains that \"oqs/oqs.h\" couldn't be found. Indeed \"oqs/oqs.h\" is not installed when I issue a \"make install\" inside the OQS-OpenSSL directory.  Also the instructions doesn't tell to separately install liboqs outside of OQS-OpenSSL.\r\n\r\n**Here's my build process:**\r\n```\r\ncd /root/build/openssl/openssl-OpenSSL_1_1_1d && make clean ; ./Configure shared linux-x86_64 -lm --prefix=\"/usr/local/openssl-1.1.1d\" && make -j 4 && make install\r\ncd /root/build/liboqs/liboqs-0.2.0/ && autoreconf -i\r\ncd /root/build/liboqs/liboqs-0.2.0/ && make clean ; ./configure --enable-shared --prefix=\"/root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10//oqs\" --with-openssl=\"/usr/local/openssl-1.1.1d\" \"--disable-kem-bike\" && make -j 4 && make install\r\ncd /root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10/ && make clean ; ./Configure --prefix=\"/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0\" shared linux-x86_64 -lm && make -j 4 && make install\r\n```\r\nNow, when I try to build code that uses standard OpenSSL with OQS-OpenSSL I get this error (evp.h)\r\n\r\n**Error:**\r\n```\r\n/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0/include/openssl/evp.h:18:11: fatal error: oqs/oqs.h: No such file or directory\r\ninclude <oqs/oqs.h>\r\n       ^~~~~~~~~~~\r\ncompilation terminated.\r\nmake: *** [: OutboundTransferMgr.o] Error 1\r\n[ CHROOT ] bash-4.2$>\r\n```\r\n\r\n\r\n==> How should I use the OpenSSL fork when building software that uses OpenSSL?\r\nI have added \r\n```\r\n\"-I/root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10/oqs/include\"\r\n```\r\nto the Makefile so that \"oqs/oqs.h\" could resolve but I get other strange errors following this.\r\n\r\nThanks for your work here!  I appreciate it :)\r\n\r\nSylvain"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/550363329","html_url":"https://github.com/open-quantum-safe/openssl/issues/128#issuecomment-550363329","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128","id":550363329,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDM2MzMyOQ==","user":{"login":"kevinmkane","id":18724089,"node_id":"MDQ6VXNlcjE4NzI0MDg5","avatar_url":"https://avatars3.githubusercontent.com/u/18724089?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmkane","html_url":"https://github.com/kevinmkane","followers_url":"https://api.github.com/users/kevinmkane/followers","following_url":"https://api.github.com/users/kevinmkane/following{/other_user}","gists_url":"https://api.github.com/users/kevinmkane/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmkane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmkane/subscriptions","organizations_url":"https://api.github.com/users/kevinmkane/orgs","repos_url":"https://api.github.com/users/kevinmkane/repos","events_url":"https://api.github.com/users/kevinmkane/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmkane/received_events","type":"User","site_admin":false},"created_at":"2019-11-06T15:32:25Z","updated_at":"2019-11-06T15:32:25Z","author_association":"NONE","body":"@zrlmib Yes. That's what I'd be looking for as the ideal goal.\r\n\r\nIf you discover targeting plain OpenSSL-enabled apps is problematic for some reason, an acceptable fallback goal would be to make that true for OQS-aware apps.  In other words, the app author has to make some changes to use of OQSSL, but once done, that code should build anywhere OQSSL has been `make install`'d without requiring the presence of liboqs or OQSSL's source tree.\r\n"}},"public":true,"created_at":"2019-11-06T15:32:25Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"10804536486","type":"IssueCommentEvent","actor":{"id":16247285,"login":"christianpaquin","display_login":"christianpaquin","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","avatar_url":"https://avatars.githubusercontent.com/u/16247285?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/570","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/570/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/570/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/570/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/570","id":518751621,"node_id":"MDExOlB1bGxSZXF1ZXN0MzM3NTk1NDE2","number":570,"title":"OQS_SHA3_cshake128_simple4x only defined if both AES and AVX2 instructions available","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"assignees":[{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2019-11-06T20:53:28Z","updated_at":"2019-11-06T22:25:09Z","closed_at":null,"author_association":"MEMBER","pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/570","html_url":"https://github.com/open-quantum-safe/liboqs/pull/570","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/570.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/570.patch"},"body":"Got a bunch of build failures overnight in liboqs and relying applications, related to the function `OQS_SHA3_cshake128_simple4x` not being defined.  After diagnosing, I think it's because the sha3.h file wraps `OQS_SHA3_cshake128_simple4x` in `#if defined ` demanding AVX2 and AES instructions, but the qTesla Makefile only checks for AVX2 instructions before enabling the optimized version.  And unfortunately some of our CircleCI test platforms seem to have AVX2 but not AES.  So I propose just updating the qTesla Makefile to check for AVX2 and AES.  The alternative would be to change sha3.h to only demand AVX2, but I didn't know if the source code for that implementation actually depends on AES instructions or not."},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/550528773","html_url":"https://github.com/open-quantum-safe/liboqs/pull/570#issuecomment-550528773","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/570","id":550528773,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDUyODc3Mw==","user":{"login":"christianpaquin","id":16247285,"node_id":"MDQ6VXNlcjE2MjQ3Mjg1","avatar_url":"https://avatars0.githubusercontent.com/u/16247285?v=4","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"created_at":"2019-11-06T22:25:09Z","updated_at":"2019-11-06T22:25:09Z","author_association":"CONTRIBUTOR","body":"Looks good. You can merge."}},"public":true,"created_at":"2019-11-06T22:25:11Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
