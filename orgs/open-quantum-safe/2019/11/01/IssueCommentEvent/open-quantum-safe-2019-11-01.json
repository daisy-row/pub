{"id":"10767124009","type":"IssueCommentEvent","actor":{"id":21228961,"login":"xvzcf","display_login":"xvzcf","gravatar_id":"","url":"https://api.github.com/users/xvzcf","avatar_url":"https://avatars.githubusercontent.com/u/21228961?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/128","id":514122119,"node_id":"MDU6SXNzdWU1MTQxMjIxMTk=","number":128,"title":"Question: Cannot compile standard OpenSSL code using OQS-OpenSSL (already configured and installed)","user":{"login":"syrtap","id":9990094,"node_id":"MDQ6VXNlcjk5OTAwOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/9990094?v=4","gravatar_id":"","url":"https://api.github.com/users/syrtap","html_url":"https://github.com/syrtap","followers_url":"https://api.github.com/users/syrtap/followers","following_url":"https://api.github.com/users/syrtap/following{/other_user}","gists_url":"https://api.github.com/users/syrtap/gists{/gist_id}","starred_url":"https://api.github.com/users/syrtap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syrtap/subscriptions","organizations_url":"https://api.github.com/users/syrtap/orgs","repos_url":"https://api.github.com/users/syrtap/repos","events_url":"https://api.github.com/users/syrtap/events{/privacy}","received_events_url":"https://api.github.com/users/syrtap/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-10-29T18:12:02Z","updated_at":"2019-11-01T15:12:35Z","closed_at":null,"author_association":"NONE","body":"I have compiled OQS-OpenSSL on CentOS 7.7 using gcc 7.3.1 by following the instructions (First get OQS-OpenSSL, then build and install liboqs at the root of OQS-OpenSSL and finally build OQS-OpenSSL). \r\n\r\nEverything seems to work during the build process of OQS-OpenSSL, I've installed OQS-OpenSSL into \"/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0\"\r\n\r\n**Issue:**\r\nThe issue I get is when I try to compile code using standard OpenSSL is it complains that \"oqs/oqs.h\" couldn't be found. Indeed \"oqs/oqs.h\" is not installed when I issue a \"make install\" inside the OQS-OpenSSL directory.  Also the instructions doesn't tell to separately install liboqs outside of OQS-OpenSSL.\r\n\r\n**Here's my build process:**\r\n```\r\ncd /root/build/openssl/openssl-OpenSSL_1_1_1d && make clean ; ./Configure shared linux-x86_64 -lm --prefix=\"/usr/local/openssl-1.1.1d\" && make -j 4 && make install\r\ncd /root/build/liboqs/liboqs-0.2.0/ && autoreconf -i\r\ncd /root/build/liboqs/liboqs-0.2.0/ && make clean ; ./configure --enable-shared --prefix=\"/root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10//oqs\" --with-openssl=\"/usr/local/openssl-1.1.1d\" \"--disable-kem-bike\" && make -j 4 && make install\r\ncd /root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10/ && make clean ; ./Configure --prefix=\"/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0\" shared linux-x86_64 -lm && make -j 4 && make install\r\n```\r\nNow, when I try to build code that uses standard OpenSSL with OQS-OpenSSL I get this error (evp.h)\r\n\r\n**Error:**\r\n```\r\n/usr/local/1.1.1d-OQS-OpenSSL_1_1_1-stable_snapshot_2019-10-0.2.0/include/openssl/evp.h:18:11: fatal error: oqs/oqs.h: No such file or directory\r\ninclude <oqs/oqs.h>\r\n       ^~~~~~~~~~~\r\ncompilation terminated.\r\nmake: *** [: OutboundTransferMgr.o] Error 1\r\n[ CHROOT ] bash-4.2$>\r\n```\r\n\r\n\r\n==> How should I use the OpenSSL fork when building software that uses OpenSSL?\r\nI have added \r\n```\r\n\"-I/root/build/openssloqs/openssl-OQS-OpenSSL_1_1_1-stable-snapshot-2019-10/oqs/include\"\r\n```\r\nto the Makefile so that \"oqs/oqs.h\" could resolve but I get other strange errors following this.\r\n\r\nThanks for your work here!  I appreciate it :)\r\n\r\nSylvain"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/548825263","html_url":"https://github.com/open-quantum-safe/openssl/issues/128#issuecomment-548825263","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/128","id":548825263,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODgyNTI2Mw==","user":{"login":"xvzcf","id":21228961,"node_id":"MDQ6VXNlcjIxMjI4OTYx","avatar_url":"https://avatars3.githubusercontent.com/u/21228961?v=4","gravatar_id":"","url":"https://api.github.com/users/xvzcf","html_url":"https://github.com/xvzcf","followers_url":"https://api.github.com/users/xvzcf/followers","following_url":"https://api.github.com/users/xvzcf/following{/other_user}","gists_url":"https://api.github.com/users/xvzcf/gists{/gist_id}","starred_url":"https://api.github.com/users/xvzcf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvzcf/subscriptions","organizations_url":"https://api.github.com/users/xvzcf/orgs","repos_url":"https://api.github.com/users/xvzcf/repos","events_url":"https://api.github.com/users/xvzcf/events{/privacy}","received_events_url":"https://api.github.com/users/xvzcf/received_events","type":"User","site_admin":false},"created_at":"2019-11-01T15:12:35Z","updated_at":"2019-11-01T15:12:35Z","author_association":"MEMBER","body":"I've deleted the link that @zrlmib gave. If (as @zrlmib stated) you intend to build OpenSSL-dependant software against the OQS-OpenSSL fork, then the Dockerfiles that do so for [apache](https://github.com/open-quantum-safe/oqs-software/blob/0d2dbd756dc731ffa9ce1bf45ff4f910093da881/httpd/Dockerfile) and [nginx](https://github.com/open-quantum-safe/oqs-software/blob/master/nginx/Dockerfile) might be of some help. "}},"public":true,"created_at":"2019-11-01T15:12:36Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
