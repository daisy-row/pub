{"id":"5251682249","type":"PullRequestReviewCommentEvent","actor":{"id":16247285,"login":"christianpaquin","display_login":"christianpaquin","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","avatar_url":"https://avatars.githubusercontent.com/u/16247285?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments/99031357","pull_request_review_id":19693569,"id":99031357,"diff_hunk":"@@ -0,0 +1,138 @@\n+/**\n+ * \\file sig.h\n+ * \\brief Header defining the API for generic OQS Signature\n+ */\n+\n+#ifndef __OQS_SIG_H\n+#define __OQS_SIG_H\n+\n+#include <stddef.h>\n+#include <stdint.h>\n+\n+#include <oqs/rand.h>\n+\n+enum OQS_SIG_alg_name {\n+\tOQS_SIG_alg_default,\n+};\n+\n+typedef struct OQS_SIG OQS_SIG;\n+\n+/**\n+ * OQS signature object\n+ */\n+typedef struct OQS_SIG {\n+\n+\t/**\n+\t * PRNG\n+\t */\n+\tOQS_RAND *rand;\n+\n+\t/**\n+\t * Specifies the name of the sig method\n+\t */\n+\tchar *method_name;\n+\n+\t/**\n+\t * Classical security in terms of the number of bits provided by the\n+\t * signature method.\n+\t */\n+\tuint16_t estimated_classical_security;\n+\n+\t/**\n+\t *  Equivalent quantum security in terms of the number of bits provided by the\n+\t *  signature method.\n+\t */\n+\tuint16_t estimated_quantum_security;\n+\n+\t/**\n+\t *  Private key length.\n+\t */\n+\tuint16_t priv_key_len;\n+\n+\t/**\n+\t *  Public key length.\n+\t */\n+\tuint16_t pub_key_len;\n+\n+\t/**\n+\t *  Maximum signature length.\n+\t */\n+\tuint16_t max_sig_len;\n+\n+\t/**\n+\t * Named parameters for this key exchange method instance, if any.\n+\t */\n+\tchar *named_parameters;\n+\n+\t/**\n+\t * Opaque pointer for passing around instance-specific data\n+\t */\n+\tvoid *params;\n+\n+\t/**\n+\t * Opaque pointer for passing around any computation context\n+\t */\n+\tvoid *ctx;\n+\n+\t/**\n+\t * Pointer to a function for public and private signature key generation.\n+\t *\n+\t * @param s                Signature structure\n+\t * @param priv             The private key\n+\t * @param pub              The public key\n+\t * @return                 1 on success, or 0 on failure\n+\t */\n+\tint (*keygen)(const OQS_SIG *s, uint8_t **priv, uint8_t **pub);\n+\n+\t/**\n+\t * Pointer to a function for signature generation.\n+\t *\n+\t * @param s                Signature structure\n+\t * @param priv             The signer's private key\n+\t * @param msg              The message to sign\n+\t * @param msg_len          Length of the message to sign\n+\t * @param sig              The generated signature\n+\t * @param sig_len          Length of the generated signature\n+\t * @return                 1 on success, or 0 on failure\n+\t */\n+\tint (*sign)(const OQS_SIG *s, const uint8_t *priv, const uint8_t *msg, const size_t msg_len, uint8_t **sig, size_t *sig_len);\n+\n+\t/**\n+\t * Pointer to a function for signature verification.\n+\t *\n+\t * @param s                Signature structure\n+\t * @param pub              The signer's public key\n+\t * @param msg              The signed message\n+\t * @param msg_len          Length of the signed message\n+\t * @param sig              The signature to verify\n+\t * @param sig_len          Length of the signature to verify\n+\t * @return                 1 on success, or 0 on failure\n+\t */\n+\tint (*verify)(const OQS_SIG *s, const uint8_t *pub, const uint8_t *msg, const size_t msg_len, const uint8_t *sig, const size_t sig_len);\n+\n+\t/**\n+\t * Pointer to a function for freeing the allocated signature structure\n+\t *\n+\t * @param s                Signature structure\n+\t */\n+\tvoid (*free)(OQS_SIG *s);\n+\n+} OQS_SIG;\n+\n+/**\n+ * Allocate a new signature object.\n+ *\n+ * @param rand               Random number generator.\n+ * @param alg_name           Algorithm to be instantiated\n+ * @param named_parameters   Name or description of method-specific parameters\n+ *                           to use for this instance (as a NULL-terminated C string),\n+ *                           if any, or NULL.\n+ * @return                   The object on success, or NULL on failure.\n+ */\n+OQS_SIG *OQS_SIG_new(OQS_RAND *rand, enum OQS_SIG_alg_name alg_name, const char *named_parameters);\n+int OQS_SIG_keygen(const OQS_SIG *s, uint8_t **priv, uint8_t **pub);\n+int OQS_SIG_sign(const OQS_SIG *s, const uint8_t *priv, const uint8_t *msg, const size_t msg_len, uint8_t **sig, size_t *sig_len);\n+int OQS_SIG_verify(const OQS_SIG *s, const uint8_t *pub, const uint8_t *msg, const size_t msg_len, const uint8_t *sig, const size_t sig_len);\n+void OQS_SIG_free(OQS_SIG *s);","path":"src/sig/sig.h","position":136,"original_position":136,"commit_id":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","original_commit_id":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","user":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"body":"method_name is typically allocated with strdup and must be freed through OQS_SIG_free.","created_at":"2017-02-02T00:38:04Z","updated_at":"2017-02-02T00:38:04Z","html_url":"https://github.com/open-quantum-safe/liboqs/pull/92#discussion_r99031357","pull_request_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92","_links":{"self":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments/99031357"},"html":{"href":"https://github.com/open-quantum-safe/liboqs/pull/92#discussion_r99031357"},"pull_request":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92"}}},"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92","id":103161760,"html_url":"https://github.com/open-quantum-safe/liboqs/pull/92","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/92.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/92.patch","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92","number":92,"state":"open","locked":false,"title":"Add signature API (proposal)","user":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"body":"Following discussion on pull request #14, here is a suggested API for signing. No scheme has been integrated yet. If the team agrees, I'll start work on integrating one.\r\n\r\nOne open question is what to do with stateful schemes, such as XMSS, that do not adhere with a conventional signature API. Since the main goal of OQS is to compare PQ schemes, it is useful to include them (like XMSS in pull request #79) even if there are limitations on usage of the private key. (NIST for example [suggests](http://csrc.nist.gov/groups/ST/post-quantum-crypto/faq.html#Q2) to define specific use cases for stateful schemes). One option is to not expose the state through the API, and simply return an error if the key is now unusable (this could be sufficient for comparison testing, but insecure for a real-application). The alternative would be to expose the state through the API (and that might still not be sufficient enough for security, to deal with state reset attacks). Thoughts?","created_at":"2017-01-25T17:06:53Z","updated_at":"2017-02-02T00:38:04Z","closed_at":null,"merged_at":null,"merge_commit_sha":"61669c238f24aadf37f27ab3f8f6c70cc7493b7f","assignee":null,"assignees":[],"milestone":null,"commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/commits","review_comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/comments","review_comment_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments{/number}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92/comments","statuses_url":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","head":{"label":"christianpaquin:add-sig-api","ref":"add-sig-api","sha":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","user":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"repo":{"id":68381142,"name":"liboqs","full_name":"christianpaquin/liboqs","owner":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/christianpaquin/liboqs","description":"C library for quantum-safe cryptographic algorithms","fork":true,"url":"https://api.github.com/repos/christianpaquin/liboqs","forks_url":"https://api.github.com/repos/christianpaquin/liboqs/forks","keys_url":"https://api.github.com/repos/christianpaquin/liboqs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/christianpaquin/liboqs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/christianpaquin/liboqs/teams","hooks_url":"https://api.github.com/repos/christianpaquin/liboqs/hooks","issue_events_url":"https://api.github.com/repos/christianpaquin/liboqs/issues/events{/number}","events_url":"https://api.github.com/repos/christianpaquin/liboqs/events","assignees_url":"https://api.github.com/repos/christianpaquin/liboqs/assignees{/user}","branches_url":"https://api.github.com/repos/christianpaquin/liboqs/branches{/branch}","tags_url":"https://api.github.com/repos/christianpaquin/liboqs/tags","blobs_url":"https://api.github.com/repos/christianpaquin/liboqs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/christianpaquin/liboqs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/christianpaquin/liboqs/git/refs{/sha}","trees_url":"https://api.github.com/repos/christianpaquin/liboqs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/christianpaquin/liboqs/statuses/{sha}","languages_url":"https://api.github.com/repos/christianpaquin/liboqs/languages","stargazers_url":"https://api.github.com/repos/christianpaquin/liboqs/stargazers","contributors_url":"https://api.github.com/repos/christianpaquin/liboqs/contributors","subscribers_url":"https://api.github.com/repos/christianpaquin/liboqs/subscribers","subscription_url":"https://api.github.com/repos/christianpaquin/liboqs/subscription","commits_url":"https://api.github.com/repos/christianpaquin/liboqs/commits{/sha}","git_commits_url":"https://api.github.com/repos/christianpaquin/liboqs/git/commits{/sha}","comments_url":"https://api.github.com/repos/christianpaquin/liboqs/comments{/number}","issue_comment_url":"https://api.github.com/repos/christianpaquin/liboqs/issues/comments{/number}","contents_url":"https://api.github.com/repos/christianpaquin/liboqs/contents/{+path}","compare_url":"https://api.github.com/repos/christianpaquin/liboqs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/christianpaquin/liboqs/merges","archive_url":"https://api.github.com/repos/christianpaquin/liboqs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/christianpaquin/liboqs/downloads","issues_url":"https://api.github.com/repos/christianpaquin/liboqs/issues{/number}","pulls_url":"https://api.github.com/repos/christianpaquin/liboqs/pulls{/number}","milestones_url":"https://api.github.com/repos/christianpaquin/liboqs/milestones{/number}","notifications_url":"https://api.github.com/repos/christianpaquin/liboqs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/christianpaquin/liboqs/labels{/name}","releases_url":"https://api.github.com/repos/christianpaquin/liboqs/releases{/id}","deployments_url":"https://api.github.com/repos/christianpaquin/liboqs/deployments","created_at":"2016-09-16T13:16:37Z","updated_at":"2016-09-16T13:16:38Z","pushed_at":"2017-01-30T19:04:00Z","git_url":"git://github.com/christianpaquin/liboqs.git","ssh_url":"git@github.com:christianpaquin/liboqs.git","clone_url":"https://github.com/christianpaquin/liboqs.git","svn_url":"https://github.com/christianpaquin/liboqs","homepage":"","size":404,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"open_issues_count":0,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"open-quantum-safe:master","ref":"master","sha":"810651c4d21d6b843bb06893e9c8d31606274301","user":{"login":"open-quantum-safe","id":20689385,"avatar_url":"https://avatars.githubusercontent.com/u/20689385?v=3","gravatar_id":"","url":"https://api.github.com/users/open-quantum-safe","html_url":"https://github.com/open-quantum-safe","followers_url":"https://api.github.com/users/open-quantum-safe/followers","following_url":"https://api.github.com/users/open-quantum-safe/following{/other_user}","gists_url":"https://api.github.com/users/open-quantum-safe/gists{/gist_id}","starred_url":"https://api.github.com/users/open-quantum-safe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/open-quantum-safe/subscriptions","organizations_url":"https://api.github.com/users/open-quantum-safe/orgs","repos_url":"https://api.github.com/users/open-quantum-safe/repos","events_url":"https://api.github.com/users/open-quantum-safe/events{/privacy}","received_events_url":"https://api.github.com/users/open-quantum-safe/received_events","type":"Organization","site_admin":false},"repo":{"id":65514205,"name":"liboqs","full_name":"open-quantum-safe/liboqs","owner":{"login":"open-quantum-safe","id":20689385,"avatar_url":"https://avatars.githubusercontent.com/u/20689385?v=3","gravatar_id":"","url":"https://api.github.com/users/open-quantum-safe","html_url":"https://github.com/open-quantum-safe","followers_url":"https://api.github.com/users/open-quantum-safe/followers","following_url":"https://api.github.com/users/open-quantum-safe/following{/other_user}","gists_url":"https://api.github.com/users/open-quantum-safe/gists{/gist_id}","starred_url":"https://api.github.com/users/open-quantum-safe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/open-quantum-safe/subscriptions","organizations_url":"https://api.github.com/users/open-quantum-safe/orgs","repos_url":"https://api.github.com/users/open-quantum-safe/repos","events_url":"https://api.github.com/users/open-quantum-safe/events{/privacy}","received_events_url":"https://api.github.com/users/open-quantum-safe/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/open-quantum-safe/liboqs","description":"C library for quantum-resistant cryptographic algorithms.","fork":false,"url":"https://api.github.com/repos/open-quantum-safe/liboqs","forks_url":"https://api.github.com/repos/open-quantum-safe/liboqs/forks","keys_url":"https://api.github.com/repos/open-quantum-safe/liboqs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/open-quantum-safe/liboqs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/open-quantum-safe/liboqs/teams","hooks_url":"https://api.github.com/repos/open-quantum-safe/liboqs/hooks","issue_events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/events{/number}","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/events","assignees_url":"https://api.github.com/repos/open-quantum-safe/liboqs/assignees{/user}","branches_url":"https://api.github.com/repos/open-quantum-safe/liboqs/branches{/branch}","tags_url":"https://api.github.com/repos/open-quantum-safe/liboqs/tags","blobs_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/refs{/sha}","trees_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/{sha}","languages_url":"https://api.github.com/repos/open-quantum-safe/liboqs/languages","stargazers_url":"https://api.github.com/repos/open-quantum-safe/liboqs/stargazers","contributors_url":"https://api.github.com/repos/open-quantum-safe/liboqs/contributors","subscribers_url":"https://api.github.com/repos/open-quantum-safe/liboqs/subscribers","subscription_url":"https://api.github.com/repos/open-quantum-safe/liboqs/subscription","commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/commits{/sha}","git_commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/commits{/sha}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/comments{/number}","issue_comment_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments{/number}","contents_url":"https://api.github.com/repos/open-quantum-safe/liboqs/contents/{+path}","compare_url":"https://api.github.com/repos/open-quantum-safe/liboqs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/open-quantum-safe/liboqs/merges","archive_url":"https://api.github.com/repos/open-quantum-safe/liboqs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/open-quantum-safe/liboqs/downloads","issues_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues{/number}","pulls_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls{/number}","milestones_url":"https://api.github.com/repos/open-quantum-safe/liboqs/milestones{/number}","notifications_url":"https://api.github.com/repos/open-quantum-safe/liboqs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels{/name}","releases_url":"https://api.github.com/repos/open-quantum-safe/liboqs/releases{/id}","deployments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/deployments","created_at":"2016-08-12T01:46:12Z","updated_at":"2017-02-01T17:45:40Z","pushed_at":"2017-02-01T21:08:23Z","git_url":"git://github.com/open-quantum-safe/liboqs.git","ssh_url":"git@github.com:open-quantum-safe/liboqs.git","clone_url":"https://github.com/open-quantum-safe/liboqs.git","svn_url":"https://github.com/open-quantum-safe/liboqs","homepage":"https://openquantumsafe.org/","size":1311,"stargazers_count":68,"watchers_count":68,"language":"C","has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":13,"mirror_url":null,"open_issues_count":14,"forks":13,"open_issues":14,"watchers":68,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92"},"html":{"href":"https://github.com/open-quantum-safe/liboqs/pull/92"},"issue":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92"},"comments":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92/comments"},"review_comments":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/comments"},"review_comment":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/commits"},"statuses":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7"}}}},"public":true,"created_at":"2017-02-02T00:38:04Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"5252991971","type":"PullRequestReviewCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments/99065972","pull_request_review_id":19727625,"id":99065972,"diff_hunk":"@@ -0,0 +1,138 @@\n+/**\n+ * \\file sig.h\n+ * \\brief Header defining the API for generic OQS Signature\n+ */\n+\n+#ifndef __OQS_SIG_H\n+#define __OQS_SIG_H\n+\n+#include <stddef.h>\n+#include <stdint.h>\n+\n+#include <oqs/rand.h>\n+\n+enum OQS_SIG_alg_name {\n+\tOQS_SIG_alg_default,\n+};\n+\n+typedef struct OQS_SIG OQS_SIG;\n+\n+/**\n+ * OQS signature object\n+ */\n+typedef struct OQS_SIG {\n+\n+\t/**\n+\t * PRNG\n+\t */\n+\tOQS_RAND *rand;\n+\n+\t/**\n+\t * Specifies the name of the sig method\n+\t */\n+\tchar *method_name;\n+\n+\t/**\n+\t * Classical security in terms of the number of bits provided by the\n+\t * signature method.\n+\t */\n+\tuint16_t estimated_classical_security;\n+\n+\t/**\n+\t *  Equivalent quantum security in terms of the number of bits provided by the\n+\t *  signature method.\n+\t */\n+\tuint16_t estimated_quantum_security;\n+\n+\t/**\n+\t *  Private key length.\n+\t */\n+\tuint16_t priv_key_len;\n+\n+\t/**\n+\t *  Public key length.\n+\t */\n+\tuint16_t pub_key_len;\n+\n+\t/**\n+\t *  Maximum signature length.\n+\t */\n+\tuint16_t max_sig_len;\n+\n+\t/**\n+\t * Named parameters for this key exchange method instance, if any.\n+\t */\n+\tchar *named_parameters;\n+\n+\t/**\n+\t * Opaque pointer for passing around instance-specific data\n+\t */\n+\tvoid *params;\n+\n+\t/**\n+\t * Opaque pointer for passing around any computation context\n+\t */\n+\tvoid *ctx;\n+\n+\t/**\n+\t * Pointer to a function for public and private signature key generation.\n+\t *\n+\t * @param s                Signature structure\n+\t * @param priv             The private key\n+\t * @param pub              The public key\n+\t * @return                 1 on success, or 0 on failure\n+\t */\n+\tint (*keygen)(const OQS_SIG *s, uint8_t **priv, uint8_t **pub);\n+\n+\t/**\n+\t * Pointer to a function for signature generation.\n+\t *\n+\t * @param s                Signature structure\n+\t * @param priv             The signer's private key\n+\t * @param msg              The message to sign\n+\t * @param msg_len          Length of the message to sign\n+\t * @param sig              The generated signature\n+\t * @param sig_len          Length of the generated signature\n+\t * @return                 1 on success, or 0 on failure\n+\t */\n+\tint (*sign)(const OQS_SIG *s, const uint8_t *priv, const uint8_t *msg, const size_t msg_len, uint8_t **sig, size_t *sig_len);\n+\n+\t/**\n+\t * Pointer to a function for signature verification.\n+\t *\n+\t * @param s                Signature structure\n+\t * @param pub              The signer's public key\n+\t * @param msg              The signed message\n+\t * @param msg_len          Length of the signed message\n+\t * @param sig              The signature to verify\n+\t * @param sig_len          Length of the signature to verify\n+\t * @return                 1 on success, or 0 on failure\n+\t */\n+\tint (*verify)(const OQS_SIG *s, const uint8_t *pub, const uint8_t *msg, const size_t msg_len, const uint8_t *sig, const size_t sig_len);\n+\n+\t/**\n+\t * Pointer to a function for freeing the allocated signature structure\n+\t *\n+\t * @param s                Signature structure\n+\t */\n+\tvoid (*free)(OQS_SIG *s);\n+\n+} OQS_SIG;\n+\n+/**\n+ * Allocate a new signature object.\n+ *\n+ * @param rand               Random number generator.\n+ * @param alg_name           Algorithm to be instantiated\n+ * @param named_parameters   Name or description of method-specific parameters\n+ *                           to use for this instance (as a NULL-terminated C string),\n+ *                           if any, or NULL.\n+ * @return                   The object on success, or NULL on failure.\n+ */\n+OQS_SIG *OQS_SIG_new(OQS_RAND *rand, enum OQS_SIG_alg_name alg_name, const char *named_parameters);\n+int OQS_SIG_keygen(const OQS_SIG *s, uint8_t **priv, uint8_t **pub);\n+int OQS_SIG_sign(const OQS_SIG *s, const uint8_t *priv, const uint8_t *msg, const size_t msg_len, uint8_t **sig, size_t *sig_len);\n+int OQS_SIG_verify(const OQS_SIG *s, const uint8_t *pub, const uint8_t *msg, const size_t msg_len, const uint8_t *sig, const size_t sig_len);\n+void OQS_SIG_free(OQS_SIG *s);","path":"src/sig/sig.h","position":136,"original_position":136,"commit_id":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","original_commit_id":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","user":{"login":"dstebila","id":8843219,"avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=3","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"body":"If we're allocating OQS_SIG statically, can't we just say \r\n~~~\r\nOQS_SIGN OQS_SIGN_douglas_awesome = {\r\n\t\"Douglas' signature scheme, awesome security level\",\r\n\t512, // estimated_classical_security\r\n\t256, // estimated_quantum_security\r\n\t1024, // private key length\r\n\t2048, // public key length\r\n\t3072, // max signature length\r\n\t&OQS_SIGN_douglas_awesome_keygen,\r\n\t&OQS_SIGN_douglas_awesome_sign,\r\n\t&OQS_SIGN_douglas_awesome_verify\r\n};\r\n~~~\r\n\r\nThis wouldn't have any dynamic allocation.","created_at":"2017-02-02T07:49:07Z","updated_at":"2017-02-02T07:49:07Z","html_url":"https://github.com/open-quantum-safe/liboqs/pull/92#discussion_r99065972","pull_request_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92","_links":{"self":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments/99065972"},"html":{"href":"https://github.com/open-quantum-safe/liboqs/pull/92#discussion_r99065972"},"pull_request":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92"}}},"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92","id":103161760,"html_url":"https://github.com/open-quantum-safe/liboqs/pull/92","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/92.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/92.patch","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92","number":92,"state":"open","locked":false,"title":"Add signature API (proposal)","user":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"body":"Following discussion on pull request #14, here is a suggested API for signing. No scheme has been integrated yet. If the team agrees, I'll start work on integrating one.\r\n\r\nOne open question is what to do with stateful schemes, such as XMSS, that do not adhere with a conventional signature API. Since the main goal of OQS is to compare PQ schemes, it is useful to include them (like XMSS in pull request #79) even if there are limitations on usage of the private key. (NIST for example [suggests](http://csrc.nist.gov/groups/ST/post-quantum-crypto/faq.html#Q2) to define specific use cases for stateful schemes). One option is to not expose the state through the API, and simply return an error if the key is now unusable (this could be sufficient for comparison testing, but insecure for a real-application). The alternative would be to expose the state through the API (and that might still not be sufficient enough for security, to deal with state reset attacks). Thoughts?","created_at":"2017-01-25T17:06:53Z","updated_at":"2017-02-02T07:49:07Z","closed_at":null,"merged_at":null,"merge_commit_sha":"61669c238f24aadf37f27ab3f8f6c70cc7493b7f","assignee":null,"assignees":[],"milestone":null,"commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/commits","review_comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/comments","review_comment_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments{/number}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92/comments","statuses_url":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","head":{"label":"christianpaquin:add-sig-api","ref":"add-sig-api","sha":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","user":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"repo":{"id":68381142,"name":"liboqs","full_name":"christianpaquin/liboqs","owner":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/christianpaquin/liboqs","description":"C library for quantum-safe cryptographic algorithms","fork":true,"url":"https://api.github.com/repos/christianpaquin/liboqs","forks_url":"https://api.github.com/repos/christianpaquin/liboqs/forks","keys_url":"https://api.github.com/repos/christianpaquin/liboqs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/christianpaquin/liboqs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/christianpaquin/liboqs/teams","hooks_url":"https://api.github.com/repos/christianpaquin/liboqs/hooks","issue_events_url":"https://api.github.com/repos/christianpaquin/liboqs/issues/events{/number}","events_url":"https://api.github.com/repos/christianpaquin/liboqs/events","assignees_url":"https://api.github.com/repos/christianpaquin/liboqs/assignees{/user}","branches_url":"https://api.github.com/repos/christianpaquin/liboqs/branches{/branch}","tags_url":"https://api.github.com/repos/christianpaquin/liboqs/tags","blobs_url":"https://api.github.com/repos/christianpaquin/liboqs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/christianpaquin/liboqs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/christianpaquin/liboqs/git/refs{/sha}","trees_url":"https://api.github.com/repos/christianpaquin/liboqs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/christianpaquin/liboqs/statuses/{sha}","languages_url":"https://api.github.com/repos/christianpaquin/liboqs/languages","stargazers_url":"https://api.github.com/repos/christianpaquin/liboqs/stargazers","contributors_url":"https://api.github.com/repos/christianpaquin/liboqs/contributors","subscribers_url":"https://api.github.com/repos/christianpaquin/liboqs/subscribers","subscription_url":"https://api.github.com/repos/christianpaquin/liboqs/subscription","commits_url":"https://api.github.com/repos/christianpaquin/liboqs/commits{/sha}","git_commits_url":"https://api.github.com/repos/christianpaquin/liboqs/git/commits{/sha}","comments_url":"https://api.github.com/repos/christianpaquin/liboqs/comments{/number}","issue_comment_url":"https://api.github.com/repos/christianpaquin/liboqs/issues/comments{/number}","contents_url":"https://api.github.com/repos/christianpaquin/liboqs/contents/{+path}","compare_url":"https://api.github.com/repos/christianpaquin/liboqs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/christianpaquin/liboqs/merges","archive_url":"https://api.github.com/repos/christianpaquin/liboqs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/christianpaquin/liboqs/downloads","issues_url":"https://api.github.com/repos/christianpaquin/liboqs/issues{/number}","pulls_url":"https://api.github.com/repos/christianpaquin/liboqs/pulls{/number}","milestones_url":"https://api.github.com/repos/christianpaquin/liboqs/milestones{/number}","notifications_url":"https://api.github.com/repos/christianpaquin/liboqs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/christianpaquin/liboqs/labels{/name}","releases_url":"https://api.github.com/repos/christianpaquin/liboqs/releases{/id}","deployments_url":"https://api.github.com/repos/christianpaquin/liboqs/deployments","created_at":"2016-09-16T13:16:37Z","updated_at":"2016-09-16T13:16:38Z","pushed_at":"2017-01-30T19:04:00Z","git_url":"git://github.com/christianpaquin/liboqs.git","ssh_url":"git@github.com:christianpaquin/liboqs.git","clone_url":"https://github.com/christianpaquin/liboqs.git","svn_url":"https://github.com/christianpaquin/liboqs","homepage":"","size":404,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"open_issues_count":0,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"open-quantum-safe:master","ref":"master","sha":"810651c4d21d6b843bb06893e9c8d31606274301","user":{"login":"open-quantum-safe","id":20689385,"avatar_url":"https://avatars.githubusercontent.com/u/20689385?v=3","gravatar_id":"","url":"https://api.github.com/users/open-quantum-safe","html_url":"https://github.com/open-quantum-safe","followers_url":"https://api.github.com/users/open-quantum-safe/followers","following_url":"https://api.github.com/users/open-quantum-safe/following{/other_user}","gists_url":"https://api.github.com/users/open-quantum-safe/gists{/gist_id}","starred_url":"https://api.github.com/users/open-quantum-safe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/open-quantum-safe/subscriptions","organizations_url":"https://api.github.com/users/open-quantum-safe/orgs","repos_url":"https://api.github.com/users/open-quantum-safe/repos","events_url":"https://api.github.com/users/open-quantum-safe/events{/privacy}","received_events_url":"https://api.github.com/users/open-quantum-safe/received_events","type":"Organization","site_admin":false},"repo":{"id":65514205,"name":"liboqs","full_name":"open-quantum-safe/liboqs","owner":{"login":"open-quantum-safe","id":20689385,"avatar_url":"https://avatars.githubusercontent.com/u/20689385?v=3","gravatar_id":"","url":"https://api.github.com/users/open-quantum-safe","html_url":"https://github.com/open-quantum-safe","followers_url":"https://api.github.com/users/open-quantum-safe/followers","following_url":"https://api.github.com/users/open-quantum-safe/following{/other_user}","gists_url":"https://api.github.com/users/open-quantum-safe/gists{/gist_id}","starred_url":"https://api.github.com/users/open-quantum-safe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/open-quantum-safe/subscriptions","organizations_url":"https://api.github.com/users/open-quantum-safe/orgs","repos_url":"https://api.github.com/users/open-quantum-safe/repos","events_url":"https://api.github.com/users/open-quantum-safe/events{/privacy}","received_events_url":"https://api.github.com/users/open-quantum-safe/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/open-quantum-safe/liboqs","description":"C library for quantum-resistant cryptographic algorithms.","fork":false,"url":"https://api.github.com/repos/open-quantum-safe/liboqs","forks_url":"https://api.github.com/repos/open-quantum-safe/liboqs/forks","keys_url":"https://api.github.com/repos/open-quantum-safe/liboqs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/open-quantum-safe/liboqs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/open-quantum-safe/liboqs/teams","hooks_url":"https://api.github.com/repos/open-quantum-safe/liboqs/hooks","issue_events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/events{/number}","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/events","assignees_url":"https://api.github.com/repos/open-quantum-safe/liboqs/assignees{/user}","branches_url":"https://api.github.com/repos/open-quantum-safe/liboqs/branches{/branch}","tags_url":"https://api.github.com/repos/open-quantum-safe/liboqs/tags","blobs_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/refs{/sha}","trees_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/{sha}","languages_url":"https://api.github.com/repos/open-quantum-safe/liboqs/languages","stargazers_url":"https://api.github.com/repos/open-quantum-safe/liboqs/stargazers","contributors_url":"https://api.github.com/repos/open-quantum-safe/liboqs/contributors","subscribers_url":"https://api.github.com/repos/open-quantum-safe/liboqs/subscribers","subscription_url":"https://api.github.com/repos/open-quantum-safe/liboqs/subscription","commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/commits{/sha}","git_commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/commits{/sha}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/comments{/number}","issue_comment_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments{/number}","contents_url":"https://api.github.com/repos/open-quantum-safe/liboqs/contents/{+path}","compare_url":"https://api.github.com/repos/open-quantum-safe/liboqs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/open-quantum-safe/liboqs/merges","archive_url":"https://api.github.com/repos/open-quantum-safe/liboqs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/open-quantum-safe/liboqs/downloads","issues_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues{/number}","pulls_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls{/number}","milestones_url":"https://api.github.com/repos/open-quantum-safe/liboqs/milestones{/number}","notifications_url":"https://api.github.com/repos/open-quantum-safe/liboqs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels{/name}","releases_url":"https://api.github.com/repos/open-quantum-safe/liboqs/releases{/id}","deployments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/deployments","created_at":"2016-08-12T01:46:12Z","updated_at":"2017-02-01T17:45:40Z","pushed_at":"2017-02-01T21:08:23Z","git_url":"git://github.com/open-quantum-safe/liboqs.git","ssh_url":"git@github.com:open-quantum-safe/liboqs.git","clone_url":"https://github.com/open-quantum-safe/liboqs.git","svn_url":"https://github.com/open-quantum-safe/liboqs","homepage":"https://openquantumsafe.org/","size":1311,"stargazers_count":68,"watchers_count":68,"language":"C","has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":13,"mirror_url":null,"open_issues_count":14,"forks":13,"open_issues":14,"watchers":68,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92"},"html":{"href":"https://github.com/open-quantum-safe/liboqs/pull/92"},"issue":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92"},"comments":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92/comments"},"review_comments":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/comments"},"review_comment":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/commits"},"statuses":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7"}}}},"public":true,"created_at":"2017-02-02T07:49:07Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"5252997639","type":"PullRequestReviewCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments/99066143","pull_request_review_id":19727796,"id":99066143,"diff_hunk":"@@ -0,0 +1,138 @@\n+/**\n+ * \\file sig.h\n+ * \\brief Header defining the API for generic OQS Signature\n+ */\n+\n+#ifndef __OQS_SIG_H\n+#define __OQS_SIG_H\n+\n+#include <stddef.h>\n+#include <stdint.h>\n+\n+#include <oqs/rand.h>\n+\n+enum OQS_SIG_alg_name {\n+\tOQS_SIG_alg_default,\n+};\n+\n+typedef struct OQS_SIG OQS_SIG;\n+\n+/**\n+ * OQS signature object\n+ */\n+typedef struct OQS_SIG {\n+\n+\t/**\n+\t * PRNG\n+\t */\n+\tOQS_RAND *rand;\n+\n+\t/**\n+\t * Specifies the name of the sig method\n+\t */\n+\tchar *method_name;\n+\n+\t/**\n+\t * Classical security in terms of the number of bits provided by the\n+\t * signature method.\n+\t */\n+\tuint16_t estimated_classical_security;\n+\n+\t/**\n+\t *  Equivalent quantum security in terms of the number of bits provided by the\n+\t *  signature method.\n+\t */\n+\tuint16_t estimated_quantum_security;\n+\n+\t/**\n+\t *  Private key length.\n+\t */\n+\tuint16_t priv_key_len;\n+\n+\t/**\n+\t *  Public key length.\n+\t */\n+\tuint16_t pub_key_len;\n+\n+\t/**\n+\t *  Maximum signature length.\n+\t */\n+\tuint16_t max_sig_len;\n+\n+\t/**\n+\t * Named parameters for this key exchange method instance, if any.\n+\t */\n+\tchar *named_parameters;\n+\n+\t/**\n+\t * Opaque pointer for passing around instance-specific data\n+\t */\n+\tvoid *params;\n+\n+\t/**\n+\t * Opaque pointer for passing around any computation context\n+\t */\n+\tvoid *ctx;\n+\n+\t/**\n+\t * Pointer to a function for public and private signature key generation.\n+\t *\n+\t * @param s                Signature structure\n+\t * @param priv             The private key\n+\t * @param pub              The public key\n+\t * @return                 1 on success, or 0 on failure\n+\t */\n+\tint (*keygen)(const OQS_SIG *s, uint8_t **priv, uint8_t **pub);\n+\n+\t/**\n+\t * Pointer to a function for signature generation.\n+\t *\n+\t * @param s                Signature structure\n+\t * @param priv             The signer's private key\n+\t * @param msg              The message to sign\n+\t * @param msg_len          Length of the message to sign\n+\t * @param sig              The generated signature\n+\t * @param sig_len          Length of the generated signature\n+\t * @return                 1 on success, or 0 on failure\n+\t */\n+\tint (*sign)(const OQS_SIG *s, const uint8_t *priv, const uint8_t *msg, const size_t msg_len, uint8_t **sig, size_t *sig_len);","path":"src/sig/sig.h","position":98,"original_position":98,"commit_id":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","original_commit_id":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","user":{"login":"dstebila","id":8843219,"avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=3","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"body":"Supercop and NIST APIs expect the caller to always provide a buffer of max_sig_len bytes, and then return how many bytes of that were actually used.","created_at":"2017-02-02T07:50:48Z","updated_at":"2017-02-02T07:50:48Z","html_url":"https://github.com/open-quantum-safe/liboqs/pull/92#discussion_r99066143","pull_request_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92","_links":{"self":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments/99066143"},"html":{"href":"https://github.com/open-quantum-safe/liboqs/pull/92#discussion_r99066143"},"pull_request":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92"}}},"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92","id":103161760,"html_url":"https://github.com/open-quantum-safe/liboqs/pull/92","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/92.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/92.patch","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92","number":92,"state":"open","locked":false,"title":"Add signature API (proposal)","user":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"body":"Following discussion on pull request #14, here is a suggested API for signing. No scheme has been integrated yet. If the team agrees, I'll start work on integrating one.\r\n\r\nOne open question is what to do with stateful schemes, such as XMSS, that do not adhere with a conventional signature API. Since the main goal of OQS is to compare PQ schemes, it is useful to include them (like XMSS in pull request #79) even if there are limitations on usage of the private key. (NIST for example [suggests](http://csrc.nist.gov/groups/ST/post-quantum-crypto/faq.html#Q2) to define specific use cases for stateful schemes). One option is to not expose the state through the API, and simply return an error if the key is now unusable (this could be sufficient for comparison testing, but insecure for a real-application). The alternative would be to expose the state through the API (and that might still not be sufficient enough for security, to deal with state reset attacks). Thoughts?","created_at":"2017-01-25T17:06:53Z","updated_at":"2017-02-02T07:50:48Z","closed_at":null,"merged_at":null,"merge_commit_sha":"61669c238f24aadf37f27ab3f8f6c70cc7493b7f","assignee":null,"assignees":[],"milestone":null,"commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/commits","review_comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/comments","review_comment_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments{/number}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92/comments","statuses_url":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","head":{"label":"christianpaquin:add-sig-api","ref":"add-sig-api","sha":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","user":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"repo":{"id":68381142,"name":"liboqs","full_name":"christianpaquin/liboqs","owner":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/christianpaquin/liboqs","description":"C library for quantum-safe cryptographic algorithms","fork":true,"url":"https://api.github.com/repos/christianpaquin/liboqs","forks_url":"https://api.github.com/repos/christianpaquin/liboqs/forks","keys_url":"https://api.github.com/repos/christianpaquin/liboqs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/christianpaquin/liboqs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/christianpaquin/liboqs/teams","hooks_url":"https://api.github.com/repos/christianpaquin/liboqs/hooks","issue_events_url":"https://api.github.com/repos/christianpaquin/liboqs/issues/events{/number}","events_url":"https://api.github.com/repos/christianpaquin/liboqs/events","assignees_url":"https://api.github.com/repos/christianpaquin/liboqs/assignees{/user}","branches_url":"https://api.github.com/repos/christianpaquin/liboqs/branches{/branch}","tags_url":"https://api.github.com/repos/christianpaquin/liboqs/tags","blobs_url":"https://api.github.com/repos/christianpaquin/liboqs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/christianpaquin/liboqs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/christianpaquin/liboqs/git/refs{/sha}","trees_url":"https://api.github.com/repos/christianpaquin/liboqs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/christianpaquin/liboqs/statuses/{sha}","languages_url":"https://api.github.com/repos/christianpaquin/liboqs/languages","stargazers_url":"https://api.github.com/repos/christianpaquin/liboqs/stargazers","contributors_url":"https://api.github.com/repos/christianpaquin/liboqs/contributors","subscribers_url":"https://api.github.com/repos/christianpaquin/liboqs/subscribers","subscription_url":"https://api.github.com/repos/christianpaquin/liboqs/subscription","commits_url":"https://api.github.com/repos/christianpaquin/liboqs/commits{/sha}","git_commits_url":"https://api.github.com/repos/christianpaquin/liboqs/git/commits{/sha}","comments_url":"https://api.github.com/repos/christianpaquin/liboqs/comments{/number}","issue_comment_url":"https://api.github.com/repos/christianpaquin/liboqs/issues/comments{/number}","contents_url":"https://api.github.com/repos/christianpaquin/liboqs/contents/{+path}","compare_url":"https://api.github.com/repos/christianpaquin/liboqs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/christianpaquin/liboqs/merges","archive_url":"https://api.github.com/repos/christianpaquin/liboqs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/christianpaquin/liboqs/downloads","issues_url":"https://api.github.com/repos/christianpaquin/liboqs/issues{/number}","pulls_url":"https://api.github.com/repos/christianpaquin/liboqs/pulls{/number}","milestones_url":"https://api.github.com/repos/christianpaquin/liboqs/milestones{/number}","notifications_url":"https://api.github.com/repos/christianpaquin/liboqs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/christianpaquin/liboqs/labels{/name}","releases_url":"https://api.github.com/repos/christianpaquin/liboqs/releases{/id}","deployments_url":"https://api.github.com/repos/christianpaquin/liboqs/deployments","created_at":"2016-09-16T13:16:37Z","updated_at":"2016-09-16T13:16:38Z","pushed_at":"2017-01-30T19:04:00Z","git_url":"git://github.com/christianpaquin/liboqs.git","ssh_url":"git@github.com:christianpaquin/liboqs.git","clone_url":"https://github.com/christianpaquin/liboqs.git","svn_url":"https://github.com/christianpaquin/liboqs","homepage":"","size":404,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"open_issues_count":0,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"open-quantum-safe:master","ref":"master","sha":"810651c4d21d6b843bb06893e9c8d31606274301","user":{"login":"open-quantum-safe","id":20689385,"avatar_url":"https://avatars.githubusercontent.com/u/20689385?v=3","gravatar_id":"","url":"https://api.github.com/users/open-quantum-safe","html_url":"https://github.com/open-quantum-safe","followers_url":"https://api.github.com/users/open-quantum-safe/followers","following_url":"https://api.github.com/users/open-quantum-safe/following{/other_user}","gists_url":"https://api.github.com/users/open-quantum-safe/gists{/gist_id}","starred_url":"https://api.github.com/users/open-quantum-safe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/open-quantum-safe/subscriptions","organizations_url":"https://api.github.com/users/open-quantum-safe/orgs","repos_url":"https://api.github.com/users/open-quantum-safe/repos","events_url":"https://api.github.com/users/open-quantum-safe/events{/privacy}","received_events_url":"https://api.github.com/users/open-quantum-safe/received_events","type":"Organization","site_admin":false},"repo":{"id":65514205,"name":"liboqs","full_name":"open-quantum-safe/liboqs","owner":{"login":"open-quantum-safe","id":20689385,"avatar_url":"https://avatars.githubusercontent.com/u/20689385?v=3","gravatar_id":"","url":"https://api.github.com/users/open-quantum-safe","html_url":"https://github.com/open-quantum-safe","followers_url":"https://api.github.com/users/open-quantum-safe/followers","following_url":"https://api.github.com/users/open-quantum-safe/following{/other_user}","gists_url":"https://api.github.com/users/open-quantum-safe/gists{/gist_id}","starred_url":"https://api.github.com/users/open-quantum-safe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/open-quantum-safe/subscriptions","organizations_url":"https://api.github.com/users/open-quantum-safe/orgs","repos_url":"https://api.github.com/users/open-quantum-safe/repos","events_url":"https://api.github.com/users/open-quantum-safe/events{/privacy}","received_events_url":"https://api.github.com/users/open-quantum-safe/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/open-quantum-safe/liboqs","description":"C library for quantum-resistant cryptographic algorithms.","fork":false,"url":"https://api.github.com/repos/open-quantum-safe/liboqs","forks_url":"https://api.github.com/repos/open-quantum-safe/liboqs/forks","keys_url":"https://api.github.com/repos/open-quantum-safe/liboqs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/open-quantum-safe/liboqs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/open-quantum-safe/liboqs/teams","hooks_url":"https://api.github.com/repos/open-quantum-safe/liboqs/hooks","issue_events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/events{/number}","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/events","assignees_url":"https://api.github.com/repos/open-quantum-safe/liboqs/assignees{/user}","branches_url":"https://api.github.com/repos/open-quantum-safe/liboqs/branches{/branch}","tags_url":"https://api.github.com/repos/open-quantum-safe/liboqs/tags","blobs_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/refs{/sha}","trees_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/{sha}","languages_url":"https://api.github.com/repos/open-quantum-safe/liboqs/languages","stargazers_url":"https://api.github.com/repos/open-quantum-safe/liboqs/stargazers","contributors_url":"https://api.github.com/repos/open-quantum-safe/liboqs/contributors","subscribers_url":"https://api.github.com/repos/open-quantum-safe/liboqs/subscribers","subscription_url":"https://api.github.com/repos/open-quantum-safe/liboqs/subscription","commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/commits{/sha}","git_commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/commits{/sha}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/comments{/number}","issue_comment_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments{/number}","contents_url":"https://api.github.com/repos/open-quantum-safe/liboqs/contents/{+path}","compare_url":"https://api.github.com/repos/open-quantum-safe/liboqs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/open-quantum-safe/liboqs/merges","archive_url":"https://api.github.com/repos/open-quantum-safe/liboqs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/open-quantum-safe/liboqs/downloads","issues_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues{/number}","pulls_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls{/number}","milestones_url":"https://api.github.com/repos/open-quantum-safe/liboqs/milestones{/number}","notifications_url":"https://api.github.com/repos/open-quantum-safe/liboqs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels{/name}","releases_url":"https://api.github.com/repos/open-quantum-safe/liboqs/releases{/id}","deployments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/deployments","created_at":"2016-08-12T01:46:12Z","updated_at":"2017-02-01T17:45:40Z","pushed_at":"2017-02-01T21:08:23Z","git_url":"git://github.com/open-quantum-safe/liboqs.git","ssh_url":"git@github.com:open-quantum-safe/liboqs.git","clone_url":"https://github.com/open-quantum-safe/liboqs.git","svn_url":"https://github.com/open-quantum-safe/liboqs","homepage":"https://openquantumsafe.org/","size":1311,"stargazers_count":68,"watchers_count":68,"language":"C","has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":13,"mirror_url":null,"open_issues_count":14,"forks":13,"open_issues":14,"watchers":68,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92"},"html":{"href":"https://github.com/open-quantum-safe/liboqs/pull/92"},"issue":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92"},"comments":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92/comments"},"review_comments":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/comments"},"review_comment":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/commits"},"statuses":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7"}}}},"public":true,"created_at":"2017-02-02T07:50:48Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"5256615503","type":"PullRequestReviewCommentEvent","actor":{"id":16247285,"login":"christianpaquin","display_login":"christianpaquin","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","avatar_url":"https://avatars.githubusercontent.com/u/16247285?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments/99185813","pull_request_review_id":19854805,"id":99185813,"diff_hunk":"@@ -0,0 +1,138 @@\n+/**\n+ * \\file sig.h\n+ * \\brief Header defining the API for generic OQS Signature\n+ */\n+\n+#ifndef __OQS_SIG_H\n+#define __OQS_SIG_H\n+\n+#include <stddef.h>\n+#include <stdint.h>\n+\n+#include <oqs/rand.h>\n+\n+enum OQS_SIG_alg_name {\n+\tOQS_SIG_alg_default,\n+};\n+\n+typedef struct OQS_SIG OQS_SIG;\n+\n+/**\n+ * OQS signature object\n+ */\n+typedef struct OQS_SIG {\n+\n+\t/**\n+\t * PRNG\n+\t */\n+\tOQS_RAND *rand;\n+\n+\t/**\n+\t * Specifies the name of the sig method\n+\t */\n+\tchar *method_name;\n+\n+\t/**\n+\t * Classical security in terms of the number of bits provided by the\n+\t * signature method.\n+\t */\n+\tuint16_t estimated_classical_security;\n+\n+\t/**\n+\t *  Equivalent quantum security in terms of the number of bits provided by the\n+\t *  signature method.\n+\t */\n+\tuint16_t estimated_quantum_security;\n+\n+\t/**\n+\t *  Private key length.\n+\t */\n+\tuint16_t priv_key_len;\n+\n+\t/**\n+\t *  Public key length.\n+\t */\n+\tuint16_t pub_key_len;\n+\n+\t/**\n+\t *  Maximum signature length.\n+\t */\n+\tuint16_t max_sig_len;\n+\n+\t/**\n+\t * Named parameters for this key exchange method instance, if any.\n+\t */\n+\tchar *named_parameters;\n+\n+\t/**\n+\t * Opaque pointer for passing around instance-specific data\n+\t */\n+\tvoid *params;\n+\n+\t/**\n+\t * Opaque pointer for passing around any computation context\n+\t */\n+\tvoid *ctx;\n+\n+\t/**\n+\t * Pointer to a function for public and private signature key generation.\n+\t *\n+\t * @param s                Signature structure\n+\t * @param priv             The private key\n+\t * @param pub              The public key\n+\t * @return                 1 on success, or 0 on failure\n+\t */\n+\tint (*keygen)(const OQS_SIG *s, uint8_t **priv, uint8_t **pub);\n+\n+\t/**\n+\t * Pointer to a function for signature generation.\n+\t *\n+\t * @param s                Signature structure\n+\t * @param priv             The signer's private key\n+\t * @param msg              The message to sign\n+\t * @param msg_len          Length of the message to sign\n+\t * @param sig              The generated signature\n+\t * @param sig_len          Length of the generated signature\n+\t * @return                 1 on success, or 0 on failure\n+\t */\n+\tint (*sign)(const OQS_SIG *s, const uint8_t *priv, const uint8_t *msg, const size_t msg_len, uint8_t **sig, size_t *sig_len);\n+\n+\t/**\n+\t * Pointer to a function for signature verification.\n+\t *\n+\t * @param s                Signature structure\n+\t * @param pub              The signer's public key\n+\t * @param msg              The signed message\n+\t * @param msg_len          Length of the signed message\n+\t * @param sig              The signature to verify\n+\t * @param sig_len          Length of the signature to verify\n+\t * @return                 1 on success, or 0 on failure\n+\t */\n+\tint (*verify)(const OQS_SIG *s, const uint8_t *pub, const uint8_t *msg, const size_t msg_len, const uint8_t *sig, const size_t sig_len);\n+\n+\t/**\n+\t * Pointer to a function for freeing the allocated signature structure\n+\t *\n+\t * @param s                Signature structure\n+\t */\n+\tvoid (*free)(OQS_SIG *s);\n+\n+} OQS_SIG;\n+\n+/**\n+ * Allocate a new signature object.\n+ *\n+ * @param rand               Random number generator.\n+ * @param alg_name           Algorithm to be instantiated\n+ * @param named_parameters   Name or description of method-specific parameters\n+ *                           to use for this instance (as a NULL-terminated C string),\n+ *                           if any, or NULL.\n+ * @return                   The object on success, or NULL on failure.\n+ */\n+OQS_SIG *OQS_SIG_new(OQS_RAND *rand, enum OQS_SIG_alg_name alg_name, const char *named_parameters);\n+int OQS_SIG_keygen(const OQS_SIG *s, uint8_t **priv, uint8_t **pub);\n+int OQS_SIG_sign(const OQS_SIG *s, const uint8_t *priv, const uint8_t *msg, const size_t msg_len, uint8_t **sig, size_t *sig_len);\n+int OQS_SIG_verify(const OQS_SIG *s, const uint8_t *pub, const uint8_t *msg, const size_t msg_len, const uint8_t *sig, const size_t sig_len);\n+void OQS_SIG_free(OQS_SIG *s);","path":"src/sig/sig.h","position":136,"original_position":136,"commit_id":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","original_commit_id":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","user":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"body":"Sure, we can do that. By \"typically\", I meant what is done in the kex schemes, so we can go refactor these later.","created_at":"2017-02-02T18:23:29Z","updated_at":"2017-02-02T18:23:29Z","html_url":"https://github.com/open-quantum-safe/liboqs/pull/92#discussion_r99185813","pull_request_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92","_links":{"self":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments/99185813"},"html":{"href":"https://github.com/open-quantum-safe/liboqs/pull/92#discussion_r99185813"},"pull_request":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92"}}},"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92","id":103161760,"html_url":"https://github.com/open-quantum-safe/liboqs/pull/92","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/92.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/92.patch","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92","number":92,"state":"open","locked":false,"title":"Add signature API (proposal)","user":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"body":"Following discussion on pull request #14, here is a suggested API for signing. No scheme has been integrated yet. If the team agrees, I'll start work on integrating one.\r\n\r\nOne open question is what to do with stateful schemes, such as XMSS, that do not adhere with a conventional signature API. Since the main goal of OQS is to compare PQ schemes, it is useful to include them (like XMSS in pull request #79) even if there are limitations on usage of the private key. (NIST for example [suggests](http://csrc.nist.gov/groups/ST/post-quantum-crypto/faq.html#Q2) to define specific use cases for stateful schemes). One option is to not expose the state through the API, and simply return an error if the key is now unusable (this could be sufficient for comparison testing, but insecure for a real-application). The alternative would be to expose the state through the API (and that might still not be sufficient enough for security, to deal with state reset attacks). Thoughts?","created_at":"2017-01-25T17:06:53Z","updated_at":"2017-02-02T18:23:29Z","closed_at":null,"merged_at":null,"merge_commit_sha":"61669c238f24aadf37f27ab3f8f6c70cc7493b7f","assignee":null,"assignees":[],"milestone":null,"commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/commits","review_comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/comments","review_comment_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments{/number}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92/comments","statuses_url":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","head":{"label":"christianpaquin:add-sig-api","ref":"add-sig-api","sha":"8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7","user":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"repo":{"id":68381142,"name":"liboqs","full_name":"christianpaquin/liboqs","owner":{"login":"christianpaquin","id":16247285,"avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=3","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/christianpaquin/liboqs","description":"C library for quantum-safe cryptographic algorithms","fork":true,"url":"https://api.github.com/repos/christianpaquin/liboqs","forks_url":"https://api.github.com/repos/christianpaquin/liboqs/forks","keys_url":"https://api.github.com/repos/christianpaquin/liboqs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/christianpaquin/liboqs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/christianpaquin/liboqs/teams","hooks_url":"https://api.github.com/repos/christianpaquin/liboqs/hooks","issue_events_url":"https://api.github.com/repos/christianpaquin/liboqs/issues/events{/number}","events_url":"https://api.github.com/repos/christianpaquin/liboqs/events","assignees_url":"https://api.github.com/repos/christianpaquin/liboqs/assignees{/user}","branches_url":"https://api.github.com/repos/christianpaquin/liboqs/branches{/branch}","tags_url":"https://api.github.com/repos/christianpaquin/liboqs/tags","blobs_url":"https://api.github.com/repos/christianpaquin/liboqs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/christianpaquin/liboqs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/christianpaquin/liboqs/git/refs{/sha}","trees_url":"https://api.github.com/repos/christianpaquin/liboqs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/christianpaquin/liboqs/statuses/{sha}","languages_url":"https://api.github.com/repos/christianpaquin/liboqs/languages","stargazers_url":"https://api.github.com/repos/christianpaquin/liboqs/stargazers","contributors_url":"https://api.github.com/repos/christianpaquin/liboqs/contributors","subscribers_url":"https://api.github.com/repos/christianpaquin/liboqs/subscribers","subscription_url":"https://api.github.com/repos/christianpaquin/liboqs/subscription","commits_url":"https://api.github.com/repos/christianpaquin/liboqs/commits{/sha}","git_commits_url":"https://api.github.com/repos/christianpaquin/liboqs/git/commits{/sha}","comments_url":"https://api.github.com/repos/christianpaquin/liboqs/comments{/number}","issue_comment_url":"https://api.github.com/repos/christianpaquin/liboqs/issues/comments{/number}","contents_url":"https://api.github.com/repos/christianpaquin/liboqs/contents/{+path}","compare_url":"https://api.github.com/repos/christianpaquin/liboqs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/christianpaquin/liboqs/merges","archive_url":"https://api.github.com/repos/christianpaquin/liboqs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/christianpaquin/liboqs/downloads","issues_url":"https://api.github.com/repos/christianpaquin/liboqs/issues{/number}","pulls_url":"https://api.github.com/repos/christianpaquin/liboqs/pulls{/number}","milestones_url":"https://api.github.com/repos/christianpaquin/liboqs/milestones{/number}","notifications_url":"https://api.github.com/repos/christianpaquin/liboqs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/christianpaquin/liboqs/labels{/name}","releases_url":"https://api.github.com/repos/christianpaquin/liboqs/releases{/id}","deployments_url":"https://api.github.com/repos/christianpaquin/liboqs/deployments","created_at":"2016-09-16T13:16:37Z","updated_at":"2016-09-16T13:16:38Z","pushed_at":"2017-01-30T19:04:00Z","git_url":"git://github.com/christianpaquin/liboqs.git","ssh_url":"git@github.com:christianpaquin/liboqs.git","clone_url":"https://github.com/christianpaquin/liboqs.git","svn_url":"https://github.com/christianpaquin/liboqs","homepage":"","size":404,"stargazers_count":0,"watchers_count":0,"language":"C","has_issues":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"open_issues_count":0,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"open-quantum-safe:master","ref":"master","sha":"810651c4d21d6b843bb06893e9c8d31606274301","user":{"login":"open-quantum-safe","id":20689385,"avatar_url":"https://avatars.githubusercontent.com/u/20689385?v=3","gravatar_id":"","url":"https://api.github.com/users/open-quantum-safe","html_url":"https://github.com/open-quantum-safe","followers_url":"https://api.github.com/users/open-quantum-safe/followers","following_url":"https://api.github.com/users/open-quantum-safe/following{/other_user}","gists_url":"https://api.github.com/users/open-quantum-safe/gists{/gist_id}","starred_url":"https://api.github.com/users/open-quantum-safe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/open-quantum-safe/subscriptions","organizations_url":"https://api.github.com/users/open-quantum-safe/orgs","repos_url":"https://api.github.com/users/open-quantum-safe/repos","events_url":"https://api.github.com/users/open-quantum-safe/events{/privacy}","received_events_url":"https://api.github.com/users/open-quantum-safe/received_events","type":"Organization","site_admin":false},"repo":{"id":65514205,"name":"liboqs","full_name":"open-quantum-safe/liboqs","owner":{"login":"open-quantum-safe","id":20689385,"avatar_url":"https://avatars.githubusercontent.com/u/20689385?v=3","gravatar_id":"","url":"https://api.github.com/users/open-quantum-safe","html_url":"https://github.com/open-quantum-safe","followers_url":"https://api.github.com/users/open-quantum-safe/followers","following_url":"https://api.github.com/users/open-quantum-safe/following{/other_user}","gists_url":"https://api.github.com/users/open-quantum-safe/gists{/gist_id}","starred_url":"https://api.github.com/users/open-quantum-safe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/open-quantum-safe/subscriptions","organizations_url":"https://api.github.com/users/open-quantum-safe/orgs","repos_url":"https://api.github.com/users/open-quantum-safe/repos","events_url":"https://api.github.com/users/open-quantum-safe/events{/privacy}","received_events_url":"https://api.github.com/users/open-quantum-safe/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/open-quantum-safe/liboqs","description":"C library for quantum-resistant cryptographic algorithms.","fork":false,"url":"https://api.github.com/repos/open-quantum-safe/liboqs","forks_url":"https://api.github.com/repos/open-quantum-safe/liboqs/forks","keys_url":"https://api.github.com/repos/open-quantum-safe/liboqs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/open-quantum-safe/liboqs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/open-quantum-safe/liboqs/teams","hooks_url":"https://api.github.com/repos/open-quantum-safe/liboqs/hooks","issue_events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/events{/number}","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/events","assignees_url":"https://api.github.com/repos/open-quantum-safe/liboqs/assignees{/user}","branches_url":"https://api.github.com/repos/open-quantum-safe/liboqs/branches{/branch}","tags_url":"https://api.github.com/repos/open-quantum-safe/liboqs/tags","blobs_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/refs{/sha}","trees_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/{sha}","languages_url":"https://api.github.com/repos/open-quantum-safe/liboqs/languages","stargazers_url":"https://api.github.com/repos/open-quantum-safe/liboqs/stargazers","contributors_url":"https://api.github.com/repos/open-quantum-safe/liboqs/contributors","subscribers_url":"https://api.github.com/repos/open-quantum-safe/liboqs/subscribers","subscription_url":"https://api.github.com/repos/open-quantum-safe/liboqs/subscription","commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/commits{/sha}","git_commits_url":"https://api.github.com/repos/open-quantum-safe/liboqs/git/commits{/sha}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/comments{/number}","issue_comment_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments{/number}","contents_url":"https://api.github.com/repos/open-quantum-safe/liboqs/contents/{+path}","compare_url":"https://api.github.com/repos/open-quantum-safe/liboqs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/open-quantum-safe/liboqs/merges","archive_url":"https://api.github.com/repos/open-quantum-safe/liboqs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/open-quantum-safe/liboqs/downloads","issues_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues{/number}","pulls_url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls{/number}","milestones_url":"https://api.github.com/repos/open-quantum-safe/liboqs/milestones{/number}","notifications_url":"https://api.github.com/repos/open-quantum-safe/liboqs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels{/name}","releases_url":"https://api.github.com/repos/open-quantum-safe/liboqs/releases{/id}","deployments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/deployments","created_at":"2016-08-12T01:46:12Z","updated_at":"2017-02-01T17:45:40Z","pushed_at":"2017-02-01T21:08:23Z","git_url":"git://github.com/open-quantum-safe/liboqs.git","ssh_url":"git@github.com:open-quantum-safe/liboqs.git","clone_url":"https://github.com/open-quantum-safe/liboqs.git","svn_url":"https://github.com/open-quantum-safe/liboqs","homepage":"https://openquantumsafe.org/","size":1311,"stargazers_count":68,"watchers_count":68,"language":"C","has_issues":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":13,"mirror_url":null,"open_issues_count":14,"forks":13,"open_issues":14,"watchers":68,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92"},"html":{"href":"https://github.com/open-quantum-safe/liboqs/pull/92"},"issue":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92"},"comments":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/92/comments"},"review_comments":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/comments"},"review_comment":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/92/commits"},"statuses":{"href":"https://api.github.com/repos/open-quantum-safe/liboqs/statuses/8fb0a7f0516b26bf9947c73fb1df8b64de4ea2a7"}}}},"public":true,"created_at":"2017-02-02T18:23:29Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
