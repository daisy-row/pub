{"id":"40371510906","type":"IssueCommentEvent","actor":{"id":169682635,"login":"ydoroz","display_login":"ydoroz","gravatar_id":"","url":"https://api.github.com/users/ydoroz","avatar_url":"https://avatars.githubusercontent.com/u/169682635?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1840","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1840/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1840/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1840/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1840","id":2403519535,"node_id":"I_kwDOA-eq3c6PQswv","number":1840,"title":"Define threat model for liboqs","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[{"id":731765533,"node_id":"MDU6TGFiZWw3MzE3NjU1MzM=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/documentation","name":"documentation","color":"0d9b10","default":true,"description":"Changes only about documentation"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2024-07-11T15:45:13Z","updated_at":"2024-07-23T02:27:24Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"We should have a document describing the intended threat model that liboqs aims to be secure against. This would include issues such as constant time behaviour, and what is in or out of scope, such as side-channel attacks, fault attacks, etc.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1840/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2244130819","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1840#issuecomment-2244130819","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1840","id":2244130819,"node_id":"IC_kwDOA-eq3c6FwrgD","user":{"login":"ydoroz","id":169682635,"node_id":"U_kgDOCh0myw","avatar_url":"https://avatars.githubusercontent.com/u/169682635?v=4","gravatar_id":"","url":"https://api.github.com/users/ydoroz","html_url":"https://github.com/ydoroz","followers_url":"https://api.github.com/users/ydoroz/followers","following_url":"https://api.github.com/users/ydoroz/following{/other_user}","gists_url":"https://api.github.com/users/ydoroz/gists{/gist_id}","starred_url":"https://api.github.com/users/ydoroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydoroz/subscriptions","organizations_url":"https://api.github.com/users/ydoroz/orgs","repos_url":"https://api.github.com/users/ydoroz/repos","events_url":"https://api.github.com/users/ydoroz/events{/privacy}","received_events_url":"https://api.github.com/users/ydoroz/received_events","type":"User","site_admin":false},"created_at":"2024-07-23T02:27:23Z","updated_at":"2024-07-23T02:27:23Z","author_association":"NONE","body":"In case of WolfSSL, I got some information from Anthony Hu. He mentioned that they don't have a document where they list which attacks are included or not in their threat models. They point me into a pdf in which they received it from Trial of Bits. It is a threat modeling exercise  for the curl project which lies under the umbrella of wolfSSL's products.  It is publicly available: https://curl.se/docs/audit/threatmodel-2022.pdf.   \r\n\r\nAlthough it is not an exact fit on what we are looking for, we can go over the document and use some of the approaches that are listed there. Creating Threat Actors, Possible Attack Vectors, Severity Levels, and such.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2244130819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-07-23T02:27:24Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"40373222672","type":"IssueCommentEvent","actor":{"id":8332785,"login":"anvega","display_login":"anvega","gravatar_id":"","url":"https://api.github.com/users/anvega","avatar_url":"https://avatars.githubusercontent.com/u/8332785?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1851","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1851/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1851/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1851/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1851","id":2419676924,"node_id":"I_kwDOA-eq3c6QOVb8","number":1851,"title":"Add diagrams for minimal examples in wiki and liboqs documentation","user":{"login":"anvega","id":8332785,"node_id":"MDQ6VXNlcjgzMzI3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/8332785?v=4","gravatar_id":"","url":"https://api.github.com/users/anvega","html_url":"https://github.com/anvega","followers_url":"https://api.github.com/users/anvega/followers","following_url":"https://api.github.com/users/anvega/following{/other_user}","gists_url":"https://api.github.com/users/anvega/gists{/gist_id}","starred_url":"https://api.github.com/users/anvega/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anvega/subscriptions","organizations_url":"https://api.github.com/users/anvega/orgs","repos_url":"https://api.github.com/users/anvega/repos","events_url":"https://api.github.com/users/anvega/events{/privacy}","received_events_url":"https://api.github.com/users/anvega/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2024-07-19T19:15:56Z","updated_at":"2024-07-23T04:18:45Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I've created Mermaid diagrams for the two minimal examples currently in the liboqs wiki and the examples on the docs site. These aim to enhance the understanding of the key encapsulation and digital signature processes.\r\n\r\n- Initially discussed on Discord (conversation summary attached below)\r\n- The wiki isn't directly in the project repository, making direct contributions challenging\r\n- There's interest in incorporating these diagrams into the documentation\r\n\r\nProposal:\r\n\r\n1. I'd like to have these reviewed for which I'll file a PR to the site repo\r\n2. Once reviewed and approved, consider adding them to the wiki as well\r\n\r\nI'll share the code for these diagrams. The way it's rendered in the wiki of my fork. GitHub can render this directly from markdown, but I can also provide PNG exports if preferred.\r\n\r\nQuestions:\r\n\r\n1. What's the preferred format for submitting these diagrams? (Mermaid code, PNG, or both?)\r\n2. Are there any specific style guidelines I should follow for consistency with existing documentation?\r\n3. Where in the docs would these diagrams be most beneficial?\r\n\r\nI'm happy to submit a PR to contribute these diagrams to the project once I have some guidance on the above questions.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1851/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2244220661","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1851#issuecomment-2244220661","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1851","id":2244220661,"node_id":"IC_kwDOA-eq3c6FxBb1","user":{"login":"anvega","id":8332785,"node_id":"MDQ6VXNlcjgzMzI3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/8332785?v=4","gravatar_id":"","url":"https://api.github.com/users/anvega","html_url":"https://github.com/anvega","followers_url":"https://api.github.com/users/anvega/followers","following_url":"https://api.github.com/users/anvega/following{/other_user}","gists_url":"https://api.github.com/users/anvega/gists{/gist_id}","starred_url":"https://api.github.com/users/anvega/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anvega/subscriptions","organizations_url":"https://api.github.com/users/anvega/orgs","repos_url":"https://api.github.com/users/anvega/repos","events_url":"https://api.github.com/users/anvega/events{/privacy}","received_events_url":"https://api.github.com/users/anvega/received_events","type":"User","site_admin":false},"created_at":"2024-07-23T04:18:44Z","updated_at":"2024-07-23T04:18:44Z","author_association":"CONTRIBUTOR","body":"Forking the wiki is possible, but it doesn’t offer much benefit beyond showcasing a view of changes. \r\n\r\nThere seems to be an opportunity here to assess how information is currently organized and determine the best structure for it—essentially, an exercise in Information Architecture. Information Architecture involves a series of discussions, but I can start by documenting how things are laid out on my own. After that, we can identify the differences between the existing structure and the improvements everyone would like to see.\r\n\r\nRegarding where information should be found and maintained, @baentsch makes a strong case for keeping it in either the main repo or the site repo. One consideration for decoupling repo docs and the code is the codebase is more fluid than a static site which may break and slow down PR reviews on those failed deploy preview changes. ","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2244220661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-07-23T04:18:46Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"40387831049","type":"IssueCommentEvent","actor":{"id":149199,"login":"bhess","display_login":"bhess","gravatar_id":"","url":"https://api.github.com/users/bhess","avatar_url":"https://avatars.githubusercontent.com/u/149199?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1853","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1853/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1853/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1853/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1853","id":2425108934,"node_id":"I_kwDOA-eq3c6QjDnG","number":1853,"title":"Incorrect Order of z and d in NIST tests","user":{"login":"abhinav-thales","id":171677399,"node_id":"U_kgDOCjuW1w","avatar_url":"https://avatars.githubusercontent.com/u/171677399?v=4","gravatar_id":"","url":"https://api.github.com/users/abhinav-thales","html_url":"https://github.com/abhinav-thales","followers_url":"https://api.github.com/users/abhinav-thales/followers","following_url":"https://api.github.com/users/abhinav-thales/following{/other_user}","gists_url":"https://api.github.com/users/abhinav-thales/gists{/gist_id}","starred_url":"https://api.github.com/users/abhinav-thales/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhinav-thales/subscriptions","organizations_url":"https://api.github.com/users/abhinav-thales/orgs","repos_url":"https://api.github.com/users/abhinav-thales/repos","events_url":"https://api.github.com/users/abhinav-thales/events{/privacy}","received_events_url":"https://api.github.com/users/abhinav-thales/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-07-23T12:35:58Z","updated_at":"2024-07-23T12:50:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"In the NIST tests for ML-KEM, the random number stream is constructed as [z || d || m] i.e. the first random byte returned by randombytes() would be z followed by d and m.\r\n\r\nHowever, in the code\r\n\r\n64 bytes random is generated together https://github.com/open-quantum-safe/liboqs/blob/main/src/kem/ml_kem/pqcrystals-kyber-standard_ml-kem-512-ipd_ref/kem.c#L54\r\nand then passed to derand api for keypair generation.\r\n\r\nIn the derand api, first 32 byte is used for keypair generation https://github.com/open-quantum-safe/liboqs/blob/main/src/kem/ml_kem/pqcrystals-kyber-standard_ml-kem-512-ipd_ref/kem.c#L29\r\nwhich makes the first 32 byte as 'd' as per Algo 12 of FIPS-203.\r\n\r\nThe next 32 bytes are appended to end of private key https://github.com/open-quantum-safe/liboqs/blob/main/src/kem/ml_kem/pqcrystals-kyber-standard_ml-kem-512-ipd_ref/kem.c#L33 \r\nwhich makes it 'z' as per Algo 15.\r\n\r\nSo, the random byte stream construction should be [d || z || m] so that randombytes are output in the order of d->z->m\r\n\r\nCurrently, it works for NIST Intermediate Vectors as the value of z and d are same for all KEM version. Incase, they are different the tests would fail.\r\n\r\nA simple switch of z and d at https://github.com/open-quantum-safe/liboqs/blob/main/tests/test_kem_vectors.sh#L26 should solve this IMO.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1853/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2245165820","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1853#issuecomment-2245165820","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1853","id":2245165820,"node_id":"IC_kwDOA-eq3c6F0oL8","user":{"login":"bhess","id":149199,"node_id":"MDQ6VXNlcjE0OTE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/149199?v=4","gravatar_id":"","url":"https://api.github.com/users/bhess","html_url":"https://github.com/bhess","followers_url":"https://api.github.com/users/bhess/followers","following_url":"https://api.github.com/users/bhess/following{/other_user}","gists_url":"https://api.github.com/users/bhess/gists{/gist_id}","starred_url":"https://api.github.com/users/bhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhess/subscriptions","organizations_url":"https://api.github.com/users/bhess/orgs","repos_url":"https://api.github.com/users/bhess/repos","events_url":"https://api.github.com/users/bhess/events{/privacy}","received_events_url":"https://api.github.com/users/bhess/received_events","type":"User","site_admin":false},"created_at":"2024-07-23T12:50:45Z","updated_at":"2024-07-23T12:50:45Z","author_association":"MEMBER","body":"Thank you @abhinav-thales for catching this! I think your analysis is correct, which would indeed lead to issues if z and d are not the same. I'll follow up with a PR.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2245165820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-07-23T12:50:47Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"40391945543","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1847","id":2417292438,"node_id":"I_kwDOA-eq3c6QFPSW","number":1847,"title":"Running `cmake -LA` changes library configuration","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working; high priority to fix"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-07-18T19:59:48Z","updated_at":"2024-07-23T14:39:22Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nIf `cmake -LA ..` is run between the library configuration (`cmake -GNinja <config options> ..`) and build (`ninja`) commands, the library configuration may be changed.\r\n\r\n**To Reproduce**\r\nFrom the `liboqs` directory:\r\n```sh\r\nrm -rf build && mkdir build && cd build\r\ncmake -GNinja -DOQS_MINIMAL_BUILD=\"KEM_kyber_512;SIG_dilithium_2\" -DCMAKE_BUILD_TYPE=Debug ..\r\nninja\r\ngdb -ex \"b pqcrystals_dilithium2_avx2_keypair\" -ex r --args ./tests/test_sig Dilithium2\r\n```\r\n\r\n![avx2_enabled](https://github.com/user-attachments/assets/c0d800c7-9ff6-4a60-bda9-13f1ab376f6f)\r\n\r\nAs expected, the breakpoint is hit: the AVX2 code is enabled in the build.\r\n\r\nHere is the exact same command sequence with `cmake -LA ..` added between config and build:\r\n```sh\r\nrm -rf build && mkdir build && cd build\r\ncmake -GNinja -DOQS_MINIMAL_BUILD=\"KEM_kyber_512;SIG_dilithium_2\" -DCMAKE_BUILD_TYPE=Debug ..\r\ncmake -LA ..\r\nninja\r\ngdb -ex \"b pqcrystals_dilithium2_avx2_keypair\" -ex r --args ./tests/test_sig Dilithium2\r\n```\r\n\r\n![avx2_disabled](https://github.com/user-attachments/assets/0ad3c11e-e6ee-4560-803f-edf72ac9df5a)\r\n\r\nThe breakpoint cannot be set: the AVX2 code is disabled. Also note that the number of targets built is greater in the first case (127) than in the second (101).\r\n\r\n**Expected behavior**\r\nThe `cmake -LA ..` call should have no side effects.\r\n\r\n**Screenshots**\r\nSee above\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Ubuntu 22.04\r\n - OpenSSL version: 3.0.2\r\n - Compiler version used: GCC 11.4.0\r\n - Build variables used: see above\r\n - liboqs version: `main`, at commit 5670edf59fa7a910654b9171229b7dc1ea7ece4c\r\n\r\n**Additional context**\r\nWe use this pattern [basically everywhere](https://github.com/open-quantum-safe/liboqs/blob/4cc88845e8bb66dca20cd61ff88c2162f38c3230/.github/workflows/unix.yml#L147) in CI to print config variables, so the bug's impact could have been huge. Thankfully, it looks like there were no failures hidden by the bug. [This branch](https://github.com/open-quantum-safe/liboqs/tree/sw-cmake-la) removes all occurrences of `cmake -LA ..` from CI, and everything passes. Based on some [older](https://github.com/open-quantum-safe/liboqs/pull/1618) [investigation](https://github.com/open-quantum-safe/liboqs/issues/1666), I think we can infer that the weekly tests are unaffected as well.\r\n\r\nI believe that the issue lies in our filtering logic when an option like `OQS_MINIMAL_BUILD` or `OQS_ALGS_ENABLED` is set. I'll investigate further.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2245441565","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1847#issuecomment-2245441565","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847","id":2245441565,"node_id":"IC_kwDOA-eq3c6F1rgd","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2024-07-23T14:39:21Z","updated_at":"2024-07-23T14:39:21Z","author_association":"MEMBER","body":"Can we close this since #1848 has landed?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2245441565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-07-23T14:39:22Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"40392028608","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1753","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1753/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1753/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1753/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1753","id":2234926073,"node_id":"I_kwDOA-eq3c6FNkP5","number":1753,"title":"Update CBOM to CycloneDX 1.6 specification","user":{"login":"bhess","id":149199,"node_id":"MDQ6VXNlcjE0OTE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/149199?v=4","gravatar_id":"","url":"https://api.github.com/users/bhess","html_url":"https://github.com/bhess","followers_url":"https://api.github.com/users/bhess/followers","following_url":"https://api.github.com/users/bhess/following{/other_user}","gists_url":"https://api.github.com/users/bhess/gists{/gist_id}","starred_url":"https://api.github.com/users/bhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhess/subscriptions","organizations_url":"https://api.github.com/users/bhess/orgs","repos_url":"https://api.github.com/users/bhess/repos","events_url":"https://api.github.com/users/bhess/events{/privacy}","received_events_url":"https://api.github.com/users/bhess/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"bhess","id":149199,"node_id":"MDQ6VXNlcjE0OTE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/149199?v=4","gravatar_id":"","url":"https://api.github.com/users/bhess","html_url":"https://github.com/bhess","followers_url":"https://api.github.com/users/bhess/followers","following_url":"https://api.github.com/users/bhess/following{/other_user}","gists_url":"https://api.github.com/users/bhess/gists{/gist_id}","starred_url":"https://api.github.com/users/bhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhess/subscriptions","organizations_url":"https://api.github.com/users/bhess/orgs","repos_url":"https://api.github.com/users/bhess/repos","events_url":"https://api.github.com/users/bhess/events{/privacy}","received_events_url":"https://api.github.com/users/bhess/received_events","type":"User","site_admin":false},"assignees":[{"login":"bhess","id":149199,"node_id":"MDQ6VXNlcjE0OTE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/149199?v=4","gravatar_id":"","url":"https://api.github.com/users/bhess","html_url":"https://github.com/bhess","followers_url":"https://api.github.com/users/bhess/followers","following_url":"https://api.github.com/users/bhess/following{/other_user}","gists_url":"https://api.github.com/users/bhess/gists{/gist_id}","starred_url":"https://api.github.com/users/bhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhess/subscriptions","organizations_url":"https://api.github.com/users/bhess/orgs","repos_url":"https://api.github.com/users/bhess/repos","events_url":"https://api.github.com/users/bhess/events{/privacy}","received_events_url":"https://api.github.com/users/bhess/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2024-04-10T07:20:25Z","updated_at":"2024-07-23T14:41:32Z","closed_at":"2024-07-23T14:41:32Z","author_association":"MEMBER","active_lock_reason":null,"body":"The specification used for [CBOMs](https://github.com/open-quantum-safe/liboqs/blob/main/docs/cbom.json) has been upstreamed to CycloneDX 1.6:\r\nhttps://github.com/CycloneDX/specification/releases/tag/1.6\r\n\r\nThis issue is to update the CBOM in liboqs, and its generation script to the CycloneDX 1.6 specification.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1753/timeline","performed_via_github_app":null,"state_reason":"not_planned"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2245449225","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1753#issuecomment-2245449225","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1753","id":2245449225,"node_id":"IC_kwDOA-eq3c6F1tYJ","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2024-07-23T14:41:32Z","updated_at":"2024-07-23T14:41:32Z","author_association":"MEMBER","body":"Closing this issue as a dupe of #1831.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2245449225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-07-23T14:41:33Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"40392411268","type":"IssueCommentEvent","actor":{"id":39264796,"login":"SWilson4","display_login":"SWilson4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","avatar_url":"https://avatars.githubusercontent.com/u/39264796?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1847","id":2417292438,"node_id":"I_kwDOA-eq3c6QFPSW","number":1847,"title":"Running `cmake -LA` changes library configuration","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working; high priority to fix"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2024-07-18T19:59:48Z","updated_at":"2024-07-23T14:51:40Z","closed_at":"2024-07-23T14:51:40Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\nIf `cmake -LA ..` is run between the library configuration (`cmake -GNinja <config options> ..`) and build (`ninja`) commands, the library configuration may be changed.\r\n\r\n**To Reproduce**\r\nFrom the `liboqs` directory:\r\n```sh\r\nrm -rf build && mkdir build && cd build\r\ncmake -GNinja -DOQS_MINIMAL_BUILD=\"KEM_kyber_512;SIG_dilithium_2\" -DCMAKE_BUILD_TYPE=Debug ..\r\nninja\r\ngdb -ex \"b pqcrystals_dilithium2_avx2_keypair\" -ex r --args ./tests/test_sig Dilithium2\r\n```\r\n\r\n![avx2_enabled](https://github.com/user-attachments/assets/c0d800c7-9ff6-4a60-bda9-13f1ab376f6f)\r\n\r\nAs expected, the breakpoint is hit: the AVX2 code is enabled in the build.\r\n\r\nHere is the exact same command sequence with `cmake -LA ..` added between config and build:\r\n```sh\r\nrm -rf build && mkdir build && cd build\r\ncmake -GNinja -DOQS_MINIMAL_BUILD=\"KEM_kyber_512;SIG_dilithium_2\" -DCMAKE_BUILD_TYPE=Debug ..\r\ncmake -LA ..\r\nninja\r\ngdb -ex \"b pqcrystals_dilithium2_avx2_keypair\" -ex r --args ./tests/test_sig Dilithium2\r\n```\r\n\r\n![avx2_disabled](https://github.com/user-attachments/assets/0ad3c11e-e6ee-4560-803f-edf72ac9df5a)\r\n\r\nThe breakpoint cannot be set: the AVX2 code is disabled. Also note that the number of targets built is greater in the first case (127) than in the second (101).\r\n\r\n**Expected behavior**\r\nThe `cmake -LA ..` call should have no side effects.\r\n\r\n**Screenshots**\r\nSee above\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Ubuntu 22.04\r\n - OpenSSL version: 3.0.2\r\n - Compiler version used: GCC 11.4.0\r\n - Build variables used: see above\r\n - liboqs version: `main`, at commit 5670edf59fa7a910654b9171229b7dc1ea7ece4c\r\n\r\n**Additional context**\r\nWe use this pattern [basically everywhere](https://github.com/open-quantum-safe/liboqs/blob/4cc88845e8bb66dca20cd61ff88c2162f38c3230/.github/workflows/unix.yml#L147) in CI to print config variables, so the bug's impact could have been huge. Thankfully, it looks like there were no failures hidden by the bug. [This branch](https://github.com/open-quantum-safe/liboqs/tree/sw-cmake-la) removes all occurrences of `cmake -LA ..` from CI, and everything passes. Based on some [older](https://github.com/open-quantum-safe/liboqs/pull/1618) [investigation](https://github.com/open-quantum-safe/liboqs/issues/1666), I think we can infer that the weekly tests are unaffected as well.\r\n\r\nI believe that the issue lies in our filtering logic when an option like `OQS_MINIMAL_BUILD` or `OQS_ALGS_ENABLED` is set. I'll investigate further.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847/timeline","performed_via_github_app":null,"state_reason":"completed"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2245473817","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1847#issuecomment-2245473817","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1847","id":2245473817,"node_id":"IC_kwDOA-eq3c6F1zYZ","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"created_at":"2024-07-23T14:51:40Z","updated_at":"2024-07-23T14:51:40Z","author_association":"MEMBER","body":"> Can we close this since #1848 has landed?\r\n\r\nSeems reasonable to me.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/2245473817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-07-23T14:51:42Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
