{"id":"40645278736","type":"IssuesEvent","actor":{"id":62942921,"login":"sduyyy","display_login":"sduyyy","gravatar_id":"","url":"https://api.github.com/users/sduyyy","avatar_url":"https://avatars.githubusercontent.com/u/62942921?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1878","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1878/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1878/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1878/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1878","id":2441386647,"node_id":"I_kwDOA-eq3c6RhJqX","number":1878,"title":"fail to ninja with manually installed Openssl 3.x.x","user":{"login":"sduyyy","id":62942921,"node_id":"MDQ6VXNlcjYyOTQyOTIx","avatar_url":"https://avatars.githubusercontent.com/u/62942921?v=4","gravatar_id":"","url":"https://api.github.com/users/sduyyy","html_url":"https://github.com/sduyyy","followers_url":"https://api.github.com/users/sduyyy/followers","following_url":"https://api.github.com/users/sduyyy/following{/other_user}","gists_url":"https://api.github.com/users/sduyyy/gists{/gist_id}","starred_url":"https://api.github.com/users/sduyyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sduyyy/subscriptions","organizations_url":"https://api.github.com/users/sduyyy/orgs","repos_url":"https://api.github.com/users/sduyyy/repos","events_url":"https://api.github.com/users/sduyyy/events{/privacy}","received_events_url":"https://api.github.com/users/sduyyy/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-08-01T03:44:46Z","updated_at":"2024-08-01T03:44:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nI build on linux with manually installed openssl, when I run \"ninja\", this error ocures.\r\n\r\n**To Reproduce**\r\nmkdir build && cd build\r\n cmake -GNinja ..\r\n ninja\r\n\r\n**Screenshots**\r\ntest@x1-carbon:~/liboqs/build$ ninja\r\n[4/1442] Building C object src/common/CMakeFiles/common.dir/sha2/sha2_ossl.c.o\r\nFAILED: src/common/CMakeFiles/common.dir/sha2/sha2_ossl.c.o \r\n/usr/bin/cc -DOQS_HAVE_ALIGNED_ALLOC -DOQS_HAVE_EXPLICIT_BZERO -DOQS_HAVE_MEMALIGN -DOQS_HAVE_POSIX_MEMALIGN -Iinclude -fPIC -fvisibility=hidden   -Wa,--noexecstack -O3 -fomit-frame-pointer -fdata-sections -ffunction-sections -Wl,--gc-sections -Wbad-function-cast -pthread -std=gnu11 -MD -MT src/common/CMakeFiles/common.dir/sha2/sha2_ossl.c.o -MF src/common/CMakeFiles/common.dir/sha2/sha2_ossl.c.o.d -o src/common/CMakeFiles/common.dir/sha2/sha2_ossl.c.o   -c ../src/common/sha2/sha2_ossl.c\r\nIn file included from /usr/include/openssl/err.h:16,\r\n                 from ../src/common/sha2/../ossl_helpers.h:9,\r\n                 from ../src/common/sha2/sha2_ossl.c:14:\r\n/usr/include/openssl/macros.h:155:4: error: #error \"OPENSSL_API_COMPAT expresses an impossible API compatibility level\"\r\n  155 | #  error \"OPENSSL_API_COMPAT expresses an impossible API compatibility level\"\r\n      |    ^~~~~\r\n[6/1442] Building C object src/common/CMakeFiles/internal.dir/rand/rand_nist.c.o\r\nFAILED: src/common/CMakeFiles/internal.dir/rand/rand_nist.c.o \r\n/usr/bin/cc -DOQS_HAVE_ALIGNED_ALLOC -DOQS_HAVE_EXPLICIT_BZERO -DOQS_HAVE_MEMALIGN -DOQS_HAVE_POSIX_MEMALIGN -Iinclude -fPIC -fvisibility=default   -Wa,--noexecstack -O3 -fomit-frame-pointer -fdata-sections -ffunction-sections -Wl,--gc-sections -Wbad-function-cast -pthread -std=gnu11 -MD -MT src/common/CMakeFiles/internal.dir/rand/rand_nist.c.o -MF src/common/CMakeFiles/internal.dir/rand/rand_nist.c.o.d -o src/common/CMakeFiles/internal.dir/rand/rand_nist.c.o   -c ../src/common/rand/rand_nist.c\r\nIn file included from /usr/include/openssl/err.h:16,\r\n                 from ../src/common/rand/../ossl_helpers.h:9,\r\n                 from ../src/common/rand/rand_nist.c:25:\r\n/usr/include/openssl/macros.h:155:4: error: #error \"OPENSSL_API_COMPAT expresses an impossible API compatibility level\"\r\n  155 | #  error \"OPENSSL_API_COMPAT expresses an impossible API compatibility level\"\r\n      |    ^~~~~\r\n[8/1442] Building C object src/common/CMakeFiles/internal.dir/ossl_helpers.c.o\r\nFAILED: src/common/CMakeFiles/internal.dir/ossl_helpers.c.o \r\n/usr/bin/cc -DOQS_HAVE_ALIGNED_ALLOC -DOQS_HAVE_EXPLICIT_BZERO -DOQS_HAVE_MEMALIGN -DOQS_HAVE_POSIX_MEMALIGN -Iinclude -fPIC -fvisibility=default   -Wa,--noexecstack -O3 -fomit-frame-pointer -fdata-sections -ffunction-sections -Wl,--gc-sections -Wbad-function-cast -pthread -std=gnu11 -MD -MT src/common/CMakeFiles/internal.dir/ossl_helpers.c.o -MF src/common/CMakeFiles/internal.dir/ossl_helpers.c.o.d -o src/common/CMakeFiles/internal.dir/ossl_helpers.c.o   -c ../src/common/ossl_helpers.c\r\nIn file included from /usr/include/openssl/err.h:16,\r\n                 from ../src/common/ossl_helpers.h:9,\r\n                 from ../src/common/ossl_helpers.c:5:\r\n/usr/include/openssl/macros.h:155:4: error: #error \"OPENSSL_API_COMPAT expresses an impossible API compatibility level\"\r\n  155 | #  error \"OPENSSL_API_COMPAT expresses an impossible API compatibility level\"\r\n      |    ^~~~~\r\n[21/1442] Building C object src/kem/bike/CMakeFiles/bike_l5.dir/additional_r4/gf2x_mul_base_pclmul.c.o\r\nninja: build stopped: subcommand failed.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Ubuntu 20ã€‚04.6\r\n - OpenSSL version 3.0.13, installed manually\r\n - cmake version 3.16.3\r\n - liboqs version main branch\r\n\r\n**Additional context**\r\nI tried to manually adding args to cmake with paths to openssl libraries v3 \r\nset(OPENSSL_ROOT_DIR \"/usr/local/openssl\"\r\nit still doesn't work.\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1878/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2024-08-01T03:44:48Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
