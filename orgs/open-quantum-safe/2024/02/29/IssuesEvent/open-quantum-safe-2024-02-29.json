{"id":"36110895931","type":"IssuesEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/355","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/355/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/355/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/355/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/355","id":2159744948,"node_id":"I_kwDOE_A9l86Auxe0","number":355,"title":"Current main fails . . .","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[{"id":2701983051,"node_id":"MDU6TGFiZWwyNzAxOTgzMDUx","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-02-28T19:55:27Z","updated_at":"2024-02-29T03:31:10Z","closed_at":"2024-02-29T03:31:10Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nFirst, without manually running `python3 oqs-template/generate.py` the current \"main\" fails to compile:\r\n```text\r\nBuilding for Macports-installed OpenSSL-3...\r\n-- The C compiler identification is AppleClang 15.0.0.15000100\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Check for working C compiler: /opt/local/bin/clang - skipped\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Creating Debug build with OQS-Debug env vars enabled\r\n-- Build will store public keys in PKCS#8 structures\r\n-- Build will not include external encoding library for SPKI/PKCS#8\r\n-- Found OpenSSL: /opt/local/libexec/openssl3/lib/libcrypto.dylib (found suitable version \"3.2.1\", minimum required is \"3.0\")  \r\n-- liboqs found: Include dir at /opt/local/include;/opt/local/include/oqs\r\n-- Building commit dfffed6 in /Users/ur20980/src/oqs-provider\r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /Users/ur20980/src/oqs-provider/_build\r\n/opt/local/bin/cmake -S/Users/ur20980/src/oqs-provider -B/Users/ur20980/src/oqs-provider/_build --check-build-system CMakeFiles/Makefile.cmake 0\r\n/opt/local/bin/cmake -E cmake_progress_start /Users/ur20980/src/oqs-provider/_build/CMakeFiles /Users/ur20980/src/oqs-provider/_build//CMakeFiles/progress.marks\r\n/opt/local/bin/gmake  -f CMakeFiles/Makefile2 all\r\ngmake[1]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n/opt/local/bin/gmake  -f oqsprov/CMakeFiles/oqsprovider.dir/build.make oqsprov/CMakeFiles/oqsprovider.dir/depend\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\ncd /Users/ur20980/src/oqs-provider/_build && /opt/local/bin/cmake -E cmake_depends \"Unix Makefiles\" /Users/ur20980/src/oqs-provider /Users/ur20980/src/oqs-provider/oqsprov /Users/ur20980/src/oqs-provider/_build /Users/ur20980/src/oqs-provider/_build/oqsprov /Users/ur20980/src/oqs-provider/_build/oqsprov/CMakeFiles/oqsprovider.dir/DependInfo.cmake --color=\r\ngmake[2]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\n/opt/local/bin/gmake  -f oqsprov/CMakeFiles/oqsprovider.dir/build.make oqsprov/CMakeFiles/oqsprovider.dir/build\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n[  3%] Building C object oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/clang -DOQSPROVIDER_VERSION_TEXT=\\\"0.5.4-dev\\\" -DOQS_PROVIDER_COMMIT=\"\\\" (dfffed6)\\\"\" -Doqsprovider_EXPORTS -I/opt/local/libexec/openssl3/include -isystem /opt/local/include/oqs -O3 -std=gnu18 -march=native -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -g -I/opt/local/include -L/opt/local/lib -g -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -fPIC -Wunused-function -std=gnu11 -MD -MT oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o -MF CMakeFiles/oqsprovider.dir/oqsprov.c.o.d -o CMakeFiles/oqsprovider.dir/oqsprov.c.o -c /Users/ur20980/src/oqs-provider/oqsprov/oqsprov.c\r\nclang: warning: argument unused during compilation: '-L/opt/local/lib' [-Wunused-command-line-argument]\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov.c:1205:9: warning: add explicit braces to avoid dangling else [-Wdangling-else]\r\n        else\r\n        ^\r\n1 warning generated.\r\n[  7%] Building C object oqsprov/CMakeFiles/oqsprovider.dir/oqsprov_capabilities.c.o\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/clang -DOQSPROVIDER_VERSION_TEXT=\\\"0.5.4-dev\\\" -DOQS_PROVIDER_COMMIT=\"\\\" (dfffed6)\\\"\" -Doqsprovider_EXPORTS -I/opt/local/libexec/openssl3/include -isystem /opt/local/include/oqs -O3 -std=gnu18 -march=native -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -g -I/opt/local/include -L/opt/local/lib -g -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -fPIC -Wunused-function -std=gnu11 -MD -MT oqsprov/CMakeFiles/oqsprovider.dir/oqsprov_capabilities.c.o -MF CMakeFiles/oqsprovider.dir/oqsprov_capabilities.c.o.d -o CMakeFiles/oqsprovider.dir/oqsprov_capabilities.c.o -c /Users/ur20980/src/oqs-provider/oqsprov/oqsprov_capabilities.c\r\nclang: warning: argument unused during compilation: '-L/opt/local/lib' [-Wunused-command-line-argument]\r\n[ 10%] Building C object oqsprov/CMakeFiles/oqsprovider.dir/oqsprov_keys.c.o\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/clang -DOQSPROVIDER_VERSION_TEXT=\\\"0.5.4-dev\\\" -DOQS_PROVIDER_COMMIT=\"\\\" (dfffed6)\\\"\" -Doqsprovider_EXPORTS -I/opt/local/libexec/openssl3/include -isystem /opt/local/include/oqs -O3 -std=gnu18 -march=native -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -g -I/opt/local/include -L/opt/local/lib -g -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -fPIC -Wunused-function -std=gnu11 -MD -MT oqsprov/CMakeFiles/oqsprovider.dir/oqsprov_keys.c.o -MF CMakeFiles/oqsprovider.dir/oqsprov_keys.c.o.d -o CMakeFiles/oqsprovider.dir/oqsprov_keys.c.o -c /Users/ur20980/src/oqs-provider/oqsprov/oqsprov_keys.c\r\nclang: warning: argument unused during compilation: '-L/opt/local/lib' [-Wunused-command-line-argument]\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov_keys.c:136:20: error: use of undeclared identifier 'OQS_SIG_alg_ml_dsa_44'\r\n    {0, \"mldsa44\", OQS_SIG_alg_ml_dsa_44, KEY_TYPE_SIG, 128},\r\n                   ^\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov_keys.c:137:25: error: use of undeclared identifier 'OQS_SIG_alg_ml_dsa_44'\r\n    {0, \"p256_mldsa44\", OQS_SIG_alg_ml_dsa_44, KEY_TYPE_HYB_SIG, 128},\r\n                        ^\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov_keys.c:138:28: error: use of undeclared identifier 'OQS_SIG_alg_ml_dsa_44'\r\n    {0, \"rsa3072_mldsa44\", OQS_SIG_alg_ml_dsa_44, KEY_TYPE_HYB_SIG, 128},\r\n                           ^\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov_keys.c:139:20: error: use of undeclared identifier 'OQS_SIG_alg_ml_dsa_65'\r\n    {0, \"mldsa65\", OQS_SIG_alg_ml_dsa_65, KEY_TYPE_SIG, 192},\r\n                   ^\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov_keys.c:140:25: error: use of undeclared identifier 'OQS_SIG_alg_ml_dsa_65'\r\n    {0, \"p384_mldsa65\", OQS_SIG_alg_ml_dsa_65, KEY_TYPE_HYB_SIG, 192},\r\n                        ^\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov_keys.c:141:20: error: use of undeclared identifier 'OQS_SIG_alg_ml_dsa_87'\r\n    {0, \"mldsa87\", OQS_SIG_alg_ml_dsa_87, KEY_TYPE_SIG, 256},\r\n                   ^\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov_keys.c:142:25: error: use of undeclared identifier 'OQS_SIG_alg_ml_dsa_87'\r\n    {0, \"p521_mldsa87\", OQS_SIG_alg_ml_dsa_87, KEY_TYPE_HYB_SIG, 256},\r\n                        ^\r\n7 errors generated.\r\ngmake[2]: *** [oqsprov/CMakeFiles/oqsprovider.dir/build.make:107: oqsprov/CMakeFiles/oqsprovider.dir/oqsprov_keys.c.o] Error 1\r\ngmake[2]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\ngmake[1]: *** [CMakeFiles/Makefile2:145: oqsprov/CMakeFiles/oqsprovider.dir/all] Error 2\r\ngmake[1]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\ngmake: *** [Makefile:169: all] Error 2\r\nApparently, building for Macports-installed OpenSSL-3 failed\r\n```\r\n\r\nAfter I manually generate the stuff with `python3 oqs-template/generate.py`, no test runs:\r\n\r\n```text\r\n$ cat tests-out.txt \r\nTest setup:\r\nLD_LIBRARY_PATH=/opt/local/lib:/usr/local/lib:\r\nOPENSSL_APP=/opt/local/libexec/openssl3/bin/openssl\r\nOPENSSL_CONF=/Users/ur20980/src/oqs-provider/scripts/openssl-ca.cnf\r\nOPENSSL_MODULES=/Users/ur20980/src/oqs-provider/_build/lib\r\nDYLD_LIBRARY_PATH=/opt/local/lib:/usr/local/lib:\r\nVersion information:\r\nOpenSSL 3.2.1 30 Jan 2024 (Library: OpenSSL 3.2.1 30 Jan 2024)\r\nProviders:\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.2.1\r\n    status: active\r\n    build info: 3.2.1\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  oqsprovider\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.4-dev\r\n    status: active\r\n    build info: OQS Provider v.0.5.4-dev (87c66f8) based on liboqs v.0.10.0-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\nCert gen/verify, CMS sign/verify, CA tests for all enabled OQS signature algorithms commencing: \r\n.......................\r\nExternal interop tests commencing\r\nUsing Web proxy \"http://xxxxxxxx.mit.edu:8080\"\r\n Cloudflare:\r\n$ \r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `git clone https://github.com/open-quantum-safe/oqs-provider.git`\r\n2. `cd oqs-provider`\r\n3. `cmake -DCMAKE_BUILD_TYPE=Debug -DUSE_ENCODING_LIB=OFF -DOPENSSL_ROOT_DIR=\"$HOME/src/openssl\" -DCMAKE_C_FLAGS=\"$CFLAGS -g -I${OPENSSL_INCLUDE_DIR} -L${OPENSSL_LIB_DIR} \" -DCMAKE_VERBOSE_MAKEFILE:BOOL=True -S . -B _build `\r\n4. `cmake --build _build`\r\n5. Observe the above error.\r\n\r\nIf you generate templates with above, do `OPENSSL_APP=/opt/local/bin/openssl scripts/runtests.sh` .\r\n\r\n**Expected behavior**\r\nCompilation succeeds, and all the tests pass - as it was before the last update.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Sonoma 14.3.1\r\n - OpenSSL version 3.2.1\r\n - oqsprovider: current `main` \r\n\r\nPlease run the following commands to obtain the version information:\r\n - For OpenSSL: `openssl version` \r\n - For oqsprovider: `openssl list -providers`\r\n\r\n```sh\r\n$ openssl -version\r\nOpenSSL 3.2.1 30 Jan 2024 (Library: OpenSSL 3.2.1 30 Jan 2024)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.2.1\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.2.1\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.2.1\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.4-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.2.1\r\n    status: active\r\n  vigenere\r\n    version: 1.2\r\n$ \r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.10045.2.1, EC, id-ecPublicKey } @ default\r\n  { 1.3.101.110, X25519 } @ default\r\n  { 1.3.101.111, X448 } @ default\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n$ openssl list -kem-algorithms -provider oqsprovider\r\n  { 1.2.840.10045.2.1, EC, id-ecPublicKey } @ default\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  { 1.3.101.110, X25519 } @ default\r\n  { 1.3.101.111, X448 } @ default\r\n  x448_frodo976aes @ oqs\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n  kyber768 @ oqsprovider\r\n  p384_kyber768 @ oqsprovider\r\n  bikel5 @ oqsprovider\r\n  p256_frodo640aes @ oqsprovider\r\n  x448_kyber768 @ oqsprovider\r\n  x25519_frodo640aes @ oqsprovider\r\n  hqc192 @ oqsprovider\r\n  frodo640shake @ oqsprovider\r\n  kyber1024 @ oqsprovider\r\n  p256_frodo640shake @ oqsprovider\r\n  p521_bikel5 @ oqsprovider\r\n  x25519_frodo640shake @ oqsprovider\r\n  p521_kyber1024 @ oqsprovider\r\n  frodo976aes @ oqsprovider\r\n  p521_hqc256 @ oqsprovider\r\n  p384_frodo976aes @ oqsprovider\r\n  frodo640aes @ oqsprovider\r\n  x448_frodo976aes @ oqsprovider\r\n  bikel1 @ oqsprovider\r\n  frodo976shake @ oqsprovider\r\n  hqc128 @ oqsprovider\r\n  p384_frodo976shake @ oqsprovider\r\n  p256_bikel1 @ oqsprovider\r\n  x448_frodo976shake @ oqsprovider\r\n  p384_hqc192 @ oqsprovider\r\n  frodo1344aes @ oqsprovider\r\n  x25519_bikel1 @ oqsprovider\r\n  p521_frodo1344aes @ oqsprovider\r\n  p256_hqc128 @ oqsprovider\r\n  frodo1344shake @ oqsprovider\r\n  bikel3 @ oqsprovider\r\n  p521_frodo1344shake @ oqsprovider\r\n  hqc256 @ oqsprovider\r\n  kyber512 @ oqsprovider\r\n  p384_bikel3 @ oqsprovider\r\n  p256_kyber512 @ oqsprovider\r\n  x25519_hqc128 @ oqsprovider\r\n  x25519_kyber512 @ oqsprovider\r\n  x448_bikel3 @ oqsprovider\r\n  x448_hqc192 @ oqsprovider\r\n$ \r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/355/timeline","performed_via_github_app":null,"state_reason":"completed"}},"public":true,"created_at":"2024-02-29T03:31:11Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"36125586589","type":"IssuesEvent","actor":{"id":13785747,"login":"beldmit","display_login":"beldmit","gravatar_id":"","url":"https://api.github.com/users/beldmit","avatar_url":"https://avatars.githubusercontent.com/u/13785747?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/358","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/358/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/358/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/358/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/358","id":2161206242,"node_id":"I_kwDOE_A9l86A0WPi","number":358,"title":"oqs_tlssig fails against OpenSSL 3.2.1","user":{"login":"beldmit","id":13785747,"node_id":"MDQ6VXNlcjEzNzg1NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/13785747?v=4","gravatar_id":"","url":"https://api.github.com/users/beldmit","html_url":"https://github.com/beldmit","followers_url":"https://api.github.com/users/beldmit/followers","following_url":"https://api.github.com/users/beldmit/following{/other_user}","gists_url":"https://api.github.com/users/beldmit/gists{/gist_id}","starred_url":"https://api.github.com/users/beldmit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beldmit/subscriptions","organizations_url":"https://api.github.com/users/beldmit/orgs","repos_url":"https://api.github.com/users/beldmit/repos","events_url":"https://api.github.com/users/beldmit/events{/privacy}","received_events_url":"https://api.github.com/users/beldmit/received_events","type":"User","site_admin":false},"labels":[{"id":2701983051,"node_id":"MDU6TGFiZWwyNzAxOTgzMDUx","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-29T13:00:51Z","updated_at":"2024-02-29T13:00:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n`oqs_tlssig` fails being built against OpenSSL 3.2.1\r\n\r\n**To Reproduce**\r\nBuild liboqs and OQS provider against OpenSSL 3.2\r\nmake test\r\n\r\n**Expected behavior**\r\nTest passes\r\n\r\n**Environment (please complete the following information):**\r\n - OS: CentOS 10\r\n - OpenSSL version 3.2.1\r\n - oqsprovider version 0.5.3\r\n\r\n**Additional context**\r\nDiagnostics (see also https://github.com/open-quantum-safe/oqs-provider/pull/357) is\r\n```\r\n4: SSL_accept() failed returning -1, SSL error 1. 000003FF947FADE0:error:0A000076:SSL routines:tls_choose_sigalg:no suitable signature algorithm:ssl/t1_lib.c:3774:\r\n4: SSL_connect() failed returning -1, SSL error 1. 000003FF947FADE0:error:0A000410:SSL routines:ssl3_read_bytes:ssl/tls alert handshake failure:ssl/record/rec_layer_s3.c:865:SSL alert number 40\r\n4:   TLS-SIG handshake test failed: dilithium2, return code: -5\r\n```\r\n\r\nCan it be related to https://github.com/openssl/openssl/pull/22779?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/358/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2024-02-29T13:00:52Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"36128816351","type":"IssuesEvent","actor":{"id":24992349,"login":"dimk1","display_login":"dimk1","gravatar_id":"","url":"https://api.github.com/users/dimk1","avatar_url":"https://avatars.githubusercontent.com/u/24992349?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/359","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/359/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/359/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/359/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/359","id":2161402677,"node_id":"I_kwDOE_A9l86A1GM1","number":359,"title":"Listing signatures or KEMs according to USAGE.md does not work as intended","user":{"login":"dimk1","id":24992349,"node_id":"MDQ6VXNlcjI0OTkyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/24992349?v=4","gravatar_id":"","url":"https://api.github.com/users/dimk1","html_url":"https://github.com/dimk1","followers_url":"https://api.github.com/users/dimk1/followers","following_url":"https://api.github.com/users/dimk1/following{/other_user}","gists_url":"https://api.github.com/users/dimk1/gists{/gist_id}","starred_url":"https://api.github.com/users/dimk1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimk1/subscriptions","organizations_url":"https://api.github.com/users/dimk1/orgs","repos_url":"https://api.github.com/users/dimk1/repos","events_url":"https://api.github.com/users/dimk1/events{/privacy}","received_events_url":"https://api.github.com/users/dimk1/received_events","type":"User","site_admin":false},"labels":[{"id":2701983058,"node_id":"MDU6TGFiZWwyNzAxOTgzMDU4","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/labels/question","name":"question","color":"d876e3","default":true,"description":"No code change required"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-29T14:30:54Z","updated_at":"2024-02-29T14:30:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI have installed oqs-provider and I'm going through the USAGE.md file to get familiar with the package. I noticed that when I run the commands\r\n\r\n```\r\n### Checking quantum safe signature algorithms available for use\r\n\r\n    openssl list -signature-algorithms -provider oqsprovider \r\n\r\n### Checking quantum safe KEM algorithms available for use\r\n\r\n    openssl list -kem-algorithms -provider oqsprovider \r\n```\r\n\r\nthey output all available algorithms and there is no filtering taking place as I would expect. For example, in my case, when I run the command for the default provider I get:\r\n```\r\nuser@laptop:~/Documents/Repos/oqs-provider$ openssl list -signature-algorithms -provider default\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  { 1.2.840.10040.4.1, 1.2.840.10040.4.3, 1.3.14.3.2.12, 1.3.14.3.2.13, 1.3.14.3.2.27, DSA, DSA-old, DSA-SHA, DSA-SHA1, DSA-SHA1-old, dsaEncryption, dsaEncryption-old, dsaWithSHA, dsaWithSHA1, dsaWithSHA1-old } @ default\r\n  { 1.3.101.112, ED25519 } @ default\r\n  { 1.3.101.113, ED448 } @ default\r\n  { 1.2.156.10197.1.301, SM2 } @ default\r\n  ECDSA @ default\r\n  HMAC @ default\r\n  SIPHASH @ default\r\n  POLY1305 @ default\r\n  CMAC @ default\r\n  dilithium2 @ oqsprovider\r\n  p256_dilithium2 @ oqsprovider\r\n  rsa3072_dilithium2 @ oqsprovider\r\n  dilithium3 @ oqsprovider\r\n  p384_dilithium3 @ oqsprovider\r\n  dilithium5 @ oqsprovider\r\n  p521_dilithium5 @ oqsprovider\r\n  mldsa44 @ oqsprovider\r\n  p256_mldsa44 @ oqsprovider\r\n  rsa3072_mldsa44 @ oqsprovider\r\n  mldsa65 @ oqsprovider\r\n  p384_mldsa65 @ oqsprovider\r\n  mldsa87 @ oqsprovider\r\n  p521_mldsa87 @ oqsprovider\r\n  falcon512 @ oqsprovider\r\n  p256_falcon512 @ oqsprovider\r\n  rsa3072_falcon512 @ oqsprovider\r\n  falcon1024 @ oqsprovider\r\n  p521_falcon1024 @ oqsprovider\r\n  sphincssha2128fsimple @ oqsprovider\r\n  p256_sphincssha2128fsimple @ oqsprovider\r\n  rsa3072_sphincssha2128fsimple @ oqsprovider\r\n  sphincssha2128ssimple @ oqsprovider\r\n  p256_sphincssha2128ssimple @ oqsprovider\r\n  rsa3072_sphincssha2128ssimple @ oqsprovider\r\n  sphincssha2192fsimple @ oqsprovider\r\n  p384_sphincssha2192fsimple @ oqsprovider\r\n  sphincsshake128fsimple @ oqsprovider\r\n  p256_sphincsshake128fsimple @ oqsprovider\r\n  rsa3072_sphincsshake128fsimple @ oqsprovider\r\n```\r\nand when I run the command for the oqsprovider I get exactly the same output:\r\n```\r\nuser@laptop:~/Documents/Repos/oqs-provider$ openssl list -signature-algorithms -provider oqsprovider\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  { 1.2.840.10040.4.1, 1.2.840.10040.4.3, 1.3.14.3.2.12, 1.3.14.3.2.13, 1.3.14.3.2.27, DSA, DSA-old, DSA-SHA, DSA-SHA1, DSA-SHA1-old, dsaEncryption, dsaEncryption-old, dsaWithSHA, dsaWithSHA1, dsaWithSHA1-old } @ default\r\n  { 1.3.101.112, ED25519 } @ default\r\n  { 1.3.101.113, ED448 } @ default\r\n  { 1.2.156.10197.1.301, SM2 } @ default\r\n  ECDSA @ default\r\n  HMAC @ default\r\n  SIPHASH @ default\r\n  POLY1305 @ default\r\n  CMAC @ default\r\n  dilithium2 @ oqsprovider\r\n  p256_dilithium2 @ oqsprovider\r\n  rsa3072_dilithium2 @ oqsprovider\r\n  dilithium3 @ oqsprovider\r\n  p384_dilithium3 @ oqsprovider\r\n  dilithium5 @ oqsprovider\r\n  p521_dilithium5 @ oqsprovider\r\n  mldsa44 @ oqsprovider\r\n  p256_mldsa44 @ oqsprovider\r\n  rsa3072_mldsa44 @ oqsprovider\r\n  mldsa65 @ oqsprovider\r\n  p384_mldsa65 @ oqsprovider\r\n  mldsa87 @ oqsprovider\r\n  p521_mldsa87 @ oqsprovider\r\n  falcon512 @ oqsprovider\r\n  p256_falcon512 @ oqsprovider\r\n  rsa3072_falcon512 @ oqsprovider\r\n  falcon1024 @ oqsprovider\r\n  p521_falcon1024 @ oqsprovider\r\n  sphincssha2128fsimple @ oqsprovider\r\n  p256_sphincssha2128fsimple @ oqsprovider\r\n  rsa3072_sphincssha2128fsimple @ oqsprovider\r\n  sphincssha2128ssimple @ oqsprovider\r\n  p256_sphincssha2128ssimple @ oqsprovider\r\n  rsa3072_sphincssha2128ssimple @ oqsprovider\r\n  sphincssha2192fsimple @ oqsprovider\r\n  p384_sphincssha2192fsimple @ oqsprovider\r\n  sphincsshake128fsimple @ oqsprovider\r\n  p256_sphincsshake128fsimple @ oqsprovider\r\n  rsa3072_sphincsshake128fsimple @ oqsprovider\r\n```\r\n\r\nEither this is intended and so the documentation in USAGE.md should be more elaborative or other commands should be provided to check the available algorithms by selected provider.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/359/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2024-02-29T14:30:56Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"36130603611","type":"IssuesEvent","actor":{"id":24992349,"login":"dimk1","display_login":"dimk1","gravatar_id":"","url":"https://api.github.com/users/dimk1","avatar_url":"https://avatars.githubusercontent.com/u/24992349?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/360","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/360/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/360/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/360/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/360","id":2161506011,"node_id":"I_kwDOE_A9l86A1fbb","number":360,"title":"Getting message \"too weak\" when launching openssl server","user":{"login":"dimk1","id":24992349,"node_id":"MDQ6VXNlcjI0OTkyMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/24992349?v=4","gravatar_id":"","url":"https://api.github.com/users/dimk1","html_url":"https://github.com/dimk1","followers_url":"https://api.github.com/users/dimk1/followers","following_url":"https://api.github.com/users/dimk1/following{/other_user}","gists_url":"https://api.github.com/users/dimk1/gists{/gist_id}","starred_url":"https://api.github.com/users/dimk1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimk1/subscriptions","organizations_url":"https://api.github.com/users/dimk1/orgs","repos_url":"https://api.github.com/users/dimk1/repos","events_url":"https://api.github.com/users/dimk1/events{/privacy}","received_events_url":"https://api.github.com/users/dimk1/received_events","type":"User","site_admin":false},"labels":[{"id":2701983051,"node_id":"MDU6TGFiZWwyNzAxOTgzMDUx","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-02-29T15:19:10Z","updated_at":"2024-02-29T15:19:10Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I have installed successfully the oqs-provider and have enabled both the default and the oqsprovider providers in the /etc/ssl/openssl.cnf file. I'm replicating the process as described in the USAGE.md. I first create certificates and keys via:\r\n\r\n```\r\nopenssl req -x509 -new -newkey dilithium3 -keyout dilithium3_CA.key -out dilithium3_CA.crt -nodes -subj \"/CN=test CA\" -days 365 -config /etc/ssl/openssl.cnf\r\nopenssl genpkey -algorithm dilithium3 -out dilithium3_srv.key\r\nopenssl req -new -newkey dilithium3 -keyout dilithium3_srv.key -out dilithium3_srv.csr -nodes -subj \"/CN=test server\" -config /etc/ssl/openssl.cnf\r\nopenssl x509 -req -in dilithium3_srv.csr -out dilithium3_srv.crt -CA dilithium3_CA.crt -CAkey dilithium3_CA.key -CAcreateserial -days 365\r\n```\r\n\r\nThen I try to launch the server via the provided command but I get the following error:\r\n```\r\nopenssl s_server -cert dilithium3_srv.crt -key dilithium3_srv.key -www -tls1_3 -groups kyber768:frodo640shake\r\nUsing default temp DH parameters\r\nerror setting certificate\r\n4077C88E967F0000:error:0A00018E:SSL routines:SSL_CTX_use_certificate:ca md too weak:../ssl/ssl_rsa.c:221:\r\n```\r\n\r\nAny idea?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/360/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2024-02-29T15:19:12Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
