{"id":"35336315648","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654","id":2070604770,"node_id":"PR_kwDOA-eq3c5je_JE","number":1654,"title":"Run oqs-provider release tests in CI on release candidate branches","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2024-01-08T14:44:08Z","updated_at":"2024-02-02T04:52:30Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/1654","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/1654.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/1654.patch","merged_at":null},"body":"<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nEDIT 2023-02-01: This now simply adds a trigger for functionality proposed in https://github.com/open-quantum-safe/oqs-provider/pull/345. It will function when somebody with the appropriate permissions (presumably @dstebila?) adds an `oqsbot` (classic) personal access token with `repo` and `workflow` permissions as an Actions secret with the variable name `OQSBOT_GITHUB_ACTIONS`. We already have one of these in use in CircleCI.\r\n\r\n### Previous description (prior to 2023-02-01)\r\n\r\nCurrently, our [release process](https://github.com/open-quantum-safe/liboqs/wiki/Release-process) requires that the `oqs-provider` release tests be run manually for `liboqs` release candidate branches. This PR automates this process in CI, setting them to run automatically on pull requests for any branch whose name has the prefix `dev-`. This prefix is up for discussion; I used `dev-` because it's what we used for the latest release, and because using `rc-` would cause issues if we ever get a PR from somebody named, say, Ray Charles.\r\n\r\nThe full release tests complete in about 50 minutes in CI—see [https://github.com/open-quantum-safe/liboqs/actions/runs/7426702581](https://github.com/open-quantum-safe/liboqs/actions/runs/7426702581)—which I think is not too bad. Note that although the linked workflow says it uses a \"minimal set\" of algorithm combinations, it actually does run all combinations; I just didn't update the workflow documentation before pushing. The full set of tests should run again on this PR as a proof of concept; I'll revert to running them only on release candidate PRs once that workflow completes.\r\n\r\nThe CI workflow is based on the [`release-test.sh` script in the `oqs-provider` repo](https://github.com/open-quantum-safe/oqs-provider/blob/eb80076d1683121db35fabf8c1b0c6f9125c1b6d/scripts/release-test.sh). I didn't call the script directly since some aspects (checking out a new temporary branch then resetting back to main, cloning liboqs, etc) were either unnecessary in the CI setting or better handled by a built-in action.\r\n\r\nDiscussion points:\r\n- What prefix do we want to use for release candidates?\r\n- Is there a way to ensure that this script stays in sync with `oqs-provider` release testing requirements?\r\n- For @baentsch specifically: what version of OpenSSL should we be checking against here? I defaulted to `master` as the [release test documentation](https://github.com/open-quantum-safe/oqs-provider/blob/eb80076d1683121db35fabf8c1b0c6f9125c1b6d/scripts/release-test.sh#L33) said to use the \"latest\" version.\r\n- Do we want to also automate some of the other release testing? We could, for example, also run the full constant time tests as part of this workflow.\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\nFixes #1647 (assuming that `oqs-provider` is the only downstream for which we want automated release testing).\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Please answer the following questions to help manage version and changes across projects. -->\r\n\r\n* [no] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [no] Does this PR change the list of algorithms available -- either adding, removing, or renaming? Does this PR otherwise change an API? (If so, PRs in fully supported downstream projects dependent on these, i.e., [oqs-provider](https://github.com/open-quantum-safe/oqs-provider) and [OQS-OpenSSH](https://github.com/open-quantum-safe/openssh) will also need to be ready for review and merge by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1922816423","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654#issuecomment-1922816423","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654","id":1922816423,"node_id":"IC_kwDOA-eq3c5ym9mn","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2024-02-02T04:52:29Z","updated_at":"2024-02-02T04:52:29Z","author_association":"MEMBER","body":"> would we also like to automate the other release testing? For instance, perhaps we could run the entire constant-time test suite in CI in the same workflow.\r\n\r\nVery good suggestion!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1922816423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-02-02T04:52:30Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"35352098453","type":"IssueCommentEvent","actor":{"id":39264796,"login":"SWilson4","display_login":"SWilson4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","avatar_url":"https://avatars.githubusercontent.com/u/39264796?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654","id":2070604770,"node_id":"PR_kwDOA-eq3c5je_JE","number":1654,"title":"Run oqs-provider release tests in CI on release candidate branches","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2024-01-08T14:44:08Z","updated_at":"2024-02-02T14:54:18Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/1654","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/1654.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/1654.patch","merged_at":null},"body":"<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nEDIT 2023-02-01: This now simply adds a trigger for functionality proposed in https://github.com/open-quantum-safe/oqs-provider/pull/345. It will function when somebody with the appropriate permissions (presumably @dstebila?) adds an `oqsbot` (classic) personal access token with `repo` and `workflow` permissions as an Actions secret with the variable name `OQSBOT_GITHUB_ACTIONS`. We already have one of these in use in CircleCI.\r\n\r\n### Previous description (prior to 2023-02-01)\r\n\r\nCurrently, our [release process](https://github.com/open-quantum-safe/liboqs/wiki/Release-process) requires that the `oqs-provider` release tests be run manually for `liboqs` release candidate branches. This PR automates this process in CI, setting them to run automatically on pull requests for any branch whose name has the prefix `dev-`. This prefix is up for discussion; I used `dev-` because it's what we used for the latest release, and because using `rc-` would cause issues if we ever get a PR from somebody named, say, Ray Charles.\r\n\r\nThe full release tests complete in about 50 minutes in CI—see [https://github.com/open-quantum-safe/liboqs/actions/runs/7426702581](https://github.com/open-quantum-safe/liboqs/actions/runs/7426702581)—which I think is not too bad. Note that although the linked workflow says it uses a \"minimal set\" of algorithm combinations, it actually does run all combinations; I just didn't update the workflow documentation before pushing. The full set of tests should run again on this PR as a proof of concept; I'll revert to running them only on release candidate PRs once that workflow completes.\r\n\r\nThe CI workflow is based on the [`release-test.sh` script in the `oqs-provider` repo](https://github.com/open-quantum-safe/oqs-provider/blob/eb80076d1683121db35fabf8c1b0c6f9125c1b6d/scripts/release-test.sh). I didn't call the script directly since some aspects (checking out a new temporary branch then resetting back to main, cloning liboqs, etc) were either unnecessary in the CI setting or better handled by a built-in action.\r\n\r\nDiscussion points:\r\n- What prefix do we want to use for release candidates?\r\n- Is there a way to ensure that this script stays in sync with `oqs-provider` release testing requirements?\r\n- For @baentsch specifically: what version of OpenSSL should we be checking against here? I defaulted to `master` as the [release test documentation](https://github.com/open-quantum-safe/oqs-provider/blob/eb80076d1683121db35fabf8c1b0c6f9125c1b6d/scripts/release-test.sh#L33) said to use the \"latest\" version.\r\n- Do we want to also automate some of the other release testing? We could, for example, also run the full constant time tests as part of this workflow.\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\nFixes #1647 (assuming that `oqs-provider` is the only downstream for which we want automated release testing).\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Please answer the following questions to help manage version and changes across projects. -->\r\n\r\n* [no] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [no] Does this PR change the list of algorithms available -- either adding, removing, or renaming? Does this PR otherwise change an API? (If so, PRs in fully supported downstream projects dependent on these, i.e., [oqs-provider](https://github.com/open-quantum-safe/oqs-provider) and [OQS-OpenSSH](https://github.com/open-quantum-safe/openssh) will also need to be ready for review and merge by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1924043517","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654#issuecomment-1924043517","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654","id":1924043517,"node_id":"IC_kwDOA-eq3c5yrpL9","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"created_at":"2024-02-02T14:54:16Z","updated_at":"2024-02-02T14:54:16Z","author_association":"CONTRIBUTOR","body":"> LGTM. I wonder whether it'd be sensible to enable testing this with another trigger condition based on the name of the branch(?). Additional advantage (beyond ascertaining that this will work on a release) is that anyone clicking Yes on the question \"Does this add new algs\" could trigger this logic (and downstream tests) by properly naming their branch, something along the lines of\r\n> \r\n> ```\r\n> on:\r\n>   pull_request:\r\n>     branches:    \r\n>       - '**-triggerdownstream'\r\n> ```\r\n\r\nI like this idea, but I think that triggering it on `pull_request` could result in a lot of runs for a fairly expensive test. What about triggering on push and scanning the commit message (similar to `[skip ci]`)?\r\n\r\n```\r\non:\r\n  push:\r\n    jobs:\r\n      downstream-test:\r\n        if: endsWith( ${{ github.event.head_commit.message }}, '[trigger downstream]' )\r\n...\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1924043517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-02-02T14:54:18Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"35352184417","type":"IssueCommentEvent","actor":{"id":39264796,"login":"SWilson4","display_login":"SWilson4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","avatar_url":"https://avatars.githubusercontent.com/u/39264796?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654","id":2070604770,"node_id":"PR_kwDOA-eq3c5je_JE","number":1654,"title":"Run oqs-provider release tests in CI on release candidate branches","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2024-01-08T14:44:08Z","updated_at":"2024-02-02T14:56:55Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/1654","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/1654.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/1654.patch","merged_at":null},"body":"<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nEDIT 2023-02-01: This now simply adds a trigger for functionality proposed in https://github.com/open-quantum-safe/oqs-provider/pull/345. It will function when somebody with the appropriate permissions (presumably @dstebila?) adds an `oqsbot` (classic) personal access token with `repo` and `workflow` permissions as an Actions secret with the variable name `OQSBOT_GITHUB_ACTIONS`. We already have one of these in use in CircleCI.\r\n\r\n### Previous description (prior to 2023-02-01)\r\n\r\nCurrently, our [release process](https://github.com/open-quantum-safe/liboqs/wiki/Release-process) requires that the `oqs-provider` release tests be run manually for `liboqs` release candidate branches. This PR automates this process in CI, setting them to run automatically on pull requests for any branch whose name has the prefix `dev-`. This prefix is up for discussion; I used `dev-` because it's what we used for the latest release, and because using `rc-` would cause issues if we ever get a PR from somebody named, say, Ray Charles.\r\n\r\nThe full release tests complete in about 50 minutes in CI—see [https://github.com/open-quantum-safe/liboqs/actions/runs/7426702581](https://github.com/open-quantum-safe/liboqs/actions/runs/7426702581)—which I think is not too bad. Note that although the linked workflow says it uses a \"minimal set\" of algorithm combinations, it actually does run all combinations; I just didn't update the workflow documentation before pushing. The full set of tests should run again on this PR as a proof of concept; I'll revert to running them only on release candidate PRs once that workflow completes.\r\n\r\nThe CI workflow is based on the [`release-test.sh` script in the `oqs-provider` repo](https://github.com/open-quantum-safe/oqs-provider/blob/eb80076d1683121db35fabf8c1b0c6f9125c1b6d/scripts/release-test.sh). I didn't call the script directly since some aspects (checking out a new temporary branch then resetting back to main, cloning liboqs, etc) were either unnecessary in the CI setting or better handled by a built-in action.\r\n\r\nDiscussion points:\r\n- What prefix do we want to use for release candidates?\r\n- Is there a way to ensure that this script stays in sync with `oqs-provider` release testing requirements?\r\n- For @baentsch specifically: what version of OpenSSL should we be checking against here? I defaulted to `master` as the [release test documentation](https://github.com/open-quantum-safe/oqs-provider/blob/eb80076d1683121db35fabf8c1b0c6f9125c1b6d/scripts/release-test.sh#L33) said to use the \"latest\" version.\r\n- Do we want to also automate some of the other release testing? We could, for example, also run the full constant time tests as part of this workflow.\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\nFixes #1647 (assuming that `oqs-provider` is the only downstream for which we want automated release testing).\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Please answer the following questions to help manage version and changes across projects. -->\r\n\r\n* [no] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [no] Does this PR change the list of algorithms available -- either adding, removing, or renaming? Does this PR otherwise change an API? (If so, PRs in fully supported downstream projects dependent on these, i.e., [oqs-provider](https://github.com/open-quantum-safe/oqs-provider) and [OQS-OpenSSH](https://github.com/open-quantum-safe/openssh) will also need to be ready for review and merge by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1924048302","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654#issuecomment-1924048302","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654","id":1924048302,"node_id":"IC_kwDOA-eq3c5yrqWu","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"created_at":"2024-02-02T14:56:54Z","updated_at":"2024-02-02T14:56:54Z","author_association":"CONTRIBUTOR","body":"Tacking on to my previous comment, another benefit of adding another trigger condition is that we can (more or less) test this workflow before actually doing a release...","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1924048302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-02-02T14:56:56Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"35353288609","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654","id":2070604770,"node_id":"PR_kwDOA-eq3c5je_JE","number":1654,"title":"Run oqs-provider release tests in CI on release candidate branches","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2024-01-08T14:44:08Z","updated_at":"2024-02-02T15:32:21Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/1654","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/1654.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/1654.patch","merged_at":null},"body":"<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nEDIT 2023-02-01: This now simply adds a trigger for functionality proposed in https://github.com/open-quantum-safe/oqs-provider/pull/345. It will function when somebody with the appropriate permissions (presumably @dstebila?) adds an `oqsbot` (classic) personal access token with `repo` and `workflow` permissions as an Actions secret with the variable name `OQSBOT_GITHUB_ACTIONS`. We already have one of these in use in CircleCI.\r\n\r\n### Previous description (prior to 2023-02-01)\r\n\r\nCurrently, our [release process](https://github.com/open-quantum-safe/liboqs/wiki/Release-process) requires that the `oqs-provider` release tests be run manually for `liboqs` release candidate branches. This PR automates this process in CI, setting them to run automatically on pull requests for any branch whose name has the prefix `dev-`. This prefix is up for discussion; I used `dev-` because it's what we used for the latest release, and because using `rc-` would cause issues if we ever get a PR from somebody named, say, Ray Charles.\r\n\r\nThe full release tests complete in about 50 minutes in CI—see [https://github.com/open-quantum-safe/liboqs/actions/runs/7426702581](https://github.com/open-quantum-safe/liboqs/actions/runs/7426702581)—which I think is not too bad. Note that although the linked workflow says it uses a \"minimal set\" of algorithm combinations, it actually does run all combinations; I just didn't update the workflow documentation before pushing. The full set of tests should run again on this PR as a proof of concept; I'll revert to running them only on release candidate PRs once that workflow completes.\r\n\r\nThe CI workflow is based on the [`release-test.sh` script in the `oqs-provider` repo](https://github.com/open-quantum-safe/oqs-provider/blob/eb80076d1683121db35fabf8c1b0c6f9125c1b6d/scripts/release-test.sh). I didn't call the script directly since some aspects (checking out a new temporary branch then resetting back to main, cloning liboqs, etc) were either unnecessary in the CI setting or better handled by a built-in action.\r\n\r\nDiscussion points:\r\n- What prefix do we want to use for release candidates?\r\n- Is there a way to ensure that this script stays in sync with `oqs-provider` release testing requirements?\r\n- For @baentsch specifically: what version of OpenSSL should we be checking against here? I defaulted to `master` as the [release test documentation](https://github.com/open-quantum-safe/oqs-provider/blob/eb80076d1683121db35fabf8c1b0c6f9125c1b6d/scripts/release-test.sh#L33) said to use the \"latest\" version.\r\n- Do we want to also automate some of the other release testing? We could, for example, also run the full constant time tests as part of this workflow.\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\nFixes #1647 (assuming that `oqs-provider` is the only downstream for which we want automated release testing).\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Please answer the following questions to help manage version and changes across projects. -->\r\n\r\n* [no] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [no] Does this PR change the list of algorithms available -- either adding, removing, or renaming? Does this PR otherwise change an API? (If so, PRs in fully supported downstream projects dependent on these, i.e., [oqs-provider](https://github.com/open-quantum-safe/oqs-provider) and [OQS-OpenSSH](https://github.com/open-quantum-safe/openssh) will also need to be ready for review and merge by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1924108493","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654#issuecomment-1924108493","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654","id":1924108493,"node_id":"IC_kwDOA-eq3c5yr5DN","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2024-02-02T15:32:20Z","updated_at":"2024-02-02T15:32:20Z","author_association":"MEMBER","body":"> What about triggering on push and scanning the commit message (similar to [skip ci])?\r\n\r\n_Much_ better!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1924108493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-02-02T15:32:22Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"35359646989","type":"IssueCommentEvent","actor":{"id":39264796,"login":"SWilson4","display_login":"SWilson4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","avatar_url":"https://avatars.githubusercontent.com/u/39264796?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654","id":2070604770,"node_id":"PR_kwDOA-eq3c5je_JE","number":1654,"title":"Run oqs-provider release tests in CI on release candidate branches","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2024-01-08T14:44:08Z","updated_at":"2024-02-02T19:28:15Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/1654","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/1654.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/1654.patch","merged_at":null},"body":"<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nEDIT 2023-02-01: This now simply adds a trigger for functionality proposed in https://github.com/open-quantum-safe/oqs-provider/pull/345. It will function when somebody with the appropriate permissions (presumably @dstebila?) adds an `oqsbot` (classic) personal access token with `repo` and `workflow` permissions as an Actions secret with the variable name `OQSBOT_GITHUB_ACTIONS`. We already have one of these in use in CircleCI.\r\n\r\n### Previous description (prior to 2023-02-01)\r\n\r\nCurrently, our [release process](https://github.com/open-quantum-safe/liboqs/wiki/Release-process) requires that the `oqs-provider` release tests be run manually for `liboqs` release candidate branches. This PR automates this process in CI, setting them to run automatically on pull requests for any branch whose name has the prefix `dev-`. This prefix is up for discussion; I used `dev-` because it's what we used for the latest release, and because using `rc-` would cause issues if we ever get a PR from somebody named, say, Ray Charles.\r\n\r\nThe full release tests complete in about 50 minutes in CI—see [https://github.com/open-quantum-safe/liboqs/actions/runs/7426702581](https://github.com/open-quantum-safe/liboqs/actions/runs/7426702581)—which I think is not too bad. Note that although the linked workflow says it uses a \"minimal set\" of algorithm combinations, it actually does run all combinations; I just didn't update the workflow documentation before pushing. The full set of tests should run again on this PR as a proof of concept; I'll revert to running them only on release candidate PRs once that workflow completes.\r\n\r\nThe CI workflow is based on the [`release-test.sh` script in the `oqs-provider` repo](https://github.com/open-quantum-safe/oqs-provider/blob/eb80076d1683121db35fabf8c1b0c6f9125c1b6d/scripts/release-test.sh). I didn't call the script directly since some aspects (checking out a new temporary branch then resetting back to main, cloning liboqs, etc) were either unnecessary in the CI setting or better handled by a built-in action.\r\n\r\nDiscussion points:\r\n- What prefix do we want to use for release candidates?\r\n- Is there a way to ensure that this script stays in sync with `oqs-provider` release testing requirements?\r\n- For @baentsch specifically: what version of OpenSSL should we be checking against here? I defaulted to `master` as the [release test documentation](https://github.com/open-quantum-safe/oqs-provider/blob/eb80076d1683121db35fabf8c1b0c6f9125c1b6d/scripts/release-test.sh#L33) said to use the \"latest\" version.\r\n- Do we want to also automate some of the other release testing? We could, for example, also run the full constant time tests as part of this workflow.\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\nFixes #1647 (assuming that `oqs-provider` is the only downstream for which we want automated release testing).\r\n\r\n<!-- Any PR adding a new feature is expected to contain a test; the test should be part of CI testing, preferably within the \".github/workflows\" directory tree. Please add an explanation to the PR if/when (why) this cannot be done. -->\r\n\r\n<!-- Please answer the following questions to help manage version and changes across projects. -->\r\n\r\n* [no] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [no] Does this PR change the list of algorithms available -- either adding, removing, or renaming? Does this PR otherwise change an API? (If so, PRs in fully supported downstream projects dependent on these, i.e., [oqs-provider](https://github.com/open-quantum-safe/oqs-provider) and [OQS-OpenSSH](https://github.com/open-quantum-safe/openssh) will also need to be ready for review and merge by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1924544747","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1654#issuecomment-1924544747","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1654","id":1924544747,"node_id":"IC_kwDOA-eq3c5ytjjr","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"created_at":"2024-02-02T19:28:14Z","updated_at":"2024-02-02T19:28:14Z","author_association":"CONTRIBUTOR","body":"I've just done some testing of the trigger script locally using my own personal access token, and everything seems to be working OK. See https://github.com/open-quantum-safe/oqs-provider/actions/workflows/release.yml for the results. Note that the failures are expected; they checked out older tags / branches of oqs-provider that didn't have the recently merged test script.\r\n\r\nYou can also see that the \"[trigger downstream]\" trigger is working as expected (again, failure is expected as the secret token hasn't yet been added): https://github.com/open-quantum-safe/liboqs/actions/workflows/release-test.yml","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1924544747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-02-02T19:28:15Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
