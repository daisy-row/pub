{"id":"36416848130","type":"IssuesEvent","actor":{"id":117416771,"login":"Ericyu0412","display_login":"Ericyu0412","gravatar_id":"","url":"https://api.github.com/users/Ericyu0412","avatar_url":"https://avatars.githubusercontent.com/u/117416771?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/370","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/370/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/370/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/370/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/370","id":2178006777,"node_id":"I_kwDOE_A9l86B0b75","number":370,"title":"tlstest_helpers.c canâ€˜t recognize pem files signed by the post-quantum algorithm","user":{"login":"Ericyu0412","id":117416771,"node_id":"U_kgDOBv-jQw","avatar_url":"https://avatars.githubusercontent.com/u/117416771?v=4","gravatar_id":"","url":"https://api.github.com/users/Ericyu0412","html_url":"https://github.com/Ericyu0412","followers_url":"https://api.github.com/users/Ericyu0412/followers","following_url":"https://api.github.com/users/Ericyu0412/following{/other_user}","gists_url":"https://api.github.com/users/Ericyu0412/gists{/gist_id}","starred_url":"https://api.github.com/users/Ericyu0412/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ericyu0412/subscriptions","organizations_url":"https://api.github.com/users/Ericyu0412/orgs","repos_url":"https://api.github.com/users/Ericyu0412/repos","events_url":"https://api.github.com/users/Ericyu0412/events{/privacy}","received_events_url":"https://api.github.com/users/Ericyu0412/received_events","type":"User","site_admin":false},"labels":[{"id":2701983051,"node_id":"MDU6TGFiZWwyNzAxOTgzMDUx","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-03-11T00:53:01Z","updated_at":"2024-03-11T00:53:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\noqs_test_tlssig.c fails to run after compilation.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1.Build liboqs and OQS provider against OpenSSL 3.1.5\r\n2.Rewrite oqs_test_tlssig.c\r\n`int main(int argc, char *argv[])\r\n{\r\n    size_t i;\r\n    int errcnt = 0, test = 0, query_nocache;\r\n    OSSL_PROVIDER *oqsprov = NULL;\r\n    const OSSL_ALGORITHM *sigalgs;\r\n    OQS_STATUS rc;\r\n    \tint ret = EXIT_SUCCESS;\r\n#ifndef OPENSSL_NO_TRACE\r\n    fprintf(stderr,\r\n            \"Full tracing enabled via openssl config 'enable-trace'.\\n\");\r\n    BIO *err = BIO_new_fp(stderr, BIO_NOCLOSE | BIO_FP_TEXT);\r\n    OSSL_trace_set_channel(OSSL_TRACE_CATEGORY_ALL, err);\r\n#endif\r\n\r\n    T((libctx = OSSL_LIB_CTX_new()) != NULL);\r\n    T(argc == 4);\r\n    modulename = argv[1];\r\n    configfile = argv[2];\r\n    certsdir = argv[3];\r\n\r\n    load_oqs_provider(libctx, modulename, configfile);\r\n\r\n    oqsprov = OSSL_PROVIDER_load(libctx, modulename);\r\n\r\n    sigalgs = OSSL_PROVIDER_query_operation(oqsprov, OSSL_OP_SIGNATURE,\r\n                                            &query_nocache);\r\n                                            \r\n    print_system_info();\r\n    printf(\"==================\\n\");\r\n                                            \r\n    if (sigalgs) {\r\n        for (; sigalgs->algorithm_names != NULL; sigalgs++) {\r\n            //printf(cGREEN \"%s\\n\", sigalgs->algorithm_names);\r\n            rc = test_signature(sigalgs->algorithm_names, &errcnt);            \r\n            if(rc == OQS_SUCCESS){\r\n                fprintf(stderr,\r\n                        cGREEN \"  Signature test succeeded: %s\" cNORM \"\\n\",\r\n                        sigalgs->algorithm_names);\r\n                \r\n            } else {\r\n                fprintf(stderr, cRED \"  Signature test failed: %s\" cNORM \"\\n\",\r\n                        sigalgs->algorithm_names);\r\n                ret = EXIT_FAILURE;\r\n                ERR_print_errors_fp(stderr);\r\n                errcnt++;\r\n            }\r\n        }\r\n    }\r\n\r\n    OSSL_LIB_CTX_free(libctx);\r\n    TEST_ASSERT(errcnt == 0)\r\n    return !test;\r\n}`\r\n3.Use gcc to compile it\r\n`gcc oqs_test_tlssig.c test_common.c tlstest_helpers.c -o test_sig -lssl -loqs -lcrypto`\r\n4.Run test_sig\r\n`./test_sig \"oqsprovider\" \"/home/eric/Desktop/oqstest/oqs-provider/test/oqs.cnf\" \"/home/eric/Desktop/oqstest/oqs-provider/test /\"`\r\n\r\n**Expected behavior**\r\nAll oqs_signature_algorithms test passes.\r\n\r\n**Screenshots**\r\n![image](https://github.com/open-quantum-safe/oqs-provider/assets/117416771/7516d60c-be89-45ef-bf0b-f62ec12707a8)\r\n\r\n**Environment (please complete the following information):**\r\n - OS:Kali Linux 2024.1 Release\r\n - OpenSSL version 3.1.5\r\n - oqsprovider version 0.5.4\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/370/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2024-03-11T00:53:03Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
