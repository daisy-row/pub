{"id":"12526105178","type":"IssueCommentEvent","actor":{"id":65586648,"login":"kartik-27","display_login":"kartik-27","gravatar_id":"","url":"https://api.github.com/users/kartik-27","avatar_url":"https://avatars.githubusercontent.com/u/65586648?"},"repo":{"id":162497174,"name":"open-quantum-safe/liboqs-python","url":"https://api.github.com/repos/open-quantum-safe/liboqs-python"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/issues/28","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs-python","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/issues/28/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/issues/28/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/issues/28/events","html_url":"https://github.com/open-quantum-safe/liboqs-python/issues/28","id":629646359,"node_id":"MDU6SXNzdWU2Mjk2NDYzNTk=","number":28,"title":"Could not load liboqs shared library","user":{"login":"prchander","id":54725951,"node_id":"MDQ6VXNlcjU0NzI1OTUx","avatar_url":"https://avatars1.githubusercontent.com/u/54725951?v=4","gravatar_id":"","url":"https://api.github.com/users/prchander","html_url":"https://github.com/prchander","followers_url":"https://api.github.com/users/prchander/followers","following_url":"https://api.github.com/users/prchander/following{/other_user}","gists_url":"https://api.github.com/users/prchander/gists{/gist_id}","starred_url":"https://api.github.com/users/prchander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prchander/subscriptions","organizations_url":"https://api.github.com/users/prchander/orgs","repos_url":"https://api.github.com/users/prchander/repos","events_url":"https://api.github.com/users/prchander/events{/privacy}","received_events_url":"https://api.github.com/users/prchander/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-06-02T15:30:46Z","updated_at":"2020-06-04T04:40:33Z","closed_at":null,"author_association":"NONE","body":"I followed the instructions in liboqs python wrapper to install as a shared library (make -GNinja -DBUILD_SHARED_LIBS=ON ..). Then I cloned liboqs-python and setup a venv called test inside. I then installed setup.py. I then tried to run the kem example with python3 examples/kem.py but the code breaks because it could not load the liboqs library. I have tried multiple variants of liboqs shared library command but I have not gotten any of them to work. Am I doing something wrong or missing a step?"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/issues/comments/638598244","html_url":"https://github.com/open-quantum-safe/liboqs-python/issues/28#issuecomment-638598244","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/issues/28","id":638598244,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODU5ODI0NA==","user":{"login":"kartik-27","id":65586648,"node_id":"MDQ6VXNlcjY1NTg2NjQ4","avatar_url":"https://avatars0.githubusercontent.com/u/65586648?v=4","gravatar_id":"","url":"https://api.github.com/users/kartik-27","html_url":"https://github.com/kartik-27","followers_url":"https://api.github.com/users/kartik-27/followers","following_url":"https://api.github.com/users/kartik-27/following{/other_user}","gists_url":"https://api.github.com/users/kartik-27/gists{/gist_id}","starred_url":"https://api.github.com/users/kartik-27/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kartik-27/subscriptions","organizations_url":"https://api.github.com/users/kartik-27/orgs","repos_url":"https://api.github.com/users/kartik-27/repos","events_url":"https://api.github.com/users/kartik-27/events{/privacy}","received_events_url":"https://api.github.com/users/kartik-27/received_events","type":"User","site_admin":false},"created_at":"2020-06-04T04:40:33Z","updated_at":"2020-06-04T04:40:33Z","author_association":"NONE","body":"make sure you export LD_LIBRARY_PATH and verify using env command"}},"public":true,"created_at":"2020-06-04T04:40:33Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12528328609","type":"IssueCommentEvent","actor":{"id":64248330,"login":"onavratil-monetplus","display_login":"onavratil-monetplus","gravatar_id":"","url":"https://api.github.com/users/onavratil-monetplus","avatar_url":"https://avatars.githubusercontent.com/u/64248330?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/757","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/757/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/757/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/757/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/757","id":624203687,"node_id":"MDU6SXNzdWU2MjQyMDM2ODc=","number":757,"title":"Undefined references ","user":{"login":"onavratil-monetplus","id":64248330,"node_id":"MDQ6VXNlcjY0MjQ4MzMw","avatar_url":"https://avatars1.githubusercontent.com/u/64248330?v=4","gravatar_id":"","url":"https://api.github.com/users/onavratil-monetplus","html_url":"https://github.com/onavratil-monetplus","followers_url":"https://api.github.com/users/onavratil-monetplus/followers","following_url":"https://api.github.com/users/onavratil-monetplus/following{/other_user}","gists_url":"https://api.github.com/users/onavratil-monetplus/gists{/gist_id}","starred_url":"https://api.github.com/users/onavratil-monetplus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onavratil-monetplus/subscriptions","organizations_url":"https://api.github.com/users/onavratil-monetplus/orgs","repos_url":"https://api.github.com/users/onavratil-monetplus/repos","events_url":"https://api.github.com/users/onavratil-monetplus/events{/privacy}","received_events_url":"https://api.github.com/users/onavratil-monetplus/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2020-05-25T10:20:56Z","updated_at":"2020-06-04T09:24:04Z","closed_at":"2020-06-04T09:24:04Z","author_association":"NONE","body":"When i try to \r\n`cmake --build build`\r\nI get  following error\r\n```\r\n[ 98%] Linking C executable example_kem\r\n../lib/liboqs.a(fips202x4.c.o): In function `shake256x4.constprop.0':\r\nfips202x4.c:(.text.shake256x4.constprop.0+0x3013): undefined reference to `KeccakP1600times4_PermuteAll_24rounds'\r\nfips202x4.c:(.text.shake256x4.constprop.0+0x47b1): undefined reference to `KeccakP1600times4_PermuteAll_24rounds'\r\n../lib/liboqs.a(fips202x4.c.o): In function `PQCLEAN_KYBER512_AVX2_shake128x4_squeezeblocks':\r\nfips202x4.c:(.text.PQCLEAN_KYBER512_AVX2_shake128x4_squeezeblocks+0x54): undefined reference to `KeccakP1600times4_PermuteAll_24rounds'\r\ncollect2: error: ld returned 1 exit status\r\ngmake[2]: *** [tests/example_kem] Error 1\r\ngmake[1]: *** [tests/CMakeFiles/example_kem.dir/all] Error 2\r\ngmake: *** [all] Error 2\r\n```\r\nStrangely, I can build the lib on another machine. I suspect that openssl may be the problem, since on the compiling machine\r\n```\r\n$ openssl version\r\nOpenSSL 1.1.1c FIPS  28 May 2019\r\n```\r\nThe machine that has problems compiling\r\n```\r\n$ openssl version\r\nOpenSSL 1.1.1c  28 May 2019\r\n```\r\nIt seems to miss the FIPS module, thus also the problem in fips202... file. I build OpenSSL 1.1 manually from source on the problematic machine. I have checked liboqs.a by `nm` on both the machines and they seem to contain identical symbols.\r\n\r\nSince LibOQS switched to OpenSSL 1.1+, there is no FIPS module available (afaik is expected in OpenSSL 3.0). If my assumptions are correct, then OQS will not be runable on distros without packaged OpenSSL with vendor-provided FIPS module.\r\n\r\nI have tried numerous workarounds yet the error is always the same (and always on the far far side of linking phase).\r\n"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/638731255","html_url":"https://github.com/open-quantum-safe/liboqs/issues/757#issuecomment-638731255","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/757","id":638731255,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODczMTI1NQ==","user":{"login":"onavratil-monetplus","id":64248330,"node_id":"MDQ6VXNlcjY0MjQ4MzMw","avatar_url":"https://avatars1.githubusercontent.com/u/64248330?v=4","gravatar_id":"","url":"https://api.github.com/users/onavratil-monetplus","html_url":"https://github.com/onavratil-monetplus","followers_url":"https://api.github.com/users/onavratil-monetplus/followers","following_url":"https://api.github.com/users/onavratil-monetplus/following{/other_user}","gists_url":"https://api.github.com/users/onavratil-monetplus/gists{/gist_id}","starred_url":"https://api.github.com/users/onavratil-monetplus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onavratil-monetplus/subscriptions","organizations_url":"https://api.github.com/users/onavratil-monetplus/orgs","repos_url":"https://api.github.com/users/onavratil-monetplus/repos","events_url":"https://api.github.com/users/onavratil-monetplus/events{/privacy}","received_events_url":"https://api.github.com/users/onavratil-monetplus/received_events","type":"User","site_admin":false},"created_at":"2020-06-04T09:24:04Z","updated_at":"2020-06-04T09:24:04Z","author_association":"NONE","body":"Hello, thanks for the patch!\r\nI have managed to succesfully build the library on the problematic machine with default value for OQS_USE_CPU_EXTENSIONS.\r\nI have tried to run tests `gmake run_tests` but I get \r\n```pytest.py: error: unrecognized arguments: --numprocesses=auto```\r\nI guess my distro has a different version of pytest packaged, but its not necessary to unvestigate this issue. Nevertheless, I was able to succesfully run some tests manually, as suggested `tests/speed_kem Kyber512` and some others, seems like it works fine.\r\nMore importantly tho, I have also rebased my fork to this commit and was able to build & run it on both machines without the abovementioned switch. Seems to work just fine. \r\nThanks again for the fix!\r\n"}},"public":true,"created_at":"2020-06-04T09:24:05Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
