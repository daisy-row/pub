{"id":"13131600800","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/808","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/808/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/808/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/808/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/808","id":674084248,"node_id":"MDU6SXNzdWU2NzQwODQyNDg=","number":808,"title":"Address sanitizer error on SPHINCS+","user":{"login":"claucece","id":8270508,"node_id":"MDQ6VXNlcjgyNzA1MDg=","avatar_url":"https://avatars0.githubusercontent.com/u/8270508?v=4","gravatar_id":"","url":"https://api.github.com/users/claucece","html_url":"https://github.com/claucece","followers_url":"https://api.github.com/users/claucece/followers","following_url":"https://api.github.com/users/claucece/following{/other_user}","gists_url":"https://api.github.com/users/claucece/gists{/gist_id}","starred_url":"https://api.github.com/users/claucece/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/claucece/subscriptions","organizations_url":"https://api.github.com/users/claucece/orgs","repos_url":"https://api.github.com/users/claucece/repos","events_url":"https://api.github.com/users/claucece/events{/privacy}","received_events_url":"https://api.github.com/users/claucece/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-06T07:22:29Z","updated_at":"2020-08-06T17:19:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"On `SPHINCS+-Haraka-256f-robust`, `SPHINCS+-Haraka-256f-simple`, `SPHINCS+-Haraka-256s-robust`, `SPHINCS+-Haraka-256s-simple`,  and `SPHINCS+-Haraka-256f-robust`, some address sanitizer errors occur of the flavor:\r\n\r\n```\r\n. > ./build/tests/kat_sig SPHINCS+-Haraka-256s-robust\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/11.0.0/include/emmintrin.h:3553:10: runtime error: load of misaligned address 0x7ffee7648278 for type 'const __m128i' (vector of 2 'long long' values), which requires 16 byte alignment\r\n0x7ffee7648278: note: pointer points here\r\n 00 00 00 00  7c 99 35 a0 b0 76 94 aa  0c 6d 10 e4 db 6b 1a dd  2f d8 1a 25 cc b1 48 03  2d cd 73 99\r\n              ^ \r\nUndefinedBehaviorSanitizer:DEADLYSIGNAL\r\n==64875==ERROR: UndefinedBehaviorSanitizer: SEGV on unknown address 0x000000000000 (pc 0x00010964563a bp 0x7ffee76400d0 sp 0x7ffee763fc70 T265528)\r\n==64875==The signal is caused by a READ memory access.\r\n==64875==Hint: address points to the zero page.\r\n    #0 0x109645639 in haraka_S_absorb (kat_sig:x86_64+0x10108e639)\r\n    #1 0x109637e65 in PQCLEAN_SPHINCSHARAKA256SROBUST_AESNI_haraka_S (kat_sig:x86_64+0x101080e65)\r\n    #2 0x109634acd in PQCLEAN_SPHINCSHARAKA256SROBUST_AESNI_tweak_constants (kat_sig:x86_64+0x10107dacd)\r\n    #3 0x10972f239 in PQCLEAN_SPHINCSHARAKA256SROBUST_AESNI_initialize_hash_function (kat_sig:x86_64+0x101178239)\r\n    #4 0x1097304b5 in PQCLEAN_SPHINCSHARAKA256SROBUST_AESNI_crypto_sign_signature (kat_sig:x86_64+0x1011794b5)\r\n    #5 0x109616bf7 in OQS_SIG_sphincs_haraka_256s_robust_sign sig_sphincs_haraka_256s_robust.c:65\r\n    #6 0x10a3c8c54 in OQS_SIG_sign sig.c:927\r\n    #7 0x1085cb17b in sig_kat kat_sig.c:697\r\n    #8 0x1085cb5df in main kat_sig.c:756\r\n    #9 0x7fff660dd3d4 in start (libdyld.dylib:x86_64+0x163d4)\r\n\r\n==64875==Register values:\r\nrax = 0x00007ffee7648278  rbx = 0x0000000000000000  rcx = 0x00007fff66213be2  rdx = 0x0000000000000000  \r\nrdi = 0x0000000000000000  rsi = 0x000000010bbffd00  rbp = 0x00007ffee76400d0  rsp = 0x00007ffee763fc70  \r\n r8 = 0x000000010b30f8b0   r9 = 0x0000000000000076  r10 = 0x00007fff66213be2  r11 = 0x0000000000000206  \r\nr12 = 0x0000000000000000  r13 = 0x0000000000000000  r14 = 0x0000000000000000  r15 = 0x0000000000000000  \r\nUndefinedBehaviorSanitizer can not provide additional info.\r\n==64875==ABORTING\r\ncount = 0\r\nseed = 061550234D158C5EC95595FE04EF7A25767F2E24CC2BC479D09D86DC9ABCFDE7056A8C266F9EF97ED08541DBD2E1FFA1\r\nmlen = 33\r\nmsg = D81C4D8D734FCBFBEADE3D3F8A039FAA2A2C9957E835AD55B22E75BF57BB556AC8\r\npk = 3E784CCB7EBCDCFD45542B7F6AF778742E0F4479175084AA488B3B74340678AA66A812016C62357F407E92B7652E36E3F5CEB7E063236CA860F74B42B370DF45\r\nsk = 7C9935A0B07694AA0C6D10E4DB6B1ADD2FD81A25CCB148032DCD739936737F2DB505D7CFAD1B497499323C8686325E4792F267AAFA3F87CA60D01CB54F29202A3E784CCB7EBCDCFD45542B7F6AF778742E0F4479175084AA488B3B74340678AA66A812016C62357F407E92B7652E36E3F5CEB7E063236CA860F74B42B370DF45\r\n```\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/670064438","html_url":"https://github.com/open-quantum-safe/liboqs/issues/808#issuecomment-670064438","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/808","id":670064438,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDA2NDQzOA==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T17:19:01Z","updated_at":"2020-08-06T17:19:01Z","author_association":"MEMBER","body":"@thomwiggers @joostrijneveld any thoughts?","performed_via_github_app":null}},"public":true,"created_at":"2020-08-06T17:19:01Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13131735677","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/807","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/807/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/807/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/807/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/807","id":674080598,"node_id":"MDU6SXNzdWU2NzQwODA1OTg=","number":807,"title":"Undefined behaviour in FireSaber-KEM, FrodoKEM, SIDH compressed","user":{"login":"claucece","id":8270508,"node_id":"MDQ6VXNlcjgyNzA1MDg=","avatar_url":"https://avatars0.githubusercontent.com/u/8270508?v=4","gravatar_id":"","url":"https://api.github.com/users/claucece","html_url":"https://github.com/claucece","followers_url":"https://api.github.com/users/claucece/followers","following_url":"https://api.github.com/users/claucece/following{/other_user}","gists_url":"https://api.github.com/users/claucece/gists{/gist_id}","starred_url":"https://api.github.com/users/claucece/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/claucece/subscriptions","organizations_url":"https://api.github.com/users/claucece/orgs","repos_url":"https://api.github.com/users/claucece/repos","events_url":"https://api.github.com/users/claucece/events{/privacy}","received_events_url":"https://api.github.com/users/claucece/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-08-06T07:15:52Z","updated_at":"2020-08-06T17:34:02Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi!\r\n\r\nI've been looking at the library and running some things, and this is a really nice work, so thanks for all!\r\n\r\nI recently ran some tests, enabling clang's UndefinedBehaviorSanitizer using the build sequence:\r\n\r\n```\r\nmkdir build && cd build\r\ncmake -DCMAKE_BUILD_TYPE=Debug -DUSE_SANITIZER=Undefined -GNinja ..\r\nninja\r\n```\r\n\r\nMy compiler is clang-11, and arch is x86_64-apple-darwin18.7.0\r\n\r\nI ran onto several undefined behaviour, on some algorithms (I'm just pasting only one of each 'family'):\r\n\r\n\r\n```\r\ntests/test_kem FireSaber-KEM    \r\nConfiguration info\r\n==================\r\nTarget platform:  x86_64-Darwin-18.7.0\r\nCompiler:         clang (11.0.0 (clang-1100.0.33.17))\r\nOQS version:      0.4.0-rc1\r\nGit commit:       477ef3f60cd04f9b72b499d000a8f77ae99c0d89 (+ local modifications)\r\nOpenSSL enabled:  Yes (OpenSSL 1.1.1g  21 Apr 2020)\r\nAES:              OpenSSL\r\nSHA-2:            OpenSSL\r\nSHA-3:            OpenSSL\r\n\r\n================================================================================\r\nSample computation for KEM FireSaber-KEM\r\n================================================================================\r\n../src/kem/saber/pqclean_firesaber_clean/poly_mul.c:50:44: runtime error: signed integer overflow: 57354 * 40101 cannot be represented in type 'int'\r\nshared secrets are equal\r\n```\r\n\r\n```\r\ntests/test_kem FrodoKEM-640-SHAKE\r\nConfiguration info\r\n==================\r\nTarget platform:  x86_64-Darwin-18.7.0\r\nCompiler:         clang (11.0.0 (clang-1100.0.33.17))\r\nOQS version:      0.4.0-rc1\r\nGit commit:       477ef3f60cd04f9b72b499d000a8f77ae99c0d89 (+ local modifications)\r\nOpenSSL enabled:  Yes (OpenSSL 1.1.1g  21 Apr 2020)\r\nAES:              OpenSSL\r\nSHA-2:            OpenSSL\r\nSHA-3:            OpenSSL\r\n\r\n================================================================================\r\nSample computation for KEM FrodoKEM-640-SHAKE\r\n================================================================================\r\n../src/kem/frodokem/external/frodo_macrify_optimized.c:281:34: runtime error: signed integer overflow: 65534 * 59141 cannot be represented in type 'int'\r\n../src/kem/frodokem/external/frodo_macrify_optimized.c:281:28: runtime error: signed integer overflow: 39658 + 2147450877 cannot be represented in type 'int'\r\nshared secrets are equal\r\n```\r\n\r\n```\r\ntests/test_kem SIDH-p503-compressed\r\nConfiguration info\r\n==================\r\nTarget platform:  x86_64-Darwin-18.7.0\r\nCompiler:         clang (11.0.0 (clang-1100.0.33.17))\r\nOQS version:      0.4.0-rc1\r\nGit commit:       477ef3f60cd04f9b72b499d000a8f77ae99c0d89 (+ local modifications)\r\nOpenSSL enabled:  Yes (OpenSSL 1.1.1g  21 Apr 2020)\r\nAES:              OpenSSL\r\nSHA-2:            OpenSSL\r\nSHA-3:            OpenSSL\r\n\r\n================================================================================\r\nSample computation for KEM SIDH-p503-compressed\r\n================================================================================\r\n../src/kem/sike/external/P503/../compression/dlog.c:108:35: runtime error: index 4 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\n../src/kem/sike/external/P503/../compression/dlog.c:96:39: runtime error: index 44 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\n../src/kem/sike/external/P503/../compression/dlog.c:98:39: runtime error: index 44 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\n../src/kem/sike/external/P503/../compression/dlog.c:115:35: runtime error: index 4 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\n../src/kem/sike/external/P503/../compression/dlog.c:65:34: runtime error: index 4 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\n../src/kem/sike/external/P503/../compression/dlog.c:58:38: runtime error: index 22 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\nshared secrets are equal\r\n../src/kem/sike/external/P503/../compression/sidh_compressed.c:1031:26: runtime error: index 233 out of bounds for type 'const uint64_t [17][8]'\r\n```\r\n\r\nI haven't finish running it all for all tests; but if it is of interest, I can do that.\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/670073392","html_url":"https://github.com/open-quantum-safe/liboqs/issues/807#issuecomment-670073392","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/807","id":670073392,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDA3MzM5Mg==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T17:34:02Z","updated_at":"2020-08-06T17:34:02Z","author_association":"MEMBER","body":"Hi Sof√≠a! We are aware of some undefined behaviour (#637, #791) but not all of the ones you found, perhaps due to a different version of clang being used.  \r\n\r\nI've tried fixing the Frodo ones, please see https://github.com/open-quantum-safe/liboqs/tree/ds-frodo-undefined-behaviour.\r\n\r\nFor SIDH, those should be covered by #637.\r\n\r\nFor Saber, can you file the bug report in PQClean, as we pull our Saber implementation from there?","performed_via_github_app":null}},"public":true,"created_at":"2020-08-06T17:34:02Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13131749080","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/809","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/809/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/809/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/809/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/809","id":674486466,"node_id":"MDExOlB1bGxSZXF1ZXN0NDY0MTcwMjE5","number":809,"title":"Fix undefined behaviour in FrodoKEM","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"assignees":[{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2020-08-06T17:34:56Z","updated_at":"2020-08-06T17:35:32Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/809","html_url":"https://github.com/open-quantum-safe/liboqs/pull/809","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/809.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/809.patch"},"body":"<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\nPartially addresses #807 \r\n\r\n<!-- Please answer the following questions to help manage version and changes across projects. -->\r\n\r\n* [No] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [No] Does this PR change the the list of algorithms available -- either adding or removing?  (If so, PRs in OQS-OpenSSL, OQS-BoringSSL, and OQS-OpenSSH will also be required by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/670074222","html_url":"https://github.com/open-quantum-safe/liboqs/pull/809#issuecomment-670074222","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/809","id":670074222,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDA3NDIyMg==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T17:35:32Z","updated_at":"2020-08-06T17:35:32Z","author_association":"MEMBER","body":"@claucece does this address the Frodo undefined behaviour you noticed?","performed_via_github_app":null}},"public":true,"created_at":"2020-08-06T17:35:32Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13132349775","type":"IssueCommentEvent","actor":{"id":16247285,"login":"christianpaquin","display_login":"christianpaquin","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","avatar_url":"https://avatars.githubusercontent.com/u/16247285?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/806","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/806/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/806/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/806/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/806","id":673630713,"node_id":"MDU6SXNzdWU2NzM2MzA3MTM=","number":806,"title":"Occasional AddressSanitizer error in SIKE compressed","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":{"login":"christianpaquin","id":16247285,"node_id":"MDQ6VXNlcjE2MjQ3Mjg1","avatar_url":"https://avatars0.githubusercontent.com/u/16247285?v=4","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"assignees":[{"login":"christianpaquin","id":16247285,"node_id":"MDQ6VXNlcjE2MjQ3Mjg1","avatar_url":"https://avatars0.githubusercontent.com/u/16247285?v=4","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-08-05T15:29:57Z","updated_at":"2020-08-06T18:44:33Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"A [recent nightly build](https://app.circleci.com/pipelines/github/open-quantum-safe/liboqs/936/workflows/c0f9bfc4-a70d-4c80-8f20-dead27e22a89/jobs/9467) with AddressSanitizer failed for SIKE-p434-compressed.  I tried reproducing locally, and it seems non-deterministic: it fails about 20% of the time when I run locally.\r\n\r\nTwo different errors occur, see logs below.\r\n\r\n## Steps to reproduce\r\n\r\n```\r\ndocker pull openquantumsafe/ci-ubuntu-bionic-x86_64:latest\r\ndocker run -dti openquantumsafe/ci-ubuntu-bionic-x86_64:latest /bin/bash\r\ndocker attach (whatever the output of the previous command was)\r\ngit clone https://github.com/open-quantum-safe/liboqs\r\ncd liboqs\r\nmkdir build && cd build\r\nenv CC=clang-9 cmake -GNinja -DCMAKE_BUILD_TYPE=Debug -DUSE_SANITIZER=Address ..\r\ntests/test_kem SIDH-p434-compressed\r\n```\r\n\r\nYou may have to run the last command (`tests/test_kem SIDH-p434-compressed`) several times to see the error; I observed it only approximately 20% of the time.\r\n\r\n## Error 1\r\n\r\n```\r\n==5049==ERROR: AddressSanitizer: global-buffer-overflow on address 0x000000a20120 at pc 0x000000511e42 bp 0x7f85bd8fd250 sp 0x7f85bd8fd248\r\nREAD of size 8 at 0x000000a20120 thread T1\r\n    #0 0x511e41 in fpcopy434 /root/liboqs/build/../src/kem/sike/external/P434/../fpx.c:94:16\r\n    #1 0x529fc7 in BuildEntangledXonly_Decomp /root/liboqs/build/../src/kem/sike/external/P434/../compression/sidh_compressed.c:1031:9\r\n    #2 0x52969d in PKBDecompression_dual /root/liboqs/build/../src/kem/sike/external/P434/../compression/sidh_compressed.c:1169:5\r\n    #3 0x50efd1 in EphemeralSecretAgreement_A_extended /root/liboqs/build/../src/kem/sike/external/P434/../compression/sidh_compressed.c:1313:9\r\n    #4 0x50eaf6 in oqs_kem_sidh_p434_compressed_EphemeralSecretAgreement_A /root/liboqs/build/../src/kem/sike/external/P434/../compression/sidh_compressed.c:1369:12\r\n    #5 0x4f90d4 in OQS_KEM_sidh_p434_compressed_decaps /root/liboqs/build/../src/kem/sike/kem_sike.c:379:6\r\n    #6 0x4c7afe in OQS_KEM_decaps /root/liboqs/build/../src/kem/kem.c:899:10\r\n    #7 0x4c3b42 in kem_test_correctness /root/liboqs/build/../tests/test_kem.c:118:7\r\n    #8 0x4c2e94 in test_wrapper /root/liboqs/build/../tests/test_kem.c:151:11\r\n    #9 0x7f85c161a6da in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76da)\r\n    #10 0x7f85c0d1f88e in clone (/lib/x86_64-linux-gnu/libc.so.6+0x12188e)\r\n\r\n0x000000a20120 is located 32 bytes to the left of global variable 'T_tate2_P' defined in '../src/kem/sike/external/P434/P434_compressed_pair_tables.c:1534:23' (0xa20140) of size 35952\r\n0x000000a20120 is located 0 bytes to the right of global variable 'T_tate2_firststep_P' defined in '../src/kem/sike/external/P434/P434_compressed_pair_tables.c:1522:23' (0xa20040) of size 224\r\nSUMMARY: AddressSanitizer: global-buffer-overflow /root/liboqs/build/../src/kem/sike/external/P434/../fpx.c:94:16 in fpcopy434\r\nShadow bytes around the buggy address:\r\n  0x00008013bfd0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x00008013bfe0: 00 00 00 00 00 00 00 00 00 00 00 f9 f9 f9 f9 f9\r\n  0x00008013bff0: f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9\r\n  0x00008013c000: f9 f9 f9 f9 f9 f9 f9 f9 00 00 00 00 00 00 00 00\r\n  0x00008013c010: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n=>0x00008013c020: 00 00 00 00[f9]f9 f9 f9 00 00 00 00 00 00 00 00\r\n  0x00008013c030: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x00008013c040: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x00008013c050: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x00008013c060: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x00008013c070: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\nShadow byte legend (one shadow byte represents 8 application bytes):\r\n  Addressable:           00\r\n  Partially addressable: 01 02 03 04 05 06 07 \r\n  Heap left redzone:       fa\r\n  Freed heap region:       fd\r\n  Stack left redzone:      f1\r\n  Stack mid redzone:       f2\r\n  Stack right redzone:     f3\r\n  Stack after return:      f5\r\n  Stack use after scope:   f8\r\n  Global redzone:          f9\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\n  Shadow gap:              cc\r\nThread T1 created by T0 here:\r\n    #0 0x47df1a in pthread_create (/root/liboqs/build/tests/test_kem+0x47df1a)\r\n    #1 0x4c4238 in main /root/liboqs/build/../tests/test_kem.c:198:13\r\n    #2 0x7f85c0c1fb96 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21b96)\r\n\r\n==5049==ABORTING\r\n```\r\n\r\n## Error 2\r\n\r\n```\r\n==5064==ERROR: AddressSanitizer: global-buffer-overflow on address 0x000000a1ecd0 at pc 0x000000511b92 bp 0x7f46639fce40 sp 0x7f46639fce38\r\nREAD of size 8 at 0x000000a1ecd0 thread T1\r\n    #0 0x511b91 in mp_add /root/liboqs/build/../src/kem/sike/external/P434/../fpx.c:250:9\r\n    #1 0x5141b9 in mp_addfast /root/liboqs/build/../src/kem/sike/external/P434/../fpx.c:219:2\r\n    #2 0x512964 in fp2mul434_mont /root/liboqs/build/../src/kem/sike/external/P434/../fpx.c:316:5\r\n    #3 0x529f07 in BuildEntangledXonly_Decomp /root/liboqs/build/../src/kem/sike/external/P434/../compression/sidh_compressed.c:1021:5\r\n    #4 0x52969d in PKBDecompression_dual /root/liboqs/build/../src/kem/sike/external/P434/../compression/sidh_compressed.c:1169:5\r\n    #5 0x50efd1 in EphemeralSecretAgreement_A_extended /root/liboqs/build/../src/kem/sike/external/P434/../compression/sidh_compressed.c:1313:9\r\n    #6 0x50eaf6 in oqs_kem_sidh_p434_compressed_EphemeralSecretAgreement_A /root/liboqs/build/../src/kem/sike/external/P434/../compression/sidh_compressed.c:1369:12\r\n    #7 0x4f90d4 in OQS_KEM_sidh_p434_compressed_decaps /root/liboqs/build/../src/kem/sike/kem_sike.c:379:6\r\n    #8 0x4c7afe in OQS_KEM_decaps /root/liboqs/build/../src/kem/kem.c:899:10\r\n    #9 0x4c3b42 in kem_test_correctness /root/liboqs/build/../tests/test_kem.c:118:7\r\n    #10 0x4c2e94 in test_wrapper /root/liboqs/build/../tests/test_kem.c:151:11\r\n    #11 0x7f466775e6da in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76da)\r\n    #12 0x7f4666e6388e in clone (/lib/x86_64-linux-gnu/libc.so.6+0x12188e)\r\n\r\n0x000000a1ecd0 is located 224 bytes to the right of global variable 'table_v_qnr' defined in '../src/kem/sike/external/P434/P434_compressed.c:288:23' (0xa1e480) of size 1904\r\nSUMMARY: AddressSanitizer: global-buffer-overflow /root/liboqs/build/../src/kem/sike/external/P434/../fpx.c:250:9 in mp_add\r\nShadow bytes around the buggy address:\r\n  0x00008013bd40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x00008013bd50: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x00008013bd60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x00008013bd70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 f9 f9\r\n  0x00008013bd80: f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9\r\n=>0x00008013bd90: f9 f9 f9 f9 f9 f9 f9 f9 f9 f9[f9]f9 f9 f9 f9 f9\r\n  0x00008013bda0: f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9 f9\r\n  0x00008013bdb0: f9 f9 f9 f9 f9 f9 f9 f9 00 00 00 00 00 00 00 00\r\n  0x00008013bdc0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x00008013bdd0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x00008013bde0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\nShadow byte legend (one shadow byte represents 8 application bytes):\r\n  Addressable:           00\r\n  Partially addressable: 01 02 03 04 05 06 07 \r\n  Heap left redzone:       fa\r\n  Freed heap region:       fd\r\n  Stack left redzone:      f1\r\n  Stack mid redzone:       f2\r\n  Stack right redzone:     f3\r\n  Stack after return:      f5\r\n  Stack use after scope:   f8\r\n  Global redzone:          f9\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\n  Shadow gap:              cc\r\nThread T1 created by T0 here:\r\n    #0 0x47df1a in pthread_create (/root/liboqs/build/tests/test_kem+0x47df1a)\r\n    #1 0x4c4238 in main /root/liboqs/build/../tests/test_kem.c:198:13\r\n    #2 0x7f4666d63b96 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21b96)\r\n\r\n==5064==ABORTING\r\n```","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/670124686","html_url":"https://github.com/open-quantum-safe/liboqs/issues/806#issuecomment-670124686","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/806","id":670124686,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDEyNDY4Ng==","user":{"login":"christianpaquin","id":16247285,"node_id":"MDQ6VXNlcjE2MjQ3Mjg1","avatar_url":"https://avatars0.githubusercontent.com/u/16247285?v=4","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T18:44:32Z","updated_at":"2020-08-06T18:44:32Z","author_association":"CONTRIBUTOR","body":"The SIKE team is investigating this. We shouldn't wait for this for v0.4.","performed_via_github_app":null}},"public":true,"created_at":"2020-08-06T18:44:33Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13134502789","type":"IssueCommentEvent","actor":{"id":8270508,"login":"claucece","display_login":"claucece","gravatar_id":"","url":"https://api.github.com/users/claucece","avatar_url":"https://avatars.githubusercontent.com/u/8270508?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/807","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/807/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/807/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/807/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/807","id":674080598,"node_id":"MDU6SXNzdWU2NzQwODA1OTg=","number":807,"title":"Undefined behaviour in FireSaber-KEM, FrodoKEM, SIDH compressed","user":{"login":"claucece","id":8270508,"node_id":"MDQ6VXNlcjgyNzA1MDg=","avatar_url":"https://avatars0.githubusercontent.com/u/8270508?v=4","gravatar_id":"","url":"https://api.github.com/users/claucece","html_url":"https://github.com/claucece","followers_url":"https://api.github.com/users/claucece/followers","following_url":"https://api.github.com/users/claucece/following{/other_user}","gists_url":"https://api.github.com/users/claucece/gists{/gist_id}","starred_url":"https://api.github.com/users/claucece/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/claucece/subscriptions","organizations_url":"https://api.github.com/users/claucece/orgs","repos_url":"https://api.github.com/users/claucece/repos","events_url":"https://api.github.com/users/claucece/events{/privacy}","received_events_url":"https://api.github.com/users/claucece/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-06T07:15:52Z","updated_at":"2020-08-06T23:40:24Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi!\r\n\r\nI've been looking at the library and running some things, and this is a really nice work, so thanks for all!\r\n\r\nI recently ran some tests, enabling clang's UndefinedBehaviorSanitizer using the build sequence:\r\n\r\n```\r\nmkdir build && cd build\r\ncmake -DCMAKE_BUILD_TYPE=Debug -DUSE_SANITIZER=Undefined -GNinja ..\r\nninja\r\n```\r\n\r\nMy compiler is clang-11, and arch is x86_64-apple-darwin18.7.0\r\n\r\nI ran onto several undefined behaviour, on some algorithms (I'm just pasting only one of each 'family'):\r\n\r\n\r\n```\r\ntests/test_kem FireSaber-KEM    \r\nConfiguration info\r\n==================\r\nTarget platform:  x86_64-Darwin-18.7.0\r\nCompiler:         clang (11.0.0 (clang-1100.0.33.17))\r\nOQS version:      0.4.0-rc1\r\nGit commit:       477ef3f60cd04f9b72b499d000a8f77ae99c0d89 (+ local modifications)\r\nOpenSSL enabled:  Yes (OpenSSL 1.1.1g  21 Apr 2020)\r\nAES:              OpenSSL\r\nSHA-2:            OpenSSL\r\nSHA-3:            OpenSSL\r\n\r\n================================================================================\r\nSample computation for KEM FireSaber-KEM\r\n================================================================================\r\n../src/kem/saber/pqclean_firesaber_clean/poly_mul.c:50:44: runtime error: signed integer overflow: 57354 * 40101 cannot be represented in type 'int'\r\nshared secrets are equal\r\n```\r\n\r\n```\r\ntests/test_kem FrodoKEM-640-SHAKE\r\nConfiguration info\r\n==================\r\nTarget platform:  x86_64-Darwin-18.7.0\r\nCompiler:         clang (11.0.0 (clang-1100.0.33.17))\r\nOQS version:      0.4.0-rc1\r\nGit commit:       477ef3f60cd04f9b72b499d000a8f77ae99c0d89 (+ local modifications)\r\nOpenSSL enabled:  Yes (OpenSSL 1.1.1g  21 Apr 2020)\r\nAES:              OpenSSL\r\nSHA-2:            OpenSSL\r\nSHA-3:            OpenSSL\r\n\r\n================================================================================\r\nSample computation for KEM FrodoKEM-640-SHAKE\r\n================================================================================\r\n../src/kem/frodokem/external/frodo_macrify_optimized.c:281:34: runtime error: signed integer overflow: 65534 * 59141 cannot be represented in type 'int'\r\n../src/kem/frodokem/external/frodo_macrify_optimized.c:281:28: runtime error: signed integer overflow: 39658 + 2147450877 cannot be represented in type 'int'\r\nshared secrets are equal\r\n```\r\n\r\n```\r\ntests/test_kem SIDH-p503-compressed\r\nConfiguration info\r\n==================\r\nTarget platform:  x86_64-Darwin-18.7.0\r\nCompiler:         clang (11.0.0 (clang-1100.0.33.17))\r\nOQS version:      0.4.0-rc1\r\nGit commit:       477ef3f60cd04f9b72b499d000a8f77ae99c0d89 (+ local modifications)\r\nOpenSSL enabled:  Yes (OpenSSL 1.1.1g  21 Apr 2020)\r\nAES:              OpenSSL\r\nSHA-2:            OpenSSL\r\nSHA-3:            OpenSSL\r\n\r\n================================================================================\r\nSample computation for KEM SIDH-p503-compressed\r\n================================================================================\r\n../src/kem/sike/external/P503/../compression/dlog.c:108:35: runtime error: index 4 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\n../src/kem/sike/external/P503/../compression/dlog.c:96:39: runtime error: index 44 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\n../src/kem/sike/external/P503/../compression/dlog.c:98:39: runtime error: index 44 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\n../src/kem/sike/external/P503/../compression/dlog.c:115:35: runtime error: index 4 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\n../src/kem/sike/external/P503/../compression/dlog.c:65:34: runtime error: index 4 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\n../src/kem/sike/external/P503/../compression/dlog.c:58:38: runtime error: index 22 out of bounds for type 'const f2elm_t' (aka 'felm_t const[2]')\r\nshared secrets are equal\r\n../src/kem/sike/external/P503/../compression/sidh_compressed.c:1031:26: runtime error: index 233 out of bounds for type 'const uint64_t [17][8]'\r\n```\r\n\r\nI haven't finish running it all for all tests; but if it is of interest, I can do that.\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/670243398","html_url":"https://github.com/open-quantum-safe/liboqs/issues/807#issuecomment-670243398","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/807","id":670243398,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDI0MzM5OA==","user":{"login":"claucece","id":8270508,"node_id":"MDQ6VXNlcjgyNzA1MDg=","avatar_url":"https://avatars0.githubusercontent.com/u/8270508?v=4","gravatar_id":"","url":"https://api.github.com/users/claucece","html_url":"https://github.com/claucece","followers_url":"https://api.github.com/users/claucece/followers","following_url":"https://api.github.com/users/claucece/following{/other_user}","gists_url":"https://api.github.com/users/claucece/gists{/gist_id}","starred_url":"https://api.github.com/users/claucece/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/claucece/subscriptions","organizations_url":"https://api.github.com/users/claucece/orgs","repos_url":"https://api.github.com/users/claucece/repos","events_url":"https://api.github.com/users/claucece/events{/privacy}","received_events_url":"https://api.github.com/users/claucece/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T23:40:24Z","updated_at":"2020-08-06T23:40:24Z","author_association":"NONE","body":"> We are aware of some undefined behaviour (#637, #791) but not all of the ones you found, perhaps due to a different version of clang being used.\r\n\r\nYes, I think that might be the cause. There was lots of new things added to Clang 10.0: https://releases.llvm.org/10.0.0/tools/clang/docs/ReleaseNotes.html . I'll check if it is possible to add a machine on the CI with clang 11. Will that be of interest?\r\n\r\n> I've tried fixing the Frodo ones, please see https://github.com/open-quantum-safe/liboqs/tree/ds-frodo-undefined-behaviour.\r\n\r\nIt is fixed ;)\r\n\r\n> For Saber, can you file the bug report in PQClean, as we pull our Saber implementation from there?\r\n\r\nFor sure! I'll open a bug report over there.\r\n\r\n","performed_via_github_app":null}},"public":true,"created_at":"2020-08-06T23:40:24Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13134507477","type":"IssueCommentEvent","actor":{"id":8270508,"login":"claucece","display_login":"claucece","gravatar_id":"","url":"https://api.github.com/users/claucece","avatar_url":"https://avatars.githubusercontent.com/u/8270508?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/809","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/809/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/809/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/809/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/809","id":674486466,"node_id":"MDExOlB1bGxSZXF1ZXN0NDY0MTcwMjE5","number":809,"title":"Fix undefined behaviour in FrodoKEM","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"assignees":[{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2020-08-06T17:34:56Z","updated_at":"2020-08-06T23:41:19Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/809","html_url":"https://github.com/open-quantum-safe/liboqs/pull/809","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/809.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/809.patch"},"body":"<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\nPartially addresses #807 \r\n\r\n<!-- Please answer the following questions to help manage version and changes across projects. -->\r\n\r\n* [No] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [No] Does this PR change the the list of algorithms available -- either adding or removing?  (If so, PRs in OQS-OpenSSL, OQS-BoringSSL, and OQS-OpenSSH will also be required by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/670243672","html_url":"https://github.com/open-quantum-safe/liboqs/pull/809#issuecomment-670243672","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/809","id":670243672,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDI0MzY3Mg==","user":{"login":"claucece","id":8270508,"node_id":"MDQ6VXNlcjgyNzA1MDg=","avatar_url":"https://avatars0.githubusercontent.com/u/8270508?v=4","gravatar_id":"","url":"https://api.github.com/users/claucece","html_url":"https://github.com/claucece","followers_url":"https://api.github.com/users/claucece/followers","following_url":"https://api.github.com/users/claucece/following{/other_user}","gists_url":"https://api.github.com/users/claucece/gists{/gist_id}","starred_url":"https://api.github.com/users/claucece/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/claucece/subscriptions","organizations_url":"https://api.github.com/users/claucece/orgs","repos_url":"https://api.github.com/users/claucece/repos","events_url":"https://api.github.com/users/claucece/events{/privacy}","received_events_url":"https://api.github.com/users/claucece/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T23:41:19Z","updated_at":"2020-08-06T23:41:19Z","author_association":"NONE","body":"Yes! It fixes it @dstebila ","performed_via_github_app":null}},"public":true,"created_at":"2020-08-06T23:41:19Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
