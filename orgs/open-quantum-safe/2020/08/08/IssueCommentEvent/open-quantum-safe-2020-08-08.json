{"id":"13146125909","type":"IssueCommentEvent","actor":{"id":8270508,"login":"claucece","display_login":"claucece","gravatar_id":"","url":"https://api.github.com/users/claucece","avatar_url":"https://avatars.githubusercontent.com/u/8270508?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/808","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/808/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/808/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/808/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/808","id":674084248,"node_id":"MDU6SXNzdWU2NzQwODQyNDg=","number":808,"title":"Address sanitizer error on SPHINCS+","user":{"login":"claucece","id":8270508,"node_id":"MDQ6VXNlcjgyNzA1MDg=","avatar_url":"https://avatars0.githubusercontent.com/u/8270508?v=4","gravatar_id":"","url":"https://api.github.com/users/claucece","html_url":"https://github.com/claucece","followers_url":"https://api.github.com/users/claucece/followers","following_url":"https://api.github.com/users/claucece/following{/other_user}","gists_url":"https://api.github.com/users/claucece/gists{/gist_id}","starred_url":"https://api.github.com/users/claucece/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/claucece/subscriptions","organizations_url":"https://api.github.com/users/claucece/orgs","repos_url":"https://api.github.com/users/claucece/repos","events_url":"https://api.github.com/users/claucece/events{/privacy}","received_events_url":"https://api.github.com/users/claucece/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-08-06T07:22:29Z","updated_at":"2020-08-08T07:57:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"On `SPHINCS+-Haraka-256f-robust`, `SPHINCS+-Haraka-256f-simple`, `SPHINCS+-Haraka-256s-robust`, `SPHINCS+-Haraka-256s-simple`,  and `SPHINCS+-Haraka-256f-robust`, some address sanitizer errors occur of the flavor:\r\n\r\n```\r\n. > ./build/tests/kat_sig SPHINCS+-Haraka-256s-robust\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/11.0.0/include/emmintrin.h:3553:10: runtime error: load of misaligned address 0x7ffee7648278 for type 'const __m128i' (vector of 2 'long long' values), which requires 16 byte alignment\r\n0x7ffee7648278: note: pointer points here\r\n 00 00 00 00  7c 99 35 a0 b0 76 94 aa  0c 6d 10 e4 db 6b 1a dd  2f d8 1a 25 cc b1 48 03  2d cd 73 99\r\n              ^ \r\nUndefinedBehaviorSanitizer:DEADLYSIGNAL\r\n==64875==ERROR: UndefinedBehaviorSanitizer: SEGV on unknown address 0x000000000000 (pc 0x00010964563a bp 0x7ffee76400d0 sp 0x7ffee763fc70 T265528)\r\n==64875==The signal is caused by a READ memory access.\r\n==64875==Hint: address points to the zero page.\r\n    #0 0x109645639 in haraka_S_absorb (kat_sig:x86_64+0x10108e639)\r\n    #1 0x109637e65 in PQCLEAN_SPHINCSHARAKA256SROBUST_AESNI_haraka_S (kat_sig:x86_64+0x101080e65)\r\n    #2 0x109634acd in PQCLEAN_SPHINCSHARAKA256SROBUST_AESNI_tweak_constants (kat_sig:x86_64+0x10107dacd)\r\n    #3 0x10972f239 in PQCLEAN_SPHINCSHARAKA256SROBUST_AESNI_initialize_hash_function (kat_sig:x86_64+0x101178239)\r\n    #4 0x1097304b5 in PQCLEAN_SPHINCSHARAKA256SROBUST_AESNI_crypto_sign_signature (kat_sig:x86_64+0x1011794b5)\r\n    #5 0x109616bf7 in OQS_SIG_sphincs_haraka_256s_robust_sign sig_sphincs_haraka_256s_robust.c:65\r\n    #6 0x10a3c8c54 in OQS_SIG_sign sig.c:927\r\n    #7 0x1085cb17b in sig_kat kat_sig.c:697\r\n    #8 0x1085cb5df in main kat_sig.c:756\r\n    #9 0x7fff660dd3d4 in start (libdyld.dylib:x86_64+0x163d4)\r\n\r\n==64875==Register values:\r\nrax = 0x00007ffee7648278  rbx = 0x0000000000000000  rcx = 0x00007fff66213be2  rdx = 0x0000000000000000  \r\nrdi = 0x0000000000000000  rsi = 0x000000010bbffd00  rbp = 0x00007ffee76400d0  rsp = 0x00007ffee763fc70  \r\n r8 = 0x000000010b30f8b0   r9 = 0x0000000000000076  r10 = 0x00007fff66213be2  r11 = 0x0000000000000206  \r\nr12 = 0x0000000000000000  r13 = 0x0000000000000000  r14 = 0x0000000000000000  r15 = 0x0000000000000000  \r\nUndefinedBehaviorSanitizer can not provide additional info.\r\n==64875==ABORTING\r\ncount = 0\r\nseed = 061550234D158C5EC95595FE04EF7A25767F2E24CC2BC479D09D86DC9ABCFDE7056A8C266F9EF97ED08541DBD2E1FFA1\r\nmlen = 33\r\nmsg = D81C4D8D734FCBFBEADE3D3F8A039FAA2A2C9957E835AD55B22E75BF57BB556AC8\r\npk = 3E784CCB7EBCDCFD45542B7F6AF778742E0F4479175084AA488B3B74340678AA66A812016C62357F407E92B7652E36E3F5CEB7E063236CA860F74B42B370DF45\r\nsk = 7C9935A0B07694AA0C6D10E4DB6B1ADD2FD81A25CCB148032DCD739936737F2DB505D7CFAD1B497499323C8686325E4792F267AAFA3F87CA60D01CB54F29202A3E784CCB7EBCDCFD45542B7F6AF778742E0F4479175084AA488B3B74340678AA66A812016C62357F407E92B7652E36E3F5CEB7E063236CA860F74B42B370DF45\r\n```\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/670841466","html_url":"https://github.com/open-quantum-safe/liboqs/issues/808#issuecomment-670841466","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/808","id":670841466,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDg0MTQ2Ng==","user":{"login":"claucece","id":8270508,"node_id":"MDQ6VXNlcjgyNzA1MDg=","avatar_url":"https://avatars0.githubusercontent.com/u/8270508?v=4","gravatar_id":"","url":"https://api.github.com/users/claucece","html_url":"https://github.com/claucece","followers_url":"https://api.github.com/users/claucece/followers","following_url":"https://api.github.com/users/claucece/following{/other_user}","gists_url":"https://api.github.com/users/claucece/gists{/gist_id}","starred_url":"https://api.github.com/users/claucece/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/claucece/subscriptions","organizations_url":"https://api.github.com/users/claucece/orgs","repos_url":"https://api.github.com/users/claucece/repos","events_url":"https://api.github.com/users/claucece/events{/privacy}","received_events_url":"https://api.github.com/users/claucece/received_events","type":"User","site_admin":false},"created_at":"2020-08-08T07:57:28Z","updated_at":"2020-08-08T07:57:28Z","author_association":"NONE","body":"> @claucece could you change the LOAD macro in the respective haraka.c files for variants relying on AESNI in your local copy, and see if you still run into the same errors?\r\n\r\nI'll do this over the weekend, and investigate a little further to see if I find the root of the problem.","performed_via_github_app":null}},"public":true,"created_at":"2020-08-08T07:57:28Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
