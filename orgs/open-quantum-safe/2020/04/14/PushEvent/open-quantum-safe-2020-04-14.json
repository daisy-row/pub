{"id":"12039919166","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":215630242,"name":"open-quantum-safe/liboqs-go","url":"https://api.github.com/repos/open-quantum-safe/liboqs-go"},"payload":{"push_id":4913019678,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"e86930d09e72033067b8d72eb1d7310774128505","before":"5065c46e99958cc9cb084f1f372b0d7d1f526d87","commits":[{"sha":"e86930d09e72033067b8d72eb1d7310774128505","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"c","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-go/commits/e86930d09e72033067b8d72eb1d7310774128505"}]},"public":true,"created_at":"2020-04-14T05:32:50Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12039925229","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":215630242,"name":"open-quantum-safe/liboqs-go","url":"https://api.github.com/repos/open-quantum-safe/liboqs-go"},"payload":{"push_id":4913022865,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"37069d0d447a0ccfd8b3cca8b84c77c694a97d3e","before":"e86930d09e72033067b8d72eb1d7310774128505","commits":[{"sha":"37069d0d447a0ccfd8b3cca8b84c77c694a97d3e","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"full Windows support","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-go/commits/37069d0d447a0ccfd8b3cca8b84c77c694a97d3e"}]},"public":true,"created_at":"2020-04-14T05:33:58Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12040035868","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":162497174,"name":"open-quantum-safe/liboqs-python","url":"https://api.github.com/repos/open-quantum-safe/liboqs-python"},"payload":{"push_id":4913083675,"size":1,"distinct_size":1,"ref":"refs/heads/vsoftco-fixes","head":"a3a483dc2066cbe885e7c6b0a9092e78c208c66c","before":"0c5a59a09cbe8b06b2dc9e039db7fa5b1f7b32da","commits":[{"sha":"a3a483dc2066cbe885e7c6b0a9092e78c208c66c","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"finalized","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/commits/a3a483dc2066cbe885e7c6b0a9092e78c208c66c"}]},"public":true,"created_at":"2020-04-14T05:54:17Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12040040982","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":162497174,"name":"open-quantum-safe/liboqs-python","url":"https://api.github.com/repos/open-quantum-safe/liboqs-python"},"payload":{"push_id":4913086389,"size":1,"distinct_size":1,"ref":"refs/heads/vsoftco-fixes","head":"13ff5e7b3ef1fe8c1cdebd4aaef525fd38353003","before":"a3a483dc2066cbe885e7c6b0a9092e78c208c66c","commits":[{"sha":"13ff5e7b3ef1fe8c1cdebd4aaef525fd38353003","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"Update rand.py","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/commits/13ff5e7b3ef1fe8c1cdebd4aaef525fd38353003"}]},"public":true,"created_at":"2020-04-14T05:55:08Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12040048397","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":162497174,"name":"open-quantum-safe/liboqs-python","url":"https://api.github.com/repos/open-quantum-safe/liboqs-python"},"payload":{"push_id":4913090463,"size":1,"distinct_size":1,"ref":"refs/heads/vsoftco-fixes","head":"3ac84a596b454ab5f4018c6a2b8f9f8f1304d081","before":"13ff5e7b3ef1fe8c1cdebd4aaef525fd38353003","commits":[{"sha":"3ac84a596b454ab5f4018c6a2b8f9f8f1304d081","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"fixes + full windows support\n\ncloses #7","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/commits/3ac84a596b454ab5f4018c6a2b8f9f8f1304d081"}]},"public":true,"created_at":"2020-04-14T05:56:23Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12040055050","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":162497174,"name":"open-quantum-safe/liboqs-python","url":"https://api.github.com/repos/open-quantum-safe/liboqs-python"},"payload":{"push_id":4913093999,"size":1,"distinct_size":1,"ref":"refs/heads/vsoftco-fixes","head":"fdfd4de0017c2f687ba41d2d27f9fb802b21b8ea","before":"3ac84a596b454ab5f4018c6a2b8f9f8f1304d081","commits":[{"sha":"fdfd4de0017c2f687ba41d2d27f9fb802b21b8ea","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"Update __init__.py","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/commits/fdfd4de0017c2f687ba41d2d27f9fb802b21b8ea"}]},"public":true,"created_at":"2020-04-14T05:57:33Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12040057239","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":162497174,"name":"open-quantum-safe/liboqs-python","url":"https://api.github.com/repos/open-quantum-safe/liboqs-python"},"payload":{"push_id":4913095158,"size":1,"distinct_size":1,"ref":"refs/heads/vsoftco-fixes","head":"c3fc84fb5dda640f889ca8c1430badd43f376c37","before":"fdfd4de0017c2f687ba41d2d27f9fb802b21b8ea","commits":[{"sha":"c3fc84fb5dda640f889ca8c1430badd43f376c37","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"fixes + full windows support\n\ncloses #7","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/commits/c3fc84fb5dda640f889ca8c1430badd43f376c37"}]},"public":true,"created_at":"2020-04-14T05:57:56Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12040062002","type":"PushEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"push_id":4913097677,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"722ca648a13c052bf137e898ffbcfa81d17ccd4b","before":"a00781ca4644b1be50aae7fae7102d175f4578cc","commits":[{"sha":"722ca648a13c052bf137e898ffbcfa81d17ccd4b","author":{"name":"xvzcf","email":"0d09a926d00eb6e4de1be873a121117412a307d0@users.noreply.github.com"},"message":"Overhauled compiler-time CPU-extension detection. (#713)\n\nRefactored .CMake/alg_support.cmake, and kem/ and sig/ CMakeLists.txt files.\r\n\r\nRefactored copy_from_pqclean/ templating.\r\n\r\nAdded custom x64 CPU extension detection code and removed cpu_features.\r\n\r\nRemoved duplicate Kyber source directories.","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs/commits/722ca648a13c052bf137e898ffbcfa81d17ccd4b"}]},"public":true,"created_at":"2020-04-14T05:58:44Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12040100599","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":162497174,"name":"open-quantum-safe/liboqs-python","url":"https://api.github.com/repos/open-quantum-safe/liboqs-python"},"payload":{"push_id":4913119044,"size":1,"distinct_size":1,"ref":"refs/heads/vsoftco-fixes","head":"174ca5d186ca4b1ec4e31b6805c3d23312046f2b","before":"c3fc84fb5dda640f889ca8c1430badd43f376c37","commits":[{"sha":"174ca5d186ca4b1ec4e31b6805c3d23312046f2b","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"Update CHANGES.txt","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-python/commits/174ca5d186ca4b1ec4e31b6805c3d23312046f2b"}]},"public":true,"created_at":"2020-04-14T06:05:14Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12040102553","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":215630242,"name":"open-quantum-safe/liboqs-go","url":"https://api.github.com/repos/open-quantum-safe/liboqs-go"},"payload":{"push_id":4913120152,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"3cad1b316e70e8c43ee469f888023728e7778af2","before":"37069d0d447a0ccfd8b3cca8b84c77c694a97d3e","commits":[{"sha":"3cad1b316e70e8c43ee469f888023728e7778af2","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"Update CHANGES.txt","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-go/commits/3cad1b316e70e8c43ee469f888023728e7778af2"}]},"public":true,"created_at":"2020-04-14T06:05:35Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12040133776","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":215630242,"name":"open-quantum-safe/liboqs-go","url":"https://api.github.com/repos/open-quantum-safe/liboqs-go"},"payload":{"push_id":4913136999,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"4c333b65079455a6b4eb6d123ebe3a8dc19cdf9d","before":"3cad1b316e70e8c43ee469f888023728e7778af2","commits":[{"sha":"4c333b65079455a6b4eb6d123ebe3a8dc19cdf9d","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"full Windows support","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-go/commits/4c333b65079455a6b4eb6d123ebe3a8dc19cdf9d"}]},"public":true,"created_at":"2020-04-14T06:10:44Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12045038541","type":"PushEvent","actor":{"id":21228961,"login":"xvzcf","display_login":"xvzcf","gravatar_id":"","url":"https://api.github.com/users/xvzcf","avatar_url":"https://avatars.githubusercontent.com/u/21228961?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"push_id":4915682677,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"d6788819d88431822060d613199d93340c581dc5","before":"722ca648a13c052bf137e898ffbcfa81d17ccd4b","commits":[{"sha":"d6788819d88431822060d613199d93340c581dc5","author":{"name":"xvzcf","email":"0d09a926d00eb6e4de1be873a121117412a307d0@users.noreply.github.com"},"message":"Re-enabled Picnic and qTESLA. (#715)","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs/commits/d6788819d88431822060d613199d93340c581dc5"}]},"public":true,"created_at":"2020-04-14T14:52:55Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12047543859","type":"PushEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"push_id":4916978558,"size":1,"distinct_size":1,"ref":"refs/heads/OQS-OpenSSL_1_1_1-stable","head":"6874fa0737c6ec04a24ae3a0838a652c5af767b3","before":"24570943eca60e26246227f899f428757351ca4e","commits":[{"sha":"6874fa0737c6ec04a24ae3a0838a652c5af767b3","author":{"name":"Christian Paquin","email":"5e354fbc60a50a4914bb55be34107b73e39fe98c@microsoft.com"},"message":"Merged upstream tag 1.1.1f  (#167)\n\n* crypto/threads_win.c: fix preprocessor indentation\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9860)\r\n\r\n* BIO_f_zlib: Properly handle BIO_CTRL_PENDING and BIO_CTRL_WPENDING calls.\r\n\r\nThere can be data to write in output buffer and data to read that were\r\nnot yet read in the input stream.\r\n\r\nFixes #9866\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9877)\r\n\r\n(cherry picked from commit 6beb8b39ba8e4cb005c1fcd2586ba19e17f04b95)\r\n\r\n* Fix potential memory leaks with BN_to_ASN1_INTEGER\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9833)\r\n\r\n(cherry picked from commit f28bc7d386b25fb75625d0c62c6b2e6d21de0d09)\r\n\r\n* Add a minimal windows build config for AppVeyor\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9886)\r\n\r\n* Add a minimal linux build target for Travis\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9888)\r\n\r\n* Do no mention private headers in public headers\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9812)\r\n\r\n(cherry picked from commit bd9faf117db1e53b2ad2ee9cbfe8def8c98ecb7b)\r\n\r\n* Fix small typo in doc for X509_STORE_CTX_new\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9894)\r\n\r\n(cherry picked from commit 64c1e74572f16a3e7c225f66fe85a3451ad39e68)\r\n\r\n* clearing the ecx private key memory\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9830)\r\n\r\n(cherry picked from commit 6ef03ea98fac501e6d6e33bac6ad3c92ea074712)\r\n\r\n* Fix building statically without any dso support\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9889)\r\n\r\n* apps/pkcs12: print multiple PKCS#12 safeBag attribute values if present\r\n\r\nCurrently the pkcs12 app will only ever print the first value of a multi-value\r\nattribute. This is OK for some attributes (e.g. friendlyName, localKeyId) but\r\nmay miss values for other attributes.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9751)\r\n\r\n(cherry picked from commit dbcc7b45670483cc89428afe1d3c363ef83d76df)\r\n\r\n* Use the correct maximum indent\r\n\r\nFound by OSS-Fuzz\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n\r\nGH: #9959\r\n(cherry picked from commit a6105ef40d65b35818f2b8ae8ca9e57ca6956d1d)\r\n\r\n* DOC: fix documentation of som EVP_MD_CTX functions\r\n\r\nThey were documented to take an EVP_MD pointer, when they really take\r\nan EVP_MD_CTX pointer.\r\n\r\nFixes #9993\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9997)\r\n\r\n* Reorganize private crypto header files\r\n\r\nCurrently, there are two different directories which contain internal\r\nheader files of libcrypto which are meant to be shared internally:\r\n\r\nWhile header files in 'include/internal' are intended to be shared\r\nbetween libcrypto and libssl, the files in 'crypto/include/internal'\r\nare intended to be shared inside libcrypto only.\r\n\r\nTo make things complicated, the include search path is set up in such\r\na way that the directive #include \"internal/file.h\" could refer to\r\na file in either of these two directoroes. This makes it necessary\r\nin some cases to add a '_int.h' suffix to some files to resolve this\r\nambiguity:\r\n\r\n  #include \"internal/file.h\"      # located in 'include/internal'\r\n  #include \"internal/file_int.h\"  # located in 'crypto/include/internal'\r\n\r\nThis commit moves the private crypto headers from\r\n\r\n  'crypto/include/internal'  to  'include/crypto'\r\n\r\nAs a result, the include directives become unambiguous\r\n\r\n  #include \"internal/file.h\"       # located in 'include/internal'\r\n  #include \"crypto/file.h\"         # located in 'include/crypto'\r\n\r\nhence the superfluous '_int.h' suffixes can be stripped.\r\n\r\nThe files 'store_int.h' and 'store.h' need to be treated specially;\r\nthey are joined into a single file.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Reorganize local header files\r\n\r\nApart from public and internal header files, there is a third type called\r\nlocal header files, which are located next to source files in the source\r\ndirectory. Currently, they have different suffixes like\r\n\r\n  '*_lcl.h', '*_local.h', or '*_int.h'\r\n\r\nThis commit changes the different suffixes to '*_local.h' uniformly.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Fix header file include guard names\r\n\r\nMake the include guards consistent by renaming them systematically according\r\nto the naming conventions below\r\n\r\nThe public header files (in the 'include/openssl' directory) are not changed\r\nin 1.1.1, because it is a stable release.\r\n\r\nFor the private header files files, the guard names try to match the path\r\nspecified in the include directives, with all letters converted to upper case\r\nand '/' and '.' replaced by '_'. An extra 'OSSL_' is added as prefix.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Add util/fix-includes script\r\n\r\nThis script contains all adjustments to header files which were made\r\nduring the reorganization of the header files. It is meant as an aid\r\nfor other contributors which encounter preprocessor #include errors\r\nafter rebasing over this pull request. Simply running\r\n\r\n  util/fix-includes\r\n\r\nfrom the root of the source directory should hopefully fix the problem.\r\n\r\nNote: such #include errors are expected only for pull requests which\r\nadd a lot of new code, in particular new compilation modules.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Fix a return value bug in apps/speed.c\r\n\r\nThose functions returns less than and equal to 0 to indicate an error\r\noccured.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10054)\r\n\r\n(cherry picked from commit 94bd168a9e31d1ab4986e94056dfae71ec5f051f)\r\n\r\n* Fix a bundle of mischecks of return values\r\n\r\nSeveral EVP_PKEY_xxxx functions return 0 and a negative value for\r\nindicating errors. Some places call these functions with a zero return\r\nvalue check only, which misses the check for the negative scenarios.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10055)\r\n\r\n(cherry picked from commit 7e3ae24832e0705583b1471febf3dc0eb1cc021f)\r\n\r\n* Correct the function names in SSL_CTX_set_stateless_cookie_generate_cb.pod\r\n\r\nAlthough the synopsis used the correct function names, the description did\r\nnot. Also the description of the equivalent DTLSv1_listen() callbacks was\r\nmissing, so these have been added.\r\n\r\nFixes #10030\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10033)\r\n\r\n(cherry picked from commit 84f471ecab76a16281a16c53d259bbcae358816f)\r\n\r\n* Add defines for __NR_getrandom for all Linux architectures\r\n\r\nFixes: #10015\r\n\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\nGH: #10044\r\n(cherry picked from commit 4dcb150ea30f9bbfa7946e6b39c30a86aca5ed02)\r\n\r\n* Fix long name of some Microsoft objects\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10029)\r\n\r\n(cherry picked from commit 648b53b88ea55b4c2f2c8c57d041075731db5f95)\r\n\r\n* Do not print extensions in Certificate message for TLS1.2 and lower\r\n\r\nAccording to RFC8446 CertificateEntry in Certificate message contains\r\nextensions that were not present in the Certificate message in RFC5246.\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9994)\r\n\r\n(cherry picked from commit 65c76cd2c9e8da9468dd490b334e56c51dbef582)\r\n\r\n* doc: EVP_DigestInit clears all flags\r\n\r\nMention that EVP_DigestInit() also clears all flags.\r\n\r\nFixes: 10031\r\nSigned-off-by: Christian Heimes <christian@python.org>\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10032)\r\n\r\n(cherry picked from commit 091aab66a6dbc3a3ecee7684aa30811b342f04e7)\r\n\r\n* Add arm64 in test matrix on TravisCI.\r\n\r\nChange-Id: I5d2b729699cfd8e80c3df17db4a9d2edcbf64454\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10046)\r\n\r\n(cherry picked from commit 0399aba7e05ea9bb1a58bd2e1b164f353f6ef1c9)\r\n\r\n* Fix iOS simulator build\r\n\r\nFixes #9999\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10002)\r\n\r\n* rsa: replace magic number '11' by RSA_PKCS1_PADDING_SIZE\r\n\r\nSuggested by Matt Hart\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10084)\r\n\r\n(cherry picked from commit f1d1903dd3dd1d68a5eae190b8c2a88bfe0a68ac)\r\n\r\n* Define AESNI_ASM if AESNI assembler is included, and use it\r\n\r\nBecause we have cases where basic assembler support isn't present, but\r\nAESNI asssembler support is, we need a separate macro that indicates\r\nthat, and use it.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10080)\r\n\r\n* 'init_buf' memory can be freed when DTLS is used over SCTP (not over UDP).\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9653)\r\n\r\n(cherry picked from commit e7c27a6c3716843f8412fd96311b70ac84b785f9)\r\n\r\n* Fix typo in comment\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10105)\r\n\r\n(cherry picked from commit 89e5aaa1d72058404d3ea06bfaeff5334aba202d)\r\n\r\n* Send bad_record_mac instead of decryption_failed\r\n\r\nThe decryption failed alert was deprecated a long time ago. It can\r\nprovide an attacker too much information to be able to distinguish between\r\nMAC failures and decryption failures and can lead to oracle attacks.\r\nInstead we should always use the bad_record_mac alert for these issues.\r\nThis fixes one instance that still exists. It does not represent a\r\nsecurity issue in this case because it is only ever sent if the record is\r\npublicly invalid, i.e. we have detected it is invalid without using any\r\nsecret material.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10093)\r\n\r\n(cherry picked from commit 37133290832ac2d1389926eba7325125fdacbe8d)\r\n\r\n* Add documentation for PEM_{read,write}_bio_Parameters()\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10113)\r\n\r\n(cherry picked from commit 9a6abb95be42b88c7c5ebc8c97f14afdc5919aa1)\r\n\r\n* Fix reference to PEM docs\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10101)\r\n\r\n(cherry picked from commit 120cc034271e9ab52f92840a16784228e50564f9)\r\n\r\n* ssl/statem/statem_lib.c: make servercontext/clientcontext arrays of chars instead of char pointers to fix EBCDIC builds.\r\n\r\nFixes #9869\r\n\r\nCLA:trivial\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9878)\r\n\r\n* Fix unused goto label gcc warning\r\n\r\nOn systems with undefined AI_ADDRCONFIG and AI_NUMERICHOST:\r\n\r\nx86_64-w64-mingw32-gcc  -I. -Icrypto/include -Iinclude -m64 -Wall -O3 -fno-ident ...\r\ncrypto/bio/b_addr.c: In function 'BIO_lookup_ex':\r\ncrypto/bio/b_addr.c:699:7: warning: label 'retry' defined but not used [-Wunused-label]\r\n       retry:\r\n       ^~~~~\r\n\r\nRegression from: 3f91ede9aea70774d9b5d509bc76d484ebaff6aa\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9856)\r\n\r\n(cherry picked from commit be66a15cc1a4c3cc68fa854ceea321ca57f96304)\r\n\r\n* Ignore empty ALPN elements in CLI args\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n* Configure: accept Windows style compiler options\r\n\r\nCurrently the Configure command only supports passing UNIX style\r\noptions (`-opt`) to the compiler. Passing Windows style options\r\n(`/opt`) yields an error. Fortunately, the compiler accepts both\r\ntypes of options, nevertheless this commit fixes that discrimination\r\nof Windows users.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9961)\r\n\r\n(cherry picked from commit f246f54f18d380791cc60be4aea0fbc7253a9a20)\r\n\r\n* [ec_asn1.c] Avoid injecting seed when built-in matches\r\n\r\nAn unintended consequence of https://github.com/openssl/openssl/pull/9808\r\nis that when an explicit parameters curve is matched against one of the\r\nwell-known builtin curves we automatically inherit also the associated\r\nseed parameter, even if the input parameters excluded such\r\nparameter.\r\n\r\nThis later affects the serialization of such parsed keys, causing their\r\ninput DER encoding and output DER encoding to differ due to the\r\nadditional optional field.\r\n\r\nThis does not cause problems internally but could affect external\r\napplications, as reported in\r\nhttps://github.com/openssl/openssl/pull/9811#issuecomment-536153288\r\n\r\nThis commit fixes the issue by conditionally clearing the seed field if\r\nthe original input parameters did not include it.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10140)\r\n\r\n(cherry picked from commit f97a8af2f3f3573f0759693117c9d33d2a63c27e)\r\n\r\n* Ignore duplicated undocumented things\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Yang <yang.yang@baishancloud.com>\r\n\r\n(cherry picked from commit ee4afacd96f5bfbe7662c8f0ec4464c6eee4c450)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Add missing EVP_MD documentation\r\n\r\nSigned-off-by: Antoine Salon <asalon@vmware.com>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n(cherry picked from commit 37842dfaebcf28b4ca452c6abd93ebde1b4aa6dc)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Document and add macros for additional DSA options\r\n\r\nEVP_PKEY_CTRL_DSA_PARAMGEN_Q_BITS and EVP_PKEY_CTRL_DSA_PARAMGEN_MD are only\r\nexposed from EVP_PKEY_CTX_ctrl, which means callers must write more error-prone\r\ncode (see also issue #1319). Add the missing wrapper macros and document them.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n(cherry picked from commit a97faad76a1be22eadd6c1a39972ad5e095d9e80)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Add documentation for the -sigopt option.\r\n\r\nReviewed-by: Paul Yang <yang.yang@baishancloud.com>\r\n\r\n(cherry picked from commit d7b2124a428f9e00ed7647554b5be7153aac71f6)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* issue-8493: Fix for filenames with newlines using openssl dgst\r\n\r\nThe output format now matches coreutils *dgst tools.\r\n\r\n[ edited to remove trailing white space ]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n\r\n(cherry picked from commit f3448f5481a8d1f6fbf5fd05caaca229af0b87f7)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* i2d_PublicKey was listed in 2 different man pages\r\n\r\nfind-doc-nits complains if a symbol is documented in more than one\r\nlocation.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n(cherry picked from commit 4ff4e53f816855b07fc02dc931dd57b2ae324aa1)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Fix an incorrect macro\r\n\r\nA macro was missing a space which was confusing find-doc-nits\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n(cherry picked from commit 8caab503ba004abb555d636c1ca9f7bcde79657f)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* [crypto/asn1/x_bignum.c] Explicit test against NULL\r\n\r\nAs a fixup to https://github.com/openssl/openssl/pull/9779 to better\r\nconform to the project code style guidelines, this commit amends the\r\noriginal changeset to explicitly test against NULL, i.e. writing\r\n\r\n```\r\nif (p != NULL)\r\n```\r\n\r\nrather than\r\n\r\n```\r\nif (!p)\r\n```\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9881)\r\n\r\n* Unify BN_rshift design\r\n\r\nThis commit aims at refactoring the `BN_rshift` by making it a wrapper\r\naround `bn_rshift_fixed_top`, in order to match the current design of\r\n`BN_lshift`, as suggested in the discussion at\r\nhttps://github.com/openssl/openssl/pull/10122#discussion_r332474277 .\r\n\r\nAs described in the code, by refactoring this function, `BN_rshift`\r\nprovides a constant-time behavior for sufficiently[!] zero-padded inputs\r\nunder the following assumptions: `|n < BN_BITS2|` or `|n / BN_BITS2|`\r\nbeing non-secret.\r\n\r\nNotice that `BN_rshift` returns a canonical representation of the\r\nBIGNUM, if a `fixed_top` representation is required, the caller should\r\ncall `bn_rshift_fixed_top` instead.\r\n\r\n(cherry picked from commit 8eba6de59e2b06f23c214344423a5a618d1c9ffd)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10196)\r\n\r\n* Constant-time GCD function.\r\n\r\nThis commit replaces the current `BN_gcd` function with a constant-time\r\nGCD implementation.\r\n\r\n(cherry picked from commit f3c4adfc7eb13e9eff514039b4c60b457bdba433)\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10122)\r\n\r\n* Add GCD testing infrastructure.\r\n\r\nThis commit adds testing and Known Answer Tests (KATs) to OpenSSL for\r\nthe `BN_gcd` function.\r\n\r\n(cherry picked from commit b75d6310857bc44ef2851bde68a1979c18bb4807)\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10122)\r\n\r\n* rand_unix.c: correct include guard comments\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10050)\r\n\r\n(cherry picked from commit 2a7e6ed86be20bd472696a3eafe5d20ec9579dab)\r\n\r\n* Move random-related defines from e_os.h to rand_unix.c\r\n\r\nFixes #10049\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10050)\r\n\r\n(cherry picked from commit 01036e2afbe116d608be048ed15930fc885ab2a8)\r\n\r\n* fixed the RETURN VALUES section in the EC_GROUP documentation\r\nfor the following functions.\r\n\r\nEC_GROUP_get_order\r\nEC_GROUP_get_cofactor\r\nEC_GROUP_get_curve_name\r\nEC_GROUP_get_asn1_flag\r\nEC_GROUP_get_point_conversion_form\r\nEC_GROUP_get_degree\r\n\r\n(cherry picked from commit df3d1e84b3802acffeec11d6224e8a0e33d0aa83)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9664)\r\n\r\n* Update dgst.c to show a list of message digests\r\n\r\nFixes #9893\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10219)\r\n\r\n* Improve formatting for man3/EC_GROUP_new.pod\r\n\r\n- Use `()` to qualify function names, consistently\r\n- Limit line width to 80 chars\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10235)\r\n\r\n* Fix doc for EC_GROUP_set_curve()\r\n\r\n(cherry picked from commit eb2ff0408ac6e934e05db7ed4006855c018584f1)\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10235)\r\n\r\n* Update control logic for BN_gcd\r\n\r\nPR https://github.com/openssl/openssl/pull/10122 introduced changes to\r\nthe BN_gcd function and the control logic inside it accessed `g->d[0]`\r\nirrespective of `g->top`.\r\n\r\nWhen BN_add is called, in case the result is zero, `BN_zero` is called.\r\nThe latter behaves differently depending on the API compatibility level\r\nflag: normally `g->d[0]` is cleared but in `no-deprecated` builds only\r\n`g->top` is set to zero.\r\n\r\nThis commit uses bitwise logic to ensure that `g` is treated as zero if\r\n`g->top` is zero, irrespective of `g->d[0]`.\r\n\r\nCo-authored-by: Nicola Tuveri <nic.tuv@gmail.com>\r\n\r\n(cherry picked from commit 8aca4bfe8213402c80abc06fe25121461f79128d)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10232)\r\n\r\n* Enable runtime testing of no-deprecated builds in Travis\r\n\r\n(cherry picked from commit c89799605b833f769ce4cfd879bb291f49b133be)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10232)\r\n\r\n* Cleanup hardcoded cipher suite codepoints in s_server\r\n\r\nThe hardcoded code points for TLSv1.3 cipher suites are used in the TLS\r\nPSK server callback. However, they seem to have been refactored a while\r\nago to use tls13_aes128gcmsha256_id, so these defines are not necessary\r\nwithin the s_server code anymore.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10243)\r\n\r\n(cherry picked from commit aed8c47cbcc8a289bea433ead2effea035187260)\r\n\r\n* Allow EVP_PKEY_get0_RSA for RSA-PSS keys\r\n\r\nRSA-PSS keys use the same internal structure as RSA keys but do not\r\nallow accessing it through EVP_PKEY_get0_RSA. This commit changes that\r\nbehavior.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10217)\r\n\r\n(cherry picked from commit 465a58b117d5a85623f3998d6fbf2fe8712a5604)\r\n\r\n* Fix a copy&paste error in the TLSv1.3 server side PSK documentation\r\n\r\nThe introductory paragraph for the TLSv1.3 server side PSK documentation\r\nis a copy & paste of the client side documentation which has not been\r\nupdated with the server side equivalent information.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10245)\r\n\r\n(cherry picked from commit c549cb46e0d3cb4e611acafae5f919b4a8df4007)\r\n\r\n* Fix an s_server arbitrary file read issue on Windows\r\n\r\nRunning s_server in WWW mode on Windows can allow a client to read files\r\noutside the s_server directory by including backslashes in the name, e.g.\r\n\r\nGET /..\\myfile.txt HTTP/1.0\r\n\r\nThere exists a check for this for Unix paths but it is not sufficient\r\nfor Windows.\r\n\r\nSince s_server is a test tool no CVE is assigned.\r\n\r\nThanks to Jobert Abma for reporting this.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10215)\r\n\r\n(cherry picked from commit 0a4d6c67480a4d2fce514e08d3efe571f2ee99c9)\r\n\r\n* Suppress an error when doing SM2 sign/verify ops\r\n\r\nThis was fixed in #8321 right after the 1.1.1 was released but never\r\nback ported to 1.1.1. Now fix it.\r\n\r\nIssue reported from lua-openssl project.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10278)\r\n\r\n* apps/dgst.c: allocate a new signature buffer\r\n\r\n... if the fixed-size buffer is too small.\r\n\r\nFixes #9732\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10276)\r\n\r\n(cherry picked from commit 7c2d95d47ccb3797f0da6bd4446747c6eee07b87)\r\n\r\n* Fix find/rm command in Unix clean recipe\r\n\r\nThe `./pyca-cryptography/.travis/downstream.d` subdirectory that causes the `rm` command to fail (albeit harmlessly, but with a warning from `make` nonetheless).\r\n\r\n>rm -f `find . -name '*.d' \\! -name '.*' -print`\r\n>rm: cannot remove './pyca-cryptography/.travis/downstream.d': Is a directory\r\n>make: [Makefile:1910: clean] Error 1 (ignored)\r\n\r\nExclude directories from being matched by the `find` commands.\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10264)\r\n\r\n(cherry picked from commit 38b71bd4704ee1746e862f5a7a4e170fd84a5eb0)\r\n\r\n* [crypto/bn] fix a few small timing leaks in BN_lshift1 and BN_rshift1\r\n\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10209)\r\n\r\n(cherry picked from commit 305bf9c8668aff78e668131061f4eb088457be5f)\r\n\r\n* Fix SYNOPSIS for ASN1_ENUMERATED_get_int64 and ASN1_ENUMERATED_set_int64\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9823)\r\n\r\n(cherry picked from commit 2aa28a1abc893fb16b99ba77e2fecb1cbc8769c7)\r\n\r\n* Fix potential memory leak in dh_ameth.c\r\n\r\nFree dukm in error handling of dh_cms_encrypt()\r\n\r\nFixes #10294\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10310)\r\n\r\n(cherry picked from commit 6624e1f7b6a397948561e9cc2774f0c8af1d2c79)\r\n\r\n* md4/md5: macros should not include the line following them\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10311)\r\n\r\n(cherry picked from commit 351ba5bd27645d5b5a2bc643b2709bd30bcdf09c)\r\n\r\n* Add test cases for min/max protocol API\r\n\r\nSigned-off-by: Christian Heimes <christian@python.org>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/6553)\r\n\r\n(cherry picked from commit 132b5facf8d681db5dfa45828d8b02f1bf5df64b)\r\n\r\n* VMS: Added new method to gather entropy on VMS, based on SYS$GET_ENTROPY.\r\n\r\nThis system services is based on FreeBSD 12's getentropy(), and is\r\ntherefore treated the same way as getentropy() with regards to amount\r\nof entropy bits per data bit.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/8926)\r\n\r\n(cherry picked from commit 8b9896eb293a0861f0b8c191b7a278f176b729e6)\r\n\r\n* s390x assembly pack: enable clang build\r\n\r\nclang imposes some restrictions on the assembler code that\r\ngcc does not.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10330)\r\n\r\n(cherry picked from commit 6f93f06135cbbd36c3fe98d63717e8303a5d559b)\r\n\r\nConflicts:\r\n\tcrypto/perlasm/s390x.pm (non-existant)\r\n\tcrypto/s390xcpuid.pl (code to be changed non-existant)\r\n\r\n* Don't leak memory in the event of a failure in i2v_GENERAL_NAMES\r\n\r\ni2v_GENERAL_NAMES call i2v_GENERAL_NAME repeatedly as required. Each\r\ntime i2v_GENERAL_NAME gets called it allocates adds data to the passed in\r\nstack and then returns a pointer to the stack, or NULL on failure. If\r\nthe passed in stack is itself NULL then it allocates one.\r\n\r\ni2v_GENERAL_NAMES was not correctly handling the case where a NULL gets\r\nreturned from i2v_GENERAL_NAME. If a stack had already been allocated then\r\nit just leaked it.\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Viktor Dukhovni <viktor@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10300)\r\n\r\n(cherry picked from commit 45b244620a74248b46ebe1c85e86437b9641447a)\r\n\r\n* BIO_s_connect: add an error state and use it\r\n\r\nIf no connection could be made, addr_iter will eventually end up being\r\nNULL, and if the user didn't check the returned error value, the\r\nBIO_CONN_S_CONNECT code will be performed again and will crash.\r\n\r\nSo instead, we add a state BIO_CONN_S_CONNECT_ERROR that we enter into\r\nwhen we run out of addresses to try.  That state will just simply say\r\n\"error\" back, until the user does something better with the BIO, such\r\nas free it or reset it.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10333)\r\n\r\n* Configure: Make --strict-warnings meaningful with MSVC cl\r\n\r\nWe also add this to our x86_64 builds on appveyor\r\n\r\n(cherry picked from commit b4a7b4ec4acc712b1f22a83966ac986b510f25d8)\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10365)\r\n\r\n* conf_def.c: Avoid calling strlen() in a loop\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10361)\r\n\r\n(cherry picked from commit d1c1fb2d41a627293483d832aaffcb6eca9075f9)\r\n\r\n* Fix a -Warray-bounds gcc warning in OPENSSL_DIR_read\r\n\r\n'__builtin_strncpy' offset [275, 4095] from the object at\r\n'direntry' is out of the bounds of referenced subobject 'd_name'\r\nwith type 'char[256]' at offset 19\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10343)\r\n\r\n(cherry picked from commit db5cf86535b305378308c58c52596994e1ece1e6)\r\n\r\n* Fix --strict-warnings build\r\n\r\nAppease -Wstring-plus-int.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9608)\r\n\r\n(cherry picked from commit e0249827b3fa81ff6c59fb14ef85d38361dd5e31)\r\n\r\n* Workaround for Windows-based GOST implementations\r\n\r\nMany Windows-based GOST TLS implementations are unable to extend the\r\nlist of supported SignatureAlgorithms because of lack of the necessary\r\ncallback in Windows. So for TLS 1.2 it makes sense to imply the support\r\nof GOST algorithms in case when the GOST ciphersuites are present.\r\n\r\nThis is a backport of #10377 to 1.1.1 branch\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10378)\r\n\r\n* Fix misspelled resumption_label for CHARSET_EBCDIC\r\n\r\nThe resumption_label variable when CHARSET_EBCDIC was enabled, was misspelled.\r\nInstead of evaluating to 'res binder' as expected, it evaluated to 'red binder'.\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10396)\r\n\r\n(cherry picked from commit 6ed12cec7216c3e81b58f5cafa41775e456feaee)\r\n\r\n* SSL: Document SSL_add_{file,dir}_cert_subjects_to_stack()\r\n\r\nThis also removes the incorrect documentation comments by those\r\nfunctions.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10403)\r\n\r\n* Add more tests for apps/req\r\n\r\nhttps://github.com/openssl/openssl/issues/10224#issuecomment-546593113\r\nhighlighted that existing testing infrastructure is not covering common\r\nusage patterns of the `req` app.\r\n\r\nThis commit explicitly adds request generations thorugh the CLI using\r\nRSA, DSA and ECDSA (P-256) keys.\r\n\r\n(cherry picked from commit b2a7310af0dd190712bae2e462a7708483dd4628)\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10369)\r\n\r\n* Fix EC_POINT_bn2point() for BN_zero()\r\n\r\nEC_POINT_bn2point() rejected BIGNUMs with a zero value.\r\n\r\nThis behavior indirectly caused failures when converting a point\r\nat infinity through EC_POINT_point2hex() and then back to a point with\r\nEC_POINT_hex2point().\r\n\r\nWith this change such BIGNUMs are treated like any other and exported to\r\nan octet buffer filled with zero.\r\nIt is then EC_POINT_oct2point() (either the default implementation or\r\nthe custom one in group->meth->oct2point) to determine if such encoding\r\nmaps to a valid point (generally the point at infinity is encoded as\r\n0x00).\r\n\r\nFixes #10258\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10329)\r\n\r\n(cherry picked from commit d47c10875656790d146f62ac3c437db54c58dbf7)\r\n\r\n* Add self-test for EC_POINT_hex2point\r\n\r\nAdds tests for each curve to ensure that encodings obtained through\r\nEC_POINT_hex2point() can be fed to EC_POINT_point2hex() yielding a point\r\nidentical to the one from which the encoding is generated.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10329)\r\n\r\n(cherry picked from commit 35ed029b5a488924890fda2487c87f664361a33b)\r\n\r\n* Extend docs for EC_POINT conversion functions\r\n\r\nAdd more explicit documentation about the relation between\r\nEC_POINT_point2oct(), EC_POINT_point2hex(), EC_POINT_point2bn() and\r\ntheir reverse.\r\n\r\nIn particular highlight that EC_POINT_point2oct() and\r\nEC_POINT_oct2point() conform to, respectively, Sec. 2.3.3 and Sec. 2.3.4\r\nof the SECG SEC 1 standard (which is the normative reference for the\r\nalready mentioned RFC 5480), highlighting with a note how this affect\r\nthe encoding/decoding of the point at infinity (which in contrast with\r\nany other valid generic point of a curve is assigned an exceptional\r\nfixed octet string encoding, i.e., 0x00).\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10329)\r\n\r\n(cherry picked from commit 3cc26f2eba8a8c16ac559e68c05c094d7ea6bd8b)\r\n\r\n* chacha_enc.c: fix for EBCDIC platforms\r\n\r\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>\r\n\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10417)\r\n\r\n(cherry picked from commit c31950b964a2f3f7b9e6ad98076954178ee1e77d)\r\n\r\n* testutil/init.c rename to testutil/testutil_init.c\r\n\r\nAvoid conflicts with some linkers.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10439)\r\n\r\n(cherry picked from commit e74b5dcf16dfd7c91d9f9a7e69c447f00d778e17)\r\n\r\nConflicts:\r\n\ttest/build.info\r\n\r\n* travis.yml: add arch s390x target\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10446)\r\n\r\n(cherry picked from commit 985412f8c14853b9936852bc7ef4d9438db27b88)\r\n\r\n* Add missing EVP_PKEY_METHOD accessors for digestsign and digestverify\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10388)\r\n\r\n(cherry picked from commit 2555285fa5e4248ad4a5a0bc14ae4606443856c2)\r\n\r\n* s390x assembly pack: fix bn_mul_comba4\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10454)\r\n\r\n(cherry picked from commit 97a986f78289fef71bf8778dc4763458e983750c)\r\n\r\n* Allow specifying the tag after AAD in CCM mode (2)\r\n\r\nIn addition to 67c81ec3 which introduced this behavior in CCM mode\r\ndocs but only implemented it for AES-CCM.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10331)\r\n\r\n(cherry picked from commit f7382fbbd846dd3bdea6b8c03b6af22faf0ab94f)\r\n\r\nConflicts:\r\n\ttest/recipes/30-test_evp_data/evpciph.txt\r\n\r\n* Fix sha512_block_data_order_avx2 backtrace info\r\n\r\nWe store a secondary frame pointer info for the debugger\r\nin the red zone.\r\n\r\nFixes #8853\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9624)\r\n\r\n(cherry picked from commit 9ce91035bcf7d74fe15c94650f3bc1f89b7c0f07)\r\n\r\n* ECDSA: don't clear free memory after verify.\r\n\r\nVerifications are public, there is no need to clear the used storage before\r\nfreeing it.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10475)\r\n\r\n(cherry picked from commit cff7d199e0dc51ae939de5fb7702aab2a9ef30fc)\r\n\r\n* Engine: Add NULL check.\r\n\r\nAdd NULL check for return from pkey_asn1_meths.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10473)\r\n\r\n(cherry picked from commit 9bada854de16bcc1a9dc199b4b352b19ab6897fc)\r\n\r\n* EVP p_lib: Add NULL check to EVP_PKEY_missing_parameters.\r\n\r\nCheck for NULL and return error if so.\r\nThis can possibly be called from apps/ca.c with a NULL argument.\r\n\r\nReviewed-by: Paul Yang <kaishen.yy@antfin.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10474)\r\n\r\n(cherry picked from commit ab5c77b4766e0992751d86560193ca42b49cf316)\r\n\r\n* Fix a race condition in SNI handling\r\n\r\nAs was done for ciphers, supported groups, and EC point formats in\r\nhttps://github.com/openssl/openssl/pull/9162, only write the negotiated\r\nSNI hostname value to the session object when not resuming, even for\r\nTLS 1.3 resumptions.  Otherwise, when using a stateful session cache\r\n(as is done by default when 0-RTT data is enabled), we can have multiple\r\nSSLs active using the same in-memory session object, which leads to\r\ndouble-frees and similar race conditions in the SNI handler prior\r\nto this commit.\r\n\r\nFortunately, since draft-ietf-tls-tls13-22, there is no requirement\r\nthat the SNI hostname be preserved across TLS 1.3 resumption, and thus\r\nnot a need to continually update the session object with the \"current\"\r\nvalue (to be used when producing session tickets, so that the subsequent\r\nresumption can be checked against the current value).  So we can just\r\nrelax the logic and only write to the session object for initial handshakes.\r\nThis still leaves us in a somewhat inconsistent state, since if the SNI value\r\ndoes change across handshakes, the session object will continue to record\r\nthe initial handshake's value, even if that bears no relation to the\r\ncurrent handshake.  The current SSL_get_servername() implementation\r\nprefers the value from the session if s->hit, but a more complete fix\r\nfor that and related issues is underway in\r\nhttps://github.com/openssl/openssl/pull/10018; there is no need to wait\r\nfor the complete fix for SNI name handling in order to close the\r\nrace condition and avoid runtime crashes.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10441)\r\n\r\n(cherry picked from commit 2a5385511051d33be8d2b20d7669d8b1862fe510)\r\n\r\n* main: avoid a NULL dereference on initialisation.\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10495)\r\n\r\n(cherry picked from commit acc7b9fb5c162c2ca522e5e1e09d1efbde8dc6a0)\r\n\r\n* UI_UTIL_wrap_read_pem_callback(): when |cb| is NULL, use PEM_def_callback\r\n\r\nFixes #10444\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10447)\r\n\r\n(cherry picked from commit 72a5412b4858cc7c5627a121f78685a2a4065521)\r\n\r\n* doc/man7/proxy-certificates.pod: New guide for proxy certificates\r\n\r\nThis replaces doc/HOWTO/proxy_certificates.txt\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10507)\r\n\r\n(cherry picked from commit 2a03823606b2d7e73e5dc890c3202e186511151f)\r\n\r\n* i2b_PVK(): Use Encrypt, not Decrypt\r\n\r\nWe used EVP_EncryptInit_ex() to initialise, but EVP_DecryptUpdate()\r\nand EVP_DecryptFinal_ex() to actually perform encryption.  This worked\r\nlong ago, when the Encrypt and Decrypt variants were the same, but\r\ndoesn't now (actually haven't for a very long time).\r\n\r\nThis shows how seldom PVK is actually used.\r\n\r\nFixes #9338\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10521)\r\n\r\n* Fix L<EVP_MD_CTX_set_pkey_ctx> links\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10420)\r\n\r\n* apps/ocsp.c: sock_timeout -> socket_timeout\r\n\r\nIt appears that 'sock_timeout' is defined at least with DJGPP, so we\r\nrename our symbol and hope the new name isn't taken.\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10515)\r\n\r\n(cherry picked from commit e9b95e42fbae668cb605287fa462a0d5f58b9caf)\r\n\r\n* EVP_*Update: ensure that input NULL with length 0 isn't passed\r\n\r\nEven with custom ciphers, the combination in == NULL && inl == 0\r\nshould not be passed down to the backend cipher function.  The reason\r\nis that these are the values passed by EVP_*Final, and some of the\r\nbackend cipher functions do check for these to see if a \"final\" call\r\nis made.\r\n\r\nAn exception is made for CCM mode which has special handling for the case\r\nwhere inl == 0: this may mean the total plaintext or ciphertext length is 0.\r\n\r\nThis is based on an original commit by Richard Levitte.\r\n\r\nFixes #8675\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9057)\r\n\r\n* Add a test for NULL chunks in encrypt/decrypt\r\n\r\nIssue #8675 describes a problem where calling EVP_DecryptUpdate() with an\r\nempty chunk causes the result to be different compared to if you do not\r\nuse an empty chunk. This adds a test for that case.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9057)\r\n\r\n* Update NOTES.ANDROID for newer NDK versions + small fixes.\r\n\r\nFixes #8941\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10478)\r\n\r\n(cherry picked from commit d3a27c5ee45a29edd9c0d60ad5929f67996f89fd)\r\n\r\n* Remove spurious space from file.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10562)\r\n\r\n(cherry picked from commit 7ba46774b7f1b2e83d44323a8831b615a49f9f37)\r\n\r\n* Fix exit issue in travisci\r\n\r\nUngraceful 'exit' probably causes unexpeced error on background activity.\r\nSo replace 'exit' with recommended 'travis_terminate'. Also see\r\nhttps://travis-ci.community/t/exit-0-cannot-exit-successfully-on-arm/5731/4\r\n\r\nChange-Id: I382bd93a3e15ecdf305bab23fc4adefbf0348ffb\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10561)\r\n\r\n(cherry picked from commit 6df44cf65fbc7e150965149d7e681ac3e22d11d8)\r\n\r\n* Fix an overflow bug in rsaz_512_sqr\r\n\r\nThere is an overflow bug in the x64_64 Montgomery squaring procedure used in\r\nexponentiation with 512-bit moduli. No EC algorithms are affected. Analysis\r\nsuggests that attacks against 2-prime RSA1024, 3-prime RSA1536, and DSA1024 as a\r\nresult of this defect would be very difficult to perform and are not believed\r\nlikely. Attacks against DH512 are considered just feasible. However, for an\r\nattack the target would have to re-use the DH512 private key, which is not\r\nrecommended anyway. Also applications directly using the low level API\r\nBN_mod_exp may be affected if they use BN_FLG_CONSTTIME.\r\n\r\nCVE-2019-1551\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Improve the overflow handling in rsaz_512_sqr\r\n\r\nWe have always a carry in %rcx or %rbx in range 0..2\r\nfrom the previous stage, that is added to the result\r\nof the 64-bit square, but the low nibble of any square\r\ncan only be 0, 1, 4, 9.\r\n\r\nTherefore one \"adcq $0, %rdx\" can be removed.\r\nLikewise in the ADX code we can remove one\r\n\"adcx %rbp, $out\" since %rbp is always 0, and carry is\r\nalso zero, therefore that is a no-op.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Add a test case for rsaz_512_sqr overflow handling\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Add a CHANGES entry for CVE-2019-1551\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Difference between EVP_CipherInit and EVP_CipherInit_ex\r\n\r\nFixes #10455\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10550)\r\n\r\n* Fix some typos\r\n\r\nReported-by: misspell-fixer <https://github.com/vlajos/misspell-fixer>\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10544)\r\n\r\n(cherry picked from commit 79c44b4e3044aee9dc9618850d4f1ce067757b4b)\r\n\r\n* Fix docs for CRYPTO_secure_allocated\r\n\r\nFixes #9300\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10523)\r\n\r\n(cherry picked from commit 20c09f00346aec3a20ceacc9c9d44c5f050e13dd)\r\n\r\n* Enrich arm64 tests in Travis matrix\r\n\r\n1, Remove simple test just with --strict-warnings enabled.\r\n2, Share the three common envs with amd64.\r\n3, Add matrix item running test in bionic(default xenial) for arm64.\r\n4, Enable MSan test on arm64 for extended test.\r\n5, Enable UBSan test on arm64 for extended test.\r\n\r\nChange-Id: Ic1f2c5e39ee6fbafed6ede74a925301121463520\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10519)\r\n\r\n(cherry picked from commit 77fedcdc8cf5446354a1e7ff9123d8ada5b79b06)\r\n\r\n* Check return value after loading config file\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Paul Yang <kaishen.yy@antfin.com>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10607)\r\n\r\n(cherry picked from commit dd0139f416257ec5632414ed3ad8c61d07ba07ec)\r\n\r\n* Parse large GOST ClientKeyExchange messages\r\n\r\nLarge GOST ClientKeyExchange messages are sent by VipNet CSP, one of\r\nRussian certified products implementing GOST TLS, when a server\r\ncertificate contains 512-bit keys.\r\n\r\nThis behaviour was present in 1.0.2 branch and needs to be restored.\r\nBackport of #10376\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10376)\r\n\r\n* util/mkerr.pl: revert accidental change of header guards\r\n\r\nThis change was backported accidentally from master in commit fbbfd128c9aa.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10623)\r\n\r\n* rand_lib.c: fix null pointer dereferences after RAND_get_rand_method() failure\r\n\r\nRAND_get_rand_method() can return a NULL method pointer in the case of a\r\nmalloc failure, so don't dereference it without a check.\r\n\r\nReported-by: Zu-Ming Jiang (detected by FIFUZZ)\r\n\r\nFixes #10480\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10490)\r\n\r\n* Return 1 when openssl req -addext kv is duplicated\r\n\r\nCLA: trivial\r\n\r\nFixes #10273\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10578)\r\n\r\n(cherry picked from commit 1aeec3dbc2d62f902698b1eba9ed31cbd436f9dc)\r\n\r\n* Ensure EVP_PKEY_set1_DH detects X9.42 keys\r\n\r\nOpenSSL supports both PKCS#3 and X9.42 DH keys. By default we use PKCS#3\r\nkeys. The function `EVP_PKEY_set1_DH` was assuming that the supplied DH\r\nkey was a PKCS#3 key. It should detect what type of key it is and assign\r\nthe correct type as appropriate.\r\n\r\nFixes #10592\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10593)\r\n\r\n(cherry picked from commit 32c869ffaba67822602ea9fec611272ff8e8db58)\r\n\r\n* Test that EVP_PKEY_set1_DH() correctly identifies the DH type\r\n\r\nProvide a test to check tat when we assign a DH object we know whether\r\nwe are dealing with PKCS#3 or X9.42 DH keys.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10593)\r\n\r\n(cherry picked from commit e295de1d8433ed07092845cb6c56aa424ff35c6d)\r\n\r\n* Backport the RSA_get0_pss_params() function from master\r\n\r\nThis is a missing accessor in order to obtain PSS parameters from an\r\nRSA key, which should also be available in 1.1.1.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10568)\r\n\r\n* Update the HISTORY entry for RSA_get0_pss_params()\r\n\r\nMake a note of when this function was first introduced\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10568)\r\n\r\n* apps/speed.c: Fix eddsa sign and verify output with -multi option\r\n\r\nFixes #10261\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10285)\r\n\r\n(cherry picked from commit 1ac7e15375be39c8f03171c02658cf703f58217a)\r\n\r\n* Fix unwind info for some trivial functions\r\n\r\nWhile stack unwinding works with gdb here, the\r\nfunction _Unwind_Backtrace gives up when something outside\r\n.cfi_startproc/.cfi_endproc is found in the call stack, like\r\nOPENSSL_cleanse, OPENSSL_atomic_add, OPENSSL_rdtsc, CRYPTO_memcmp\r\nand other trivial functions which don't save anything in the stack.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10635)\r\n\r\n(cherry picked from commit 8913378a552e470c66277c47b19699f20b84aa3b)\r\n\r\n* Disable devcryptoeng on newer OpenBSD versions\r\n\r\nIt's reported that /dev/crypto support has been dropped in OpenBSD 5.7.\r\n\r\nFixes #10552\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10565)\r\n\r\n* Configuration: compute openssl_other_defines and related info later\r\n\r\nThe computation of macros and configdata.pm related data from %disabled\r\nwas done much too early, leaving later disablings without real support.\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10565)\r\n\r\n* Fix regression on x509 keyform argument\r\n\r\nIn OpenSSL pre 1.1.0, 'openssl x509 -keyform engine' was possible\r\nand supported.  In 1.1.0, type of keyform argument is OPT_FMT_PEMDER\r\nwhich doesn't support engine. This changes type of keyform argument\r\nto OPT_FMT_PDE which means PEM, DER or engine and updates the manpage\r\nincluding keyform and CAkeyform.\r\n\r\nThis restores the pre 1.1.0 behavior.\r\n\r\nThis issue is very similar than https://github.com/openssl/openssl/issues/4366\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10609)\r\n\r\n(cherry picked from commit 0ab6fc79a9a63370be1a615729dc2a6ed0d6c89b)\r\n\r\n* Add some missing cfi frame info in camellia-x86_64.pl\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10642)\r\n\r\n(cherry picked from commit 6b913be708f98b1d971586d38e608218ee6de6fa)\r\n\r\n* Add some missing cfi frame info in x86_64-mont5.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10651)\r\n\r\n(cherry picked from commit 0190c52ab8b4cdf5fe577b3d924576167c892a15)\r\n\r\n* Add some missing cfi frame info in rsaz-x86_64\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10652)\r\n\r\n(cherry picked from commit 013c2e8d1a272df444f47b8b54de1d51bc499887)\r\n\r\n* Add some missing cfi frame info in aesni-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10653)\r\n\r\n(cherry picked from commit a5fe7825b970a6c937118a4f707f9ad367413794)\r\n\r\n* Add some missing cfi frame info in keccak1600-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10654)\r\n\r\n(cherry picked from commit 95bbe6eff7aadc681e282ec957379b49d6f80ca8)\r\n\r\n* Add some missing cfi frame info in aesni-sha and sha-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10655)\r\n\r\n(cherry picked from commit b0d3442efc10b635863b915c2d014345f6e5a219)\r\n\r\n* Fix evp_extra_test with no-dh\r\n\r\nThe new DH test in evp_extra_test.c broke the no-dh build so we add some\r\nguards to fix it.\r\n\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/10644)\r\n\r\n(cherry picked from commit 501fcfb8cfc1aa114ffde437039c2dc2827554ae)\r\n\r\n* Add some missing cfi frame info in ecp_nistz256-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10672)\r\n\r\n(cherry picked from commit eff5076a78502d1ac04669e44127d4bd7c0a9ce7)\r\n\r\n* Fix aesni_cbc_sha256_enc_avx2 backtrace info\r\n\r\nWe store a secondary frame pointer info for the debugger\r\nin the red zone.  This fixes a crash in the unwinder when\r\nthis function is interrupted.\r\n\r\nAdditionally the missing cfi function annotation is added\r\nto aesni_cbc_sha256_enc_shaext.\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10674)\r\n\r\n(cherry picked from commit 665de4d48aef2507022a7d74f5c7f6e339d5e6bc)\r\n\r\n* Add some missing cfi frame info in x25519-x86_64.pl\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10676)\r\n\r\n(cherry picked from commit 9d079f2744b9b624c6fe75f95fc0f766ef88ffcf)\r\n\r\n* Add some missing cfi frame info in aesni-gcm-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10677)\r\n\r\n(cherry picked from commit 275a048ffc1585a731e39d7e8e3f53766e8f48d7)\r\n\r\n* Add some missing cfi frame info in poly1305-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10678)\r\n\r\n(cherry picked from commit 048fa13e5ef4ccd730561f79a6c91f38365994d1)\r\n\r\n* Add some missing cfi frame info in rc4-md5-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10679)\r\n\r\n(cherry picked from commit b2a00f62209add348deb8283c588ddbd572dc216)\r\n\r\n* Fix a race condition in the speed command\r\n\r\nThe timer alarm sets run = 0, while the benchmark\r\ndoes run = 1 in the initialization code.  That is\r\na race condition, if the timer goes off too early\r\nthe benchmark runs forever.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10680)\r\n\r\n(cherry picked from commit f3fdfbf78c6bfc97abf9c70b03859a28ebf6b66d)\r\n\r\n* Update the krb5 submodule\r\n\r\nBring us up to date with upstream's 1.17.1 release.  Among other\r\nthings, it includes commit c2497d46b4bad473e164943d67b58cd1ae261c3a\r\nwhich fixes several issues that affect running the test suite under\r\nTravis CI.  Hopefully those will work transitively for us as well.\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n(cherry picked from commit 3e73f558af600ea068bb2132988c31ddb444e13e)\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10690)\r\n\r\n* Temporarily disable external pyca tests\r\n\r\nThe pyca-cryptography external test has been failing for a long time.\r\nIt looks like upstream needs to make some changes to adapt to 1.1.1.\r\n\r\nBackported from #10689\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10722)\r\n\r\n* Update tls13_enc.c\r\n\r\nFix double + in hkdflabel declaration (FIXES #10675)\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10700)\r\n\r\n(cherry picked from commit 2de5a5fbdd14f514e962cccfe90482c37786c183)\r\n\r\n* Run make update\r\n\r\nThe New Year has caused various files to appear out of date to \"make\r\nupdate\". This causes Travis to fail. Therefore we update those files.\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10739)\r\n\r\n* Fix potential SCA vulnerability in some EC_METHODs\r\n\r\nThis commit addresses a potential side-channel vulnerability in the\r\ninternals of some elliptic curve low level operations.\r\nThe side-channel leakage appears to be tiny, so the severity of this\r\nissue is rather low.\r\n\r\nThe issue was reported by David Schrammel and Samuel Weiser.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 3cb914c463ed1c9e32cfb773d816139a61b6ad5f)\r\n\r\n* Avoid leaking intermediate states in point doubling special case.\r\n\r\nCherry picked from\r\nhttps://github.com/google/boringssl/commit/12d9ed670da3edd64ce8175cfe0e091982989c18\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 2baea7c7e0896658b74956cac6084dd7e82e8c1b)\r\n\r\n* Fix side channel in ecp_nistz256-x86.pl\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 0de3399b691f025153c8001045d5eeb0909dfd7a)\r\n\r\n* Fix side channel in ecp_nistz256-armv4.pl\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 3d139746ca72f0906c036d0a4a3e176c7b61ed1b)\r\n\r\n* Improve side channel fix in ecp_nistz256-x86_64.pl\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit e9fe87950db2e6169029b2ecf3ed09d64265bc9c)\r\n\r\n* Fix side channel in the ecp_nistz256.c reference implementation\r\n\r\nThis is only used if configured with\r\n./config -DECP_NISTZ256_REFERENCE_IMPLEMENTATION\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 7d4716648e8348dea862e198b9395478fae01907)\r\n\r\n* Fix side channel in ecp_nistz256-armv8.pl\r\n\r\nThis change addresses a potential side-channel vulnerability in\r\nthe internals of nistz256 low level operations for armv8.\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit f5a659b6dfcc735a62c712dcca64d116d2289b97)\r\n\r\n* Fix disabled ecdsa in apps/speed\r\n\r\nThis came from f3fdfbf78c6b. run = 1 should be done in pkey_print_message\r\nas well, otherwise other tests printed with pkey_print_message won't run.\r\n\r\nChange-Id: I0ba0b05256ad6509ada4735b26d10f8a73fd89ec\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/10710)\r\n\r\n(cherry picked from commit 6e49b514067a2b6a30d064d2ae1fdfd8050c184b)\r\n\r\n* Fix incorrect return code on ECDSA key verification\r\n\r\nECDSA_do_verify() is a function that verifies a ECDSA signature given a hash and a public EC key. The function is supposed to return 1 on valid signature, 0 on invalid signature and -1 on error. Previously, we returned 0 if the key did not have a verify_sig method. This is actually an error case and not an invalid signature. Consequently, this patch updates the return code to -1.\r\n\r\nFixes #8766\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10693)\r\n\r\n(cherry picked from commit 26583f6aa8dc28e3598e61db66e54e2fdf8b195f)\r\n\r\n* Don't store an HMAC key for longer than we need\r\n\r\nThe HMAC_CTX structure stores the original key in case the ctx is reused\r\nwithout changing the key.\r\n\r\nHowever, HMAC_Init_ex() checks its parameters such that the only code path\r\nwhere the stored key is ever used is in the case where HMAC_Init_ex is\r\ncalled with a NULL key and an explicit md is provided which is the same as\r\nthe md that was provided previously. But in that case we can actually reuse\r\nthe pre-digested key that we calculated last time, so we can refactor the\r\ncode not to use the stored key at all.\r\n\r\nWith that refactor done it is no longer necessary to store the key in the\r\nctx at all. This means that long running ctx's will not keep the key in\r\nmemory for any longer than required. Note though that the digested key\r\n*is* still kept in memory for the duration of the life of the ctx.\r\n\r\nFixes #10743\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10763)\r\n\r\n* Revert \"Move random-related defines from e_os.h to rand_unix.c\"\r\n\r\nThis reverts commit 7b18d1a53f932391bbc599a4717d6f98a597849c, which moved the\r\nDEVRANDOM and DEVRANDOM_EGD defines into rand_unix.c. That change introduced\r\nthe regression that the compiler complains about missing declarations in\r\napps/version.c when OpenSSL is configured using `--with-rand-seed=devrandom`\r\n(resp. `--with-rand-seed=egd`):\r\n\r\napps/version.c:173:42: error: 'DEVRANDOM' undeclared\r\n             static const char *dev[] = { DEVRANDOM, NULL };\r\n                                          ^~~~~~~~~\r\n\r\nFixes #10759\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10764)\r\n\r\n* Fix pkeyutl -verifyrecover\r\n\r\nWhen performing a pkeyutl -verifyrecover operation the input file is not\r\na hash - it is the signature itself. Therefore don't do the check to make\r\nsure it looks like a hash.\r\n\r\nFixes #9658\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9731)\r\n\r\n(cherry picked from commit 5ffc33244cd4d66e47dfa66ce89cb38d0f3074cc)\r\n\r\n* fix a glitc…","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/6874fa0737c6ec04a24ae3a0838a652c5af767b3"}]},"public":true,"created_at":"2020-04-14T18:57:00Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12047647119","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":170719151,"name":"open-quantum-safe/liboqs-cpp","url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp"},"payload":{"push_id":4917033388,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"046cd1eb131c04e1db827cf3c94c4793461df2c5","before":"d444542d221812f21f50904393cccd68630964c5","commits":[{"sha":"046cd1eb131c04e1db827cf3c94c4793461df2c5","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"support for msys2 CI under AppVeyor","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp/commits/046cd1eb131c04e1db827cf3c94c4793461df2c5"}]},"public":true,"created_at":"2020-04-14T19:08:12Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12047652093","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":215630242,"name":"open-quantum-safe/liboqs-go","url":"https://api.github.com/repos/open-quantum-safe/liboqs-go"},"payload":{"push_id":4917036113,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"639b980d96f3596ba0148c9dfd4d8ef65720eb82","before":"4c333b65079455a6b4eb6d123ebe3a8dc19cdf9d","commits":[{"sha":"639b980d96f3596ba0148c9dfd4d8ef65720eb82","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"Update README.md","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-go/commits/639b980d96f3596ba0148c9dfd4d8ef65720eb82"}]},"public":true,"created_at":"2020-04-14T19:08:46Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12047674184","type":"PushEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"push_id":4917048040,"size":8,"distinct_size":3,"ref":"refs/heads/ds-default-kems","head":"3579ed6af028f554506e28e63ebb1b11c09b6273","before":"8fed3c1d2b48709728b06d74cb9758622dc6091d","commits":[{"sha":"7a587e44bb74c8cca859dfacea8663b4212b4620","author":{"name":"Michael Baentsch","email":"89a7750c63a2a70a7f0f74740e03cfc4501a2bdb@users.noreply.github.com"},"message":"re-enable check-in connection test (#165)","distinct":false,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/7a587e44bb74c8cca859dfacea8663b4212b4620"},{"sha":"35530ae3be4b8c855629c89ce02bbec86295355d","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@users.noreply.github.com"},"message":"Use 16-bit length fields in hybrid KEX format (#157)\n\nFixes 154.","distinct":false,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/35530ae3be4b8c855629c89ce02bbec86295355d"},{"sha":"307645a7858d6123b7cb095922a2b21ca67f3e2a","author":{"name":"Kevin Kane","email":"cd40c34e976f30c9e62efcf24e04c516bc3a3b05@microsoft.com"},"message":"Add instructions to cross-compile for Windows on Linux (#166)\n\nAdd git as a prerequisite for the regular Ubuntu build as well.","distinct":false,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/307645a7858d6123b7cb095922a2b21ca67f3e2a"},{"sha":"24570943eca60e26246227f899f428757351ca4e","author":{"name":"Michael Baentsch","email":"89a7750c63a2a70a7f0f74740e03cfc4501a2bdb@users.noreply.github.com"},"message":"add OQS algs to auto-run list in speed (#169)","distinct":false,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/24570943eca60e26246227f899f428757351ca4e"},{"sha":"6874fa0737c6ec04a24ae3a0838a652c5af767b3","author":{"name":"Christian Paquin","email":"5e354fbc60a50a4914bb55be34107b73e39fe98c@microsoft.com"},"message":"Merged upstream tag 1.1.1f  (#167)\n\n* crypto/threads_win.c: fix preprocessor indentation\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9860)\r\n\r\n* BIO_f_zlib: Properly handle BIO_CTRL_PENDING and BIO_CTRL_WPENDING calls.\r\n\r\nThere can be data to write in output buffer and data to read that were\r\nnot yet read in the input stream.\r\n\r\nFixes #9866\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9877)\r\n\r\n(cherry picked from commit 6beb8b39ba8e4cb005c1fcd2586ba19e17f04b95)\r\n\r\n* Fix potential memory leaks with BN_to_ASN1_INTEGER\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9833)\r\n\r\n(cherry picked from commit f28bc7d386b25fb75625d0c62c6b2e6d21de0d09)\r\n\r\n* Add a minimal windows build config for AppVeyor\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9886)\r\n\r\n* Add a minimal linux build target for Travis\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9888)\r\n\r\n* Do no mention private headers in public headers\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9812)\r\n\r\n(cherry picked from commit bd9faf117db1e53b2ad2ee9cbfe8def8c98ecb7b)\r\n\r\n* Fix small typo in doc for X509_STORE_CTX_new\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9894)\r\n\r\n(cherry picked from commit 64c1e74572f16a3e7c225f66fe85a3451ad39e68)\r\n\r\n* clearing the ecx private key memory\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9830)\r\n\r\n(cherry picked from commit 6ef03ea98fac501e6d6e33bac6ad3c92ea074712)\r\n\r\n* Fix building statically without any dso support\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9889)\r\n\r\n* apps/pkcs12: print multiple PKCS#12 safeBag attribute values if present\r\n\r\nCurrently the pkcs12 app will only ever print the first value of a multi-value\r\nattribute. This is OK for some attributes (e.g. friendlyName, localKeyId) but\r\nmay miss values for other attributes.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9751)\r\n\r\n(cherry picked from commit dbcc7b45670483cc89428afe1d3c363ef83d76df)\r\n\r\n* Use the correct maximum indent\r\n\r\nFound by OSS-Fuzz\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n\r\nGH: #9959\r\n(cherry picked from commit a6105ef40d65b35818f2b8ae8ca9e57ca6956d1d)\r\n\r\n* DOC: fix documentation of som EVP_MD_CTX functions\r\n\r\nThey were documented to take an EVP_MD pointer, when they really take\r\nan EVP_MD_CTX pointer.\r\n\r\nFixes #9993\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9997)\r\n\r\n* Reorganize private crypto header files\r\n\r\nCurrently, there are two different directories which contain internal\r\nheader files of libcrypto which are meant to be shared internally:\r\n\r\nWhile header files in 'include/internal' are intended to be shared\r\nbetween libcrypto and libssl, the files in 'crypto/include/internal'\r\nare intended to be shared inside libcrypto only.\r\n\r\nTo make things complicated, the include search path is set up in such\r\na way that the directive #include \"internal/file.h\" could refer to\r\na file in either of these two directoroes. This makes it necessary\r\nin some cases to add a '_int.h' suffix to some files to resolve this\r\nambiguity:\r\n\r\n  #include \"internal/file.h\"      # located in 'include/internal'\r\n  #include \"internal/file_int.h\"  # located in 'crypto/include/internal'\r\n\r\nThis commit moves the private crypto headers from\r\n\r\n  'crypto/include/internal'  to  'include/crypto'\r\n\r\nAs a result, the include directives become unambiguous\r\n\r\n  #include \"internal/file.h\"       # located in 'include/internal'\r\n  #include \"crypto/file.h\"         # located in 'include/crypto'\r\n\r\nhence the superfluous '_int.h' suffixes can be stripped.\r\n\r\nThe files 'store_int.h' and 'store.h' need to be treated specially;\r\nthey are joined into a single file.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Reorganize local header files\r\n\r\nApart from public and internal header files, there is a third type called\r\nlocal header files, which are located next to source files in the source\r\ndirectory. Currently, they have different suffixes like\r\n\r\n  '*_lcl.h', '*_local.h', or '*_int.h'\r\n\r\nThis commit changes the different suffixes to '*_local.h' uniformly.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Fix header file include guard names\r\n\r\nMake the include guards consistent by renaming them systematically according\r\nto the naming conventions below\r\n\r\nThe public header files (in the 'include/openssl' directory) are not changed\r\nin 1.1.1, because it is a stable release.\r\n\r\nFor the private header files files, the guard names try to match the path\r\nspecified in the include directives, with all letters converted to upper case\r\nand '/' and '.' replaced by '_'. An extra 'OSSL_' is added as prefix.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Add util/fix-includes script\r\n\r\nThis script contains all adjustments to header files which were made\r\nduring the reorganization of the header files. It is meant as an aid\r\nfor other contributors which encounter preprocessor #include errors\r\nafter rebasing over this pull request. Simply running\r\n\r\n  util/fix-includes\r\n\r\nfrom the root of the source directory should hopefully fix the problem.\r\n\r\nNote: such #include errors are expected only for pull requests which\r\nadd a lot of new code, in particular new compilation modules.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Fix a return value bug in apps/speed.c\r\n\r\nThose functions returns less than and equal to 0 to indicate an error\r\noccured.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10054)\r\n\r\n(cherry picked from commit 94bd168a9e31d1ab4986e94056dfae71ec5f051f)\r\n\r\n* Fix a bundle of mischecks of return values\r\n\r\nSeveral EVP_PKEY_xxxx functions return 0 and a negative value for\r\nindicating errors. Some places call these functions with a zero return\r\nvalue check only, which misses the check for the negative scenarios.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10055)\r\n\r\n(cherry picked from commit 7e3ae24832e0705583b1471febf3dc0eb1cc021f)\r\n\r\n* Correct the function names in SSL_CTX_set_stateless_cookie_generate_cb.pod\r\n\r\nAlthough the synopsis used the correct function names, the description did\r\nnot. Also the description of the equivalent DTLSv1_listen() callbacks was\r\nmissing, so these have been added.\r\n\r\nFixes #10030\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10033)\r\n\r\n(cherry picked from commit 84f471ecab76a16281a16c53d259bbcae358816f)\r\n\r\n* Add defines for __NR_getrandom for all Linux architectures\r\n\r\nFixes: #10015\r\n\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\nGH: #10044\r\n(cherry picked from commit 4dcb150ea30f9bbfa7946e6b39c30a86aca5ed02)\r\n\r\n* Fix long name of some Microsoft objects\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10029)\r\n\r\n(cherry picked from commit 648b53b88ea55b4c2f2c8c57d041075731db5f95)\r\n\r\n* Do not print extensions in Certificate message for TLS1.2 and lower\r\n\r\nAccording to RFC8446 CertificateEntry in Certificate message contains\r\nextensions that were not present in the Certificate message in RFC5246.\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9994)\r\n\r\n(cherry picked from commit 65c76cd2c9e8da9468dd490b334e56c51dbef582)\r\n\r\n* doc: EVP_DigestInit clears all flags\r\n\r\nMention that EVP_DigestInit() also clears all flags.\r\n\r\nFixes: 10031\r\nSigned-off-by: Christian Heimes <christian@python.org>\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10032)\r\n\r\n(cherry picked from commit 091aab66a6dbc3a3ecee7684aa30811b342f04e7)\r\n\r\n* Add arm64 in test matrix on TravisCI.\r\n\r\nChange-Id: I5d2b729699cfd8e80c3df17db4a9d2edcbf64454\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10046)\r\n\r\n(cherry picked from commit 0399aba7e05ea9bb1a58bd2e1b164f353f6ef1c9)\r\n\r\n* Fix iOS simulator build\r\n\r\nFixes #9999\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10002)\r\n\r\n* rsa: replace magic number '11' by RSA_PKCS1_PADDING_SIZE\r\n\r\nSuggested by Matt Hart\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10084)\r\n\r\n(cherry picked from commit f1d1903dd3dd1d68a5eae190b8c2a88bfe0a68ac)\r\n\r\n* Define AESNI_ASM if AESNI assembler is included, and use it\r\n\r\nBecause we have cases where basic assembler support isn't present, but\r\nAESNI asssembler support is, we need a separate macro that indicates\r\nthat, and use it.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10080)\r\n\r\n* 'init_buf' memory can be freed when DTLS is used over SCTP (not over UDP).\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9653)\r\n\r\n(cherry picked from commit e7c27a6c3716843f8412fd96311b70ac84b785f9)\r\n\r\n* Fix typo in comment\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10105)\r\n\r\n(cherry picked from commit 89e5aaa1d72058404d3ea06bfaeff5334aba202d)\r\n\r\n* Send bad_record_mac instead of decryption_failed\r\n\r\nThe decryption failed alert was deprecated a long time ago. It can\r\nprovide an attacker too much information to be able to distinguish between\r\nMAC failures and decryption failures and can lead to oracle attacks.\r\nInstead we should always use the bad_record_mac alert for these issues.\r\nThis fixes one instance that still exists. It does not represent a\r\nsecurity issue in this case because it is only ever sent if the record is\r\npublicly invalid, i.e. we have detected it is invalid without using any\r\nsecret material.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10093)\r\n\r\n(cherry picked from commit 37133290832ac2d1389926eba7325125fdacbe8d)\r\n\r\n* Add documentation for PEM_{read,write}_bio_Parameters()\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10113)\r\n\r\n(cherry picked from commit 9a6abb95be42b88c7c5ebc8c97f14afdc5919aa1)\r\n\r\n* Fix reference to PEM docs\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10101)\r\n\r\n(cherry picked from commit 120cc034271e9ab52f92840a16784228e50564f9)\r\n\r\n* ssl/statem/statem_lib.c: make servercontext/clientcontext arrays of chars instead of char pointers to fix EBCDIC builds.\r\n\r\nFixes #9869\r\n\r\nCLA:trivial\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9878)\r\n\r\n* Fix unused goto label gcc warning\r\n\r\nOn systems with undefined AI_ADDRCONFIG and AI_NUMERICHOST:\r\n\r\nx86_64-w64-mingw32-gcc  -I. -Icrypto/include -Iinclude -m64 -Wall -O3 -fno-ident ...\r\ncrypto/bio/b_addr.c: In function 'BIO_lookup_ex':\r\ncrypto/bio/b_addr.c:699:7: warning: label 'retry' defined but not used [-Wunused-label]\r\n       retry:\r\n       ^~~~~\r\n\r\nRegression from: 3f91ede9aea70774d9b5d509bc76d484ebaff6aa\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9856)\r\n\r\n(cherry picked from commit be66a15cc1a4c3cc68fa854ceea321ca57f96304)\r\n\r\n* Ignore empty ALPN elements in CLI args\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n* Configure: accept Windows style compiler options\r\n\r\nCurrently the Configure command only supports passing UNIX style\r\noptions (`-opt`) to the compiler. Passing Windows style options\r\n(`/opt`) yields an error. Fortunately, the compiler accepts both\r\ntypes of options, nevertheless this commit fixes that discrimination\r\nof Windows users.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9961)\r\n\r\n(cherry picked from commit f246f54f18d380791cc60be4aea0fbc7253a9a20)\r\n\r\n* [ec_asn1.c] Avoid injecting seed when built-in matches\r\n\r\nAn unintended consequence of https://github.com/openssl/openssl/pull/9808\r\nis that when an explicit parameters curve is matched against one of the\r\nwell-known builtin curves we automatically inherit also the associated\r\nseed parameter, even if the input parameters excluded such\r\nparameter.\r\n\r\nThis later affects the serialization of such parsed keys, causing their\r\ninput DER encoding and output DER encoding to differ due to the\r\nadditional optional field.\r\n\r\nThis does not cause problems internally but could affect external\r\napplications, as reported in\r\nhttps://github.com/openssl/openssl/pull/9811#issuecomment-536153288\r\n\r\nThis commit fixes the issue by conditionally clearing the seed field if\r\nthe original input parameters did not include it.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10140)\r\n\r\n(cherry picked from commit f97a8af2f3f3573f0759693117c9d33d2a63c27e)\r\n\r\n* Ignore duplicated undocumented things\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Yang <yang.yang@baishancloud.com>\r\n\r\n(cherry picked from commit ee4afacd96f5bfbe7662c8f0ec4464c6eee4c450)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Add missing EVP_MD documentation\r\n\r\nSigned-off-by: Antoine Salon <asalon@vmware.com>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n(cherry picked from commit 37842dfaebcf28b4ca452c6abd93ebde1b4aa6dc)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Document and add macros for additional DSA options\r\n\r\nEVP_PKEY_CTRL_DSA_PARAMGEN_Q_BITS and EVP_PKEY_CTRL_DSA_PARAMGEN_MD are only\r\nexposed from EVP_PKEY_CTX_ctrl, which means callers must write more error-prone\r\ncode (see also issue #1319). Add the missing wrapper macros and document them.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n(cherry picked from commit a97faad76a1be22eadd6c1a39972ad5e095d9e80)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Add documentation for the -sigopt option.\r\n\r\nReviewed-by: Paul Yang <yang.yang@baishancloud.com>\r\n\r\n(cherry picked from commit d7b2124a428f9e00ed7647554b5be7153aac71f6)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* issue-8493: Fix for filenames with newlines using openssl dgst\r\n\r\nThe output format now matches coreutils *dgst tools.\r\n\r\n[ edited to remove trailing white space ]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n\r\n(cherry picked from commit f3448f5481a8d1f6fbf5fd05caaca229af0b87f7)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* i2d_PublicKey was listed in 2 different man pages\r\n\r\nfind-doc-nits complains if a symbol is documented in more than one\r\nlocation.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n(cherry picked from commit 4ff4e53f816855b07fc02dc931dd57b2ae324aa1)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Fix an incorrect macro\r\n\r\nA macro was missing a space which was confusing find-doc-nits\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n(cherry picked from commit 8caab503ba004abb555d636c1ca9f7bcde79657f)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* [crypto/asn1/x_bignum.c] Explicit test against NULL\r\n\r\nAs a fixup to https://github.com/openssl/openssl/pull/9779 to better\r\nconform to the project code style guidelines, this commit amends the\r\noriginal changeset to explicitly test against NULL, i.e. writing\r\n\r\n```\r\nif (p != NULL)\r\n```\r\n\r\nrather than\r\n\r\n```\r\nif (!p)\r\n```\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9881)\r\n\r\n* Unify BN_rshift design\r\n\r\nThis commit aims at refactoring the `BN_rshift` by making it a wrapper\r\naround `bn_rshift_fixed_top`, in order to match the current design of\r\n`BN_lshift`, as suggested in the discussion at\r\nhttps://github.com/openssl/openssl/pull/10122#discussion_r332474277 .\r\n\r\nAs described in the code, by refactoring this function, `BN_rshift`\r\nprovides a constant-time behavior for sufficiently[!] zero-padded inputs\r\nunder the following assumptions: `|n < BN_BITS2|` or `|n / BN_BITS2|`\r\nbeing non-secret.\r\n\r\nNotice that `BN_rshift` returns a canonical representation of the\r\nBIGNUM, if a `fixed_top` representation is required, the caller should\r\ncall `bn_rshift_fixed_top` instead.\r\n\r\n(cherry picked from commit 8eba6de59e2b06f23c214344423a5a618d1c9ffd)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10196)\r\n\r\n* Constant-time GCD function.\r\n\r\nThis commit replaces the current `BN_gcd` function with a constant-time\r\nGCD implementation.\r\n\r\n(cherry picked from commit f3c4adfc7eb13e9eff514039b4c60b457bdba433)\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10122)\r\n\r\n* Add GCD testing infrastructure.\r\n\r\nThis commit adds testing and Known Answer Tests (KATs) to OpenSSL for\r\nthe `BN_gcd` function.\r\n\r\n(cherry picked from commit b75d6310857bc44ef2851bde68a1979c18bb4807)\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10122)\r\n\r\n* rand_unix.c: correct include guard comments\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10050)\r\n\r\n(cherry picked from commit 2a7e6ed86be20bd472696a3eafe5d20ec9579dab)\r\n\r\n* Move random-related defines from e_os.h to rand_unix.c\r\n\r\nFixes #10049\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10050)\r\n\r\n(cherry picked from commit 01036e2afbe116d608be048ed15930fc885ab2a8)\r\n\r\n* fixed the RETURN VALUES section in the EC_GROUP documentation\r\nfor the following functions.\r\n\r\nEC_GROUP_get_order\r\nEC_GROUP_get_cofactor\r\nEC_GROUP_get_curve_name\r\nEC_GROUP_get_asn1_flag\r\nEC_GROUP_get_point_conversion_form\r\nEC_GROUP_get_degree\r\n\r\n(cherry picked from commit df3d1e84b3802acffeec11d6224e8a0e33d0aa83)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9664)\r\n\r\n* Update dgst.c to show a list of message digests\r\n\r\nFixes #9893\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10219)\r\n\r\n* Improve formatting for man3/EC_GROUP_new.pod\r\n\r\n- Use `()` to qualify function names, consistently\r\n- Limit line width to 80 chars\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10235)\r\n\r\n* Fix doc for EC_GROUP_set_curve()\r\n\r\n(cherry picked from commit eb2ff0408ac6e934e05db7ed4006855c018584f1)\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10235)\r\n\r\n* Update control logic for BN_gcd\r\n\r\nPR https://github.com/openssl/openssl/pull/10122 introduced changes to\r\nthe BN_gcd function and the control logic inside it accessed `g->d[0]`\r\nirrespective of `g->top`.\r\n\r\nWhen BN_add is called, in case the result is zero, `BN_zero` is called.\r\nThe latter behaves differently depending on the API compatibility level\r\nflag: normally `g->d[0]` is cleared but in `no-deprecated` builds only\r\n`g->top` is set to zero.\r\n\r\nThis commit uses bitwise logic to ensure that `g` is treated as zero if\r\n`g->top` is zero, irrespective of `g->d[0]`.\r\n\r\nCo-authored-by: Nicola Tuveri <nic.tuv@gmail.com>\r\n\r\n(cherry picked from commit 8aca4bfe8213402c80abc06fe25121461f79128d)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10232)\r\n\r\n* Enable runtime testing of no-deprecated builds in Travis\r\n\r\n(cherry picked from commit c89799605b833f769ce4cfd879bb291f49b133be)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10232)\r\n\r\n* Cleanup hardcoded cipher suite codepoints in s_server\r\n\r\nThe hardcoded code points for TLSv1.3 cipher suites are used in the TLS\r\nPSK server callback. However, they seem to have been refactored a while\r\nago to use tls13_aes128gcmsha256_id, so these defines are not necessary\r\nwithin the s_server code anymore.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10243)\r\n\r\n(cherry picked from commit aed8c47cbcc8a289bea433ead2effea035187260)\r\n\r\n* Allow EVP_PKEY_get0_RSA for RSA-PSS keys\r\n\r\nRSA-PSS keys use the same internal structure as RSA keys but do not\r\nallow accessing it through EVP_PKEY_get0_RSA. This commit changes that\r\nbehavior.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10217)\r\n\r\n(cherry picked from commit 465a58b117d5a85623f3998d6fbf2fe8712a5604)\r\n\r\n* Fix a copy&paste error in the TLSv1.3 server side PSK documentation\r\n\r\nThe introductory paragraph for the TLSv1.3 server side PSK documentation\r\nis a copy & paste of the client side documentation which has not been\r\nupdated with the server side equivalent information.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10245)\r\n\r\n(cherry picked from commit c549cb46e0d3cb4e611acafae5f919b4a8df4007)\r\n\r\n* Fix an s_server arbitrary file read issue on Windows\r\n\r\nRunning s_server in WWW mode on Windows can allow a client to read files\r\noutside the s_server directory by including backslashes in the name, e.g.\r\n\r\nGET /..\\myfile.txt HTTP/1.0\r\n\r\nThere exists a check for this for Unix paths but it is not sufficient\r\nfor Windows.\r\n\r\nSince s_server is a test tool no CVE is assigned.\r\n\r\nThanks to Jobert Abma for reporting this.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10215)\r\n\r\n(cherry picked from commit 0a4d6c67480a4d2fce514e08d3efe571f2ee99c9)\r\n\r\n* Suppress an error when doing SM2 sign/verify ops\r\n\r\nThis was fixed in #8321 right after the 1.1.1 was released but never\r\nback ported to 1.1.1. Now fix it.\r\n\r\nIssue reported from lua-openssl project.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10278)\r\n\r\n* apps/dgst.c: allocate a new signature buffer\r\n\r\n... if the fixed-size buffer is too small.\r\n\r\nFixes #9732\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10276)\r\n\r\n(cherry picked from commit 7c2d95d47ccb3797f0da6bd4446747c6eee07b87)\r\n\r\n* Fix find/rm command in Unix clean recipe\r\n\r\nThe `./pyca-cryptography/.travis/downstream.d` subdirectory that causes the `rm` command to fail (albeit harmlessly, but with a warning from `make` nonetheless).\r\n\r\n>rm -f `find . -name '*.d' \\! -name '.*' -print`\r\n>rm: cannot remove './pyca-cryptography/.travis/downstream.d': Is a directory\r\n>make: [Makefile:1910: clean] Error 1 (ignored)\r\n\r\nExclude directories from being matched by the `find` commands.\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10264)\r\n\r\n(cherry picked from commit 38b71bd4704ee1746e862f5a7a4e170fd84a5eb0)\r\n\r\n* [crypto/bn] fix a few small timing leaks in BN_lshift1 and BN_rshift1\r\n\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10209)\r\n\r\n(cherry picked from commit 305bf9c8668aff78e668131061f4eb088457be5f)\r\n\r\n* Fix SYNOPSIS for ASN1_ENUMERATED_get_int64 and ASN1_ENUMERATED_set_int64\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9823)\r\n\r\n(cherry picked from commit 2aa28a1abc893fb16b99ba77e2fecb1cbc8769c7)\r\n\r\n* Fix potential memory leak in dh_ameth.c\r\n\r\nFree dukm in error handling of dh_cms_encrypt()\r\n\r\nFixes #10294\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10310)\r\n\r\n(cherry picked from commit 6624e1f7b6a397948561e9cc2774f0c8af1d2c79)\r\n\r\n* md4/md5: macros should not include the line following them\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10311)\r\n\r\n(cherry picked from commit 351ba5bd27645d5b5a2bc643b2709bd30bcdf09c)\r\n\r\n* Add test cases for min/max protocol API\r\n\r\nSigned-off-by: Christian Heimes <christian@python.org>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/6553)\r\n\r\n(cherry picked from commit 132b5facf8d681db5dfa45828d8b02f1bf5df64b)\r\n\r\n* VMS: Added new method to gather entropy on VMS, based on SYS$GET_ENTROPY.\r\n\r\nThis system services is based on FreeBSD 12's getentropy(), and is\r\ntherefore treated the same way as getentropy() with regards to amount\r\nof entropy bits per data bit.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/8926)\r\n\r\n(cherry picked from commit 8b9896eb293a0861f0b8c191b7a278f176b729e6)\r\n\r\n* s390x assembly pack: enable clang build\r\n\r\nclang imposes some restrictions on the assembler code that\r\ngcc does not.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10330)\r\n\r\n(cherry picked from commit 6f93f06135cbbd36c3fe98d63717e8303a5d559b)\r\n\r\nConflicts:\r\n\tcrypto/perlasm/s390x.pm (non-existant)\r\n\tcrypto/s390xcpuid.pl (code to be changed non-existant)\r\n\r\n* Don't leak memory in the event of a failure in i2v_GENERAL_NAMES\r\n\r\ni2v_GENERAL_NAMES call i2v_GENERAL_NAME repeatedly as required. Each\r\ntime i2v_GENERAL_NAME gets called it allocates adds data to the passed in\r\nstack and then returns a pointer to the stack, or NULL on failure. If\r\nthe passed in stack is itself NULL then it allocates one.\r\n\r\ni2v_GENERAL_NAMES was not correctly handling the case where a NULL gets\r\nreturned from i2v_GENERAL_NAME. If a stack had already been allocated then\r\nit just leaked it.\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Viktor Dukhovni <viktor@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10300)\r\n\r\n(cherry picked from commit 45b244620a74248b46ebe1c85e86437b9641447a)\r\n\r\n* BIO_s_connect: add an error state and use it\r\n\r\nIf no connection could be made, addr_iter will eventually end up being\r\nNULL, and if the user didn't check the returned error value, the\r\nBIO_CONN_S_CONNECT code will be performed again and will crash.\r\n\r\nSo instead, we add a state BIO_CONN_S_CONNECT_ERROR that we enter into\r\nwhen we run out of addresses to try.  That state will just simply say\r\n\"error\" back, until the user does something better with the BIO, such\r\nas free it or reset it.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10333)\r\n\r\n* Configure: Make --strict-warnings meaningful with MSVC cl\r\n\r\nWe also add this to our x86_64 builds on appveyor\r\n\r\n(cherry picked from commit b4a7b4ec4acc712b1f22a83966ac986b510f25d8)\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10365)\r\n\r\n* conf_def.c: Avoid calling strlen() in a loop\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10361)\r\n\r\n(cherry picked from commit d1c1fb2d41a627293483d832aaffcb6eca9075f9)\r\n\r\n* Fix a -Warray-bounds gcc warning in OPENSSL_DIR_read\r\n\r\n'__builtin_strncpy' offset [275, 4095] from the object at\r\n'direntry' is out of the bounds of referenced subobject 'd_name'\r\nwith type 'char[256]' at offset 19\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10343)\r\n\r\n(cherry picked from commit db5cf86535b305378308c58c52596994e1ece1e6)\r\n\r\n* Fix --strict-warnings build\r\n\r\nAppease -Wstring-plus-int.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9608)\r\n\r\n(cherry picked from commit e0249827b3fa81ff6c59fb14ef85d38361dd5e31)\r\n\r\n* Workaround for Windows-based GOST implementations\r\n\r\nMany Windows-based GOST TLS implementations are unable to extend the\r\nlist of supported SignatureAlgorithms because of lack of the necessary\r\ncallback in Windows. So for TLS 1.2 it makes sense to imply the support\r\nof GOST algorithms in case when the GOST ciphersuites are present.\r\n\r\nThis is a backport of #10377 to 1.1.1 branch\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10378)\r\n\r\n* Fix misspelled resumption_label for CHARSET_EBCDIC\r\n\r\nThe resumption_label variable when CHARSET_EBCDIC was enabled, was misspelled.\r\nInstead of evaluating to 'res binder' as expected, it evaluated to 'red binder'.\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10396)\r\n\r\n(cherry picked from commit 6ed12cec7216c3e81b58f5cafa41775e456feaee)\r\n\r\n* SSL: Document SSL_add_{file,dir}_cert_subjects_to_stack()\r\n\r\nThis also removes the incorrect documentation comments by those\r\nfunctions.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10403)\r\n\r\n* Add more tests for apps/req\r\n\r\nhttps://github.com/openssl/openssl/issues/10224#issuecomment-546593113\r\nhighlighted that existing testing infrastructure is not covering common\r\nusage patterns of the `req` app.\r\n\r\nThis commit explicitly adds request generations thorugh the CLI using\r\nRSA, DSA and ECDSA (P-256) keys.\r\n\r\n(cherry picked from commit b2a7310af0dd190712bae2e462a7708483dd4628)\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10369)\r\n\r\n* Fix EC_POINT_bn2point() for BN_zero()\r\n\r\nEC_POINT_bn2point() rejected BIGNUMs with a zero value.\r\n\r\nThis behavior indirectly caused failures when converting a point\r\nat infinity through EC_POINT_point2hex() and then back to a point with\r\nEC_POINT_hex2point().\r\n\r\nWith this change such BIGNUMs are treated like any other and exported to\r\nan octet buffer filled with zero.\r\nIt is then EC_POINT_oct2point() (either the default implementation or\r\nthe custom one in group->meth->oct2point) to determine if such encoding\r\nmaps to a valid point (generally the point at infinity is encoded as\r\n0x00).\r\n\r\nFixes #10258\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10329)\r\n\r\n(cherry picked from commit d47c10875656790d146f62ac3c437db54c58dbf7)\r\n\r\n* Add self-test for EC_POINT_hex2point\r\n\r\nAdds tests for each curve to ensure that encodings obtained through\r\nEC_POINT_hex2point() can be fed to EC_POINT_point2hex() yielding a point\r\nidentical to the one from which the encoding is generated.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10329)\r\n\r\n(cherry picked from commit 35ed029b5a488924890fda2487c87f664361a33b)\r\n\r\n* Extend docs for EC_POINT conversion functions\r\n\r\nAdd more explicit documentation about the relation between\r\nEC_POINT_point2oct(), EC_POINT_point2hex(), EC_POINT_point2bn() and\r\ntheir reverse.\r\n\r\nIn particular highlight that EC_POINT_point2oct() and\r\nEC_POINT_oct2point() conform to, respectively, Sec. 2.3.3 and Sec. 2.3.4\r\nof the SECG SEC 1 standard (which is the normative reference for the\r\nalready mentioned RFC 5480), highlighting with a note how this affect\r\nthe encoding/decoding of the point at infinity (which in contrast with\r\nany other valid generic point of a curve is assigned an exceptional\r\nfixed octet string encoding, i.e., 0x00).\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10329)\r\n\r\n(cherry picked from commit 3cc26f2eba8a8c16ac559e68c05c094d7ea6bd8b)\r\n\r\n* chacha_enc.c: fix for EBCDIC platforms\r\n\r\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>\r\n\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10417)\r\n\r\n(cherry picked from commit c31950b964a2f3f7b9e6ad98076954178ee1e77d)\r\n\r\n* testutil/init.c rename to testutil/testutil_init.c\r\n\r\nAvoid conflicts with some linkers.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10439)\r\n\r\n(cherry picked from commit e74b5dcf16dfd7c91d9f9a7e69c447f00d778e17)\r\n\r\nConflicts:\r\n\ttest/build.info\r\n\r\n* travis.yml: add arch s390x target\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10446)\r\n\r\n(cherry picked from commit 985412f8c14853b9936852bc7ef4d9438db27b88)\r\n\r\n* Add missing EVP_PKEY_METHOD accessors for digestsign and digestverify\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10388)\r\n\r\n(cherry picked from commit 2555285fa5e4248ad4a5a0bc14ae4606443856c2)\r\n\r\n* s390x assembly pack: fix bn_mul_comba4\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10454)\r\n\r\n(cherry picked from commit 97a986f78289fef71bf8778dc4763458e983750c)\r\n\r\n* Allow specifying the tag after AAD in CCM mode (2)\r\n\r\nIn addition to 67c81ec3 which introduced this behavior in CCM mode\r\ndocs but only implemented it for AES-CCM.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10331)\r\n\r\n(cherry picked from commit f7382fbbd846dd3bdea6b8c03b6af22faf0ab94f)\r\n\r\nConflicts:\r\n\ttest/recipes/30-test_evp_data/evpciph.txt\r\n\r\n* Fix sha512_block_data_order_avx2 backtrace info\r\n\r\nWe store a secondary frame pointer info for the debugger\r\nin the red zone.\r\n\r\nFixes #8853\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9624)\r\n\r\n(cherry picked from commit 9ce91035bcf7d74fe15c94650f3bc1f89b7c0f07)\r\n\r\n* ECDSA: don't clear free memory after verify.\r\n\r\nVerifications are public, there is no need to clear the used storage before\r\nfreeing it.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10475)\r\n\r\n(cherry picked from commit cff7d199e0dc51ae939de5fb7702aab2a9ef30fc)\r\n\r\n* Engine: Add NULL check.\r\n\r\nAdd NULL check for return from pkey_asn1_meths.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10473)\r\n\r\n(cherry picked from commit 9bada854de16bcc1a9dc199b4b352b19ab6897fc)\r\n\r\n* EVP p_lib: Add NULL check to EVP_PKEY_missing_parameters.\r\n\r\nCheck for NULL and return error if so.\r\nThis can possibly be called from apps/ca.c with a NULL argument.\r\n\r\nReviewed-by: Paul Yang <kaishen.yy@antfin.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10474)\r\n\r\n(cherry picked from commit ab5c77b4766e0992751d86560193ca42b49cf316)\r\n\r\n* Fix a race condition in SNI handling\r\n\r\nAs was done for ciphers, supported groups, and EC point formats in\r\nhttps://github.com/openssl/openssl/pull/9162, only write the negotiated\r\nSNI hostname value to the session object when not resuming, even for\r\nTLS 1.3 resumptions.  Otherwise, when using a stateful session cache\r\n(as is done by default when 0-RTT data is enabled), we can have multiple\r\nSSLs active using the same in-memory session object, which leads to\r\ndouble-frees and similar race conditions in the SNI handler prior\r\nto this commit.\r\n\r\nFortunately, since draft-ietf-tls-tls13-22, there is no requirement\r\nthat the SNI hostname be preserved across TLS 1.3 resumption, and thus\r\nnot a need to continually update the session object with the \"current\"\r\nvalue (to be used when producing session tickets, so that the subsequent\r\nresumption can be checked against the current value).  So we can just\r\nrelax the logic and only write to the session object for initial handshakes.\r\nThis still leaves us in a somewhat inconsistent state, since if the SNI value\r\ndoes change across handshakes, the session object will continue to record\r\nthe initial handshake's value, even if that bears no relation to the\r\ncurrent handshake.  The current SSL_get_servername() implementation\r\nprefers the value from the session if s->hit, but a more complete fix\r\nfor that and related issues is underway in\r\nhttps://github.com/openssl/openssl/pull/10018; there is no need to wait\r\nfor the complete fix for SNI name handling in order to close the\r\nrace condition and avoid runtime crashes.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10441)\r\n\r\n(cherry picked from commit 2a5385511051d33be8d2b20d7669d8b1862fe510)\r\n\r\n* main: avoid a NULL dereference on initialisation.\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10495)\r\n\r\n(cherry picked from commit acc7b9fb5c162c2ca522e5e1e09d1efbde8dc6a0)\r\n\r\n* UI_UTIL_wrap_read_pem_callback(): when |cb| is NULL, use PEM_def_callback\r\n\r\nFixes #10444\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10447)\r\n\r\n(cherry picked from commit 72a5412b4858cc7c5627a121f78685a2a4065521)\r\n\r\n* doc/man7/proxy-certificates.pod: New guide for proxy certificates\r\n\r\nThis replaces doc/HOWTO/proxy_certificates.txt\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10507)\r\n\r\n(cherry picked from commit 2a03823606b2d7e73e5dc890c3202e186511151f)\r\n\r\n* i2b_PVK(): Use Encrypt, not Decrypt\r\n\r\nWe used EVP_EncryptInit_ex() to initialise, but EVP_DecryptUpdate()\r\nand EVP_DecryptFinal_ex() to actually perform encryption.  This worked\r\nlong ago, when the Encrypt and Decrypt variants were the same, but\r\ndoesn't now (actually haven't for a very long time).\r\n\r\nThis shows how seldom PVK is actually used.\r\n\r\nFixes #9338\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10521)\r\n\r\n* Fix L<EVP_MD_CTX_set_pkey_ctx> links\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10420)\r\n\r\n* apps/ocsp.c: sock_timeout -> socket_timeout\r\n\r\nIt appears that 'sock_timeout' is defined at least with DJGPP, so we\r\nrename our symbol and hope the new name isn't taken.\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10515)\r\n\r\n(cherry picked from commit e9b95e42fbae668cb605287fa462a0d5f58b9caf)\r\n\r\n* EVP_*Update: ensure that input NULL with length 0 isn't passed\r\n\r\nEven with custom ciphers, the combination in == NULL && inl == 0\r\nshould not be passed down to the backend cipher function.  The reason\r\nis that these are the values passed by EVP_*Final, and some of the\r\nbackend cipher functions do check for these to see if a \"final\" call\r\nis made.\r\n\r\nAn exception is made for CCM mode which has special handling for the case\r\nwhere inl == 0: this may mean the total plaintext or ciphertext length is 0.\r\n\r\nThis is based on an original commit by Richard Levitte.\r\n\r\nFixes #8675\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9057)\r\n\r\n* Add a test for NULL chunks in encrypt/decrypt\r\n\r\nIssue #8675 describes a problem where calling EVP_DecryptUpdate() with an\r\nempty chunk causes the result to be different compared to if you do not\r\nuse an empty chunk. This adds a test for that case.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9057)\r\n\r\n* Update NOTES.ANDROID for newer NDK versions + small fixes.\r\n\r\nFixes #8941\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10478)\r\n\r\n(cherry picked from commit d3a27c5ee45a29edd9c0d60ad5929f67996f89fd)\r\n\r\n* Remove spurious space from file.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10562)\r\n\r\n(cherry picked from commit 7ba46774b7f1b2e83d44323a8831b615a49f9f37)\r\n\r\n* Fix exit issue in travisci\r\n\r\nUngraceful 'exit' probably causes unexpeced error on background activity.\r\nSo replace 'exit' with recommended 'travis_terminate'. Also see\r\nhttps://travis-ci.community/t/exit-0-cannot-exit-successfully-on-arm/5731/4\r\n\r\nChange-Id: I382bd93a3e15ecdf305bab23fc4adefbf0348ffb\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10561)\r\n\r\n(cherry picked from commit 6df44cf65fbc7e150965149d7e681ac3e22d11d8)\r\n\r\n* Fix an overflow bug in rsaz_512_sqr\r\n\r\nThere is an overflow bug in the x64_64 Montgomery squaring procedure used in\r\nexponentiation with 512-bit moduli. No EC algorithms are affected. Analysis\r\nsuggests that attacks against 2-prime RSA1024, 3-prime RSA1536, and DSA1024 as a\r\nresult of this defect would be very difficult to perform and are not believed\r\nlikely. Attacks against DH512 are considered just feasible. However, for an\r\nattack the target would have to re-use the DH512 private key, which is not\r\nrecommended anyway. Also applications directly using the low level API\r\nBN_mod_exp may be affected if they use BN_FLG_CONSTTIME.\r\n\r\nCVE-2019-1551\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Improve the overflow handling in rsaz_512_sqr\r\n\r\nWe have always a carry in %rcx or %rbx in range 0..2\r\nfrom the previous stage, that is added to the result\r\nof the 64-bit square, but the low nibble of any square\r\ncan only be 0, 1, 4, 9.\r\n\r\nTherefore one \"adcq $0, %rdx\" can be removed.\r\nLikewise in the ADX code we can remove one\r\n\"adcx %rbp, $out\" since %rbp is always 0, and carry is\r\nalso zero, therefore that is a no-op.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Add a test case for rsaz_512_sqr overflow handling\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Add a CHANGES entry for CVE-2019-1551\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Difference between EVP_CipherInit and EVP_CipherInit_ex\r\n\r\nFixes #10455\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10550)\r\n\r\n* Fix some typos\r\n\r\nReported-by: misspell-fixer <https://github.com/vlajos/misspell-fixer>\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10544)\r\n\r\n(cherry picked from commit 79c44b4e3044aee9dc9618850d4f1ce067757b4b)\r\n\r\n* Fix docs for CRYPTO_secure_allocated\r\n\r\nFixes #9300\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10523)\r\n\r\n(cherry picked from commit 20c09f00346aec3a20ceacc9c9d44c5f050e13dd)\r\n\r\n* Enrich arm64 tests in Travis matrix\r\n\r\n1, Remove simple test just with --strict-warnings enabled.\r\n2, Share the three common envs with amd64.\r\n3, Add matrix item running test in bionic(default xenial) for arm64.\r\n4, Enable MSan test on arm64 for extended test.\r\n5, Enable UBSan test on arm64 for extended test.\r\n\r\nChange-Id: Ic1f2c5e39ee6fbafed6ede74a925301121463520\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10519)\r\n\r\n(cherry picked from commit 77fedcdc8cf5446354a1e7ff9123d8ada5b79b06)\r\n\r\n* Check return value after loading config file\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Paul Yang <kaishen.yy@antfin.com>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10607)\r\n\r\n(cherry picked from commit dd0139f416257ec5632414ed3ad8c61d07ba07ec)\r\n\r\n* Parse large GOST ClientKeyExchange messages\r\n\r\nLarge GOST ClientKeyExchange messages are sent by VipNet CSP, one of\r\nRussian certified products implementing GOST TLS, when a server\r\ncertificate contains 512-bit keys.\r\n\r\nThis behaviour was present in 1.0.2 branch and needs to be restored.\r\nBackport of #10376\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10376)\r\n\r\n* util/mkerr.pl: revert accidental change of header guards\r\n\r\nThis change was backported accidentally from master in commit fbbfd128c9aa.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10623)\r\n\r\n* rand_lib.c: fix null pointer dereferences after RAND_get_rand_method() failure\r\n\r\nRAND_get_rand_method() can return a NULL method pointer in the case of a\r\nmalloc failure, so don't dereference it without a check.\r\n\r\nReported-by: Zu-Ming Jiang (detected by FIFUZZ)\r\n\r\nFixes #10480\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10490)\r\n\r\n* Return 1 when openssl req -addext kv is duplicated\r\n\r\nCLA: trivial\r\n\r\nFixes #10273\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10578)\r\n\r\n(cherry picked from commit 1aeec3dbc2d62f902698b1eba9ed31cbd436f9dc)\r\n\r\n* Ensure EVP_PKEY_set1_DH detects X9.42 keys\r\n\r\nOpenSSL supports both PKCS#3 and X9.42 DH keys. By default we use PKCS#3\r\nkeys. The function `EVP_PKEY_set1_DH` was assuming that the supplied DH\r\nkey was a PKCS#3 key. It should detect what type of key it is and assign\r\nthe correct type as appropriate.\r\n\r\nFixes #10592\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10593)\r\n\r\n(cherry picked from commit 32c869ffaba67822602ea9fec611272ff8e8db58)\r\n\r\n* Test that EVP_PKEY_set1_DH() correctly identifies the DH type\r\n\r\nProvide a test to check tat when we assign a DH object we know whether\r\nwe are dealing with PKCS#3 or X9.42 DH keys.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10593)\r\n\r\n(cherry picked from commit e295de1d8433ed07092845cb6c56aa424ff35c6d)\r\n\r\n* Backport the RSA_get0_pss_params() function from master\r\n\r\nThis is a missing accessor in order to obtain PSS parameters from an\r\nRSA key, which should also be available in 1.1.1.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10568)\r\n\r\n* Update the HISTORY entry for RSA_get0_pss_params()\r\n\r\nMake a note of when this function was first introduced\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10568)\r\n\r\n* apps/speed.c: Fix eddsa sign and verify output with -multi option\r\n\r\nFixes #10261\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10285)\r\n\r\n(cherry picked from commit 1ac7e15375be39c8f03171c02658cf703f58217a)\r\n\r\n* Fix unwind info for some trivial functions\r\n\r\nWhile stack unwinding works with gdb here, the\r\nfunction _Unwind_Backtrace gives up when something outside\r\n.cfi_startproc/.cfi_endproc is found in the call stack, like\r\nOPENSSL_cleanse, OPENSSL_atomic_add, OPENSSL_rdtsc, CRYPTO_memcmp\r\nand other trivial functions which don't save anything in the stack.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10635)\r\n\r\n(cherry picked from commit 8913378a552e470c66277c47b19699f20b84aa3b)\r\n\r\n* Disable devcryptoeng on newer OpenBSD versions\r\n\r\nIt's reported that /dev/crypto support has been dropped in OpenBSD 5.7.\r\n\r\nFixes #10552\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10565)\r\n\r\n* Configuration: compute openssl_other_defines and related info later\r\n\r\nThe computation of macros and configdata.pm related data from %disabled\r\nwas done much too early, leaving later disablings without real support.\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10565)\r\n\r\n* Fix regression on x509 keyform argument\r\n\r\nIn OpenSSL pre 1.1.0, 'openssl x509 -keyform engine' was possible\r\nand supported.  In 1.1.0, type of keyform argument is OPT_FMT_PEMDER\r\nwhich doesn't support engine. This changes type of keyform argument\r\nto OPT_FMT_PDE which means PEM, DER or engine and updates the manpage\r\nincluding keyform and CAkeyform.\r\n\r\nThis restores the pre 1.1.0 behavior.\r\n\r\nThis issue is very similar than https://github.com/openssl/openssl/issues/4366\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10609)\r\n\r\n(cherry picked from commit 0ab6fc79a9a63370be1a615729dc2a6ed0d6c89b)\r\n\r\n* Add some missing cfi frame info in camellia-x86_64.pl\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10642)\r\n\r\n(cherry picked from commit 6b913be708f98b1d971586d38e608218ee6de6fa)\r\n\r\n* Add some missing cfi frame info in x86_64-mont5.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10651)\r\n\r\n(cherry picked from commit 0190c52ab8b4cdf5fe577b3d924576167c892a15)\r\n\r\n* Add some missing cfi frame info in rsaz-x86_64\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10652)\r\n\r\n(cherry picked from commit 013c2e8d1a272df444f47b8b54de1d51bc499887)\r\n\r\n* Add some missing cfi frame info in aesni-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10653)\r\n\r\n(cherry picked from commit a5fe7825b970a6c937118a4f707f9ad367413794)\r\n\r\n* Add some missing cfi frame info in keccak1600-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10654)\r\n\r\n(cherry picked from commit 95bbe6eff7aadc681e282ec957379b49d6f80ca8)\r\n\r\n* Add some missing cfi frame info in aesni-sha and sha-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10655)\r\n\r\n(cherry picked from commit b0d3442efc10b635863b915c2d014345f6e5a219)\r\n\r\n* Fix evp_extra_test with no-dh\r\n\r\nThe new DH test in evp_extra_test.c broke the no-dh build so we add some\r\nguards to fix it.\r\n\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/10644)\r\n\r\n(cherry picked from commit 501fcfb8cfc1aa114ffde437039c2dc2827554ae)\r\n\r\n* Add some missing cfi frame info in ecp_nistz256-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10672)\r\n\r\n(cherry picked from commit eff5076a78502d1ac04669e44127d4bd7c0a9ce7)\r\n\r\n* Fix aesni_cbc_sha256_enc_avx2 backtrace info\r\n\r\nWe store a secondary frame pointer info for the debugger\r\nin the red zone.  This fixes a crash in the unwinder when\r\nthis function is interrupted.\r\n\r\nAdditionally the missing cfi function annotation is added\r\nto aesni_cbc_sha256_enc_shaext.\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10674)\r\n\r\n(cherry picked from commit 665de4d48aef2507022a7d74f5c7f6e339d5e6bc)\r\n\r\n* Add some missing cfi frame info in x25519-x86_64.pl\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10676)\r\n\r\n(cherry picked from commit 9d079f2744b9b624c6fe75f95fc0f766ef88ffcf)\r\n\r\n* Add some missing cfi frame info in aesni-gcm-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10677)\r\n\r\n(cherry picked from commit 275a048ffc1585a731e39d7e8e3f53766e8f48d7)\r\n\r\n* Add some missing cfi frame info in poly1305-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10678)\r\n\r\n(cherry picked from commit 048fa13e5ef4ccd730561f79a6c91f38365994d1)\r\n\r\n* Add some missing cfi frame info in rc4-md5-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10679)\r\n\r\n(cherry picked from commit b2a00f62209add348deb8283c588ddbd572dc216)\r\n\r\n* Fix a race condition in the speed command\r\n\r\nThe timer alarm sets run = 0, while the benchmark\r\ndoes run = 1 in the initialization code.  That is\r\na race condition, if the timer goes off too early\r\nthe benchmark runs forever.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10680)\r\n\r\n(cherry picked from commit f3fdfbf78c6bfc97abf9c70b03859a28ebf6b66d)\r\n\r\n* Update the krb5 submodule\r\n\r\nBring us up to date with upstream's 1.17.1 release.  Among other\r\nthings, it includes commit c2497d46b4bad473e164943d67b58cd1ae261c3a\r\nwhich fixes several issues that affect running the test suite under\r\nTravis CI.  Hopefully those will work transitively for us as well.\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n(cherry picked from commit 3e73f558af600ea068bb2132988c31ddb444e13e)\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10690)\r\n\r\n* Temporarily disable external pyca tests\r\n\r\nThe pyca-cryptography external test has been failing for a long time.\r\nIt looks like upstream needs to make some changes to adapt to 1.1.1.\r\n\r\nBackported from #10689\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10722)\r\n\r\n* Update tls13_enc.c\r\n\r\nFix double + in hkdflabel declaration (FIXES #10675)\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10700)\r\n\r\n(cherry picked from commit 2de5a5fbdd14f514e962cccfe90482c37786c183)\r\n\r\n* Run make update\r\n\r\nThe New Year has caused various files to appear out of date to \"make\r\nupdate\". This causes Travis to fail. Therefore we update those files.\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10739)\r\n\r\n* Fix potential SCA vulnerability in some EC_METHODs\r\n\r\nThis commit addresses a potential side-channel vulnerability in the\r\ninternals of some elliptic curve low level operations.\r\nThe side-channel leakage appears to be tiny, so the severity of this\r\nissue is rather low.\r\n\r\nThe issue was reported by David Schrammel and Samuel Weiser.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 3cb914c463ed1c9e32cfb773d816139a61b6ad5f)\r\n\r\n* Avoid leaking intermediate states in point doubling special case.\r\n\r\nCherry picked from\r\nhttps://github.com/google/boringssl/commit/12d9ed670da3edd64ce8175cfe0e091982989c18\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 2baea7c7e0896658b74956cac6084dd7e82e8c1b)\r\n\r\n* Fix side channel in ecp_nistz256-x86.pl\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 0de3399b691f025153c8001045d5eeb0909dfd7a)\r\n\r\n* Fix side channel in ecp_nistz256-armv4.pl\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 3d139746ca72f0906c036d0a4a3e176c7b61ed1b)\r\n\r\n* Improve side channel fix in ecp_nistz256-x86_64.pl\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit e9fe87950db2e6169029b2ecf3ed09d64265bc9c)\r\n\r\n* Fix side channel in the ecp_nistz256.c reference implementation\r\n\r\nThis is only used if configured with\r\n./config -DECP_NISTZ256_REFERENCE_IMPLEMENTATION\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 7d4716648e8348dea862e198b9395478fae01907)\r\n\r\n* Fix side channel in ecp_nistz256-armv8.pl\r\n\r\nThis change addresses a potential side-channel vulnerability in\r\nthe internals of nistz256 low level operations for armv8.\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit f5a659b6dfcc735a62c712dcca64d116d2289b97)\r\n\r\n* Fix disabled ecdsa in apps/speed\r\n\r\nThis came from f3fdfbf78c6b. run = 1 should be done in pkey_print_message\r\nas well, otherwise other tests printed with pkey_print_message won't run.\r\n\r\nChange-Id: I0ba0b05256ad6509ada4735b26d10f8a73fd89ec\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/10710)\r\n\r\n(cherry picked from commit 6e49b514067a2b6a30d064d2ae1fdfd8050c184b)\r\n\r\n* Fix incorrect return code on ECDSA key verification\r\n\r\nECDSA_do_verify() is a function that verifies a ECDSA signature given a hash and a public EC key. The function is supposed to return 1 on valid signature, 0 on invalid signature and -1 on error. Previously, we returned 0 if the key did not have a verify_sig method. This is actually an error case and not an invalid signature. Consequently, this patch updates the return code to -1.\r\n\r\nFixes #8766\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10693)\r\n\r\n(cherry picked from commit 26583f6aa8dc28e3598e61db66e54e2fdf8b195f)\r\n\r\n* Don't store an HMAC key for longer than we need\r\n\r\nThe HMAC_CTX structure stores the original key in case the ctx is reused\r\nwithout changing the key.\r\n\r\nHowever, HMAC_Init_ex() checks its parameters such that the only code path\r\nwhere the stored key is ever used is in the case where HMAC_Init_ex is\r\ncalled with a NULL key and an explicit md is provided which is the same as\r\nthe md that was provided previously. But in that case we can actually reuse\r\nthe pre-digested key that we calculated last time, so we can refactor the\r\ncode not to use the stored key at all.\r\n\r\nWith that refactor done it is no longer necessary to store the key in the\r\nctx at all. This means that long running ctx's will not keep the key in\r\nmemory for any longer than required. Note though that the digested key\r\n*is* still kept in memory for the duration of the life of the ctx.\r\n\r\nFixes #10743\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10763)\r\n\r\n* Revert \"Move random-related defines from e_os.h to rand_unix.c\"\r\n\r\nThis reverts commit 7b18d1a53f932391bbc599a4717d6f98a597849c, which moved the\r\nDEVRANDOM and DEVRANDOM_EGD defines into rand_unix.c. That change introduced\r\nthe regression that the compiler complains about missing declarations in\r\napps/version.c when OpenSSL is configured using `--with-rand-seed=devrandom`\r\n(resp. `--with-rand-seed=egd`):\r\n\r\napps/version.c:173:42: error: 'DEVRANDOM' undeclared\r\n             static const char *dev[] = { DEVRANDOM, NULL };\r\n                                          ^~~~~~~~~\r\n\r\nFixes #10759\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10764)\r\n\r\n* Fix pkeyutl -verifyrecover\r\n\r\nWhen performing a pkeyutl -verifyrecover operation the input file is not\r\na hash - it is the signature itself. Therefore don't do the check to make\r\nsure it looks like a hash.\r\n\r\nFixes #9658\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9731)\r\n\r\n(cherry picked from commit 5ffc33244cd4d66e47dfa66ce89cb38d0f3074cc)\r\n\r\n* fix a glitc…","distinct":false,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/6874fa0737c6ec04a24ae3a0838a652c5af767b3"},{"sha":"613373ca820c7abf73d89de59d270bd8afee0f01","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@uwaterloo.ca"},"message":"Only use hbyrid level 1 KEMs in default curves list","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/613373ca820c7abf73d89de59d270bd8afee0f01"},{"sha":"7f2028d796136d60eb24f13bbcc4b45b1ac348f0","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@uwaterloo.ca"},"message":"Pass KEM to server in TLS connection test","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/7f2028d796136d60eb24f13bbcc4b45b1ac348f0"},{"sha":"3579ed6af028f554506e28e63ebb1b11c09b6273","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@uwaterloo.ca"},"message":"Merge branch 'ds-default-kems' of github.com:open-quantum-safe/openssl into ds-default-kems","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/3579ed6af028f554506e28e63ebb1b11c09b6273"}]},"public":true,"created_at":"2020-04-14T19:11:13Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12047780872","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":170719151,"name":"open-quantum-safe/liboqs-cpp","url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp"},"payload":{"push_id":4917101708,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"def53d4e79c3d32a842c22bdc08eaee2c6b05051","before":"046cd1eb131c04e1db827cf3c94c4793461df2c5","commits":[{"sha":"def53d4e79c3d32a842c22bdc08eaee2c6b05051","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"Update appveyor.yml","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp/commits/def53d4e79c3d32a842c22bdc08eaee2c6b05051"}]},"public":true,"created_at":"2020-04-14T19:22:38Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12047881500","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":170719151,"name":"open-quantum-safe/liboqs-cpp","url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp"},"payload":{"push_id":4917155431,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"77003d88b692e6d50cc5930e2baf7ff5b2550859","before":"def53d4e79c3d32a842c22bdc08eaee2c6b05051","commits":[{"sha":"77003d88b692e6d50cc5930e2baf7ff5b2550859","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"msys2 support","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp/commits/77003d88b692e6d50cc5930e2baf7ff5b2550859"}]},"public":true,"created_at":"2020-04-14T19:33:56Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12047901610","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":215630242,"name":"open-quantum-safe/liboqs-go","url":"https://api.github.com/repos/open-quantum-safe/liboqs-go"},"payload":{"push_id":4917165793,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"bd26080646dbfaa30b2d25208315ed9ed653236f","before":"639b980d96f3596ba0148c9dfd4d8ef65720eb82","commits":[{"sha":"bd26080646dbfaa30b2d25208315ed9ed653236f","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"full Windows support","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-go/commits/bd26080646dbfaa30b2d25208315ed9ed653236f"}]},"public":true,"created_at":"2020-04-14T19:36:15Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12048629342","type":"PushEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"push_id":4917546103,"size":1,"distinct_size":1,"ref":"refs/heads/OQS-OpenSSL_1_1_1-stable","head":"aa31ec6012a0dba29128628ed2c9ca525b728034","before":"6874fa0737c6ec04a24ae3a0838a652c5af767b3","commits":[{"sha":"aa31ec6012a0dba29128628ed2c9ca525b728034","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@users.noreply.github.com"},"message":"Only use hybrid level 1 KEMs in default curves list (#163)\n\n* Only use hbyrid level 1 KEMs in default curves list\r\n\r\n* Pass KEM to server in TLS connection test\r\n\r\n* re-enable check-in connection test (#165)\r\n\r\n* Use 16-bit length fields in hybrid KEX format (#157)\r\n\r\nFixes 154.\r\n\r\n* Add instructions to cross-compile for Windows on Linux (#166)\r\n\r\nAdd git as a prerequisite for the regular Ubuntu build as well.\r\n\r\n* add OQS algs to auto-run list in speed (#169)\r\n\r\n* Merged upstream tag 1.1.1f  (#167)\r\n\r\n* crypto/threads_win.c: fix preprocessor indentation\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9860)\r\n\r\n* BIO_f_zlib: Properly handle BIO_CTRL_PENDING and BIO_CTRL_WPENDING calls.\r\n\r\nThere can be data to write in output buffer and data to read that were\r\nnot yet read in the input stream.\r\n\r\nFixes #9866\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9877)\r\n\r\n(cherry picked from commit 6beb8b39ba8e4cb005c1fcd2586ba19e17f04b95)\r\n\r\n* Fix potential memory leaks with BN_to_ASN1_INTEGER\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9833)\r\n\r\n(cherry picked from commit f28bc7d386b25fb75625d0c62c6b2e6d21de0d09)\r\n\r\n* Add a minimal windows build config for AppVeyor\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9886)\r\n\r\n* Add a minimal linux build target for Travis\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9888)\r\n\r\n* Do no mention private headers in public headers\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9812)\r\n\r\n(cherry picked from commit bd9faf117db1e53b2ad2ee9cbfe8def8c98ecb7b)\r\n\r\n* Fix small typo in doc for X509_STORE_CTX_new\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9894)\r\n\r\n(cherry picked from commit 64c1e74572f16a3e7c225f66fe85a3451ad39e68)\r\n\r\n* clearing the ecx private key memory\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9830)\r\n\r\n(cherry picked from commit 6ef03ea98fac501e6d6e33bac6ad3c92ea074712)\r\n\r\n* Fix building statically without any dso support\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9889)\r\n\r\n* apps/pkcs12: print multiple PKCS#12 safeBag attribute values if present\r\n\r\nCurrently the pkcs12 app will only ever print the first value of a multi-value\r\nattribute. This is OK for some attributes (e.g. friendlyName, localKeyId) but\r\nmay miss values for other attributes.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9751)\r\n\r\n(cherry picked from commit dbcc7b45670483cc89428afe1d3c363ef83d76df)\r\n\r\n* Use the correct maximum indent\r\n\r\nFound by OSS-Fuzz\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n\r\nGH: #9959\r\n(cherry picked from commit a6105ef40d65b35818f2b8ae8ca9e57ca6956d1d)\r\n\r\n* DOC: fix documentation of som EVP_MD_CTX functions\r\n\r\nThey were documented to take an EVP_MD pointer, when they really take\r\nan EVP_MD_CTX pointer.\r\n\r\nFixes #9993\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9997)\r\n\r\n* Reorganize private crypto header files\r\n\r\nCurrently, there are two different directories which contain internal\r\nheader files of libcrypto which are meant to be shared internally:\r\n\r\nWhile header files in 'include/internal' are intended to be shared\r\nbetween libcrypto and libssl, the files in 'crypto/include/internal'\r\nare intended to be shared inside libcrypto only.\r\n\r\nTo make things complicated, the include search path is set up in such\r\na way that the directive #include \"internal/file.h\" could refer to\r\na file in either of these two directoroes. This makes it necessary\r\nin some cases to add a '_int.h' suffix to some files to resolve this\r\nambiguity:\r\n\r\n  #include \"internal/file.h\"      # located in 'include/internal'\r\n  #include \"internal/file_int.h\"  # located in 'crypto/include/internal'\r\n\r\nThis commit moves the private crypto headers from\r\n\r\n  'crypto/include/internal'  to  'include/crypto'\r\n\r\nAs a result, the include directives become unambiguous\r\n\r\n  #include \"internal/file.h\"       # located in 'include/internal'\r\n  #include \"crypto/file.h\"         # located in 'include/crypto'\r\n\r\nhence the superfluous '_int.h' suffixes can be stripped.\r\n\r\nThe files 'store_int.h' and 'store.h' need to be treated specially;\r\nthey are joined into a single file.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Reorganize local header files\r\n\r\nApart from public and internal header files, there is a third type called\r\nlocal header files, which are located next to source files in the source\r\ndirectory. Currently, they have different suffixes like\r\n\r\n  '*_lcl.h', '*_local.h', or '*_int.h'\r\n\r\nThis commit changes the different suffixes to '*_local.h' uniformly.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Fix header file include guard names\r\n\r\nMake the include guards consistent by renaming them systematically according\r\nto the naming conventions below\r\n\r\nThe public header files (in the 'include/openssl' directory) are not changed\r\nin 1.1.1, because it is a stable release.\r\n\r\nFor the private header files files, the guard names try to match the path\r\nspecified in the include directives, with all letters converted to upper case\r\nand '/' and '.' replaced by '_'. An extra 'OSSL_' is added as prefix.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Add util/fix-includes script\r\n\r\nThis script contains all adjustments to header files which were made\r\nduring the reorganization of the header files. It is meant as an aid\r\nfor other contributors which encounter preprocessor #include errors\r\nafter rebasing over this pull request. Simply running\r\n\r\n  util/fix-includes\r\n\r\nfrom the root of the source directory should hopefully fix the problem.\r\n\r\nNote: such #include errors are expected only for pull requests which\r\nadd a lot of new code, in particular new compilation modules.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9681)\r\n\r\n* Fix a return value bug in apps/speed.c\r\n\r\nThose functions returns less than and equal to 0 to indicate an error\r\noccured.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10054)\r\n\r\n(cherry picked from commit 94bd168a9e31d1ab4986e94056dfae71ec5f051f)\r\n\r\n* Fix a bundle of mischecks of return values\r\n\r\nSeveral EVP_PKEY_xxxx functions return 0 and a negative value for\r\nindicating errors. Some places call these functions with a zero return\r\nvalue check only, which misses the check for the negative scenarios.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10055)\r\n\r\n(cherry picked from commit 7e3ae24832e0705583b1471febf3dc0eb1cc021f)\r\n\r\n* Correct the function names in SSL_CTX_set_stateless_cookie_generate_cb.pod\r\n\r\nAlthough the synopsis used the correct function names, the description did\r\nnot. Also the description of the equivalent DTLSv1_listen() callbacks was\r\nmissing, so these have been added.\r\n\r\nFixes #10030\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10033)\r\n\r\n(cherry picked from commit 84f471ecab76a16281a16c53d259bbcae358816f)\r\n\r\n* Add defines for __NR_getrandom for all Linux architectures\r\n\r\nFixes: #10015\r\n\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\nGH: #10044\r\n(cherry picked from commit 4dcb150ea30f9bbfa7946e6b39c30a86aca5ed02)\r\n\r\n* Fix long name of some Microsoft objects\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10029)\r\n\r\n(cherry picked from commit 648b53b88ea55b4c2f2c8c57d041075731db5f95)\r\n\r\n* Do not print extensions in Certificate message for TLS1.2 and lower\r\n\r\nAccording to RFC8446 CertificateEntry in Certificate message contains\r\nextensions that were not present in the Certificate message in RFC5246.\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9994)\r\n\r\n(cherry picked from commit 65c76cd2c9e8da9468dd490b334e56c51dbef582)\r\n\r\n* doc: EVP_DigestInit clears all flags\r\n\r\nMention that EVP_DigestInit() also clears all flags.\r\n\r\nFixes: 10031\r\nSigned-off-by: Christian Heimes <christian@python.org>\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10032)\r\n\r\n(cherry picked from commit 091aab66a6dbc3a3ecee7684aa30811b342f04e7)\r\n\r\n* Add arm64 in test matrix on TravisCI.\r\n\r\nChange-Id: I5d2b729699cfd8e80c3df17db4a9d2edcbf64454\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10046)\r\n\r\n(cherry picked from commit 0399aba7e05ea9bb1a58bd2e1b164f353f6ef1c9)\r\n\r\n* Fix iOS simulator build\r\n\r\nFixes #9999\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10002)\r\n\r\n* rsa: replace magic number '11' by RSA_PKCS1_PADDING_SIZE\r\n\r\nSuggested by Matt Hart\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10084)\r\n\r\n(cherry picked from commit f1d1903dd3dd1d68a5eae190b8c2a88bfe0a68ac)\r\n\r\n* Define AESNI_ASM if AESNI assembler is included, and use it\r\n\r\nBecause we have cases where basic assembler support isn't present, but\r\nAESNI asssembler support is, we need a separate macro that indicates\r\nthat, and use it.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10080)\r\n\r\n* 'init_buf' memory can be freed when DTLS is used over SCTP (not over UDP).\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9653)\r\n\r\n(cherry picked from commit e7c27a6c3716843f8412fd96311b70ac84b785f9)\r\n\r\n* Fix typo in comment\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10105)\r\n\r\n(cherry picked from commit 89e5aaa1d72058404d3ea06bfaeff5334aba202d)\r\n\r\n* Send bad_record_mac instead of decryption_failed\r\n\r\nThe decryption failed alert was deprecated a long time ago. It can\r\nprovide an attacker too much information to be able to distinguish between\r\nMAC failures and decryption failures and can lead to oracle attacks.\r\nInstead we should always use the bad_record_mac alert for these issues.\r\nThis fixes one instance that still exists. It does not represent a\r\nsecurity issue in this case because it is only ever sent if the record is\r\npublicly invalid, i.e. we have detected it is invalid without using any\r\nsecret material.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10093)\r\n\r\n(cherry picked from commit 37133290832ac2d1389926eba7325125fdacbe8d)\r\n\r\n* Add documentation for PEM_{read,write}_bio_Parameters()\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10113)\r\n\r\n(cherry picked from commit 9a6abb95be42b88c7c5ebc8c97f14afdc5919aa1)\r\n\r\n* Fix reference to PEM docs\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10101)\r\n\r\n(cherry picked from commit 120cc034271e9ab52f92840a16784228e50564f9)\r\n\r\n* ssl/statem/statem_lib.c: make servercontext/clientcontext arrays of chars instead of char pointers to fix EBCDIC builds.\r\n\r\nFixes #9869\r\n\r\nCLA:trivial\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9878)\r\n\r\n* Fix unused goto label gcc warning\r\n\r\nOn systems with undefined AI_ADDRCONFIG and AI_NUMERICHOST:\r\n\r\nx86_64-w64-mingw32-gcc  -I. -Icrypto/include -Iinclude -m64 -Wall -O3 -fno-ident ...\r\ncrypto/bio/b_addr.c: In function 'BIO_lookup_ex':\r\ncrypto/bio/b_addr.c:699:7: warning: label 'retry' defined but not used [-Wunused-label]\r\n       retry:\r\n       ^~~~~\r\n\r\nRegression from: 3f91ede9aea70774d9b5d509bc76d484ebaff6aa\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9856)\r\n\r\n(cherry picked from commit be66a15cc1a4c3cc68fa854ceea321ca57f96304)\r\n\r\n* Ignore empty ALPN elements in CLI args\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n* Configure: accept Windows style compiler options\r\n\r\nCurrently the Configure command only supports passing UNIX style\r\noptions (`-opt`) to the compiler. Passing Windows style options\r\n(`/opt`) yields an error. Fortunately, the compiler accepts both\r\ntypes of options, nevertheless this commit fixes that discrimination\r\nof Windows users.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9961)\r\n\r\n(cherry picked from commit f246f54f18d380791cc60be4aea0fbc7253a9a20)\r\n\r\n* [ec_asn1.c] Avoid injecting seed when built-in matches\r\n\r\nAn unintended consequence of https://github.com/openssl/openssl/pull/9808\r\nis that when an explicit parameters curve is matched against one of the\r\nwell-known builtin curves we automatically inherit also the associated\r\nseed parameter, even if the input parameters excluded such\r\nparameter.\r\n\r\nThis later affects the serialization of such parsed keys, causing their\r\ninput DER encoding and output DER encoding to differ due to the\r\nadditional optional field.\r\n\r\nThis does not cause problems internally but could affect external\r\napplications, as reported in\r\nhttps://github.com/openssl/openssl/pull/9811#issuecomment-536153288\r\n\r\nThis commit fixes the issue by conditionally clearing the seed field if\r\nthe original input parameters did not include it.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10140)\r\n\r\n(cherry picked from commit f97a8af2f3f3573f0759693117c9d33d2a63c27e)\r\n\r\n* Ignore duplicated undocumented things\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Yang <yang.yang@baishancloud.com>\r\n\r\n(cherry picked from commit ee4afacd96f5bfbe7662c8f0ec4464c6eee4c450)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Add missing EVP_MD documentation\r\n\r\nSigned-off-by: Antoine Salon <asalon@vmware.com>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n(cherry picked from commit 37842dfaebcf28b4ca452c6abd93ebde1b4aa6dc)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Document and add macros for additional DSA options\r\n\r\nEVP_PKEY_CTRL_DSA_PARAMGEN_Q_BITS and EVP_PKEY_CTRL_DSA_PARAMGEN_MD are only\r\nexposed from EVP_PKEY_CTX_ctrl, which means callers must write more error-prone\r\ncode (see also issue #1319). Add the missing wrapper macros and document them.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n(cherry picked from commit a97faad76a1be22eadd6c1a39972ad5e095d9e80)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Add documentation for the -sigopt option.\r\n\r\nReviewed-by: Paul Yang <yang.yang@baishancloud.com>\r\n\r\n(cherry picked from commit d7b2124a428f9e00ed7647554b5be7153aac71f6)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* issue-8493: Fix for filenames with newlines using openssl dgst\r\n\r\nThe output format now matches coreutils *dgst tools.\r\n\r\n[ edited to remove trailing white space ]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n\r\n(cherry picked from commit f3448f5481a8d1f6fbf5fd05caaca229af0b87f7)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* i2d_PublicKey was listed in 2 different man pages\r\n\r\nfind-doc-nits complains if a symbol is documented in more than one\r\nlocation.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n(cherry picked from commit 4ff4e53f816855b07fc02dc931dd57b2ae324aa1)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* Fix an incorrect macro\r\n\r\nA macro was missing a space which was confusing find-doc-nits\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n(cherry picked from commit 8caab503ba004abb555d636c1ca9f7bcde79657f)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10094)\r\n\r\n* [crypto/asn1/x_bignum.c] Explicit test against NULL\r\n\r\nAs a fixup to https://github.com/openssl/openssl/pull/9779 to better\r\nconform to the project code style guidelines, this commit amends the\r\noriginal changeset to explicitly test against NULL, i.e. writing\r\n\r\n```\r\nif (p != NULL)\r\n```\r\n\r\nrather than\r\n\r\n```\r\nif (!p)\r\n```\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9881)\r\n\r\n* Unify BN_rshift design\r\n\r\nThis commit aims at refactoring the `BN_rshift` by making it a wrapper\r\naround `bn_rshift_fixed_top`, in order to match the current design of\r\n`BN_lshift`, as suggested in the discussion at\r\nhttps://github.com/openssl/openssl/pull/10122#discussion_r332474277 .\r\n\r\nAs described in the code, by refactoring this function, `BN_rshift`\r\nprovides a constant-time behavior for sufficiently[!] zero-padded inputs\r\nunder the following assumptions: `|n < BN_BITS2|` or `|n / BN_BITS2|`\r\nbeing non-secret.\r\n\r\nNotice that `BN_rshift` returns a canonical representation of the\r\nBIGNUM, if a `fixed_top` representation is required, the caller should\r\ncall `bn_rshift_fixed_top` instead.\r\n\r\n(cherry picked from commit 8eba6de59e2b06f23c214344423a5a618d1c9ffd)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10196)\r\n\r\n* Constant-time GCD function.\r\n\r\nThis commit replaces the current `BN_gcd` function with a constant-time\r\nGCD implementation.\r\n\r\n(cherry picked from commit f3c4adfc7eb13e9eff514039b4c60b457bdba433)\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10122)\r\n\r\n* Add GCD testing infrastructure.\r\n\r\nThis commit adds testing and Known Answer Tests (KATs) to OpenSSL for\r\nthe `BN_gcd` function.\r\n\r\n(cherry picked from commit b75d6310857bc44ef2851bde68a1979c18bb4807)\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10122)\r\n\r\n* rand_unix.c: correct include guard comments\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10050)\r\n\r\n(cherry picked from commit 2a7e6ed86be20bd472696a3eafe5d20ec9579dab)\r\n\r\n* Move random-related defines from e_os.h to rand_unix.c\r\n\r\nFixes #10049\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10050)\r\n\r\n(cherry picked from commit 01036e2afbe116d608be048ed15930fc885ab2a8)\r\n\r\n* fixed the RETURN VALUES section in the EC_GROUP documentation\r\nfor the following functions.\r\n\r\nEC_GROUP_get_order\r\nEC_GROUP_get_cofactor\r\nEC_GROUP_get_curve_name\r\nEC_GROUP_get_asn1_flag\r\nEC_GROUP_get_point_conversion_form\r\nEC_GROUP_get_degree\r\n\r\n(cherry picked from commit df3d1e84b3802acffeec11d6224e8a0e33d0aa83)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9664)\r\n\r\n* Update dgst.c to show a list of message digests\r\n\r\nFixes #9893\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10219)\r\n\r\n* Improve formatting for man3/EC_GROUP_new.pod\r\n\r\n- Use `()` to qualify function names, consistently\r\n- Limit line width to 80 chars\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10235)\r\n\r\n* Fix doc for EC_GROUP_set_curve()\r\n\r\n(cherry picked from commit eb2ff0408ac6e934e05db7ed4006855c018584f1)\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10235)\r\n\r\n* Update control logic for BN_gcd\r\n\r\nPR https://github.com/openssl/openssl/pull/10122 introduced changes to\r\nthe BN_gcd function and the control logic inside it accessed `g->d[0]`\r\nirrespective of `g->top`.\r\n\r\nWhen BN_add is called, in case the result is zero, `BN_zero` is called.\r\nThe latter behaves differently depending on the API compatibility level\r\nflag: normally `g->d[0]` is cleared but in `no-deprecated` builds only\r\n`g->top` is set to zero.\r\n\r\nThis commit uses bitwise logic to ensure that `g` is treated as zero if\r\n`g->top` is zero, irrespective of `g->d[0]`.\r\n\r\nCo-authored-by: Nicola Tuveri <nic.tuv@gmail.com>\r\n\r\n(cherry picked from commit 8aca4bfe8213402c80abc06fe25121461f79128d)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10232)\r\n\r\n* Enable runtime testing of no-deprecated builds in Travis\r\n\r\n(cherry picked from commit c89799605b833f769ce4cfd879bb291f49b133be)\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10232)\r\n\r\n* Cleanup hardcoded cipher suite codepoints in s_server\r\n\r\nThe hardcoded code points for TLSv1.3 cipher suites are used in the TLS\r\nPSK server callback. However, they seem to have been refactored a while\r\nago to use tls13_aes128gcmsha256_id, so these defines are not necessary\r\nwithin the s_server code anymore.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10243)\r\n\r\n(cherry picked from commit aed8c47cbcc8a289bea433ead2effea035187260)\r\n\r\n* Allow EVP_PKEY_get0_RSA for RSA-PSS keys\r\n\r\nRSA-PSS keys use the same internal structure as RSA keys but do not\r\nallow accessing it through EVP_PKEY_get0_RSA. This commit changes that\r\nbehavior.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10217)\r\n\r\n(cherry picked from commit 465a58b117d5a85623f3998d6fbf2fe8712a5604)\r\n\r\n* Fix a copy&paste error in the TLSv1.3 server side PSK documentation\r\n\r\nThe introductory paragraph for the TLSv1.3 server side PSK documentation\r\nis a copy & paste of the client side documentation which has not been\r\nupdated with the server side equivalent information.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10245)\r\n\r\n(cherry picked from commit c549cb46e0d3cb4e611acafae5f919b4a8df4007)\r\n\r\n* Fix an s_server arbitrary file read issue on Windows\r\n\r\nRunning s_server in WWW mode on Windows can allow a client to read files\r\noutside the s_server directory by including backslashes in the name, e.g.\r\n\r\nGET /..\\myfile.txt HTTP/1.0\r\n\r\nThere exists a check for this for Unix paths but it is not sufficient\r\nfor Windows.\r\n\r\nSince s_server is a test tool no CVE is assigned.\r\n\r\nThanks to Jobert Abma for reporting this.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10215)\r\n\r\n(cherry picked from commit 0a4d6c67480a4d2fce514e08d3efe571f2ee99c9)\r\n\r\n* Suppress an error when doing SM2 sign/verify ops\r\n\r\nThis was fixed in #8321 right after the 1.1.1 was released but never\r\nback ported to 1.1.1. Now fix it.\r\n\r\nIssue reported from lua-openssl project.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10278)\r\n\r\n* apps/dgst.c: allocate a new signature buffer\r\n\r\n... if the fixed-size buffer is too small.\r\n\r\nFixes #9732\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10276)\r\n\r\n(cherry picked from commit 7c2d95d47ccb3797f0da6bd4446747c6eee07b87)\r\n\r\n* Fix find/rm command in Unix clean recipe\r\n\r\nThe `./pyca-cryptography/.travis/downstream.d` subdirectory that causes the `rm` command to fail (albeit harmlessly, but with a warning from `make` nonetheless).\r\n\r\n>rm -f `find . -name '*.d' \\! -name '.*' -print`\r\n>rm: cannot remove './pyca-cryptography/.travis/downstream.d': Is a directory\r\n>make: [Makefile:1910: clean] Error 1 (ignored)\r\n\r\nExclude directories from being matched by the `find` commands.\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10264)\r\n\r\n(cherry picked from commit 38b71bd4704ee1746e862f5a7a4e170fd84a5eb0)\r\n\r\n* [crypto/bn] fix a few small timing leaks in BN_lshift1 and BN_rshift1\r\n\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10209)\r\n\r\n(cherry picked from commit 305bf9c8668aff78e668131061f4eb088457be5f)\r\n\r\n* Fix SYNOPSIS for ASN1_ENUMERATED_get_int64 and ASN1_ENUMERATED_set_int64\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9823)\r\n\r\n(cherry picked from commit 2aa28a1abc893fb16b99ba77e2fecb1cbc8769c7)\r\n\r\n* Fix potential memory leak in dh_ameth.c\r\n\r\nFree dukm in error handling of dh_cms_encrypt()\r\n\r\nFixes #10294\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10310)\r\n\r\n(cherry picked from commit 6624e1f7b6a397948561e9cc2774f0c8af1d2c79)\r\n\r\n* md4/md5: macros should not include the line following them\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10311)\r\n\r\n(cherry picked from commit 351ba5bd27645d5b5a2bc643b2709bd30bcdf09c)\r\n\r\n* Add test cases for min/max protocol API\r\n\r\nSigned-off-by: Christian Heimes <christian@python.org>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/6553)\r\n\r\n(cherry picked from commit 132b5facf8d681db5dfa45828d8b02f1bf5df64b)\r\n\r\n* VMS: Added new method to gather entropy on VMS, based on SYS$GET_ENTROPY.\r\n\r\nThis system services is based on FreeBSD 12's getentropy(), and is\r\ntherefore treated the same way as getentropy() with regards to amount\r\nof entropy bits per data bit.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/8926)\r\n\r\n(cherry picked from commit 8b9896eb293a0861f0b8c191b7a278f176b729e6)\r\n\r\n* s390x assembly pack: enable clang build\r\n\r\nclang imposes some restrictions on the assembler code that\r\ngcc does not.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10330)\r\n\r\n(cherry picked from commit 6f93f06135cbbd36c3fe98d63717e8303a5d559b)\r\n\r\nConflicts:\r\n\tcrypto/perlasm/s390x.pm (non-existant)\r\n\tcrypto/s390xcpuid.pl (code to be changed non-existant)\r\n\r\n* Don't leak memory in the event of a failure in i2v_GENERAL_NAMES\r\n\r\ni2v_GENERAL_NAMES call i2v_GENERAL_NAME repeatedly as required. Each\r\ntime i2v_GENERAL_NAME gets called it allocates adds data to the passed in\r\nstack and then returns a pointer to the stack, or NULL on failure. If\r\nthe passed in stack is itself NULL then it allocates one.\r\n\r\ni2v_GENERAL_NAMES was not correctly handling the case where a NULL gets\r\nreturned from i2v_GENERAL_NAME. If a stack had already been allocated then\r\nit just leaked it.\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Viktor Dukhovni <viktor@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10300)\r\n\r\n(cherry picked from commit 45b244620a74248b46ebe1c85e86437b9641447a)\r\n\r\n* BIO_s_connect: add an error state and use it\r\n\r\nIf no connection could be made, addr_iter will eventually end up being\r\nNULL, and if the user didn't check the returned error value, the\r\nBIO_CONN_S_CONNECT code will be performed again and will crash.\r\n\r\nSo instead, we add a state BIO_CONN_S_CONNECT_ERROR that we enter into\r\nwhen we run out of addresses to try.  That state will just simply say\r\n\"error\" back, until the user does something better with the BIO, such\r\nas free it or reset it.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10333)\r\n\r\n* Configure: Make --strict-warnings meaningful with MSVC cl\r\n\r\nWe also add this to our x86_64 builds on appveyor\r\n\r\n(cherry picked from commit b4a7b4ec4acc712b1f22a83966ac986b510f25d8)\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10365)\r\n\r\n* conf_def.c: Avoid calling strlen() in a loop\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10361)\r\n\r\n(cherry picked from commit d1c1fb2d41a627293483d832aaffcb6eca9075f9)\r\n\r\n* Fix a -Warray-bounds gcc warning in OPENSSL_DIR_read\r\n\r\n'__builtin_strncpy' offset [275, 4095] from the object at\r\n'direntry' is out of the bounds of referenced subobject 'd_name'\r\nwith type 'char[256]' at offset 19\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10343)\r\n\r\n(cherry picked from commit db5cf86535b305378308c58c52596994e1ece1e6)\r\n\r\n* Fix --strict-warnings build\r\n\r\nAppease -Wstring-plus-int.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/9608)\r\n\r\n(cherry picked from commit e0249827b3fa81ff6c59fb14ef85d38361dd5e31)\r\n\r\n* Workaround for Windows-based GOST implementations\r\n\r\nMany Windows-based GOST TLS implementations are unable to extend the\r\nlist of supported SignatureAlgorithms because of lack of the necessary\r\ncallback in Windows. So for TLS 1.2 it makes sense to imply the support\r\nof GOST algorithms in case when the GOST ciphersuites are present.\r\n\r\nThis is a backport of #10377 to 1.1.1 branch\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10378)\r\n\r\n* Fix misspelled resumption_label for CHARSET_EBCDIC\r\n\r\nThe resumption_label variable when CHARSET_EBCDIC was enabled, was misspelled.\r\nInstead of evaluating to 'res binder' as expected, it evaluated to 'red binder'.\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10396)\r\n\r\n(cherry picked from commit 6ed12cec7216c3e81b58f5cafa41775e456feaee)\r\n\r\n* SSL: Document SSL_add_{file,dir}_cert_subjects_to_stack()\r\n\r\nThis also removes the incorrect documentation comments by those\r\nfunctions.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10403)\r\n\r\n* Add more tests for apps/req\r\n\r\nhttps://github.com/openssl/openssl/issues/10224#issuecomment-546593113\r\nhighlighted that existing testing infrastructure is not covering common\r\nusage patterns of the `req` app.\r\n\r\nThis commit explicitly adds request generations thorugh the CLI using\r\nRSA, DSA and ECDSA (P-256) keys.\r\n\r\n(cherry picked from commit b2a7310af0dd190712bae2e462a7708483dd4628)\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10369)\r\n\r\n* Fix EC_POINT_bn2point() for BN_zero()\r\n\r\nEC_POINT_bn2point() rejected BIGNUMs with a zero value.\r\n\r\nThis behavior indirectly caused failures when converting a point\r\nat infinity through EC_POINT_point2hex() and then back to a point with\r\nEC_POINT_hex2point().\r\n\r\nWith this change such BIGNUMs are treated like any other and exported to\r\nan octet buffer filled with zero.\r\nIt is then EC_POINT_oct2point() (either the default implementation or\r\nthe custom one in group->meth->oct2point) to determine if such encoding\r\nmaps to a valid point (generally the point at infinity is encoded as\r\n0x00).\r\n\r\nFixes #10258\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10329)\r\n\r\n(cherry picked from commit d47c10875656790d146f62ac3c437db54c58dbf7)\r\n\r\n* Add self-test for EC_POINT_hex2point\r\n\r\nAdds tests for each curve to ensure that encodings obtained through\r\nEC_POINT_hex2point() can be fed to EC_POINT_point2hex() yielding a point\r\nidentical to the one from which the encoding is generated.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10329)\r\n\r\n(cherry picked from commit 35ed029b5a488924890fda2487c87f664361a33b)\r\n\r\n* Extend docs for EC_POINT conversion functions\r\n\r\nAdd more explicit documentation about the relation between\r\nEC_POINT_point2oct(), EC_POINT_point2hex(), EC_POINT_point2bn() and\r\ntheir reverse.\r\n\r\nIn particular highlight that EC_POINT_point2oct() and\r\nEC_POINT_oct2point() conform to, respectively, Sec. 2.3.3 and Sec. 2.3.4\r\nof the SECG SEC 1 standard (which is the normative reference for the\r\nalready mentioned RFC 5480), highlighting with a note how this affect\r\nthe encoding/decoding of the point at infinity (which in contrast with\r\nany other valid generic point of a curve is assigned an exceptional\r\nfixed octet string encoding, i.e., 0x00).\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10329)\r\n\r\n(cherry picked from commit 3cc26f2eba8a8c16ac559e68c05c094d7ea6bd8b)\r\n\r\n* chacha_enc.c: fix for EBCDIC platforms\r\n\r\nSigned-off-by: Joerg Schmidbauer <jschmidb@de.ibm.com>\r\n\r\nReviewed-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10417)\r\n\r\n(cherry picked from commit c31950b964a2f3f7b9e6ad98076954178ee1e77d)\r\n\r\n* testutil/init.c rename to testutil/testutil_init.c\r\n\r\nAvoid conflicts with some linkers.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10439)\r\n\r\n(cherry picked from commit e74b5dcf16dfd7c91d9f9a7e69c447f00d778e17)\r\n\r\nConflicts:\r\n\ttest/build.info\r\n\r\n* travis.yml: add arch s390x target\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10446)\r\n\r\n(cherry picked from commit 985412f8c14853b9936852bc7ef4d9438db27b88)\r\n\r\n* Add missing EVP_PKEY_METHOD accessors for digestsign and digestverify\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10388)\r\n\r\n(cherry picked from commit 2555285fa5e4248ad4a5a0bc14ae4606443856c2)\r\n\r\n* s390x assembly pack: fix bn_mul_comba4\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10454)\r\n\r\n(cherry picked from commit 97a986f78289fef71bf8778dc4763458e983750c)\r\n\r\n* Allow specifying the tag after AAD in CCM mode (2)\r\n\r\nIn addition to 67c81ec3 which introduced this behavior in CCM mode\r\ndocs but only implemented it for AES-CCM.\r\n\r\nSigned-off-by: Patrick Steuer <patrick.steuer@de.ibm.com>\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10331)\r\n\r\n(cherry picked from commit f7382fbbd846dd3bdea6b8c03b6af22faf0ab94f)\r\n\r\nConflicts:\r\n\ttest/recipes/30-test_evp_data/evpciph.txt\r\n\r\n* Fix sha512_block_data_order_avx2 backtrace info\r\n\r\nWe store a secondary frame pointer info for the debugger\r\nin the red zone.\r\n\r\nFixes #8853\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9624)\r\n\r\n(cherry picked from commit 9ce91035bcf7d74fe15c94650f3bc1f89b7c0f07)\r\n\r\n* ECDSA: don't clear free memory after verify.\r\n\r\nVerifications are public, there is no need to clear the used storage before\r\nfreeing it.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10475)\r\n\r\n(cherry picked from commit cff7d199e0dc51ae939de5fb7702aab2a9ef30fc)\r\n\r\n* Engine: Add NULL check.\r\n\r\nAdd NULL check for return from pkey_asn1_meths.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10473)\r\n\r\n(cherry picked from commit 9bada854de16bcc1a9dc199b4b352b19ab6897fc)\r\n\r\n* EVP p_lib: Add NULL check to EVP_PKEY_missing_parameters.\r\n\r\nCheck for NULL and return error if so.\r\nThis can possibly be called from apps/ca.c with a NULL argument.\r\n\r\nReviewed-by: Paul Yang <kaishen.yy@antfin.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10474)\r\n\r\n(cherry picked from commit ab5c77b4766e0992751d86560193ca42b49cf316)\r\n\r\n* Fix a race condition in SNI handling\r\n\r\nAs was done for ciphers, supported groups, and EC point formats in\r\nhttps://github.com/openssl/openssl/pull/9162, only write the negotiated\r\nSNI hostname value to the session object when not resuming, even for\r\nTLS 1.3 resumptions.  Otherwise, when using a stateful session cache\r\n(as is done by default when 0-RTT data is enabled), we can have multiple\r\nSSLs active using the same in-memory session object, which leads to\r\ndouble-frees and similar race conditions in the SNI handler prior\r\nto this commit.\r\n\r\nFortunately, since draft-ietf-tls-tls13-22, there is no requirement\r\nthat the SNI hostname be preserved across TLS 1.3 resumption, and thus\r\nnot a need to continually update the session object with the \"current\"\r\nvalue (to be used when producing session tickets, so that the subsequent\r\nresumption can be checked against the current value).  So we can just\r\nrelax the logic and only write to the session object for initial handshakes.\r\nThis still leaves us in a somewhat inconsistent state, since if the SNI value\r\ndoes change across handshakes, the session object will continue to record\r\nthe initial handshake's value, even if that bears no relation to the\r\ncurrent handshake.  The current SSL_get_servername() implementation\r\nprefers the value from the session if s->hit, but a more complete fix\r\nfor that and related issues is underway in\r\nhttps://github.com/openssl/openssl/pull/10018; there is no need to wait\r\nfor the complete fix for SNI name handling in order to close the\r\nrace condition and avoid runtime crashes.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10441)\r\n\r\n(cherry picked from commit 2a5385511051d33be8d2b20d7669d8b1862fe510)\r\n\r\n* main: avoid a NULL dereference on initialisation.\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10495)\r\n\r\n(cherry picked from commit acc7b9fb5c162c2ca522e5e1e09d1efbde8dc6a0)\r\n\r\n* UI_UTIL_wrap_read_pem_callback(): when |cb| is NULL, use PEM_def_callback\r\n\r\nFixes #10444\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10447)\r\n\r\n(cherry picked from commit 72a5412b4858cc7c5627a121f78685a2a4065521)\r\n\r\n* doc/man7/proxy-certificates.pod: New guide for proxy certificates\r\n\r\nThis replaces doc/HOWTO/proxy_certificates.txt\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10507)\r\n\r\n(cherry picked from commit 2a03823606b2d7e73e5dc890c3202e186511151f)\r\n\r\n* i2b_PVK(): Use Encrypt, not Decrypt\r\n\r\nWe used EVP_EncryptInit_ex() to initialise, but EVP_DecryptUpdate()\r\nand EVP_DecryptFinal_ex() to actually perform encryption.  This worked\r\nlong ago, when the Encrypt and Decrypt variants were the same, but\r\ndoesn't now (actually haven't for a very long time).\r\n\r\nThis shows how seldom PVK is actually used.\r\n\r\nFixes #9338\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10521)\r\n\r\n* Fix L<EVP_MD_CTX_set_pkey_ctx> links\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10420)\r\n\r\n* apps/ocsp.c: sock_timeout -> socket_timeout\r\n\r\nIt appears that 'sock_timeout' is defined at least with DJGPP, so we\r\nrename our symbol and hope the new name isn't taken.\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10515)\r\n\r\n(cherry picked from commit e9b95e42fbae668cb605287fa462a0d5f58b9caf)\r\n\r\n* EVP_*Update: ensure that input NULL with length 0 isn't passed\r\n\r\nEven with custom ciphers, the combination in == NULL && inl == 0\r\nshould not be passed down to the backend cipher function.  The reason\r\nis that these are the values passed by EVP_*Final, and some of the\r\nbackend cipher functions do check for these to see if a \"final\" call\r\nis made.\r\n\r\nAn exception is made for CCM mode which has special handling for the case\r\nwhere inl == 0: this may mean the total plaintext or ciphertext length is 0.\r\n\r\nThis is based on an original commit by Richard Levitte.\r\n\r\nFixes #8675\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9057)\r\n\r\n* Add a test for NULL chunks in encrypt/decrypt\r\n\r\nIssue #8675 describes a problem where calling EVP_DecryptUpdate() with an\r\nempty chunk causes the result to be different compared to if you do not\r\nuse an empty chunk. This adds a test for that case.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9057)\r\n\r\n* Update NOTES.ANDROID for newer NDK versions + small fixes.\r\n\r\nFixes #8941\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10478)\r\n\r\n(cherry picked from commit d3a27c5ee45a29edd9c0d60ad5929f67996f89fd)\r\n\r\n* Remove spurious space from file.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10562)\r\n\r\n(cherry picked from commit 7ba46774b7f1b2e83d44323a8831b615a49f9f37)\r\n\r\n* Fix exit issue in travisci\r\n\r\nUngraceful 'exit' probably causes unexpeced error on background activity.\r\nSo replace 'exit' with recommended 'travis_terminate'. Also see\r\nhttps://travis-ci.community/t/exit-0-cannot-exit-successfully-on-arm/5731/4\r\n\r\nChange-Id: I382bd93a3e15ecdf305bab23fc4adefbf0348ffb\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10561)\r\n\r\n(cherry picked from commit 6df44cf65fbc7e150965149d7e681ac3e22d11d8)\r\n\r\n* Fix an overflow bug in rsaz_512_sqr\r\n\r\nThere is an overflow bug in the x64_64 Montgomery squaring procedure used in\r\nexponentiation with 512-bit moduli. No EC algorithms are affected. Analysis\r\nsuggests that attacks against 2-prime RSA1024, 3-prime RSA1536, and DSA1024 as a\r\nresult of this defect would be very difficult to perform and are not believed\r\nlikely. Attacks against DH512 are considered just feasible. However, for an\r\nattack the target would have to re-use the DH512 private key, which is not\r\nrecommended anyway. Also applications directly using the low level API\r\nBN_mod_exp may be affected if they use BN_FLG_CONSTTIME.\r\n\r\nCVE-2019-1551\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Improve the overflow handling in rsaz_512_sqr\r\n\r\nWe have always a carry in %rcx or %rbx in range 0..2\r\nfrom the previous stage, that is added to the result\r\nof the 64-bit square, but the low nibble of any square\r\ncan only be 0, 1, 4, 9.\r\n\r\nTherefore one \"adcq $0, %rdx\" can be removed.\r\nLikewise in the ADX code we can remove one\r\n\"adcx %rbp, $out\" since %rbp is always 0, and carry is\r\nalso zero, therefore that is a no-op.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Add a test case for rsaz_512_sqr overflow handling\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Add a CHANGES entry for CVE-2019-1551\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10575)\r\n\r\n* Difference between EVP_CipherInit and EVP_CipherInit_ex\r\n\r\nFixes #10455\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10550)\r\n\r\n* Fix some typos\r\n\r\nReported-by: misspell-fixer <https://github.com/vlajos/misspell-fixer>\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10544)\r\n\r\n(cherry picked from commit 79c44b4e3044aee9dc9618850d4f1ce067757b4b)\r\n\r\n* Fix docs for CRYPTO_secure_allocated\r\n\r\nFixes #9300\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10523)\r\n\r\n(cherry picked from commit 20c09f00346aec3a20ceacc9c9d44c5f050e13dd)\r\n\r\n* Enrich arm64 tests in Travis matrix\r\n\r\n1, Remove simple test just with --strict-warnings enabled.\r\n2, Share the three common envs with amd64.\r\n3, Add matrix item running test in bionic(default xenial) for arm64.\r\n4, Enable MSan test on arm64 for extended test.\r\n5, Enable UBSan test on arm64 for extended test.\r\n\r\nChange-Id: Ic1f2c5e39ee6fbafed6ede74a925301121463520\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10519)\r\n\r\n(cherry picked from commit 77fedcdc8cf5446354a1e7ff9123d8ada5b79b06)\r\n\r\n* Check return value after loading config file\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Paul Yang <kaishen.yy@antfin.com>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10607)\r\n\r\n(cherry picked from commit dd0139f416257ec5632414ed3ad8c61d07ba07ec)\r\n\r\n* Parse large GOST ClientKeyExchange messages\r\n\r\nLarge GOST ClientKeyExchange messages are sent by VipNet CSP, one of\r\nRussian certified products implementing GOST TLS, when a server\r\ncertificate contains 512-bit keys.\r\n\r\nThis behaviour was present in 1.0.2 branch and needs to be restored.\r\nBackport of #10376\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10376)\r\n\r\n* util/mkerr.pl: revert accidental change of header guards\r\n\r\nThis change was backported accidentally from master in commit fbbfd128c9aa.\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10623)\r\n\r\n* rand_lib.c: fix null pointer dereferences after RAND_get_rand_method() failure\r\n\r\nRAND_get_rand_method() can return a NULL method pointer in the case of a\r\nmalloc failure, so don't dereference it without a check.\r\n\r\nReported-by: Zu-Ming Jiang (detected by FIFUZZ)\r\n\r\nFixes #10480\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10490)\r\n\r\n* Return 1 when openssl req -addext kv is duplicated\r\n\r\nCLA: trivial\r\n\r\nFixes #10273\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10578)\r\n\r\n(cherry picked from commit 1aeec3dbc2d62f902698b1eba9ed31cbd436f9dc)\r\n\r\n* Ensure EVP_PKEY_set1_DH detects X9.42 keys\r\n\r\nOpenSSL supports both PKCS#3 and X9.42 DH keys. By default we use PKCS#3\r\nkeys. The function `EVP_PKEY_set1_DH` was assuming that the supplied DH\r\nkey was a PKCS#3 key. It should detect what type of key it is and assign\r\nthe correct type as appropriate.\r\n\r\nFixes #10592\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10593)\r\n\r\n(cherry picked from commit 32c869ffaba67822602ea9fec611272ff8e8db58)\r\n\r\n* Test that EVP_PKEY_set1_DH() correctly identifies the DH type\r\n\r\nProvide a test to check tat when we assign a DH object we know whether\r\nwe are dealing with PKCS#3 or X9.42 DH keys.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10593)\r\n\r\n(cherry picked from commit e295de1d8433ed07092845cb6c56aa424ff35c6d)\r\n\r\n* Backport the RSA_get0_pss_params() function from master\r\n\r\nThis is a missing accessor in order to obtain PSS parameters from an\r\nRSA key, which should also be available in 1.1.1.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10568)\r\n\r\n* Update the HISTORY entry for RSA_get0_pss_params()\r\n\r\nMake a note of when this function was first introduced\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10568)\r\n\r\n* apps/speed.c: Fix eddsa sign and verify output with -multi option\r\n\r\nFixes #10261\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10285)\r\n\r\n(cherry picked from commit 1ac7e15375be39c8f03171c02658cf703f58217a)\r\n\r\n* Fix unwind info for some trivial functions\r\n\r\nWhile stack unwinding works with gdb here, the\r\nfunction _Unwind_Backtrace gives up when something outside\r\n.cfi_startproc/.cfi_endproc is found in the call stack, like\r\nOPENSSL_cleanse, OPENSSL_atomic_add, OPENSSL_rdtsc, CRYPTO_memcmp\r\nand other trivial functions which don't save anything in the stack.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10635)\r\n\r\n(cherry picked from commit 8913378a552e470c66277c47b19699f20b84aa3b)\r\n\r\n* Disable devcryptoeng on newer OpenBSD versions\r\n\r\nIt's reported that /dev/crypto support has been dropped in OpenBSD 5.7.\r\n\r\nFixes #10552\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10565)\r\n\r\n* Configuration: compute openssl_other_defines and related info later\r\n\r\nThe computation of macros and configdata.pm related data from %disabled\r\nwas done much too early, leaving later disablings without real support.\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10565)\r\n\r\n* Fix regression on x509 keyform argument\r\n\r\nIn OpenSSL pre 1.1.0, 'openssl x509 -keyform engine' was possible\r\nand supported.  In 1.1.0, type of keyform argument is OPT_FMT_PEMDER\r\nwhich doesn't support engine. This changes type of keyform argument\r\nto OPT_FMT_PDE which means PEM, DER or engine and updates the manpage\r\nincluding keyform and CAkeyform.\r\n\r\nThis restores the pre 1.1.0 behavior.\r\n\r\nThis issue is very similar than https://github.com/openssl/openssl/issues/4366\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10609)\r\n\r\n(cherry picked from commit 0ab6fc79a9a63370be1a615729dc2a6ed0d6c89b)\r\n\r\n* Add some missing cfi frame info in camellia-x86_64.pl\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10642)\r\n\r\n(cherry picked from commit 6b913be708f98b1d971586d38e608218ee6de6fa)\r\n\r\n* Add some missing cfi frame info in x86_64-mont5.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10651)\r\n\r\n(cherry picked from commit 0190c52ab8b4cdf5fe577b3d924576167c892a15)\r\n\r\n* Add some missing cfi frame info in rsaz-x86_64\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10652)\r\n\r\n(cherry picked from commit 013c2e8d1a272df444f47b8b54de1d51bc499887)\r\n\r\n* Add some missing cfi frame info in aesni-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10653)\r\n\r\n(cherry picked from commit a5fe7825b970a6c937118a4f707f9ad367413794)\r\n\r\n* Add some missing cfi frame info in keccak1600-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10654)\r\n\r\n(cherry picked from commit 95bbe6eff7aadc681e282ec957379b49d6f80ca8)\r\n\r\n* Add some missing cfi frame info in aesni-sha and sha-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10655)\r\n\r\n(cherry picked from commit b0d3442efc10b635863b915c2d014345f6e5a219)\r\n\r\n* Fix evp_extra_test with no-dh\r\n\r\nThe new DH test in evp_extra_test.c broke the no-dh build so we add some\r\nguards to fix it.\r\n\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/10644)\r\n\r\n(cherry picked from commit 501fcfb8cfc1aa114ffde437039c2dc2827554ae)\r\n\r\n* Add some missing cfi frame info in ecp_nistz256-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10672)\r\n\r\n(cherry picked from commit eff5076a78502d1ac04669e44127d4bd7c0a9ce7)\r\n\r\n* Fix aesni_cbc_sha256_enc_avx2 backtrace info\r\n\r\nWe store a secondary frame pointer info for the debugger\r\nin the red zone.  This fixes a crash in the unwinder when\r\nthis function is interrupted.\r\n\r\nAdditionally the missing cfi function annotation is added\r\nto aesni_cbc_sha256_enc_shaext.\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10674)\r\n\r\n(cherry picked from commit 665de4d48aef2507022a7d74f5c7f6e339d5e6bc)\r\n\r\n* Add some missing cfi frame info in x25519-x86_64.pl\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10676)\r\n\r\n(cherry picked from commit 9d079f2744b9b624c6fe75f95fc0f766ef88ffcf)\r\n\r\n* Add some missing cfi frame info in aesni-gcm-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10677)\r\n\r\n(cherry picked from commit 275a048ffc1585a731e39d7e8e3f53766e8f48d7)\r\n\r\n* Add some missing cfi frame info in poly1305-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10678)\r\n\r\n(cherry picked from commit 048fa13e5ef4ccd730561f79a6c91f38365994d1)\r\n\r\n* Add some missing cfi frame info in rc4-md5-x86_64.pl\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/10679)\r\n\r\n(cherry picked from commit b2a00f62209add348deb8283c588ddbd572dc216)\r\n\r\n* Fix a race condition in the speed command\r\n\r\nThe timer alarm sets run = 0, while the benchmark\r\ndoes run = 1 in the initialization code.  That is\r\na race condition, if the timer goes off too early\r\nthe benchmark runs forever.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10680)\r\n\r\n(cherry picked from commit f3fdfbf78c6bfc97abf9c70b03859a28ebf6b66d)\r\n\r\n* Update the krb5 submodule\r\n\r\nBring us up to date with upstream's 1.17.1 release.  Among other\r\nthings, it includes commit c2497d46b4bad473e164943d67b58cd1ae261c3a\r\nwhich fixes several issues that affect running the test suite under\r\nTravis CI.  Hopefully those will work transitively for us as well.\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n(cherry picked from commit 3e73f558af600ea068bb2132988c31ddb444e13e)\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10690)\r\n\r\n* Temporarily disable external pyca tests\r\n\r\nThe pyca-cryptography external test has been failing for a long time.\r\nIt looks like upstream needs to make some changes to adapt to 1.1.1.\r\n\r\nBackported from #10689\r\n\r\n[extended tests]\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10722)\r\n\r\n* Update tls13_enc.c\r\n\r\nFix double + in hkdflabel declaration (FIXES #10675)\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10700)\r\n\r\n(cherry picked from commit 2de5a5fbdd14f514e962cccfe90482c37786c183)\r\n\r\n* Run make update\r\n\r\nThe New Year has caused various files to appear out of date to \"make\r\nupdate\". This causes Travis to fail. Therefore we update those files.\r\n\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10739)\r\n\r\n* Fix potential SCA vulnerability in some EC_METHODs\r\n\r\nThis commit addresses a potential side-channel vulnerability in the\r\ninternals of some elliptic curve low level operations.\r\nThe side-channel leakage appears to be tiny, so the severity of this\r\nissue is rather low.\r\n\r\nThe issue was reported by David Schrammel and Samuel Weiser.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 3cb914c463ed1c9e32cfb773d816139a61b6ad5f)\r\n\r\n* Avoid leaking intermediate states in point doubling special case.\r\n\r\nCherry picked from\r\nhttps://github.com/google/boringssl/commit/12d9ed670da3edd64ce8175cfe0e091982989c18\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 2baea7c7e0896658b74956cac6084dd7e82e8c1b)\r\n\r\n* Fix side channel in ecp_nistz256-x86.pl\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 0de3399b691f025153c8001045d5eeb0909dfd7a)\r\n\r\n* Fix side channel in ecp_nistz256-armv4.pl\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 3d139746ca72f0906c036d0a4a3e176c7b61ed1b)\r\n\r\n* Improve side channel fix in ecp_nistz256-x86_64.pl\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit e9fe87950db2e6169029b2ecf3ed09d64265bc9c)\r\n\r\n* Fix side channel in the ecp_nistz256.c reference implementation\r\n\r\nThis is only used if configured with\r\n./config -DECP_NISTZ256_REFERENCE_IMPLEMENTATION\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit 7d4716648e8348dea862e198b9395478fae01907)\r\n\r\n* Fix side channel in ecp_nistz256-armv8.pl\r\n\r\nThis change addresses a potential side-channel vulnerability in\r\nthe internals of nistz256 low level operations for armv8.\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/9239)\r\n\r\n(cherry picked from commit f5a659b6dfcc735a62c712dcca64d116d2289b97)\r\n\r\n* Fix disabled ecdsa in apps/speed\r\n\r\nThis came from f3fdfbf78c6b. run = 1 should be done in pkey_print_message\r\nas well, otherwise other tests printed with pkey_print_message won't run.\r\n\r\nChange-Id: I0ba0b05256ad6509ada4735b26d10f8a73fd89ec\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\n(Merged from https://github.com/openssl/openssl/pull/10710)\r\n\r\n(cherry picked from commit 6e49b514067a2b6a30d064d2ae1fdfd8050c184b)\r\n\r\n* Fix incorrect return code on ECDSA key verification\r\n\r\nECDSA_do_verify() is a function that verifies a ECDSA signature given a hash and a public EC key. The function is supposed to return 1 on valid signature, 0 on invalid signature and -1 on error. Previously, we returned 0 if the key did not have a verify_sig method. This is actually an error case and not an invalid signature. Consequently, this patch updates the return code to -1.\r\n\r\nFixes #8766\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/10693)\r\n\r\n(cherry picked from commit 26583f6aa8dc28e3598e61db66e54e2fdf8b195f)\r\n\r\n* Don't store an HMAC key for longer than we need\r\n\r\nThe HMAC_CTX structure stores the original key in case the ctx is reused\r\nwithout changing the key.\r\n\r\nHowever, HMAC_Init_ex() checks its parameters such that the only code path\r\nwhere the stored key is ever used is in the case where HMAC_Init_ex is\r\ncalled with a NULL key and an explicit md is provided which is the same as\r\nthe md that was provided previously. But in that case we can actually reuse\r\nthe pre-digested key that we calculated last time, so we can refactor the\r\ncode not to use the stored key at all.\r\n\r\nWith that refactor done it is no longer necessary to store the key in the\r\nctx at all. This means that long running ctx's will not keep the key in\r\nmemory for any longer than required. Note though that the digested key\r\n*is* still kept in memory for the duration of the life of the ctx.\r\n\r\nFixes #10743\r\n\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/10763)\r\n\r\n* Revert \"Move random-related defines from e_os.h to rand_unix.c\"\r\n\r\nThis reverts commit 7b18d1a53f932391bbc599a4717d6f98a597849c, which moved the\r\nDEVRANDOM and DEVRANDOM_EGD defines into rand_unix.c. That change introduced\r\nthe regression that the compiler complains about missing declarations in\r\napps/version.c when OpenSSL is configured using `--with-rand-seed=devrandom`\r\n(resp. `--with-rand-seed=egd`):\r\n\r\napps/version.c:173:42: error: 'DEVRANDOM' undeclared\r\n             static const char *dev[] = { DEVRANDOM, NULL };\r\n                                          ^~~~~~~~~\r\n\r\nFixes #10759\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from htt…","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/aa31ec6012a0dba29128628ed2c9ca525b728034"}]},"public":true,"created_at":"2020-04-14T20:58:25Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12049031317","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":170719151,"name":"open-quantum-safe/liboqs-cpp","url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp"},"payload":{"push_id":4917757017,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"58205d4ca825ab45c57ba95fbd8ec9f87f643bdf","before":"77003d88b692e6d50cc5930e2baf7ff5b2550859","commits":[{"sha":"58205d4ca825ab45c57ba95fbd8ec9f87f643bdf","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"commit","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp/commits/58205d4ca825ab45c57ba95fbd8ec9f87f643bdf"}]},"public":true,"created_at":"2020-04-14T21:47:48Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12049087855","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":170719151,"name":"open-quantum-safe/liboqs-cpp","url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp"},"payload":{"push_id":4917788050,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"1ce806081314bfee07ceb50a0f614742956e9635","before":"58205d4ca825ab45c57ba95fbd8ec9f87f643bdf","commits":[{"sha":"1ce806081314bfee07ceb50a0f614742956e9635","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"Update appveyor.yml","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp/commits/1ce806081314bfee07ceb50a0f614742956e9635"}]},"public":true,"created_at":"2020-04-14T21:55:09Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12049122148","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":170719151,"name":"open-quantum-safe/liboqs-cpp","url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp"},"payload":{"push_id":4917806028,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"1d206b374b11f14862ca1e080639bb8dbff102e0","before":"1ce806081314bfee07ceb50a0f614742956e9635","commits":[{"sha":"1d206b374b11f14862ca1e080639bb8dbff102e0","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"commit","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp/commits/1d206b374b11f14862ca1e080639bb8dbff102e0"}]},"public":true,"created_at":"2020-04-14T21:59:40Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"12049171076","type":"PushEvent","actor":{"id":6188943,"login":"vsoftco","display_login":"vsoftco","gravatar_id":"","url":"https://api.github.com/users/vsoftco","avatar_url":"https://avatars.githubusercontent.com/u/6188943?"},"repo":{"id":170719151,"name":"open-quantum-safe/liboqs-cpp","url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp"},"payload":{"push_id":4917831907,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"669a3cb326f7032354cc987cdb1491b3f3c18b68","before":"1d206b374b11f14862ca1e080639bb8dbff102e0","commits":[{"sha":"669a3cb326f7032354cc987cdb1491b3f3c18b68","author":{"name":"Vlad Gheorghiu","email":"ec1ed747be3d89806c6c74926d20580a1eb601fe@gmail.com"},"message":"Update appveyor_build.bat","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/liboqs-cpp/commits/669a3cb326f7032354cc987cdb1491b3f3c18b68"}]},"public":true,"created_at":"2020-04-14T22:06:04Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
