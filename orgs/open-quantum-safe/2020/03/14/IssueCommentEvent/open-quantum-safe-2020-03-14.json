{"id":"11764907151","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/608","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/608/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/608/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/608/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/608","id":561800792,"node_id":"MDU6SXNzdWU1NjE4MDA3OTI=","number":608,"title":"LedaKemLT52 cannot be run in a worker thread on macOS","user":{"login":"vsoftco","id":6188943,"node_id":"MDQ6VXNlcjYxODg5NDM=","avatar_url":"https://avatars2.githubusercontent.com/u/6188943?v=4","gravatar_id":"","url":"https://api.github.com/users/vsoftco","html_url":"https://github.com/vsoftco","followers_url":"https://api.github.com/users/vsoftco/followers","following_url":"https://api.github.com/users/vsoftco/following{/other_user}","gists_url":"https://api.github.com/users/vsoftco/gists{/gist_id}","starred_url":"https://api.github.com/users/vsoftco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vsoftco/subscriptions","organizations_url":"https://api.github.com/users/vsoftco/orgs","repos_url":"https://api.github.com/users/vsoftco/repos","events_url":"https://api.github.com/users/vsoftco/events{/privacy}","received_events_url":"https://api.github.com/users/vsoftco/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-02-07T18:29:24Z","updated_at":"2020-03-14T14:58:13Z","closed_at":null,"author_association":"MEMBER","body":"Due to small stack size of worker threads under macOS (512kb), LEDAKEM52LT emits a BUS ERROR (access violations -Exception: EXC_BAD_ACCESS (code=1, address=0x70000292c4c8) ) when attempted to be run in a non-main (worker) thread under macOS. The first culprit is\r\n\r\nhttps://github.com/open-quantum-safe/liboqs/blob/fb458165698c5850dcf08d7268a2b6c90e47e378/src/kem/ledacrypt/pqclean_ledakemlt52_leaktime/dfr_test.c#L13\r\n\r\nwhere the array `gamma` seems to have 609068 bytes, more than can be stored on the stack of a single non-main thread in macOS (512kb). Allocating `gamma` on the heap still doesn't solve the problem, other violations of the same sort keep appearing (I didn't have time to go over the rest). So we should think whether we want to keep the code as is, or document that it shouldn't be run on a thread under macOS, or change it."},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/599074961","html_url":"https://github.com/open-quantum-safe/liboqs/issues/608#issuecomment-599074961","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/608","id":599074961,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTA3NDk2MQ==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2020-03-14T14:58:13Z","updated_at":"2020-03-14T14:58:13Z","author_association":"MEMBER","body":"https://github.com/open-quantum-safe/liboqs/commit/795c1b7932d8e3d44277c7bb1c6c45d091cde1c7#diff-9d282cb2abf60a78fb263d773e0dabe2R84 fixed a memory leak in LEDAkem, there could be a small chance this fixed it?"}},"public":true,"created_at":"2020-03-14T14:58:13Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
