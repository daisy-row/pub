{"id":"13549218502","type":"IssueCommentEvent","actor":{"id":974662,"login":"thomwiggers","display_login":"thomwiggers","gravatar_id":"","url":"https://api.github.com/users/thomwiggers","avatar_url":"https://avatars.githubusercontent.com/u/974662?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/791","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/791/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/791/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/791/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/791","id":657670194,"node_id":"MDU6SXNzdWU2NTc2NzAxOTQ=","number":791,"title":"Undefined behaviour in KeccakP-1600-times4-SIMD256","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-07-15T21:25:39Z","updated_at":"2020-09-17T07:52:35Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"When enabling clang's UndefinedBehaviorSanitizer using the build sequence\r\n```\r\nmkdir build && cd build\r\ncmake -DCMAKE_C_COMPILER=clang-9 -DCMAKE_BUILD_TYPE=Debug -DUSE_SANITIZER=Undefined -GNinja ..\r\nninja\r\n```\r\nthere are several undefined behaviours in many algorithms, related to the KeccakP-1600-times4-SIMD256 operation.  I can't tell at this point whether the undefined behaviour is present in the Keccak code package or in how code in liboqs/implementations are calling it.  Here's an example:\r\n\r\n```\r\ntests/test_kem Kyber512\r\nConfiguration info\r\n==================\r\nTarget platform:  x86_64-Linux-4.19.76-linuxkit\r\nCompiler:         clang (9.0.0 (tags/RELEASE_900/final))\r\nOQS version:      0.3.1-dev\r\nGit commit:       53937db0c2c5e40afc50c4a8be2362379ca407de\r\nOpenSSL enabled:  Yes (OpenSSL 1.1.1  11 Sep 2018)\r\nAES:              OpenSSL\r\nSHA-2:            OpenSSL\r\nSHA-3:            OpenSSL\r\n\r\n================================================================================\r\nSample computation for KEM Kyber512\r\n================================================================================\r\n/usr/lib/llvm-9/lib/clang/9.0.0/include/avxintrin.h:3145:10: runtime error: load of misaligned address 0x000001220830 for type 'const __m256i' (vector of 4 'long long' values), which requires 32 byte alignment\r\n0x000001220830: note: pointer points here\r\n 00 00 00 00  07 00 01 02 03 04 05 06  0f 08 09 0a 0b 0c 0d 0e  17 10 11 12 13 14 15 16  1f 18 19 1a\r\n              ^ \r\nUndefinedBehaviorSanitizer:DEADLYSIGNAL\r\n==5033==ERROR: UndefinedBehaviorSanitizer: SEGV on unknown address 0x000000000000 (pc 0x000000bc2081 bp 0x7fa205e65fb0 sp 0x7fa205e1d640 T5034)\r\n==5033==The signal is caused by a READ memory access.\r\n==5033==Hint: address points to the zero page.\r\n    #0 0xbc2080 in KeccakP1600times4_PermuteAll_24rounds /root/liboqs/build/../src/common/sha3/keccak4x/KeccakP-1600-times4-SIMD256.c\r\n    #1 0xb80301 in keccak_squeezeblocks4x /root/liboqs/build/../src/kem/kyber/pqclean_kyber512_avx2/fips202x4.c:101:9\r\n    #2 0xb802ad in PQCLEAN_KYBER512_AVX2_shake128x4_squeezeblocks /root/liboqs/build/../src/kem/kyber/pqclean_kyber512_avx2/fips202x4.c:154:5\r\n    #3 0xa1c4aa in gen_matrix /root/liboqs/build/../src/kem/kyber/pqclean_kyber512_avx2/indcpa.c:149:5\r\n    #4 0xa1bbd9 in PQCLEAN_KYBER512_AVX2_indcpa_keypair /root/liboqs/build/../src/kem/kyber/pqclean_kyber512_avx2/indcpa.c:192:5\r\n    #5 0x67423f in PQCLEAN_KYBER512_AVX2_crypto_kem_keypair /root/liboqs/build/../src/kem/kyber/pqclean_kyber512_avx2/kem.c:22:5\r\n    #6 0x673209 in OQS_KEM_kyber_512_keypair /root/liboqs/build/../src/kem/kyber/kem_kyber_512.c:49:23\r\n    #7 0x42b961 in OQS_KEM_keypair /root/liboqs/build/../src/kem/kem.c:805:10\r\n    #8 0x424e9a in kem_test_correctness /root/liboqs/build/../tests/test_kem.c:78:7\r\n    #9 0x424115 in test_wrapper /root/liboqs/build/../tests/test_kem.c:151:11\r\n    #10 0x7fa2068866da in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76da)\r\n    #11 0x7fa205f8b88e in clone (/lib/x86_64-linux-gnu/libc.so.6+0x12188e)\r\n\r\nUndefinedBehaviorSanitizer can not provide additional info.\r\n==5033==ABORTING\r\n```\r\n\r\nI thought it might be due to the variable `state` in [indcpa.c/gen_matrix](https://github.com/open-quantum-safe/liboqs/blob/53937db0c2c5e40afc50c4a8be2362379ca407de/src/kem/kyber/pqclean_kyber512_avx2/indcpa.c#L141) being on the heap, so I tried allocating its contents using aligned\\_alloc, but to no avail.  I'm at a loss at how to proceed.  Any ideas? @thomwiggers @cryptojedi @baentsch ","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/694061058","html_url":"https://github.com/open-quantum-safe/liboqs/issues/791#issuecomment-694061058","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/791","id":694061058,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDA2MTA1OA==","user":{"login":"thomwiggers","id":974662,"node_id":"MDQ6VXNlcjk3NDY2Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/974662?v=4","gravatar_id":"","url":"https://api.github.com/users/thomwiggers","html_url":"https://github.com/thomwiggers","followers_url":"https://api.github.com/users/thomwiggers/followers","following_url":"https://api.github.com/users/thomwiggers/following{/other_user}","gists_url":"https://api.github.com/users/thomwiggers/gists{/gist_id}","starred_url":"https://api.github.com/users/thomwiggers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomwiggers/subscriptions","organizations_url":"https://api.github.com/users/thomwiggers/orgs","repos_url":"https://api.github.com/users/thomwiggers/repos","events_url":"https://api.github.com/users/thomwiggers/events{/privacy}","received_events_url":"https://api.github.com/users/thomwiggers/received_events","type":"User","site_admin":false},"created_at":"2020-09-17T07:52:35Z","updated_at":"2020-09-17T07:52:35Z","author_association":"MEMBER","body":"``keccak4x_state`` is already an array of ``__m256i``s, so that should already be aligned.  The same is for the arguments to ``shake128x4_squeezeblocks`` in ``indcpa.c``, so that's also not it... I'm not so convinced ``0x000001220830`` is a stack address though.","performed_via_github_app":null}},"public":true,"created_at":"2020-09-17T07:52:35Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13555375619","type":"IssueCommentEvent","actor":{"id":16247285,"login":"christianpaquin","display_login":"christianpaquin","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","avatar_url":"https://avatars.githubusercontent.com/u/16247285?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/238","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/238/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/238/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/238/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/238","id":703682171,"node_id":"MDU6SXNzdWU3MDM2ODIxNzE=","number":238,"title":"MAX_CURVELIST too small","user":{"login":"crest42","id":10732757,"node_id":"MDQ6VXNlcjEwNzMyNzU3","avatar_url":"https://avatars3.githubusercontent.com/u/10732757?v=4","gravatar_id":"","url":"https://api.github.com/users/crest42","html_url":"https://github.com/crest42","followers_url":"https://api.github.com/users/crest42/followers","following_url":"https://api.github.com/users/crest42/following{/other_user}","gists_url":"https://api.github.com/users/crest42/gists{/gist_id}","starred_url":"https://api.github.com/users/crest42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crest42/subscriptions","organizations_url":"https://api.github.com/users/crest42/orgs","repos_url":"https://api.github.com/users/crest42/repos","events_url":"https://api.github.com/users/crest42/events{/privacy}","received_events_url":"https://api.github.com/users/crest42/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-09-17T15:16:58Z","updated_at":"2020-09-17T16:13:19Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nfirst, thank you all for the amazing work. While building up a freeradiusd with the 1.1.1 branch of this fork, i encountered a problem when using rather long curves_list. It turns out the maximum amount of curves in a list is defined in ssl/t1_lib.c as:\r\n\r\n`# define MAX_CURVELIST   OSSL_NELEM(nid_list)`\r\n\r\n`nid_list` only includes ecdc curves, while the pq algos and hybrid implementations are defined in `oqs_nid_list` and `oqs_hybrid_nid_list`. When using more curves than member in `nid_list`, the curve list evaluation function fails silently.\r\n\r\nThis small fix works for me:\r\n\r\n`# define MAX_CURVELIST   (OSSL_NELEM(nid_list)+OSSL_NELEM(oqs_nid_list)+OSSL_NELEM(oqs_hybrid_nid_list))`\r\n\r\nIf you have no objections against this change, i can send a PR.\r\n\r\nRegards,\r\nRobin ","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/694339193","html_url":"https://github.com/open-quantum-safe/openssl/issues/238#issuecomment-694339193","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/238","id":694339193,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDMzOTE5Mw==","user":{"login":"christianpaquin","id":16247285,"node_id":"MDQ6VXNlcjE2MjQ3Mjg1","avatar_url":"https://avatars0.githubusercontent.com/u/16247285?v=4","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"created_at":"2020-09-17T16:13:19Z","updated_at":"2020-09-17T16:13:19Z","author_association":"NONE","body":"Yes, please send a PR, it will trigger our tests and make it easier to review the fix. Thanks!","performed_via_github_app":null}},"public":true,"created_at":"2020-09-17T16:13:19Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13555914984","type":"IssueCommentEvent","actor":{"id":16247285,"login":"christianpaquin","display_login":"christianpaquin","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","avatar_url":"https://avatars.githubusercontent.com/u/16247285?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/239","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/239/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/239/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/239/events","html_url":"https://github.com/open-quantum-safe/openssl/pull/239","id":703742284,"node_id":"MDExOlB1bGxSZXF1ZXN0NDg4Nzk1NTgw","number":239,"title":"openssl: Add count of liboqs pq and hybrid curves to MAX_CURVES_LIST","user":{"login":"crest42","id":10732757,"node_id":"MDQ6VXNlcjEwNzMyNzU3","avatar_url":"https://avatars3.githubusercontent.com/u/10732757?v=4","gravatar_id":"","url":"https://api.github.com/users/crest42","html_url":"https://github.com/crest42","followers_url":"https://api.github.com/users/crest42/followers","following_url":"https://api.github.com/users/crest42/following{/other_user}","gists_url":"https://api.github.com/users/crest42/gists{/gist_id}","starred_url":"https://api.github.com/users/crest42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crest42/subscriptions","organizations_url":"https://api.github.com/users/crest42/orgs","repos_url":"https://api.github.com/users/crest42/repos","events_url":"https://api.github.com/users/crest42/events{/privacy}","received_events_url":"https://api.github.com/users/crest42/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-09-17T16:36:20Z","updated_at":"2020-09-17T16:58:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/pulls/239","html_url":"https://github.com/open-quantum-safe/openssl/pull/239","diff_url":"https://github.com/open-quantum-safe/openssl/pull/239.diff","patch_url":"https://github.com/open-quantum-safe/openssl/pull/239.patch"},"body":"Fixes #238 \r\n\r\nTested with the following curves_list:\r\n'bike1l1cpa:p256_bike1l1cpa:bike1l1fo:p256_bike1l1fo:frodo640aes:p256_frodo640aes:frodo640shake:p256_frodo640shake:hqc128_1_cca2:p256_hqc128_1_cca2:kyber512:p256_kyber512:kyber90s512:p256_kyber90s512:ntru_hps2048509:p256_ntru_hps2048509:lightsaber:p256_lightsaber:sidhp434:p256_sidhp434:sidhp503:p256_sidhp503:sikep434:p256_sikep434:sikep503:p256_sikep503:bike1l3cpa:p384_bike1l3cpa:bike1l3fo:p384_bike1l3fo:frodo976aes:p384_frodo976aes:frodo976shake:p384_frodo976shake:hqc192_1_cca2:p384_hqc192_1_cca2:hqc192_2_cca2:p384_hqc192_2_cca2:kyber768:p384_kyber768:kyber90s768:p384_kyber90s768:ntru_hps2048677:p384_ntru_hps2048677:ntru_hrss701:p384_ntru_hrss701:saber:p384_saber:sidhp610:p384_sidhp610:sikep610:p384_sikep610:frodo1344aes:p521_frodo1344aes:frodo1344shake:p521_frodo1344shake:hqc256_1_cca2:p521_hqc256_1_cca2:hqc256_2_cca2:p521_hqc256_2_cca2:hqc256_3_cca2:p521_hqc256_3_cca2:kyber1024:p521_kyber1024:kyber90s1024:p521_kyber90s1024:ntru_hps4096821:p521_ntru_hps4096821:firesaber:p521_firesaber:sidhp751:p521_sidhp751:sikep751:p521_sikep751:P-256'\r\n\r\nTest results:\r\nBefore:\r\n```\r\n./apps/openssl s_server -cert p256_dilithium2_CA.crt -key p256_dilithium2_CA.key -groups \"bike1l1cpa:p256_bike1l1cpa:bike1l1fo:p256_bike1l1fo:frodo640aes:p256_frodo640aes:frodo640shake:p256_frodo640shake:hqc128_1_cca2:p256_hqc128_1_cca2:kyber512:p256_kyber512:kyber90s512:p256_kyber90s512:ntru_hps2048509:p256_ntru_hps2048509:lightsaber:p256_lightsaber:sidhp434:p256_sidhp434:sidhp503:p256_sidhp503:sikep434:p256_sikep434:sikep503:p256_sikep503:bike1l3cpa:p384_bike1l3cpa:bike1l3fo:p384_bike1l3fo:frodo976aes:p384_frodo976aes:frodo976shake:p384_frodo976shake:hqc192_1_cca2:p384_hqc192_1_cca2:hqc192_2_cca2:p384_hqc192_2_cca2:kyber768:p384_kyber768:kyber90s768:p384_kyber90s768:ntru_hps2048677:p384_ntru_hps2048677:ntru_hrss701:p384_ntru_hrss701:saber:p384_saber:sidhp610:p384_sidhp610:sikep610:p384_sikep610:frodo1344aes:p521_frodo1344aes:frodo1344shake:p521_frodo1344shake:hqc256_1_cca2:p521_hqc256_1_cca2:hqc256_2_cca2:p521_hqc256_2_cca2:hqc256_3_cca2:p521_hqc256_3_cca2:kyber1024:p521_kyber1024:kyber90s1024:p521_kyber90s1024:ntru_hps4096821:p521_ntru_hps4096821:firesaber:p521_firesaber:sidhp751:p521_sidhp751:sikep751:p521_sikep751:P-256\"\r\nError with command: \"-groups bike1l1cpa:p256_bike1l1cpa:bike1l1fo:p256_bike1l1fo:frodo640aes:p256_frodo640aes:frodo640shake:p256_frodo640shake:hqc128_1_cca2:p256_hqc128_1_cca2:kyber512:p256_kyber512:kyber90s512:p256_kyber90s512:ntru_hps2048509:p256_ntru_hps2048509:lightsaber:p256_lightsaber:sidhp434:p256_sidhp434:sidhp503:p256_sidhp503:sikep434:p256_sikep434:sikep503:p256_sikep503:bike1l3cpa:p384_bike1l3cpa:bike1l3fo:p384_bike1l3fo:frodo976aes:p384_frodo976aes:frodo976shake:p384_frodo976shake:hqc192_1_cca2:p384_hqc192_1_cca2:hqc192_2_cca2:p384_hqc192_2_cca2:kyber768:p384_kyber768:kyber90s768:p384_kyber90s768:ntru_hps2048677:p384_ntru_hps2048677:ntru_hrss701:p384_ntru_hrss701:saber:p384_saber:sidhp610:p384_sidhp610:sikep610:p384_sikep610:frodo1344aes:p521_frodo1344aes:frodo1344shake:p521_frodo1344shake:hqc256_1_cca2:p521_hqc256_1_cca2:hqc256_2_cca2:p521_hqc256_2_cca2:hqc256_3_cca2:p521_hqc256_3_cca2:kyber1024:p521_kyber1024:kyber90s1024:p521_kyber90s1024:ntru_hps4096821:p521_ntru_hps4096821:firesaber:p521_firesaber:sidhp751:p521_sidhp751:sikep751:p521_sikep751:P-256\"\r\n```\r\n\r\nAfter:\r\n```\r\n./apps/openssl s_server -cert p256_dilithium2_CA.crt -key p256_dilithium2_CA.key -groups \"bike1l1cpa:p256_bike1l1cpa:bike1l1fo:p256_bike1l1fo:frodo640aes:p256_frodo640aes:frodo640shake:p256_frodo640shake:hqc128_1_cca2:p256_hqc128_1_cca2:kyber512:p256_kyber512:kyber90s512:p256_kyber90s512:ntru_hps2048509:p256_ntru_hps2048509:lightsaber:p256_lightsaber:sidhp434:p256_sidhp434:sidhp503:p256_sidhp503:sikep434:p256_sikep434:sikep503:p256_sikep503:bike1l3cpa:p384_bike1l3cpa:bike1l3fo:p384_bike1l3fo:frodo976aes:p384_frodo976aes:frodo976shake:p384_frodo976shake:hqc192_1_cca2:p384_hqc192_1_cca2:hqc192_2_cca2:p384_hqc192_2_cca2:kyber768:p384_kyber768:kyber90s768:p384_kyber90s768:ntru_hps2048677:p384_ntru_hps2048677:ntru_hrss701:p384_ntru_hrss701:saber:p384_saber:sidhp610:p384_sidhp610:sikep610:p384_sikep610:frodo1344aes:p521_frodo1344aes:frodo1344shake:p521_frodo1344shake:hqc256_1_cca2:p521_hqc256_1_cca2:hqc256_2_cca2:p521_hqc256_2_cca2:hqc256_3_cca2:p521_hqc256_3_cca2:kyber1024:p521_kyber1024:kyber90s1024:p521_kyber90s1024:ntru_hps4096821:p521_ntru_hps4096821:firesaber:p521_firesaber:sidhp751:p521_sidhp751:sikep751:p521_sikep751:P-256\"\r\nUsing default temp DH parameters\r\nACCEPT\r\n\r\n```","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/694366533","html_url":"https://github.com/open-quantum-safe/openssl/pull/239#issuecomment-694366533","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/239","id":694366533,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDM2NjUzMw==","user":{"login":"christianpaquin","id":16247285,"node_id":"MDQ6VXNlcjE2MjQ3Mjg1","avatar_url":"https://avatars0.githubusercontent.com/u/16247285?v=4","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"created_at":"2020-09-17T16:58:53Z","updated_at":"2020-09-17T16:58:53Z","author_association":"NONE","body":"Ok thanks, we'll take a look. Don't worry about the appveyor failure; we are currently working on enabling tests on Windows and they are currently failing.","performed_via_github_app":null}},"public":true,"created_at":"2020-09-17T16:58:53Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13555964229","type":"IssueCommentEvent","actor":{"id":10732757,"login":"crest42","display_login":"crest42","gravatar_id":"","url":"https://api.github.com/users/crest42","avatar_url":"https://avatars.githubusercontent.com/u/10732757?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/239","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/239/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/239/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/239/events","html_url":"https://github.com/open-quantum-safe/openssl/pull/239","id":703742284,"node_id":"MDExOlB1bGxSZXF1ZXN0NDg4Nzk1NTgw","number":239,"title":"openssl: Add count of liboqs pq and hybrid curves to MAX_CURVES_LIST","user":{"login":"crest42","id":10732757,"node_id":"MDQ6VXNlcjEwNzMyNzU3","avatar_url":"https://avatars3.githubusercontent.com/u/10732757?v=4","gravatar_id":"","url":"https://api.github.com/users/crest42","html_url":"https://github.com/crest42","followers_url":"https://api.github.com/users/crest42/followers","following_url":"https://api.github.com/users/crest42/following{/other_user}","gists_url":"https://api.github.com/users/crest42/gists{/gist_id}","starred_url":"https://api.github.com/users/crest42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crest42/subscriptions","organizations_url":"https://api.github.com/users/crest42/orgs","repos_url":"https://api.github.com/users/crest42/repos","events_url":"https://api.github.com/users/crest42/events{/privacy}","received_events_url":"https://api.github.com/users/crest42/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-09-17T16:36:20Z","updated_at":"2020-09-17T17:03:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/pulls/239","html_url":"https://github.com/open-quantum-safe/openssl/pull/239","diff_url":"https://github.com/open-quantum-safe/openssl/pull/239.diff","patch_url":"https://github.com/open-quantum-safe/openssl/pull/239.patch"},"body":"Fixes #238 \r\n\r\nTested with the following curves_list:\r\n'bike1l1cpa:p256_bike1l1cpa:bike1l1fo:p256_bike1l1fo:frodo640aes:p256_frodo640aes:frodo640shake:p256_frodo640shake:hqc128_1_cca2:p256_hqc128_1_cca2:kyber512:p256_kyber512:kyber90s512:p256_kyber90s512:ntru_hps2048509:p256_ntru_hps2048509:lightsaber:p256_lightsaber:sidhp434:p256_sidhp434:sidhp503:p256_sidhp503:sikep434:p256_sikep434:sikep503:p256_sikep503:bike1l3cpa:p384_bike1l3cpa:bike1l3fo:p384_bike1l3fo:frodo976aes:p384_frodo976aes:frodo976shake:p384_frodo976shake:hqc192_1_cca2:p384_hqc192_1_cca2:hqc192_2_cca2:p384_hqc192_2_cca2:kyber768:p384_kyber768:kyber90s768:p384_kyber90s768:ntru_hps2048677:p384_ntru_hps2048677:ntru_hrss701:p384_ntru_hrss701:saber:p384_saber:sidhp610:p384_sidhp610:sikep610:p384_sikep610:frodo1344aes:p521_frodo1344aes:frodo1344shake:p521_frodo1344shake:hqc256_1_cca2:p521_hqc256_1_cca2:hqc256_2_cca2:p521_hqc256_2_cca2:hqc256_3_cca2:p521_hqc256_3_cca2:kyber1024:p521_kyber1024:kyber90s1024:p521_kyber90s1024:ntru_hps4096821:p521_ntru_hps4096821:firesaber:p521_firesaber:sidhp751:p521_sidhp751:sikep751:p521_sikep751:P-256'\r\n\r\nTest results:\r\nBefore:\r\n```\r\n./apps/openssl s_server -cert p256_dilithium2_CA.crt -key p256_dilithium2_CA.key -groups \"bike1l1cpa:p256_bike1l1cpa:bike1l1fo:p256_bike1l1fo:frodo640aes:p256_frodo640aes:frodo640shake:p256_frodo640shake:hqc128_1_cca2:p256_hqc128_1_cca2:kyber512:p256_kyber512:kyber90s512:p256_kyber90s512:ntru_hps2048509:p256_ntru_hps2048509:lightsaber:p256_lightsaber:sidhp434:p256_sidhp434:sidhp503:p256_sidhp503:sikep434:p256_sikep434:sikep503:p256_sikep503:bike1l3cpa:p384_bike1l3cpa:bike1l3fo:p384_bike1l3fo:frodo976aes:p384_frodo976aes:frodo976shake:p384_frodo976shake:hqc192_1_cca2:p384_hqc192_1_cca2:hqc192_2_cca2:p384_hqc192_2_cca2:kyber768:p384_kyber768:kyber90s768:p384_kyber90s768:ntru_hps2048677:p384_ntru_hps2048677:ntru_hrss701:p384_ntru_hrss701:saber:p384_saber:sidhp610:p384_sidhp610:sikep610:p384_sikep610:frodo1344aes:p521_frodo1344aes:frodo1344shake:p521_frodo1344shake:hqc256_1_cca2:p521_hqc256_1_cca2:hqc256_2_cca2:p521_hqc256_2_cca2:hqc256_3_cca2:p521_hqc256_3_cca2:kyber1024:p521_kyber1024:kyber90s1024:p521_kyber90s1024:ntru_hps4096821:p521_ntru_hps4096821:firesaber:p521_firesaber:sidhp751:p521_sidhp751:sikep751:p521_sikep751:P-256\"\r\nError with command: \"-groups bike1l1cpa:p256_bike1l1cpa:bike1l1fo:p256_bike1l1fo:frodo640aes:p256_frodo640aes:frodo640shake:p256_frodo640shake:hqc128_1_cca2:p256_hqc128_1_cca2:kyber512:p256_kyber512:kyber90s512:p256_kyber90s512:ntru_hps2048509:p256_ntru_hps2048509:lightsaber:p256_lightsaber:sidhp434:p256_sidhp434:sidhp503:p256_sidhp503:sikep434:p256_sikep434:sikep503:p256_sikep503:bike1l3cpa:p384_bike1l3cpa:bike1l3fo:p384_bike1l3fo:frodo976aes:p384_frodo976aes:frodo976shake:p384_frodo976shake:hqc192_1_cca2:p384_hqc192_1_cca2:hqc192_2_cca2:p384_hqc192_2_cca2:kyber768:p384_kyber768:kyber90s768:p384_kyber90s768:ntru_hps2048677:p384_ntru_hps2048677:ntru_hrss701:p384_ntru_hrss701:saber:p384_saber:sidhp610:p384_sidhp610:sikep610:p384_sikep610:frodo1344aes:p521_frodo1344aes:frodo1344shake:p521_frodo1344shake:hqc256_1_cca2:p521_hqc256_1_cca2:hqc256_2_cca2:p521_hqc256_2_cca2:hqc256_3_cca2:p521_hqc256_3_cca2:kyber1024:p521_kyber1024:kyber90s1024:p521_kyber90s1024:ntru_hps4096821:p521_ntru_hps4096821:firesaber:p521_firesaber:sidhp751:p521_sidhp751:sikep751:p521_sikep751:P-256\"\r\n```\r\n\r\nAfter:\r\n```\r\n./apps/openssl s_server -cert p256_dilithium2_CA.crt -key p256_dilithium2_CA.key -groups \"bike1l1cpa:p256_bike1l1cpa:bike1l1fo:p256_bike1l1fo:frodo640aes:p256_frodo640aes:frodo640shake:p256_frodo640shake:hqc128_1_cca2:p256_hqc128_1_cca2:kyber512:p256_kyber512:kyber90s512:p256_kyber90s512:ntru_hps2048509:p256_ntru_hps2048509:lightsaber:p256_lightsaber:sidhp434:p256_sidhp434:sidhp503:p256_sidhp503:sikep434:p256_sikep434:sikep503:p256_sikep503:bike1l3cpa:p384_bike1l3cpa:bike1l3fo:p384_bike1l3fo:frodo976aes:p384_frodo976aes:frodo976shake:p384_frodo976shake:hqc192_1_cca2:p384_hqc192_1_cca2:hqc192_2_cca2:p384_hqc192_2_cca2:kyber768:p384_kyber768:kyber90s768:p384_kyber90s768:ntru_hps2048677:p384_ntru_hps2048677:ntru_hrss701:p384_ntru_hrss701:saber:p384_saber:sidhp610:p384_sidhp610:sikep610:p384_sikep610:frodo1344aes:p521_frodo1344aes:frodo1344shake:p521_frodo1344shake:hqc256_1_cca2:p521_hqc256_1_cca2:hqc256_2_cca2:p521_hqc256_2_cca2:hqc256_3_cca2:p521_hqc256_3_cca2:kyber1024:p521_kyber1024:kyber90s1024:p521_kyber90s1024:ntru_hps4096821:p521_ntru_hps4096821:firesaber:p521_firesaber:sidhp751:p521_sidhp751:sikep751:p521_sikep751:P-256\"\r\nUsing default temp DH parameters\r\nACCEPT\r\n\r\n```","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/694368836","html_url":"https://github.com/open-quantum-safe/openssl/pull/239#issuecomment-694368836","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/239","id":694368836,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDM2ODgzNg==","user":{"login":"crest42","id":10732757,"node_id":"MDQ6VXNlcjEwNzMyNzU3","avatar_url":"https://avatars3.githubusercontent.com/u/10732757?v=4","gravatar_id":"","url":"https://api.github.com/users/crest42","html_url":"https://github.com/crest42","followers_url":"https://api.github.com/users/crest42/followers","following_url":"https://api.github.com/users/crest42/following{/other_user}","gists_url":"https://api.github.com/users/crest42/gists{/gist_id}","starred_url":"https://api.github.com/users/crest42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crest42/subscriptions","organizations_url":"https://api.github.com/users/crest42/orgs","repos_url":"https://api.github.com/users/crest42/repos","events_url":"https://api.github.com/users/crest42/events{/privacy}","received_events_url":"https://api.github.com/users/crest42/received_events","type":"User","site_admin":false},"created_at":"2020-09-17T17:03:09Z","updated_at":"2020-09-17T17:03:09Z","author_association":"NONE","body":"Thanks for the fast response. Let me know if i can help any further.\r\nA quick side note: RFC8446 allows for 2^16-1 NamedGroups[1]. So this should be fine for TLS compatibility requirements.\r\n\r\n[1]https://tools.ietf.org/html/rfc8446#section-4.2.7","performed_via_github_app":null}},"public":true,"created_at":"2020-09-17T17:03:10Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13555968227","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/826","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/826/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/826/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/826/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/826","id":702675545,"node_id":"MDU6SXNzdWU3MDI2NzU1NDU=","number":826,"title":"Again assembly problem on macOS","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars1.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-09-16T11:13:28Z","updated_at":"2020-09-17T17:03:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"```\r\n[162/876] Building ASM object src/kem/ntru/CMakeFiles/ntru_hrss701_avx2.dir/pqclean_ntruhrss701_avx2/poly_s3_to_rq.s.o\r\nFAILED: src/kem/ntru/CMakeFiles/ntru_hrss701_avx2.dir/pqclean_ntruhrss701_avx2/poly_s3_to_rq.s.o \r\n/opt/local/bin/clang  -Iinclude -I../src/kem/ntru/pqclean_ntruhrss701_avx2 -I../src/common/pqclean_shims -O3 -DNDEBUG -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk -fPIC -Werror -Wall -Wextra -Wpedantic -Wno-unused-command-line-argument -O3 -fomit-frame-pointer -mavx2 -mbmi2 -MD -MT src/kem/ntru/CMakeFiles/ntru_hrss701_avx2.dir/pqclean_ntruhrss701_avx2/poly_s3_to_rq.s.o -MF src/kem/ntru/CMakeFiles/ntru_hrss701_avx2.dir/pqclean_ntruhrss701_avx2/poly_s3_to_rq.s.o.d -o src/kem/ntru/CMakeFiles/ntru_hrss701_avx2.dir/pqclean_ntruhrss701_avx2/poly_s3_to_rq.s.o -c ../src/kem/ntru/pqclean_ntruhrss701_avx2/poly_s3_to_rq.s\r\n../src/kem/ntru/pqclean_ntruhrss701_avx2/poly_s3_to_rq.s:3116:1: error: unsupported symbol modifier in branch relocation\r\ncall PQCLEAN_NTRUHRSS701_AVX2_poly_Rq_mul_x_minus_1@plt\r\n^\r\n[167/876] Building C object src/kem/sike/CMakeFiles/sike.dir/external/P434/P434_compressed.c.o\r\nninja: build stopped: subcommand failed.\r\n```\r\n\r\nAnd here's the workaround, until upstream refactors this code:\r\n```diff\r\ndiff --git a/src/kem/ntru/pqclean_ntruhrss701_avx2/poly_s3_to_rq.s b/src/kem/ntru/pqclean_ntruhrss701_avx2/poly_s3_to_rq.s\r\nindex b798d158..9b4d341b 100644\r\n--- a/src/kem/ntru/pqclean_ntruhrss701_avx2/poly_s3_to_rq.s\r\n+++ b/src/kem/ntru/pqclean_ntruhrss701_avx2/poly_s3_to_rq.s\r\n@@ -3113,6 +3113,6 @@ vpand const_1s(%rip), %ymm3, %ymm3\r\n vpor %ymm3, %ymm2, %ymm3\r\n vmovdqa %ymm3, 1376(%rsp)\r\n mov %rsp, %rsi\r\n-call PQCLEAN_NTRUHRSS701_AVX2_poly_Rq_mul_x_minus_1@plt\r\n+call PQCLEAN_NTRUHRSS701_AVX2_poly_Rq_mul_x_minus_1\r\n mov %r8, %rsp\r\n ret\r\n```","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/694369027","html_url":"https://github.com/open-quantum-safe/liboqs/issues/826#issuecomment-694369027","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/826","id":694369027,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDM2OTAyNw==","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars1.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2020-09-17T17:03:31Z","updated_at":"2020-09-17T17:03:31Z","author_association":"NONE","body":"> Does #827 resolve your problem?\r\n\r\nYes it does. thanks!","performed_via_github_app":null}},"public":true,"created_at":"2020-09-17T17:03:31Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
