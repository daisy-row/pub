{"id":"12991744342","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/794","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/794/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/794/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/794/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/794","id":663533656,"node_id":"MDExOlB1bGxSZXF1ZXN0NDU0OTI4OTMz","number":794,"title":"upstream dilithium","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars1.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-07-22T07:15:33Z","updated_at":"2020-07-23T04:44:55Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/794","html_url":"https://github.com/open-quantum-safe/liboqs/pull/794","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/794.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/794.patch"},"body":"This updates Dilithium with current upstream code from pqcrystals: Performance enhancements and added OSX support for AVX2 code. It also adds randomised signing behaviour and with this the KATs.\r\n\r\nCI tests ran successfully [here](https://app.circleci.com/pipelines/github/baentsch/liboqs/337/workflows/bbcd59e5-61af-42d3-a284-82d6f7beaaf7)\r\n\r\n* [Yes] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [No] Does this PR change the the list of algorithms available -- either adding or removing?  (If so, PRs in OQS-OpenSSL, OQS-BoringSSL, and OQS-OpenSSH will also be required by the time this is merged.)\r\n\r\n\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/662815968","html_url":"https://github.com/open-quantum-safe/liboqs/pull/794#issuecomment-662815968","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/794","id":662815968,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjgxNTk2OA==","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars1.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2020-07-23T04:44:55Z","updated_at":"2020-07-23T04:44:55Z","author_association":"MEMBER","body":"> For the subdirectories where the Dilithium code is kept, would you want to rename them from `pqclean_dilithium2_clean` to `pqcrystals_dilithium2_clean` etc.?\r\n\r\nI also thought about it, but No: I see direct upstream import only as an 'extension' option: In addition, with the announcement of the round 3 candidates now, I'd think there'll be a renewed interest to get the best and latest into the PQClean code base, so that eventually the folder name pqclean will not just represent the script adding the code to the repo but also the actual upstream repo.","performed_via_github_app":null}},"public":true,"created_at":"2020-07-23T04:44:55Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13000193473","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/796","id":664747851,"node_id":"MDExOlB1bGxSZXF1ZXN0NDU1OTM3Mjgx","number":796,"title":"Fix execute failures on Alpine","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"assignees":[{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-07-23T20:33:24Z","updated_at":"2020-07-23T20:41:00Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/796","html_url":"https://github.com/open-quantum-safe/liboqs/pull/796","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/796.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/796.patch"},"body":"<!-- Please give a brief explanation of the purpose of this pull request. -->\r\nAlgorithm failures in Alpine were due to the default small stack size of musl libc [[1]](https://www.rookout.com/blog/my-big-fat-alpine-crash), [[2]](https://wiki.musl-libc.org/functional-differences-from-glibc.html#:~:text=128k).  I've increased it using [`-Wl,-z,stack-size=N`](https://wiki.musl-libc.org/functional-differences-from-glibc.html#:~:text=stack-size=N) with N=16MB, but my solution isn't the most general because I'm just increasing it when compiling with GCC regardless of which platform or libc implementation is used; ideally we'd detect that musl libc is being used and only increase it in that case, but I don't know how to do that.\r\n\r\nThis also fixes two unrelated failures in other CI tests, one related to namespacing (liboqs.so on Alpine has two extra symbols, init and fini) and one related to a return code seemingly being different for xargs/grep.\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\nFixes #785.\r\n\r\n<!-- Please answer the following questions to help manage version and changes across projects. -->\r\n\r\n* [No] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [No] Does this PR change the the list of algorithms available -- either adding or removing?  (If so, PRs in OQS-OpenSSL, OQS-BoringSSL, and OQS-OpenSSH will also be required by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/663221708","html_url":"https://github.com/open-quantum-safe/liboqs/pull/796#issuecomment-663221708","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796","id":663221708,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzIyMTcwOA==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2020-07-23T20:41:00Z","updated_at":"2020-07-23T20:41:00Z","author_association":"MEMBER","body":"Apparently `add_link_options` was added to cmake in version [3.13](https://cmake.org/cmake/help/v3.13/command/add_link_options.html), but we're using cmake version 3.10 in our Ubuntu images.","performed_via_github_app":null}},"public":true,"created_at":"2020-07-23T20:41:00Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13000259478","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/796","id":664747851,"node_id":"MDExOlB1bGxSZXF1ZXN0NDU1OTM3Mjgx","number":796,"title":"Fix execute failures on Alpine","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"assignees":[{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-07-23T20:33:24Z","updated_at":"2020-07-23T20:49:08Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/796","html_url":"https://github.com/open-quantum-safe/liboqs/pull/796","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/796.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/796.patch"},"body":"<!-- Please give a brief explanation of the purpose of this pull request. -->\r\nAlgorithm failures in Alpine were due to the default small stack size of musl libc [[1]](https://www.rookout.com/blog/my-big-fat-alpine-crash), [[2]](https://wiki.musl-libc.org/functional-differences-from-glibc.html#:~:text=128k).  I've increased it using [`-Wl,-z,stack-size=N`](https://wiki.musl-libc.org/functional-differences-from-glibc.html#:~:text=stack-size=N) with N=16MB, but my solution isn't the most general because I'm just increasing it when compiling with GCC regardless of which platform or libc implementation is used; ideally we'd detect that musl libc is being used and only increase it in that case, but I don't know how to do that.\r\n\r\nThis also fixes two unrelated failures in other CI tests, one related to namespacing (liboqs.so on Alpine has two extra symbols, init and fini) and one related to a return code seemingly being different for xargs/grep.\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\nFixes #785.\r\n\r\n<!-- Please answer the following questions to help manage version and changes across projects. -->\r\n\r\n* [No] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [No] Does this PR change the the list of algorithms available -- either adding or removing?  (If so, PRs in OQS-OpenSSL, OQS-BoringSSL, and OQS-OpenSSH will also be required by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/663225081","html_url":"https://github.com/open-quantum-safe/liboqs/pull/796#issuecomment-663225081","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796","id":663225081,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzIyNTA4MQ==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2020-07-23T20:49:08Z","updated_at":"2020-07-23T20:49:08Z","author_association":"MEMBER","body":"> Apparently `add_link_options` was added to cmake in version [3.13](https://cmake.org/cmake/help/v3.13/command/add_link_options.html), but we're using cmake version 3.10 in our Ubuntu images.\r\n\r\nOptions are manually installing a newer version of cmake or switching to a later version of Ubuntu, e.g. Ubuntu 20.04LTS.","performed_via_github_app":null}},"public":true,"created_at":"2020-07-23T20:49:08Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13000510879","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/796","id":664747851,"node_id":"MDExOlB1bGxSZXF1ZXN0NDU1OTM3Mjgx","number":796,"title":"Fix execute failures on Alpine","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"assignees":[{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2020-07-23T20:33:24Z","updated_at":"2020-07-23T21:19:44Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/796","html_url":"https://github.com/open-quantum-safe/liboqs/pull/796","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/796.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/796.patch"},"body":"<!-- Please give a brief explanation of the purpose of this pull request. -->\r\nAlgorithm failures in Alpine were due to the default small stack size of musl libc [[1]](https://www.rookout.com/blog/my-big-fat-alpine-crash), [[2]](https://wiki.musl-libc.org/functional-differences-from-glibc.html#:~:text=128k).  I've increased it using [`-Wl,-z,stack-size=N`](https://wiki.musl-libc.org/functional-differences-from-glibc.html#:~:text=stack-size=N) with N=16MB, but my solution isn't the most general because I'm just increasing it when compiling with GCC regardless of which platform or libc implementation is used; ideally we'd detect that musl libc is being used and only increase it in that case, but I don't know how to do that.\r\n\r\nThis also fixes two unrelated failures in other CI tests, one related to namespacing (liboqs.so on Alpine has two extra symbols, init and fini) and one related to a return code seemingly being different for xargs/grep.\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\nFixes #785.\r\n\r\n<!-- Please answer the following questions to help manage version and changes across projects. -->\r\n\r\n* [No] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [No] Does this PR change the the list of algorithms available -- either adding or removing?  (If so, PRs in OQS-OpenSSL, OQS-BoringSSL, and OQS-OpenSSH will also be required by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/663238117","html_url":"https://github.com/open-quantum-safe/liboqs/pull/796#issuecomment-663238117","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/796","id":663238117,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzIzODExNw==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2020-07-23T21:19:43Z","updated_at":"2020-07-23T21:19:43Z","author_association":"MEMBER","body":"Okay, this should now only do the stack size increase when it's running on Alpine musl, and should be robust against CMake versions.  The Alpine musl detection is not done the proper way -- the proper way would probably be to actually link against libc and then detect what it was, but googling seems to indicate that that's hard, so instead I'm just checking for the presence of the string \"alpine-linux-musl\" in a certain CMAKE variable.\r\n\r\nTroublingly, we get Dilithium self-test and KAT failures on Alpine now (https://app.circleci.com/pipelines/github/open-quantum-safe/liboqs/900/workflows/727841fa-1060-4836-ba5e-ee2cf13664af/jobs/9084/tests), which seems related to #793.\r\n\r\nAt this point, @baentsch you can review and see if this seems to satisfy the main Alpine execute failures, and then we can focus on the Dilithium problems in #793.","performed_via_github_app":null}},"public":true,"created_at":"2020-07-23T21:19:44Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13000550574","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/793","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/793/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/793/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/793/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/793","id":663493113,"node_id":"MDU6SXNzdWU2NjM0OTMxMTM=","number":793,"title":"Investigate errors apparently triggered by -DOQS_PORTABLE_BUILD=OFF","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars1.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-07-22T05:49:30Z","updated_at":"2020-07-23T21:25:00Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"Similar issue to #732 : Using gcc8 in Centos-8, Dilithium self-tests and KAT tests fail when running AVX2 code. On no other platform and neither using clang on Centos-8, this problem surfaces.","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/663240161","html_url":"https://github.com/open-quantum-safe/liboqs/issues/793#issuecomment-663240161","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/793","id":663240161,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzI0MDE2MQ==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2020-07-23T21:25:00Z","updated_at":"2020-07-23T21:25:00Z","author_association":"MEMBER","body":"Dilithium self tests also fail for me on macOS with `env CC=gcc-8 cmake -GNinja -DOQS_PORTABLE_BUILD=OFF ..`.","performed_via_github_app":null}},"public":true,"created_at":"2020-07-23T21:25:00Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"13001020534","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/793","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/793/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/793/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/793/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/793","id":663493113,"node_id":"MDU6SXNzdWU2NjM0OTMxMTM=","number":793,"title":"Investigate errors apparently triggered by -DOQS_PORTABLE_BUILD=OFF","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars1.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-07-22T05:49:30Z","updated_at":"2020-07-23T22:31:52Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"Similar issue to #732 : Using gcc8 in Centos-8, Dilithium self-tests and KAT tests fail when running AVX2 code. On no other platform and neither using clang on Centos-8, this problem surfaces.","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/663264150","html_url":"https://github.com/open-quantum-safe/liboqs/issues/793#issuecomment-663264150","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/793","id":663264150,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzI2NDE1MA==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2020-07-23T22:31:52Z","updated_at":"2020-07-23T22:31:52Z","author_association":"MEMBER","body":"@baentsch:\r\n\r\nAlright, I've modified the Dilithium 2 code to print out a bunch of intermediate values, and compared the output of `tests/kat_sig DILITHIUM_2` when using `CC=gcc-8` versus `CC=clang`.  The first difference seems to occur inside `src/sig/dilithium/pqclean_dilithium2_avx2/rounding.c` function `power2round_avx`, specifically the variable `a0` ends up different when the code is executed using clang versus gcc-8.  \r\n\r\nNow here's where it gets trippy.  After I saw the difference by printing out `a0` at [commit `96aba2cf` line 51](https://github.com/open-quantum-safe/liboqs/commit/96aba2cfc45f48bdfd2fbd25b2e451e7636afd59#diff-4bf14b41c9f86fd0fee194aee2240b0cR51), I added some print statements inside `power2round_avx` to print out the values of intermediate values in commit https://github.com/open-quantum-safe/liboqs/commit/603bffa53d6e2780a06ecb86997629de79fcf8b7.  But when I added the print statements inside the for loop for variables `f`, `f1`, and `f0`, suddenly Dilithium2 with gcc-8 output the same values as with clang and passed the  KAT!!!   I don't know enough about intrinsics to know what those operations are doing, but in the past for me, differences in behaviour when print statements are added/removed speaks to memory corruption.  I'll stop here and leave it to you / the Dilithium team to investigate further.\r\n\r\nIn https://github.com/open-quantum-safe/liboqs/commit/13580f0f147b1ffd6a461db1eda9bc559128fdb8, I copied over the C version of power2round from the \"clean\" version of Dilithium, and it also causes the KATs to pass (at least for Dilithium 2, I didn't try for 3 and 4).  So using that could be a temporary fix if we wanted to get KATs passing and clear the build failures while the Dilithium team investigates the AVX2 bug.","performed_via_github_app":null}},"public":true,"created_at":"2020-07-23T22:31:52Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
