{"id":"21625622643","type":"IssueCommentEvent","actor":{"id":60347669,"login":"judowha","display_login":"judowha","gravatar_id":"","url":"https://api.github.com/users/judowha","avatar_url":"https://avatars.githubusercontent.com/u/60347669?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-05-05T01:26:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1118080668","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1118080668","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1118080668,"node_id":"IC_kwDOA_fpb85CpI6c","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"created_at":"2022-05-05T01:26:54Z","updated_at":"2022-05-05T01:26:54Z","author_association":"NONE","body":"Hi baentsch, after some experiments and discussion with my professor we thought that the problem should be multiple cores of the CPU. I created a VM on my own computer yesterday and I assign two cores to that VM, the test result is similar to my own ubuntu test result. Then I realized that on AWS, the VM is only assigned one core. \r\n\r\nI think the test on my own ubuntu maybe goes in this way:\r\nThe server will run on one core and the client will run on another core. That is the reason why the user second for the client in a 30 seconds test could be nearly 20 seconds (in theory it should be less than 15s).\r\n\r\nWhile in AWS VM, both server and client need to run in the same core so the user seconds for both of them is less than 15s\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1118080668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-05-05T01:26:54Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21634625122","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":288761656,"name":"open-quantum-safe/profiling","url":"https://api.github.com/repos/open-quantum-safe/profiling"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/74","repository_url":"https://api.github.com/repos/open-quantum-safe/profiling","labels_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/74/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/74/comments","events_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/74/events","html_url":"https://github.com/open-quantum-safe/profiling/issues/74","id":1226295929,"node_id":"I_kwDOETYnOM5JF8p5","number":74,"title":"Investigate gcc-11 profiling results on M1","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-05-05T07:29:46Z","updated_at":"2022-05-05T13:13:19Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"Accidentally, profiling on M1 ran on ubuntu-22 with gcc-11 on April 26+27 and May 1+2 before reverting back to debian-bullseye using gcc-10. Below some of the surprising performance deviations:\r\n\r\n![grafik](https://user-images.githubusercontent.com/57787676/166879009-75d66217-a961-430e-a29d-5905883f5c02.png)\r\n\r\n![grafik](https://user-images.githubusercontent.com/57787676/166879083-76aa55b7-e6e1-4b62-b1c1-962ff428133a.png)\r\n\r\n![grafik](https://user-images.githubusercontent.com/57787676/166879200-75749680-67c1-4c86-b6b6-1ed53aaaf0e5.png)\r\n\r\n![grafik](https://user-images.githubusercontent.com/57787676/166879249-e17b937d-4ec3-4b1d-b01e-990d31b4a84d.png)\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/74/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/74/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/comments/1118533234","html_url":"https://github.com/open-quantum-safe/profiling/issues/74#issuecomment-1118533234","issue_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/74","id":1118533234,"node_id":"IC_kwDOETYnOM5Cq3Zy","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2022-05-05T13:13:19Z","updated_at":"2022-05-05T13:13:19Z","author_association":"MEMBER","body":"Additional note: The runs on May1/2 used OpenSSL3.0.2; on the other days, OpenSSL1.1.1n was used.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/comments/1118533234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-05-05T13:13:20Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
