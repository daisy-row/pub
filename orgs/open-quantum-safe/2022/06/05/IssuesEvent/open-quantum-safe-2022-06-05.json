{"id":"22169065889","type":"IssuesEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1217","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1217/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1217/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1217/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1217","id":1258272971,"node_id":"I_kwDOA-eq3c5K_7jL","number":1217,"title":"Build fails on iOS due to missing `sys/random.h`","user":{"login":"zanebeckwith","id":4698352,"node_id":"MDQ6VXNlcjQ2OTgzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/4698352?v=4","gravatar_id":"","url":"https://api.github.com/users/zanebeckwith","html_url":"https://github.com/zanebeckwith","followers_url":"https://api.github.com/users/zanebeckwith/followers","following_url":"https://api.github.com/users/zanebeckwith/following{/other_user}","gists_url":"https://api.github.com/users/zanebeckwith/gists{/gist_id}","starred_url":"https://api.github.com/users/zanebeckwith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zanebeckwith/subscriptions","organizations_url":"https://api.github.com/users/zanebeckwith/orgs","repos_url":"https://api.github.com/users/zanebeckwith/repos","events_url":"https://api.github.com/users/zanebeckwith/events{/privacy}","received_events_url":"https://api.github.com/users/zanebeckwith/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-06-02T14:34:26Z","updated_at":"2022-06-05T18:05:24Z","closed_at":"2022-06-05T18:05:24Z","author_association":"NONE","active_lock_reason":null,"body":"I'm having trouble building this project for iOS, running into missing header issues with `sys/random.h`.\r\n\r\nIt looks like `src/common/rand/rand.c` includes this header for any platform that defines `__APPLE__`, which I believe iOS does (apologies, I'm not actually an iOS developer).\r\n\r\nUnfortunately, the iOS SDK does not provide `sys/random.h` (I believe access to either `getentropy` or even directly to `urandom` is not permitted in the iOS sandbox...)\r\n\r\nUsing `OQS_USE_OPENSSL` doesn't help, because the `#include <sys/random.h>` isn't guarded by that flag and so the header is included regardless.\r\n\r\nPotentially, a relatively-easy fix would be to change the `ifdef` guards to not attempt to `#include <sys/random.h>` if `OQS_USE_OPENSSL` is set. This would, I believe, allow building for iOS by just relying on OpenSSL's PRNG.\r\n\r\nAdditionally, it might be nice to support iOS's PRNG API `SecRandomCopyBytes`.\r\n\r\nI apologize if I've missed something either in this project or in iOS development!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1217/timeline","performed_via_github_app":null,"state_reason":"completed"}},"public":true,"created_at":"2022-06-05T18:05:25Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"22169309844","type":"IssuesEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":113904471,"name":"open-quantum-safe/openssh","url":"https://api.github.com/repos/open-quantum-safe/openssh"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssh/issues/122","repository_url":"https://api.github.com/repos/open-quantum-safe/openssh","labels_url":"https://api.github.com/repos/open-quantum-safe/openssh/issues/122/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssh/issues/122/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssh/issues/122/events","html_url":"https://github.com/open-quantum-safe/openssh/issues/122","id":1253918724,"node_id":"I_kwDOBsoLV85KvUgE","number":122,"title":"run_test fails","user":{"login":"Yamin88","id":6021645,"node_id":"MDQ6VXNlcjYwMjE2NDU=","avatar_url":"https://avatars.githubusercontent.com/u/6021645?v=4","gravatar_id":"","url":"https://api.github.com/users/Yamin88","html_url":"https://github.com/Yamin88","followers_url":"https://api.github.com/users/Yamin88/followers","following_url":"https://api.github.com/users/Yamin88/following{/other_user}","gists_url":"https://api.github.com/users/Yamin88/gists{/gist_id}","starred_url":"https://api.github.com/users/Yamin88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Yamin88/subscriptions","organizations_url":"https://api.github.com/users/Yamin88/orgs","repos_url":"https://api.github.com/users/Yamin88/repos","events_url":"https://api.github.com/users/Yamin88/events{/privacy}","received_events_url":"https://api.github.com/users/Yamin88/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2022-05-31T14:02:53Z","updated_at":"2022-06-05T18:49:59Z","closed_at":"2022-06-05T18:49:59Z","author_association":"NONE","active_lock_reason":null,"body":"Several algorithms didn't work properly \r\n\r\ndidn't learn ssh-rsa3072-falcon512 correctly\r\nlearn additional hostkeys, type=ssh-rsa3072-dilithium2aes\r\nlearn hostkeys ssh-rsa3072-dilithium2aes (got 1 wanted 30)\r\ndidn't learn ssh-rsa3072-dilithium2aes correctly\r\nlearn additional hostkeys, type=ssh-rsa3072-picnicL1full\r\nlearn hostkeys ssh-rsa3072-picnicL1full (got 1 wanted 30)\r\ndidn't learn ssh-rsa3072-picnicL1full correctly\r\nlearn additional hostkeys, type=ssh-rsa3072-sphincsharaka128fsimple\r\nlearn hostkeys ssh-rsa3072-sphincsharaka128fsimple (got 1 wanted 30)\r\ndidn't learn ssh-rsa3072-sphincsharaka128fsimple correctly\r\nlearn additional hostkeys, type=ssh-ecdsa-nistp256-falcon512\r\nlearn hostkeys ssh-ecdsa-nistp256-falcon512 (got 1 wanted 30)\r\ndidn't learn ssh-ecdsa-nistp256-falcon512 correctly\r\nlearn additional hostkeys, type=ssh-ecdsa-nistp521-falcon1024\r\nlearn hostkeys ssh-ecdsa-nistp521-falcon1024 (got 1 wanted 30)\r\ndidn't learn ssh-ecdsa-nistp521-falcon1024 correctly\r\nlearn additional hostkeys, type=ssh-ecdsa-nistp384-dilithium3\r\nlearn hostkeys ssh-ecdsa-nistp384-dilithium3 (got 1 wanted 30)\r\n.\r\n.\r\n.\r\nAnother issue at the end of executing this command, see below\r\n\r\nold key present\r\ndidn't learn changed key\r\ncheck rotate primary hostkey\r\nssh -oStrictHostKeyChecking=yes -oHostKeyAlgorithms=ssh-ed25519 **failed**\r\ndidn't learn changed key\r\nfailed hostkey rotate\r\nmake[1]: *** [Makefile:224: t-exec] **Error 1**\r\nmake[1]: Leaving directory '/home/yaser/openssh/regress'\r\nmake: *** [Makefile:730: t-exec] **Error 2**\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssh/issues/122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssh/issues/122/timeline","performed_via_github_app":null,"state_reason":"completed"}},"public":true,"created_at":"2022-06-05T18:50:00Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
