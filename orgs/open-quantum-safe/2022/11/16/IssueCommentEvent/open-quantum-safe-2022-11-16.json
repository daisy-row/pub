{"id":"25267215499","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1296","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1296/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1296/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1296/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1296","id":1349254894,"node_id":"I_kwDOA-eq3c5Qa_7u","number":1296,"title":"Error when building liboqs on ARM (armeabi-v7a, Android 11, root)","user":{"login":"ilovevkapi","id":107703095,"node_id":"U_kgDOBmtrNw","avatar_url":"https://avatars.githubusercontent.com/u/107703095?v=4","gravatar_id":"","url":"https://api.github.com/users/ilovevkapi","html_url":"https://github.com/ilovevkapi","followers_url":"https://api.github.com/users/ilovevkapi/followers","following_url":"https://api.github.com/users/ilovevkapi/following{/other_user}","gists_url":"https://api.github.com/users/ilovevkapi/gists{/gist_id}","starred_url":"https://api.github.com/users/ilovevkapi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilovevkapi/subscriptions","organizations_url":"https://api.github.com/users/ilovevkapi/orgs","repos_url":"https://api.github.com/users/ilovevkapi/repos","events_url":"https://api.github.com/users/ilovevkapi/events{/privacy}","received_events_url":"https://api.github.com/users/ilovevkapi/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2022-08-24T10:57:53Z","updated_at":"2022-11-16T06:06:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello. I need to build liboqs on Android to develop a command-line HTTPS client with post-quantum cryptography support. I followed all instructions for building on Linux (because Android is actually Linux distributive). But got a compiling error at `ninja` step.\r\nHere is what i did, and what I saw in terminal:\r\n\r\n0. I have used [Termux](https://github.com/termux/termux-app?) as Linux-environment for Android.\r\n1. I have ran `apt install astyle cmake gcc ninja-build libssl-dev python3-pytest python3-pytest-xdist unzip xsltproc doxygen graphviz python3-yaml valgrind`, output was: \r\n```\r\nChecking availability of current mirror: ok\r\n...\r\nE:  Unable to locate package astyle\r\nE:  Package gcc has no installation candidate, use libllvm instead\r\nE:  Package ninja-build has no installation candidate, use ninja instead\r\nE:  Package libssl-dev has no installation candidate, use openssl instead\r\nE:  Package python3-pytest has no installation candidate, use 'pip install pytest' instead\r\nE:  Package python3-pytest-xdist has no installation candidate, use 'pip install pytest-xdist' instead\r\nE:  Package python3-yaml has no installation candidate, use 'pip install pyYAML' instead\r\n```\r\nFinally, I have installed all these packages manually, except for `astyle, graphviz`. (I haven't found any ARM-versions of them).\r\nThis is what happened after:\r\n\r\n2. Did `git clone https://github.com/open-quantum-safe/liboqs.git`. Output was OK.\r\n3. Did `cd liboqs && mkdir build && cd build`. OK too.\r\n4. Did `cmake -GNinja ..` Output was:\r\n```\r\n-- The C compiler identification is Clang 14.0.6\r\n-- The ASM compiler identification is Clang with GNU-like command-line\r\n-- Found assembler: /data/data/com.termux/files/usr/bin/cc\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Check for working C compiler: /data/data/com.termux/files/usr/bin/cc - skipped\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\nCMake Warning at .CMake/compiler_opts.cmake:44 (message):\r\n  Setting OQS_OPT_TARGET=AUTO may not produce optimized code on this system.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:111 (include)\r\n\r\n\r\n-- Looking for pthread.h\r\n-- Looking for pthread.h - found\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Failed\r\n-- Check if compiler accepts -pthread\r\n-- Check if compiler accepts -pthread - yes\r\n-- Found Threads: TRUE\r\n-- Found OpenSSL: /data/data/com.termux/files/usr/lib/libcrypto.so (found suitable version \"3.0.3\", minimum required is \"1.1.1\")\r\n-- Found Doxygen: /data/data/com.termux/files/usr/bin/doxygen (found version \"1.9.4\") found components: doxygen missing components: dot\r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /data/data/com.termux/files/home/sys/liboqs/build\r\n```\r\nI think its okay, like previous.\r\n\r\n5. Bulding with `ninja`, error is here, while processing \"common.c.o\" by `ninja`. Of course, full output:\r\n```\r\n~/sys/liboqs/build $ sudo ninja\r\n[1/1067] Building C object src/common/CMakeFiles/common.dir/common.c.o\r\nFAILED: src/common/CMakeFiles/common.dir/common.c.o\r\n/data/data/com.termux/files/usr/bin/cc -I/data/data/com.termux/files/home/sys/liboqs/build/include -O2 -g -DNDEBUG -fPIC -fvisibility=hidden -Werror -Wall -Wextra -Wpedantic -Wno-unused-command-line-argument -g3 -fno-omit-frame-pointer -Wbad-function-cast -Wcast-qual -Wnarrowing -Wconversion -std=gnu11 -MD -MT src/common/CMakeFiles/common.dir/common.c.o -MF src/common/CMakeFiles/common.dir/common.c.o.d -o src/common/CMakeFiles/common.dir/common.c.o -c /data/data/com.termux/files/home/sys/liboqs/src/common/common.c\r\n/data/data/com.termux/files/home/sys/liboqs/src/common/common.c:251:9: error: implicitly declaring library function 'aligned_alloc' with type 'void *(unsigned int, unsigned int)' [-Werror,-Wimplicit-function-declaration]\r\n        return aligned_alloc(alignment, size);\r\n               ^\r\n/data/data/com.termux/files/home/sys/liboqs/src/common/common.c:251:9: note: include the header <stdlib.h> or explicitly provide a declaration for 'aligned_alloc'\r\n1 error generated.\r\n[10/1067] Building C object src/co...eFiles/common.dir/aes/aes_ossl.c.\r\nninja: build stopped: subcommand failed.\r\n```\r\n\r\nPlease help me to properly compile the library, if you understand where is the problem and how to do it.\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1296/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1316416550","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1296#issuecomment-1316416550","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1296","id":1316416550,"node_id":"IC_kwDOA-eq3c5Oduwm","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2022-11-16T06:06:34Z","updated_at":"2022-11-16T06:06:34Z","author_association":"MEMBER","body":"@ilovevkapi Did you check whether @sebastinas fix resolves the issue for you? We'd close the issue due to inactivity otherwise.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1316416550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-11-16T06:06:35Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
