{"id":"21552722337","type":"IssueCommentEvent","actor":{"id":102834825,"login":"qianwan4","display_login":"qianwan4","gravatar_id":"","url":"https://api.github.com/users/qianwan4","avatar_url":"https://avatars.githubusercontent.com/u/102834825?"},"repo":{"id":218087071,"name":"open-quantum-safe/oqs-demos","url":"https://api.github.com/repos/open-quantum-safe/oqs-demos"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/141","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/141/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/141/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/141/events","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/141","id":1214935650,"node_id":"I_kwDODP--n85IanJi","number":141,"title":"will wrk or wrk2 (HTTP benchmarking tool) work for testing the OQS-NGINX server?","user":{"login":"qianwan4","id":102834825,"node_id":"U_kgDOBiEiiQ","avatar_url":"https://avatars.githubusercontent.com/u/102834825?v=4","gravatar_id":"","url":"https://api.github.com/users/qianwan4","html_url":"https://github.com/qianwan4","followers_url":"https://api.github.com/users/qianwan4/followers","following_url":"https://api.github.com/users/qianwan4/following{/other_user}","gists_url":"https://api.github.com/users/qianwan4/gists{/gist_id}","starred_url":"https://api.github.com/users/qianwan4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qianwan4/subscriptions","organizations_url":"https://api.github.com/users/qianwan4/orgs","repos_url":"https://api.github.com/users/qianwan4/repos","events_url":"https://api.github.com/users/qianwan4/events{/privacy}","received_events_url":"https://api.github.com/users/qianwan4/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-04-25T19:16:25Z","updated_at":"2022-04-30T00:13:08Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I would like to benchmark the performance of OQS enabled server. But it turns out the openssl s-time returns the performance of user secs which I assume it is mainly on the client side. \r\nI wonder will the OQS-NGINX server supports wrk or wrk2. \r\nOr is there any other benchmarking tools could be used to test the server?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/141/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1113870931","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/141#issuecomment-1113870931","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/141","id":1113870931,"node_id":"IC_kwDODP--n85CZFJT","user":{"login":"qianwan4","id":102834825,"node_id":"U_kgDOBiEiiQ","avatar_url":"https://avatars.githubusercontent.com/u/102834825?v=4","gravatar_id":"","url":"https://api.github.com/users/qianwan4","html_url":"https://github.com/qianwan4","followers_url":"https://api.github.com/users/qianwan4/followers","following_url":"https://api.github.com/users/qianwan4/following{/other_user}","gists_url":"https://api.github.com/users/qianwan4/gists{/gist_id}","starred_url":"https://api.github.com/users/qianwan4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qianwan4/subscriptions","organizations_url":"https://api.github.com/users/qianwan4/orgs","repos_url":"https://api.github.com/users/qianwan4/repos","events_url":"https://api.github.com/users/qianwan4/events{/privacy}","received_events_url":"https://api.github.com/users/qianwan4/received_events","type":"User","site_admin":false},"created_at":"2022-04-30T00:13:07Z","updated_at":"2022-04-30T00:13:07Z","author_association":"NONE","body":"Thanks for your reply.\r\nI did try using _wrk_ to connect the OQS-NGINX server (build using the docker image)\r\nActually I have got some responses back. But as you noticed that, there is no trigger to select algorithm as ('--curves' parameter) \r\nI wonder it may use the default ECDHE instead of any PQC key exchange algorithms.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1113870931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-30T00:13:08Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21553759299","type":"IssueCommentEvent","actor":{"id":60347669,"login":"judowha","display_login":"judowha","gravatar_id":"","url":"https://api.github.com/users/judowha","avatar_url":"https://avatars.githubusercontent.com/u/60347669?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-30T03:59:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113908642","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1113908642","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1113908642,"node_id":"IC_kwDOA_fpb85CZOWi","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"created_at":"2022-04-30T03:59:05Z","updated_at":"2022-04-30T03:59:05Z","author_association":"NONE","body":"> Do you know which frequency the VMs are working at?\r\n\r\nThe VM has one core and it is working in 2.4GHZ\r\n\r\n> did you not set --prefix when configuring oqs-openssl and then run make install\r\n\r\nI follow the instruction on oqs-openssl GitHub and I just found the original 1.1.1 version. My test result is the same as you, the p521 connection times on OpenSSL 1.1.1 is indeed much more than it on OpenSSL 1.1.1n (nearly twice).\r\n\r\n> Another question is that does the p521 on OpenSSL 1.1.1n of VM works normally?\r\n\r\nSorry for the misleading words. What I want to ask is that: SInce p521_dilithium5 and p521 seem to work well in VM, does it means the performance of p521 on VM's OpenSSL 1.1.1n does not drop? However, I just test it on VM and I get a similar result as my laptop. Testing p521 on OpenSSL 1.1.1 is nearly twice faster than testing it on 1.1.1n.\r\n\r\nYou mentioned that the performance drop may be due to many reasons and you are working on it so I just leave it alone now. I still have another question:\r\nWhy the performance of p521_dilithium5 is better than the performance of p521 on laptop ubuntu, but it reverses when testing on VM ubuntu? \r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113908642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-30T03:59:05Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21554217697","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-30T05:52:21Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113925154","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1113925154","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1113925154,"node_id":"IC_kwDOA_fpb85CZSYi","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2022-04-30T05:52:21Z","updated_at":"2022-04-30T05:52:21Z","author_association":"MEMBER","body":"> Why the performance of p521_dilithium5 is better than the performance of p521 on laptop ubuntu, but it reverses when testing on VM ubuntu?\r\n\r\nI do not understand this either right now.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113925154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-30T05:52:21Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21554379424","type":"IssueCommentEvent","actor":{"id":60347669,"login":"judowha","display_login":"judowha","gravatar_id":"","url":"https://api.github.com/users/judowha","avatar_url":"https://avatars.githubusercontent.com/u/60347669?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-30T06:31:11Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113929392","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1113929392","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1113929392,"node_id":"IC_kwDOA_fpb85CZTaw","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"created_at":"2022-04-30T06:31:11Z","updated_at":"2022-04-30T06:31:11Z","author_association":"NONE","body":">Why the performance of p521_dilithium5 is better than the performance of p521 on laptop ubuntu, but it reverses when testing on VM ubuntu?\r\n\r\nWhat I mean here is: on my computer, p521_dilithium5(1475 connections) has more connections than p521(1170 connections). However, on VM, p521_dilithium5(1106 connections) has fewer connections than p521(1246). I wonder why my computer ubuntu behaves differently compare to VM ubuntu? Sorry again for my bad expression. ","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113929392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-30T06:31:11Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21554926878","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-30T08:39:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113949908","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1113949908","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1113949908,"node_id":"IC_kwDOA_fpb85CZYbU","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2022-04-30T08:39:05Z","updated_at":"2022-04-30T08:39:05Z","author_association":"MEMBER","body":"Yes, sorry, I understood your statement -- I meant to say that I (also) do not understand why a hybrid algorithm can be doing more connections than the constituent, classic-only variant on a local machine (also on mine). The VM behaviour is as expected. With the same compiler and OS -- surprising, indeed. Did you already try whether this also happens for other algorithm combinations?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113949908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-30T08:39:05Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21556350671","type":"IssueCommentEvent","actor":{"id":60347669,"login":"judowha","display_login":"judowha","gravatar_id":"","url":"https://api.github.com/users/judowha","avatar_url":"https://avatars.githubusercontent.com/u/60347669?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-30T13:38:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113990763","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1113990763","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1113990763,"node_id":"IC_kwDOA_fpb85CZiZr","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"created_at":"2022-04-30T13:38:55Z","updated_at":"2022-04-30T13:38:55Z","author_association":"NONE","body":"> Did you already try whether this also happens for other algorithm combinations?\r\n\r\nYeah, I tried all levels of dilithium and falcon. So far dilithium5 and dilithium3 have this problem. Others are ok.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113990763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-30T13:38:55Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21556381814","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-30T13:44:21Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113991494","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1113991494","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1113991494,"node_id":"IC_kwDOA_fpb85CZilG","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2022-04-30T13:44:21Z","updated_at":"2022-04-30T13:44:21Z","author_association":"MEMBER","body":"> Others are ok.\r\n\r\nVery weird. What if RSA is the classic alg instead of EC/p521?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113991494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-30T13:44:21Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21556467056","type":"IssueCommentEvent","actor":{"id":60347669,"login":"judowha","display_login":"judowha","gravatar_id":"","url":"https://api.github.com/users/judowha","avatar_url":"https://avatars.githubusercontent.com/u/60347669?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-30T14:01:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113994113","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1113994113","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1113994113,"node_id":"IC_kwDOA_fpb85CZjOB","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"created_at":"2022-04-30T14:01:23Z","updated_at":"2022-04-30T14:01:23Z","author_association":"NONE","body":"> What if RSA is the classic alg instead of EC/p521? \r\n\r\nI just tested it. dilithium2 and dilithium2-AES with RSA3072 also connect more than pure RSA3072.\r\nAlso, I forget to mention that dilithium5-AES and dilithium3-AES also have this problem when the classic alg is ECDSA\r\n\r\nNow it seems that all dilithium algo have this problem but falcon do not have. ","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113994113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-30T14:01:23Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21556553475","type":"IssueCommentEvent","actor":{"id":60347669,"login":"judowha","display_login":"judowha","gravatar_id":"","url":"https://api.github.com/users/judowha","avatar_url":"https://avatars.githubusercontent.com/u/60347669?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-30T14:17:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113996443","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1113996443","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1113996443,"node_id":"IC_kwDOA_fpb85CZjyb","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"created_at":"2022-04-30T14:17:53Z","updated_at":"2022-04-30T14:17:53Z","author_association":"NONE","body":"Another weird thing is VM seems always run fewer user seconds than my local ubuntu. For example:\r\n\r\nrsa3072_falcon on VM:\r\n> 2018 connections in 10.79s; 187.03 connections/user sec, bytes read 0\r\n2018 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nrsa3072_falcon on local:\r\n>3283 connections in 15.22s; 215.70 connections/user sec, bytes read 0\r\n3283 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nIn theory the user seconds spent on the user side should be less than 15s. Here again, VM behaves as expected but local ubuntu behave differently. ","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113996443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-30T14:17:53Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
