{"id":"21534018839","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-29T05:22:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1112886937","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1112886937","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1112886937,"node_id":"IC_kwDOA_fpb85CVU6Z","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2022-04-29T05:22:34Z","updated_at":"2022-04-29T05:22:34Z","author_association":"MEMBER","body":"Somewhat strange, indeed. However, your test file does not contain the plain p521 components, so I can't reproduce exactly using your setup. Please also share information about your local ubuntu box: How many cores does it have? What is it doing during the test? Please share the output of `speed_sig Dilithium5` on both platforms. Are you certain to use the same OpenSSL versions in both setups?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1112886937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-29T05:22:34Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21535299561","type":"IssueCommentEvent","actor":{"id":60347669,"login":"judowha","display_login":"judowha","gravatar_id":"","url":"https://api.github.com/users/judowha","avatar_url":"https://avatars.githubusercontent.com/u/60347669?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-29T06:55:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1112931797","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1112931797","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1112931797,"node_id":"IC_kwDOA_fpb85CVf3V","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"created_at":"2022-04-29T06:55:14Z","updated_at":"2022-04-29T06:55:14Z","author_association":"NONE","body":"Hi Baentsch, thanks for your reply.\r\n\r\n> your test file does not contain the plain p521 components\r\n\r\nI am not very clear about what 'plain p521 components' are. If you mean the commands used to set up the p521 certificate, I added it into the zip file here [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8588607/testFile.zip). The file `ecdsa` is to used to set up p521 certificate. Run `./ecdsa secp521r1`; The file `environment_generator` is to used to set up p521_dilithium5 certificate. Run `./environment_generator p521_dilithium5`.\r\n\r\n>Please also share information about your local ubuntu box\r\n\r\nSorry again I am not sure what a ubuntu box is. Would you please explain more for this question?\r\n\r\n> Please share the output of speed_sig Dilithium5 on both platforms. Are you certain to use the same OpenSSL versions in both setups?\r\n\r\n`openssl speed dilithium5` result on my laptop:\r\n>                                     sign    verify   sign/s  verify/s\r\n>                     dilithium5:   0.0002s   0.0001s   4342.7   8928.8\r\n\r\non AWS VM:\r\n>                                    sign    verify   sign/s  verify/s\r\n>                   dilithium5:   0.0002s   0.0001s   4153.7   9453.7\r\n\r\nThe OpenSSL version on both sides is:\r\n> OpenSSL 1.1.1n  15 Mar 2022, Open Quantum Safe 2022-03 dev\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1112931797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-29T06:55:14Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21536375503","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-29T07:56:45Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1112989000","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1112989000","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1112989000,"node_id":"IC_kwDOA_fpb85CVt1I","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2022-04-29T07:56:45Z","updated_at":"2022-04-29T07:56:45Z","author_association":"MEMBER","body":"> I am not very clear about what 'plain p521 components' are. \r\n\r\nYour initial test ZIP only contained p256 components, not p521; your most recent ZIP contains the right \"plain\" (non-QSC) material, thanks.\r\n\r\n> Sorry again I am not sure what a ubuntu box is. Would you please explain more for this question?\r\n\r\nSorry for my slang: I meant your local computer (laptop) running ubuntu.\r\n\r\n> Please share the output of speed_sig Dilithium5 on both platforms.\r\n\r\nWith this I do not refer to `openssl speed` but to the `liboqs` test program `speed_sig`: It also displays information about the platform that can help discover discrepancies. This executable should be built when you compile `liboqs`.\r\n\r\nNow, after running your test setup I found similar results that you did (more hybrid connections than p521-only connections). But I also found many more connection establishments when running a stock/system openssl with the p521-only setup: To me this might indicate a non-optimal/optimized default build of oqs-openssl. This can explain a lot... Maybe you want to verify this also on your machine (run once with standard openssl, once with oqs-openssl). We'd then need to determine whether there are configuration switches we didn't properly use or whether p521 performance in a recent openssl dropped.... Maybe worth investigating: Test performance of p521 in openssl 1.1.1n and 1.1.1 (default on my laptop)...","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1112989000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-29T07:56:45Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21537692291","type":"IssueCommentEvent","actor":{"id":60347669,"login":"judowha","display_login":"judowha","gravatar_id":"","url":"https://api.github.com/users/judowha","avatar_url":"https://avatars.githubusercontent.com/u/60347669?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-29T09:04:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113080205","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1113080205","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1113080205,"node_id":"IC_kwDOA_fpb85CWEGN","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"created_at":"2022-04-29T09:04:33Z","updated_at":"2022-04-29T09:04:33Z","author_association":"NONE","body":"Thanks for your clarify.\r\n\r\n> How many cores does it have? What is it doing during the test?\r\n\r\nHere is my CPU information:\r\n![Screenshot from 2022-04-29 16-56-26](https://user-images.githubusercontent.com/60347669/165914644-336c1031-e5d9-4a84-8adf-1db875fa53bc.png)\r\nDuring the testing I set the working frequency of every core to be 2.2GHZ and they indeed working in this frequency.\r\n\r\n> What is it doing during the test? Please share the output of speed_sig Dilithium5 on both platforms\r\nOn my laptop:\r\n![Screenshot from 2022-04-29 16-52-24](https://user-images.githubusercontent.com/60347669/165914794-a19a1af5-29eb-45e0-878e-f36fa000c2af.png)\r\nOn AWS VM:\r\n![Screenshot from 2022-04-29 16-52-53](https://user-images.githubusercontent.com/60347669/165914826-5dcccb15-7ef4-40d3-a945-0dfb43ba39cf.png)\r\n\r\n> Maybe you want to verify this also on your machine (run once with standard openssl, once with oqs-openssl)\r\nI would like to verify this on my laptop. However, after installing the OpenSSL 1.1.1n I couldn't find my original OpenSSL 1.1.1 . Do you have any ways to find it? Another question is that does the p521 on OpenSSL 1.1.1n of VM works normally? If it does then I consider to move the project project to VM since it seems to be more reasonable and accurate. \r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113080205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-29T09:04:34Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21540259525","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/367","id":1219737265,"node_id":"I_kwDOA_fpb85Is7ax","number":367,"title":"performance testing of hybrid signature algorithm","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-04-29T03:42:25Z","updated_at":"2022-04-29T11:18:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI am testing the performance of mutual connection using OpenSSL 1.1.1n on Ubuntu 18.04. Here is my OS information:\r\n`Linux version 5.4.0-109-generic (buildd@ubuntu) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #123~18.04.1-Ubuntu SMP Fri Apr 8 09:48:52 UTC 2022`\r\n\r\nThe certificate chain of a test group is created in this way:\r\n```\r\nRootCA\r\n├── server\r\n│   \r\n└── client\r\n```\r\nIn a test group, both server and client will be signed by the same signature algorithm.\r\n\r\nHere is some of my test result:\r\n- p521_dilithium5\r\n\r\n  > 1475 connections in 20.49s; 71.99 connections/user sec, bytes read 0\r\n  > 1475 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- p521\r\n\r\n  > 1170 connections in 14.99s; 78.05 connections/user sec, bytes read 0\r\n  > 1170 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThe result is not as my expectation. In theory, the total connection times of p521_dilithium5 should be less than p521 since p521 has a better performance than p521_dilithium5. Another point is that the user seconds spent should be less than 15s because the server and the client are doing a similar thing during the connection. But here p521_dilithium5 spends 20.49s on the client-side. \r\n\r\nTo be more convinced I reproduce the test on an AWS VM. Here is the VM information:\r\n`Linux version 5.4.0-1071-aws (buildd@lcy02-amd64-020) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #76~18.04.1-Ubuntu SMP Mon Mar 28 17:49:57 UTC 2022`\r\n- p521_dilithium5\r\n\r\n  > 1106 connections in 12.92s; 85.60 connections/user sec, bytes read 0\r\n  > 1106 connections in 31 real seconds, 0 bytes read per connection\r\n- p521\r\n\r\n  > 1246 connections in 13.16s; 94.68 connections/user sec, bytes read 0\r\n  > 1246 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nHere the result seems to be much more reasonable. \r\n\r\nNow I am not sure does this problem happens only on my ubuntu system or is it a general problem? I only have one computer with the Ubuntu system so could anyone please help me to reproduce the test on your ubuntu system?  \r\n\r\nHere is my test file: [testFile.zip](https://github.com/open-quantum-safe/openssl/files/8587935/testFile.zip)\r\n\r\nTo run the shell file, you may need to run `chmod777 start_server` and `chmod777 start_test` first\r\n\r\nTo start the server, run:\r\n`./start_server ALGO PROT` e.g. `./start_server prime521v1 4433`\r\n\r\nThen start the test:\r\n`./start_test ALGO PROT` e.g. `./start_test prime521v1 4433`\r\n\r\nThanks a lot if anyone would like to help me! \r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113188390","html_url":"https://github.com/open-quantum-safe/openssl/issues/367#issuecomment-1113188390","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/367","id":1113188390,"node_id":"IC_kwDOA_fpb85CWegm","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2022-04-29T11:18:27Z","updated_at":"2022-04-29T11:18:27Z","author_association":"MEMBER","body":"> During the testing I set the working frequency of every core to be 2.2GHZ and they indeed working in this frequency.\r\n\r\nGood. Do you know which frequency the VMs are working at?\r\n\r\n> Do you have any ways to find it?\r\n\r\nWhat about the usual `find` command? Or did you really install oqs-openssl instead of the standard openssl (i.e., did you _not_ set `--prefix` when configuring oqs-openssl and then run `make install`)?\r\n\r\n> Another question is that does the p521 on OpenSSL 1.1.1n of VM works normally?\r\n\r\nI do not understand this question. Are you saying the openssl on the VMs is also not accessible any more? I'd then suggest to set up an empty VM and do a baseline openssl test first (and use `--prefix` to avoid installing oqs-openssl in a standard system location).","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1113188390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-29T11:18:27Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"21543433407","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1203","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1203/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1203/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1203/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1203","id":1211834719,"node_id":"I_kwDOA-eq3c5IOyFf","number":1203,"title":"Suggestion: make the project header-only","user":{"login":"DevelopDaily","id":54299975,"node_id":"MDQ6VXNlcjU0Mjk5OTc1","avatar_url":"https://avatars.githubusercontent.com/u/54299975?v=4","gravatar_id":"","url":"https://api.github.com/users/DevelopDaily","html_url":"https://github.com/DevelopDaily","followers_url":"https://api.github.com/users/DevelopDaily/followers","following_url":"https://api.github.com/users/DevelopDaily/following{/other_user}","gists_url":"https://api.github.com/users/DevelopDaily/gists{/gist_id}","starred_url":"https://api.github.com/users/DevelopDaily/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DevelopDaily/subscriptions","organizations_url":"https://api.github.com/users/DevelopDaily/orgs","repos_url":"https://api.github.com/users/DevelopDaily/repos","events_url":"https://api.github.com/users/DevelopDaily/events{/privacy}","received_events_url":"https://api.github.com/users/DevelopDaily/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-04-22T05:19:20Z","updated_at":"2022-04-29T13:52:45Z","closed_at":"2022-04-29T13:52:45Z","author_association":"NONE","active_lock_reason":null,"body":"Is there any particular reason to implement this project by separating the header files `*.h` and the implementation files `*.c`\r\n\r\nI think this project is suitable for header-only implementation. It never intends to make the library link-only because its permissive MIT license encourages the user to reference the source code directly. Header-only projects would serve a wider community. For example, any WASM applications will automatically build because it is just a matter of a single `#include <oqs.h>` statement in the existing applications without any modification of the existing build process.\r\n\r\nThe renowned `Boost C++` project is a credible header-only example. The [Quantum++](https://github.com/softwareQinc/qpp) in the quantum computing community is another good example.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1203/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1113336928","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1203#issuecomment-1113336928","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1203","id":1113336928,"node_id":"IC_kwDOA-eq3c5CXCxg","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2022-04-29T13:52:45Z","updated_at":"2022-04-29T13:52:45Z","author_association":"MEMBER","body":"We discussed this in our weekly status meeting, and we think that the project itself should stay with the standard C paradigm of separating headers and implementations. We'd be willing to accept as PR a script that generates an appropriate header-only version as needed for specialized scenarios. But for now we'll close this issue.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1113336928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-04-29T13:52:45Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
