{"id":"19834868162","type":"IssuesEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1164","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1164/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1164/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1164/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1164","id":1086142726,"node_id":"I_kwDOA-eq3c5AvTkG","number":1164,"title":"Build failures with gcc on Apple M1","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[{"id":423520874,"node_id":"MDU6TGFiZWw0MjM1MjA4NzQ=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/milestones/19","html_url":"https://github.com/open-quantum-safe/liboqs/milestone/19","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/milestones/19/labels","id":7503904,"node_id":"MI_kwDOA-eq3c4AcoAg","number":19,"title":"0.7.2","description":"","creator":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":5,"state":"open","created_at":"2021-12-20T15:58:32Z","updated_at":"2022-01-20T15:27:46Z","due_on":null,"closed_at":null},"comments":8,"created_at":"2021-12-21T19:07:36Z","updated_at":"2022-01-20T15:27:46Z","closed_at":"2022-01-20T15:27:46Z","author_association":"MEMBER","active_lock_reason":null,"body":"Building liboqs with gcc-11 on an Apple M1 Mac yields build failures related to Kyber and Saber NTT code.\r\n\r\nReproduce by checking out 0.7.1, and then running `cmake -GNinja -DCMAKE_C_COMPILER=gcc-11 ..`.  (Note that there are other build failures on HEAD when building with gcc-11 on macOS which are independent of this which I'll create a separate issue for.)\r\n\r\n```\r\n[667/1230] Building ASM object src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_base_mul.S.o\r\nFAILED: src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_base_mul.S.o \r\n/opt/homebrew/bin/gcc-11  -I/Users/dstebila/Dev/OQS/liboqs/build/include -I/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64 -I/Users/dstebila/Dev/OQS/liboqs/src/common/pqclean_shims -arch arm64 -fPIC -mcpu=native -Werror -Wall -Wextra -Wpedantic -Wstrict-prototypes -Wshadow -Wformat=2 -Wfloat-equal -Wwrite-strings -O3 -fomit-frame-pointer -fdata-sections -ffunction-sections -Wl,-dead_strip -MD -MT src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_base_mul.S.o -MF src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_base_mul.S.o.d -o src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_base_mul.S.o -c /Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_base_mul.S\r\n/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_base_mul.S:10:3: error: unknown directive\r\n  .type PQCLEAN_KYBER1024_AARCH64_asm_point_mul_extended, %function\r\n  ^\r\n/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_base_mul.S:77:1: error: unknown directive\r\n.type PQCLEAN_KYBER1024_AARCH64_asm_asymmetric_mul, %function\r\n^\r\n/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_base_mul.S:232:1: error: unknown directive\r\n.type PQCLEAN_KYBER1024_AARCH64_asm_asymmetric_mul_montgomery, %function\r\n^\r\n[668/1230] Building ASM object src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_iNTT.S.o\r\nFAILED: src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_iNTT.S.o \r\n/opt/homebrew/bin/gcc-11  -I/Users/dstebila/Dev/OQS/liboqs/build/include -I/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64 -I/Users/dstebila/Dev/OQS/liboqs/src/common/pqclean_shims -arch arm64 -fPIC -mcpu=native -Werror -Wall -Wextra -Wpedantic -Wstrict-prototypes -Wshadow -Wformat=2 -Wfloat-equal -Wwrite-strings -O3 -fomit-frame-pointer -fdata-sections -ffunction-sections -Wl,-dead_strip -MD -MT src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_iNTT.S.o -MF src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_iNTT.S.o.d -o src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_iNTT.S.o -c /Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_iNTT.S\r\n/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_iNTT.S:8:1: error: unknown directive\r\n.type PQCLEAN_KYBER1024_AARCH64_asm_intt_SIMD_bot, %function\r\n^\r\n/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_iNTT.S:94:1: error: unknown directive\r\n.type PQCLEAN_KYBER1024_AARCH64_asm_intt_SIMD_top, %function\r\n^\r\n[669/1230] Building ASM object src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_NTT.S.o\r\nFAILED: src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_NTT.S.o \r\n/opt/homebrew/bin/gcc-11  -I/Users/dstebila/Dev/OQS/liboqs/build/include -I/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64 -I/Users/dstebila/Dev/OQS/liboqs/src/common/pqclean_shims -arch arm64 -fPIC -mcpu=native -Werror -Wall -Wextra -Wpedantic -Wstrict-prototypes -Wshadow -Wformat=2 -Wfloat-equal -Wwrite-strings -O3 -fomit-frame-pointer -fdata-sections -ffunction-sections -Wl,-dead_strip -MD -MT src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_NTT.S.o -MF src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_NTT.S.o.d -o src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_NTT.S.o -c /Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_NTT.S\r\n/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_NTT.S:8:1: error: unknown directive\r\n.type PQCLEAN_KYBER1024_AARCH64_asm_ntt_SIMD_top, %function\r\n^\r\n/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_NTT.S:177:1: error: unknown directive\r\n.type PQCLEAN_KYBER1024_AARCH64_asm_ntt_SIMD_bot, %function\r\n^\r\n[671/1230] Building ASM object src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_poly.S.o\r\nFAILED: src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_poly.S.o \r\n/opt/homebrew/bin/gcc-11  -I/Users/dstebila/Dev/OQS/liboqs/build/include -I/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64 -I/Users/dstebila/Dev/OQS/liboqs/src/common/pqclean_shims -arch arm64 -fPIC -mcpu=native -Werror -Wall -Wextra -Wpedantic -Wstrict-prototypes -Wshadow -Wformat=2 -Wfloat-equal -Wwrite-strings -O3 -fomit-frame-pointer -fdata-sections -ffunction-sections -Wl,-dead_strip -MD -MT src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_poly.S.o -MF src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_poly.S.o.d -o src/kem/kyber/CMakeFiles/kyber_1024_aarch64.dir/pqclean_kyber1024_aarch64/__asm_poly.S.o -c /Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_poly.S\r\n/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_poly.S:8:1: error: unknown directive\r\n.type PQCLEAN_KYBER1024_AARCH64_asm_add_reduce, %function\r\n^\r\n/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_poly.S:72:1: error: unknown directive\r\n.type PQCLEAN_KYBER1024_AARCH64_asm_sub_reduce, %function\r\n^\r\n/Users/dstebila/Dev/OQS/liboqs/src/kem/kyber/pqclean_kyber1024_aarch64/__asm_poly.S:136:1: error: unknown directive\r\n.type PQCLEAN_KYBER1024_AARCH64_asm_add_add_reduce, %function\r\n^\r\n[676/1230] Building C object src/kem/classic_mceliece/CMakeFiles/classic_mceliece_6960119f_vec.dir/pqclean_mceliece6960119f_vec/controlbits.c.o\r\nninja: build stopped: subcommand failed.\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1164/timeline","performed_via_github_app":null}},"public":true,"created_at":"2022-01-20T15:27:47Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
