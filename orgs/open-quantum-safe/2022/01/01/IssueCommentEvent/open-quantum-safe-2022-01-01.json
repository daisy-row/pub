{"id":"19543235265","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":218087071,"name":"open-quantum-safe/oqs-demos","url":"https://api.github.com/repos/open-quantum-safe/oqs-demos"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/events","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/111","id":1091682321,"node_id":"I_kwDODP--n85BEcAR","number":111,"title":"Issue With OQS-Chromium","user":{"login":"Raytonne","id":86047362,"node_id":"MDQ6VXNlcjg2MDQ3MzYy","avatar_url":"https://avatars.githubusercontent.com/u/86047362?v=4","gravatar_id":"","url":"https://api.github.com/users/Raytonne","html_url":"https://github.com/Raytonne","followers_url":"https://api.github.com/users/Raytonne/followers","following_url":"https://api.github.com/users/Raytonne/following{/other_user}","gists_url":"https://api.github.com/users/Raytonne/gists{/gist_id}","starred_url":"https://api.github.com/users/Raytonne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Raytonne/subscriptions","organizations_url":"https://api.github.com/users/Raytonne/orgs","repos_url":"https://api.github.com/users/Raytonne/repos","events_url":"https://api.github.com/users/Raytonne/events{/privacy}","received_events_url":"https://api.github.com/users/Raytonne/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-12-31T22:46:57Z","updated_at":"2022-01-01T10:24:48Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI've already contacted @baentsch regarding this issue, and it might be helpful to post it.\r\n\r\nHere is the problem: we've created the following certificate chain:\r\n\r\nCommon Name | Summary | Public Key Algorithm | Signature Algorithm | Link\r\n:---: | :---: | :---: | :---: | ---\r\nTestCA | Root Certificate | P-384 | ecdsa-with-SHA384 | [view](https://pastebin.com/raw/jAj05vTW)\r\nTest TLS CA | Intermediate Certificate | dilithium2 | ecdsa-with-SHA384 | [view](https://pastebin.com/raw/WETU1aCZ)\r\ndilithium2.webhop.me | Leaf Certificate | dilithium2 | dilithium2 | [view](https://pastebin.com/raw/c1auZzC1)\r\n\r\nThe root certificate has been imported into Chromium successfully. The website [https://dilithium2.webhop.me (IPv6 Only)](https://dilithium2.webhop.me/) supports `frodo640aes:ntru_hps2048509:bikel1:hqc128:p256_lightsaber:p256_sikep434:p256_sidhp434` key exchange algorithms and is accessible (we checked with OQS-cURL). \r\n\r\n**What We Expect:**\r\nSince the root certificate has been installed and the verification of _root certificate - intermediate certificate_ chain doesn't require any OQS-enabled library, the website should be accessible in Chromium.\r\n\r\n**What Actually Happened:**\r\nChromium returned two errors:\r\n\r\n> [10842:10862:1231/225648.339848:ERROR:ssl_client_socket_impl.cc(959)] handshake failed; returned -1, SSL error code 1, net_error -113\r\n>[10842:10862:1231/225648.343227:ERROR:ssl_client_socket_impl.cc(959)] handshake failed; returned -1, SSL error code 1, net_error -207\r\n\r\n![Chromium Screenshot 1](https://i.ibb.co/Pg03cHY/OQS2021Q.jpg)\r\n\r\nWe further found that Chromium failed to verify the _root certificate - intermediate certificate_ chain, but it succeeded in verifying the _intermediate certificate - leaf certificate_ chain.\r\n\r\n![Chromium Screenshot 2](https://i.ibb.co/vV9rq1m/OQS2021W.jpg)\r\n\r\nWe tried to add the intermediate certificate to Chromium; nonetheless, we got the same error as #92.\r\n\r\nAny ideas why this happened?\r\n\r\np.s. Wish everyone a joyful New Year! :relaxed:","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1003538070","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/111#issuecomment-1003538070","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111","id":1003538070,"node_id":"IC_kwDODP--n8470MaW","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2022-01-01T10:24:48Z","updated_at":"2022-01-01T10:24:48Z","author_association":"MEMBER","body":"Thanks for the test and the complete description of your setup! Based on this, two questions:\r\n\r\n> Since the root certificate has been installed and the verification of root certificate - intermediate certificate chain doesn't require any OQS-enabled library, the website should be accessible in Chromium.\r\n\r\nWhy are you expecting this? Chromium ought to verify the whole cert chain, incl. the dilithium-site cert and not just the \"last step\". Hence #92 (and the errors shown) are to be expected, as there is a QSC alg involved, right?\r\n\r\n> We further found that Chromium failed to verify the root certificate - intermediate certificate chain, but it succeeded in verifying the intermediate certificate - leaf certificate chain.\r\n\r\nHow did you come to this conclusion/what test did you do? I would actually expect the exact opposite: The intermediate cert could/should be verifiable with classic crypto while the site/leaf->intermediate cert needing QSC should not be as per #92.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1003538070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-01-01T10:24:48Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"19543559855","type":"IssueCommentEvent","actor":{"id":86047362,"login":"Raytonne","display_login":"Raytonne","gravatar_id":"","url":"https://api.github.com/users/Raytonne","avatar_url":"https://avatars.githubusercontent.com/u/86047362?"},"repo":{"id":218087071,"name":"open-quantum-safe/oqs-demos","url":"https://api.github.com/repos/open-quantum-safe/oqs-demos"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/events","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/111","id":1091682321,"node_id":"I_kwDODP--n85BEcAR","number":111,"title":"Issue With OQS-Chromium","user":{"login":"Raytonne","id":86047362,"node_id":"MDQ6VXNlcjg2MDQ3MzYy","avatar_url":"https://avatars.githubusercontent.com/u/86047362?v=4","gravatar_id":"","url":"https://api.github.com/users/Raytonne","html_url":"https://github.com/Raytonne","followers_url":"https://api.github.com/users/Raytonne/followers","following_url":"https://api.github.com/users/Raytonne/following{/other_user}","gists_url":"https://api.github.com/users/Raytonne/gists{/gist_id}","starred_url":"https://api.github.com/users/Raytonne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Raytonne/subscriptions","organizations_url":"https://api.github.com/users/Raytonne/orgs","repos_url":"https://api.github.com/users/Raytonne/repos","events_url":"https://api.github.com/users/Raytonne/events{/privacy}","received_events_url":"https://api.github.com/users/Raytonne/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-12-31T22:46:57Z","updated_at":"2022-01-01T12:00:07Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI've already contacted @baentsch regarding this issue, and it might be helpful to post it.\r\n\r\nHere is the problem: we've created the following certificate chain:\r\n\r\nCommon Name | Summary | Public Key Algorithm | Signature Algorithm | Link\r\n:---: | :---: | :---: | :---: | ---\r\nTestCA | Root Certificate | P-384 | ecdsa-with-SHA384 | [view](https://pastebin.com/raw/jAj05vTW)\r\nTest TLS CA | Intermediate Certificate | dilithium2 | ecdsa-with-SHA384 | [view](https://pastebin.com/raw/WETU1aCZ)\r\ndilithium2.webhop.me | Leaf Certificate | dilithium2 | dilithium2 | [view](https://pastebin.com/raw/c1auZzC1)\r\n\r\nThe root certificate has been imported into Chromium successfully. The website [https://dilithium2.webhop.me (IPv6 Only)](https://dilithium2.webhop.me/) supports `frodo640aes:ntru_hps2048509:bikel1:hqc128:p256_lightsaber:p256_sikep434:p256_sidhp434` key exchange algorithms and is accessible (we checked with OQS-cURL). \r\n\r\n**What We Expect:**\r\nSince the root certificate has been installed and the verification of _root certificate - intermediate certificate_ chain doesn't require any OQS-enabled library, the website should be accessible in Chromium.\r\n\r\n**What Actually Happened:**\r\nChromium returned two errors:\r\n\r\n> [10842:10862:1231/225648.339848:ERROR:ssl_client_socket_impl.cc(959)] handshake failed; returned -1, SSL error code 1, net_error -113\r\n>[10842:10862:1231/225648.343227:ERROR:ssl_client_socket_impl.cc(959)] handshake failed; returned -1, SSL error code 1, net_error -207\r\n\r\n![Chromium Screenshot 1](https://i.ibb.co/Pg03cHY/OQS2021Q.jpg)\r\n\r\nWe further found that Chromium failed to verify the _root certificate - intermediate certificate_ chain, but it succeeded in verifying the _intermediate certificate - leaf certificate_ chain.\r\n\r\n![Chromium Screenshot 2](https://i.ibb.co/vV9rq1m/OQS2021W.jpg)\r\n\r\nWe tried to add the intermediate certificate to Chromium; nonetheless, we got the same error as #92.\r\n\r\nAny ideas why this happened?\r\n\r\np.s. Wish everyone a joyful New Year! :relaxed:","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1003547661","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/111#issuecomment-1003547661","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111","id":1003547661,"node_id":"IC_kwDODP--n8470OwN","user":{"login":"Raytonne","id":86047362,"node_id":"MDQ6VXNlcjg2MDQ3MzYy","avatar_url":"https://avatars.githubusercontent.com/u/86047362?v=4","gravatar_id":"","url":"https://api.github.com/users/Raytonne","html_url":"https://github.com/Raytonne","followers_url":"https://api.github.com/users/Raytonne/followers","following_url":"https://api.github.com/users/Raytonne/following{/other_user}","gists_url":"https://api.github.com/users/Raytonne/gists{/gist_id}","starred_url":"https://api.github.com/users/Raytonne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Raytonne/subscriptions","organizations_url":"https://api.github.com/users/Raytonne/orgs","repos_url":"https://api.github.com/users/Raytonne/repos","events_url":"https://api.github.com/users/Raytonne/events{/privacy}","received_events_url":"https://api.github.com/users/Raytonne/received_events","type":"User","site_admin":false},"created_at":"2022-01-01T12:00:07Z","updated_at":"2022-01-01T12:00:07Z","author_association":"NONE","body":"> The intermediate cert could/should be verifiable with classic crypto while the site/leaf->intermediate cert needing QSC should not be as per #92.\r\n\r\nI've thought about this reason. What is really confusing is that there is no root certificate in the Chromium Certificate Viewer hierarchy. I initially thought this was due to I didn't supply the root certificate in the certificate chain, so I modified nginx server config and added the root certificate in the certificate chain and the root certificate still didn't appear in the Certificate Viewer hierarchy.\r\n\r\nIf this is the reason, why Chromium Certificate Viewer shows the intermediate certificate? Both intermediate certificate and root certificate shouldn't appear in the Certificate Viewer hierarchy as the chain already broke at _leaf - intermediate_.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1003547661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-01-01T12:00:07Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"19544780188","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":218087071,"name":"open-quantum-safe/oqs-demos","url":"https://api.github.com/repos/open-quantum-safe/oqs-demos"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/events","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/111","id":1091682321,"node_id":"I_kwDODP--n85BEcAR","number":111,"title":"Issue With OQS-Chromium","user":{"login":"Raytonne","id":86047362,"node_id":"MDQ6VXNlcjg2MDQ3MzYy","avatar_url":"https://avatars.githubusercontent.com/u/86047362?v=4","gravatar_id":"","url":"https://api.github.com/users/Raytonne","html_url":"https://github.com/Raytonne","followers_url":"https://api.github.com/users/Raytonne/followers","following_url":"https://api.github.com/users/Raytonne/following{/other_user}","gists_url":"https://api.github.com/users/Raytonne/gists{/gist_id}","starred_url":"https://api.github.com/users/Raytonne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Raytonne/subscriptions","organizations_url":"https://api.github.com/users/Raytonne/orgs","repos_url":"https://api.github.com/users/Raytonne/repos","events_url":"https://api.github.com/users/Raytonne/events{/privacy}","received_events_url":"https://api.github.com/users/Raytonne/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-12-31T22:46:57Z","updated_at":"2022-01-01T17:04:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI've already contacted @baentsch regarding this issue, and it might be helpful to post it.\r\n\r\nHere is the problem: we've created the following certificate chain:\r\n\r\nCommon Name | Summary | Public Key Algorithm | Signature Algorithm | Link\r\n:---: | :---: | :---: | :---: | ---\r\nTestCA | Root Certificate | P-384 | ecdsa-with-SHA384 | [view](https://pastebin.com/raw/jAj05vTW)\r\nTest TLS CA | Intermediate Certificate | dilithium2 | ecdsa-with-SHA384 | [view](https://pastebin.com/raw/WETU1aCZ)\r\ndilithium2.webhop.me | Leaf Certificate | dilithium2 | dilithium2 | [view](https://pastebin.com/raw/c1auZzC1)\r\n\r\nThe root certificate has been imported into Chromium successfully. The website [https://dilithium2.webhop.me (IPv6 Only)](https://dilithium2.webhop.me/) supports `frodo640aes:ntru_hps2048509:bikel1:hqc128:p256_lightsaber:p256_sikep434:p256_sidhp434` key exchange algorithms and is accessible (we checked with OQS-cURL). \r\n\r\n**What We Expect:**\r\nSince the root certificate has been installed and the verification of _root certificate - intermediate certificate_ chain doesn't require any OQS-enabled library, the website should be accessible in Chromium.\r\n\r\n**What Actually Happened:**\r\nChromium returned two errors:\r\n\r\n> [10842:10862:1231/225648.339848:ERROR:ssl_client_socket_impl.cc(959)] handshake failed; returned -1, SSL error code 1, net_error -113\r\n>[10842:10862:1231/225648.343227:ERROR:ssl_client_socket_impl.cc(959)] handshake failed; returned -1, SSL error code 1, net_error -207\r\n\r\n![Chromium Screenshot 1](https://i.ibb.co/Pg03cHY/OQS2021Q.jpg)\r\n\r\nWe further found that Chromium failed to verify the _root certificate - intermediate certificate_ chain, but it succeeded in verifying the _intermediate certificate - leaf certificate_ chain.\r\n\r\n![Chromium Screenshot 2](https://i.ibb.co/vV9rq1m/OQS2021W.jpg)\r\n\r\nWe tried to add the intermediate certificate to Chromium; nonetheless, we got the same error as #92.\r\n\r\nAny ideas why this happened?\r\n\r\np.s. Wish everyone a joyful New Year! :relaxed:","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1003584948","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/111#issuecomment-1003584948","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/111","id":1003584948,"node_id":"IC_kwDODP--n8470X20","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2022-01-01T17:04:23Z","updated_at":"2022-01-01T17:04:23Z","author_association":"MEMBER","body":"> If this is the reason, why Chromium Certificate Viewer shows the intermediate certificate?\r\n\r\nI don't know this -- probably one would need to go through the cert verification logic of Chromium (nss) to really understand what's going on. Personally I didn't get around to looking into `libnss` to be able to give a good answer.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1003584948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-01-01T17:04:23Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
