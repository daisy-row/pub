{"id":"20989776872","type":"IssuesEvent","actor":{"id":60347669,"login":"judowha","display_login":"judowha","gravatar_id":"","url":"https://api.github.com/users/judowha","avatar_url":"https://avatars.githubusercontent.com/u/60347669?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/363","id":1184485693,"node_id":"I_kwDOA_fpb85GmdE9","number":363,"title":"The resultl of s_time seems to be inaccurate ","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-29T08:15:45Z","updated_at":"2022-03-29T08:15:45Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I have a question about the \"user time\" in s_time command:\r\n\r\nWhen I was testing TLS handshake with certificate signed by RSA3072 and certificate signed by ECDSAP256, **I found that handshake with RSA certificate has a better performance than handshake with ECDSAP256 certificate**. While this result is not as my expect because ECDSA should have better performance than RSA in theory. I check the result and I found that handshake with RSA in fact connect less times than handshake with P256 but they have a smaller \"user time\". Here is an example:\r\n\t\r\n- For P256:\r\n 19230 connections in **16.70s**; 1151.50 connections/user sec, bytes read 0\r\n 19230 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- For RSA:\r\n  7247 connections in **5.31s**; 1364.78 connections/user sec, bytes read 0\r\n  7247 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThat is why RSA seems perform better than P256\r\n\r\nI suspect that this user time is inaccurate so I conduct a further test\r\nI set two Groups of server-client:\r\nGroup1 contain a Server1 with a RSA3072 certificate and a Client1 with a ECDSAP256 certificate\r\nGroup2 contain a Server2 with a ECDSAP256 certificate and a Client2 with a RSA3072 certificate\r\n\r\nThe test commands are here:\r\n```\r\nopenssl s_server -key $1_test/server/server.key -cert $1_test/server/server.pem -accept 4433 -CAfile $1_test/rootCA/demoCA/root.pem -verify_return_error -Verify 1 -www -state\r\n```\r\n```\r\nopenssl s_time -key $1_test/client/client.key -cert $1_test/client/client.pem -connect localhost:4433 -CAfile $1_test/rootCA/demoCA/root.pem -new\r\n```\r\n\r\nBoth group will be doing mutual authentication, the test result is shown here:\r\n\r\n- Group1:\r\n  5696 connections in **5.46s**; 1043.22 connections/user sec, bytes read 0\r\n  5696 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- Group2:\r\n  5652 connections in **23.03s**; 245.42 connections/user sec, bytes read 0\r\n  5652 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nIf I looking at the total connection times I think it is correct. These two groups should have a similar performance. However, Group1 has much smaller user time than Group2 and I think that does not make sense. \r\n\r\nI am not sure if there is any error in my test so I just post my question here. If the user time measurement is indeed inaccurate, I wonder how should I change the code to make it correct.\r\n\r\nThanks a lot if anyone could help me!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363/timeline","performed_via_github_app":null}},"public":true,"created_at":"2022-03-29T08:15:46Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"20990667440","type":"IssuesEvent","actor":{"id":60347669,"login":"judowha","display_login":"judowha","gravatar_id":"","url":"https://api.github.com/users/judowha","avatar_url":"https://avatars.githubusercontent.com/u/60347669?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/363","id":1184485693,"node_id":"I_kwDOA_fpb85GmdE9","number":363,"title":"The resultl of s_time seems to be inaccurate ","user":{"login":"judowha","id":60347669,"node_id":"MDQ6VXNlcjYwMzQ3NjY5","avatar_url":"https://avatars.githubusercontent.com/u/60347669?v=4","gravatar_id":"","url":"https://api.github.com/users/judowha","html_url":"https://github.com/judowha","followers_url":"https://api.github.com/users/judowha/followers","following_url":"https://api.github.com/users/judowha/following{/other_user}","gists_url":"https://api.github.com/users/judowha/gists{/gist_id}","starred_url":"https://api.github.com/users/judowha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/judowha/subscriptions","organizations_url":"https://api.github.com/users/judowha/orgs","repos_url":"https://api.github.com/users/judowha/repos","events_url":"https://api.github.com/users/judowha/events{/privacy}","received_events_url":"https://api.github.com/users/judowha/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-03-29T08:15:45Z","updated_at":"2022-03-29T09:00:32Z","closed_at":"2022-03-29T09:00:32Z","author_association":"NONE","active_lock_reason":null,"body":"I have a question about the \"user time\" in s_time command:\r\n\r\nWhen I was testing TLS handshake with certificate signed by RSA3072 and certificate signed by ECDSAP256, **I found that handshake with RSA certificate has a better performance than handshake with ECDSAP256 certificate**. While this result is not as my expect because ECDSA should have better performance than RSA in theory. I check the result and I found that handshake with RSA in fact connect less times than handshake with P256 but they have a smaller \"user time\". Here is an example:\r\n\t\r\n- For P256:\r\n 19230 connections in **16.70s**; 1151.50 connections/user sec, bytes read 0\r\n 19230 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- For RSA:\r\n  7247 connections in **5.31s**; 1364.78 connections/user sec, bytes read 0\r\n  7247 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nThat is why RSA seems perform better than P256\r\n\r\nI suspect that this user time is inaccurate so I conduct a further test\r\nI set two Groups of server-client:\r\nGroup1 contain a Server1 with a RSA3072 certificate and a Client1 with a ECDSAP256 certificate\r\nGroup2 contain a Server2 with a ECDSAP256 certificate and a Client2 with a RSA3072 certificate\r\n\r\nThe test commands are here:\r\n```\r\nopenssl s_server -key $1_test/server/server.key -cert $1_test/server/server.pem -accept 4433 -CAfile $1_test/rootCA/demoCA/root.pem -verify_return_error -Verify 1 -www -state\r\n```\r\n```\r\nopenssl s_time -key $1_test/client/client.key -cert $1_test/client/client.pem -connect localhost:4433 -CAfile $1_test/rootCA/demoCA/root.pem -new\r\n```\r\n\r\nBoth group will be doing mutual authentication, the test result is shown here:\r\n\r\n- Group1:\r\n  5696 connections in **5.46s**; 1043.22 connections/user sec, bytes read 0\r\n  5696 connections in 31 real seconds, 0 bytes read per connection\r\n\r\n- Group2:\r\n  5652 connections in **23.03s**; 245.42 connections/user sec, bytes read 0\r\n  5652 connections in 31 real seconds, 0 bytes read per connection\r\n\r\nIf I looking at the total connection times I think it is correct. These two groups should have a similar performance. However, Group1 has much smaller user time than Group2 and I think that does not make sense. \r\n\r\nI am not sure if there is any error in my test so I just post my question here. If the user time measurement is indeed inaccurate, I wonder how should I change the code to make it correct.\r\n\r\nThanks a lot if anyone could help me!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/363/timeline","performed_via_github_app":null}},"public":true,"created_at":"2022-03-29T09:00:32Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
