{"id":"25733460079","type":"IssuesEvent","actor":{"id":32741828,"login":"xShuusui","display_login":"xShuusui","gravatar_id":"","url":"https://api.github.com/users/xShuusui","avatar_url":"https://avatars.githubusercontent.com/u/32741828?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/92","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/92/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/92/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/92/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/92","id":1482974347,"node_id":"I_kwDOE_A9l85YZGSL","number":92,"title":"Memory leaks during key creation","user":{"login":"xShuusui","id":32741828,"node_id":"MDQ6VXNlcjMyNzQxODI4","avatar_url":"https://avatars.githubusercontent.com/u/32741828?v=4","gravatar_id":"","url":"https://api.github.com/users/xShuusui","html_url":"https://github.com/xShuusui","followers_url":"https://api.github.com/users/xShuusui/followers","following_url":"https://api.github.com/users/xShuusui/following{/other_user}","gists_url":"https://api.github.com/users/xShuusui/gists{/gist_id}","starred_url":"https://api.github.com/users/xShuusui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xShuusui/subscriptions","organizations_url":"https://api.github.com/users/xShuusui/orgs","repos_url":"https://api.github.com/users/xShuusui/repos","events_url":"https://api.github.com/users/xShuusui/events{/privacy}","received_events_url":"https://api.github.com/users/xShuusui/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-12-07T22:17:50Z","updated_at":"2022-12-07T22:17:50Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, \r\nwe are currently developing a crypto api and found some memory leaks with valgrind during key creation with pqc algorithms.\r\n\r\nThe leaks we found:\r\n- During `EVP_PKEY_keygen_init` in  **oqs_kmgmt.c**, line 422 \r\n`gctx->oqs_name = OPENSSL_strdup(oqs_name);`\r\n- During `EVP_PKEY_generate` in **oqsprov_keys.c**, line 618\r\n`ret->tls_name = OPENSSL_strdup(tls_name);`\r\n- During `EVP_DigestSignInit` from `ASN1_item_i2d` in **oqs_sig.c**\r\nNot able to fix it, but we assume its coming from line 156: `ctx->aid_len = get_aid(&(ctx->aid), ctx->sig->tls_name);`, from a not correctly freed `aid`.\r\n\r\n\r\nWe started with version *0.4.0* of the oqs-provider, when we saw that there are memory leaks fixed on [commit](https://github.com/levitte/tmp-oqsprov/commit/3d573cc2862c66d513edde21d447692d85678d60), we switched to the current [main](https://github.com/levitte/tmp-oqsprov/commit/277b3719686c16e60c24ad8b4e82f18ec3778a1e) version. The leaks listed above also occurred there.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/92/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/92/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2022-12-07T22:17:51Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
