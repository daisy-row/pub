{"id":"14767328631","type":"IssueCommentEvent","actor":{"id":52302961,"login":"Dan-J-D","display_login":"Dan-J-D","gravatar_id":"","url":"https://api.github.com/users/Dan-J-D","avatar_url":"https://avatars.githubusercontent.com/u/52302961?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/876","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/876/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/876/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/876/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/876","id":780652320,"node_id":"MDU6SXNzdWU3ODA2NTIzMjA=","number":876,"title":"not compiling with visual studio","user":{"login":"Dan-J-D","id":52302961,"node_id":"MDQ6VXNlcjUyMzAyOTYx","avatar_url":"https://avatars1.githubusercontent.com/u/52302961?v=4","gravatar_id":"","url":"https://api.github.com/users/Dan-J-D","html_url":"https://github.com/Dan-J-D","followers_url":"https://api.github.com/users/Dan-J-D/followers","following_url":"https://api.github.com/users/Dan-J-D/following{/other_user}","gists_url":"https://api.github.com/users/Dan-J-D/gists{/gist_id}","starred_url":"https://api.github.com/users/Dan-J-D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dan-J-D/subscriptions","organizations_url":"https://api.github.com/users/Dan-J-D/orgs","repos_url":"https://api.github.com/users/Dan-J-D/repos","events_url":"https://api.github.com/users/Dan-J-D/events{/privacy}","received_events_url":"https://api.github.com/users/Dan-J-D/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-01-06T15:51:06Z","updated_at":"2021-01-10T06:03:56Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"2 errors:\r\nSeverity\tCode\tDescription\tProject\tFile\tLine\tSuppression State\r\nError\tC4146\tunary minus operator applied to unsigned type, result still unsigned\tCppUI\tC:\\Users\\danie\\source\\repos\\CppUI\\CppUI\\oqs\\sig\\dilithium\\pqclean_dilithium4_clean\\packing.c\t264\t\r\nand\r\nSeverity\tCode\tDescription\tProject\tFile\tLine\tSuppression State\r\nError\tC4146\tunary minus operator applied to unsigned type, result still unsigned\tCppUI\tC:\\Users\\danie\\source\\repos\\CppUI\\CppUI\\oqs\\sig\\dilithium\\pqclean_dilithium4_clean\\sign.c\t61\t\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/757423270","html_url":"https://github.com/open-quantum-safe/liboqs/issues/876#issuecomment-757423270","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/876","id":757423270,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NzQyMzI3MA==","user":{"login":"Dan-J-D","id":52302961,"node_id":"MDQ6VXNlcjUyMzAyOTYx","avatar_url":"https://avatars1.githubusercontent.com/u/52302961?v=4","gravatar_id":"","url":"https://api.github.com/users/Dan-J-D","html_url":"https://github.com/Dan-J-D","followers_url":"https://api.github.com/users/Dan-J-D/followers","following_url":"https://api.github.com/users/Dan-J-D/following{/other_user}","gists_url":"https://api.github.com/users/Dan-J-D/gists{/gist_id}","starred_url":"https://api.github.com/users/Dan-J-D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dan-J-D/subscriptions","organizations_url":"https://api.github.com/users/Dan-J-D/orgs","repos_url":"https://api.github.com/users/Dan-J-D/repos","events_url":"https://api.github.com/users/Dan-J-D/events{/privacy}","received_events_url":"https://api.github.com/users/Dan-J-D/received_events","type":"User","site_admin":false},"created_at":"2021-01-10T06:03:56Z","updated_at":"2021-01-10T06:03:56Z","author_association":"NONE","body":"Fixed: Visual studio doesnt like making unsigned ints negative so casting the var to int then back fixes it.","performed_via_github_app":null}},"public":true,"created_at":"2021-01-10T06:03:56Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"14767613802","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/876","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/876/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/876/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/876/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/876","id":780652320,"node_id":"MDU6SXNzdWU3ODA2NTIzMjA=","number":876,"title":"not compiling with visual studio","user":{"login":"Dan-J-D","id":52302961,"node_id":"MDQ6VXNlcjUyMzAyOTYx","avatar_url":"https://avatars1.githubusercontent.com/u/52302961?v=4","gravatar_id":"","url":"https://api.github.com/users/Dan-J-D","html_url":"https://github.com/Dan-J-D","followers_url":"https://api.github.com/users/Dan-J-D/followers","following_url":"https://api.github.com/users/Dan-J-D/following{/other_user}","gists_url":"https://api.github.com/users/Dan-J-D/gists{/gist_id}","starred_url":"https://api.github.com/users/Dan-J-D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dan-J-D/subscriptions","organizations_url":"https://api.github.com/users/Dan-J-D/orgs","repos_url":"https://api.github.com/users/Dan-J-D/repos","events_url":"https://api.github.com/users/Dan-J-D/events{/privacy}","received_events_url":"https://api.github.com/users/Dan-J-D/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-01-06T15:51:06Z","updated_at":"2021-01-10T07:48:48Z","closed_at":"2021-01-10T07:48:48Z","author_association":"NONE","active_lock_reason":null,"body":"2 errors:\r\nSeverity\tCode\tDescription\tProject\tFile\tLine\tSuppression State\r\nError\tC4146\tunary minus operator applied to unsigned type, result still unsigned\tCppUI\tC:\\Users\\danie\\source\\repos\\CppUI\\CppUI\\oqs\\sig\\dilithium\\pqclean_dilithium4_clean\\packing.c\t264\t\r\nand\r\nSeverity\tCode\tDescription\tProject\tFile\tLine\tSuppression State\r\nError\tC4146\tunary minus operator applied to unsigned type, result still unsigned\tCppUI\tC:\\Users\\danie\\source\\repos\\CppUI\\CppUI\\oqs\\sig\\dilithium\\pqclean_dilithium4_clean\\sign.c\t61\t\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/757433924","html_url":"https://github.com/open-quantum-safe/liboqs/issues/876#issuecomment-757433924","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/876","id":757433924,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NzQzMzkyNA==","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars1.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2021-01-10T07:48:48Z","updated_at":"2021-01-10T07:48:48Z","author_association":"MEMBER","body":"I would invite @Dan-J-D to report this upstream ([here](https://github.com/pq-crystals/dilithium) or [here](https://github.com/PQClean/PQClean) ), so it's getting fixed for everyone. ","performed_via_github_app":null}},"public":true,"created_at":"2021-01-10T07:48:48Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"14769594178","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":247826799,"name":"open-quantum-safe/liboqs-java","url":"https://api.github.com/repos/open-quantum-safe/liboqs-java"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/11","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/11/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/11/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/11/events","html_url":"https://github.com/open-quantum-safe/liboqs-java/issues/11","id":778307621,"node_id":"MDU6SXNzdWU3NzgzMDc2MjE=","number":11,"title":"Enable Build for other Platforms like ARM (Android)","user":{"login":"Hatzen","id":21283655,"node_id":"MDQ6VXNlcjIxMjgzNjU1","avatar_url":"https://avatars0.githubusercontent.com/u/21283655?v=4","gravatar_id":"","url":"https://api.github.com/users/Hatzen","html_url":"https://github.com/Hatzen","followers_url":"https://api.github.com/users/Hatzen/followers","following_url":"https://api.github.com/users/Hatzen/following{/other_user}","gists_url":"https://api.github.com/users/Hatzen/gists{/gist_id}","starred_url":"https://api.github.com/users/Hatzen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hatzen/subscriptions","organizations_url":"https://api.github.com/users/Hatzen/orgs","repos_url":"https://api.github.com/users/Hatzen/repos","events_url":"https://api.github.com/users/Hatzen/events{/privacy}","received_events_url":"https://api.github.com/users/Hatzen/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-01-04T19:23:54Z","updated_at":"2021-01-10T16:42:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"First of all thanks for your good work :)  \r\nI am trying to get the lib working for android.  Regarding https://github.com/open-quantum-safe/liboqs/issues/594 i am able to get a working .so file for android and the passed abi.  \r\nBut i am struggeling to get it working with this repository and jni.  \r\nWhen i just compile the library for armv8a and then using this repo to get the jni wrapper it fails as the target system (x86) differs at compile time.     \r\n\r\n<details>    \r\n<summary>Excerpt of the error message</summary>   \r\n\r\n```\r\n[INFO] /bin/sh -c cd '/home/hatzen/liboqs-java' && 'gcc' '-shared' '-L/home/hatzen/liboqs/build/lib' '-o/home/hatzen/liboqs-java/target/liboqs-java.jar' 'target/objs/handle.o' 'target/objs/KEMs.o' 'target/objs/KeyEncapsulation.o' 'target/objs/Rand.o' 'target/objs/Signature.o' 'target/objs/Sigs.o' '-o' '/home/hatzen/liboqs-java/src/main/resources/liboqs-jni.so' '-loqs'\r\n/usr/bin/ld: skipping incompatible /home/hatzen/liboqs/build/lib/liboqs.so when searching for -loqs\r\n/usr/bin/ld: cannot find -loqs\r\ncollect2: error: ld returned 1 exit status\r\n```\r\n</details>  \r\n  \r\nSo i tried to copy the necessary files and build jni and liboqs at a single time with the given cmake files.  \r\nI copied all c sources and tried to add them to the cmakefile. Buti get errors when running the java test.    \r\n  \r\n<details>\r\n<summary>Excerpts of changed files</summary>  \r\n  \r\nsrc/CMakeList.txt\r\n```cmake  \r\n...\r\ninclude_directories(jni)\r\nlink_directories(jni oqs)\r\n\r\nadd_library(jni SHARED\r\njni/handle.c\r\njni/KEMs.c\r\njni/KeyEncapsulation.c\r\njni/Rand.c\r\njni/Signature.c\r\njni/Sigs.c)\r\n\r\nset_target_properties(\r\n    jni\r\n    PROPERTIES\r\n    COMPILE_FLAGS \"-w\"\r\n    #COMPILE_WARNING_DISABLED high\r\n)\r\ntarget_link_libraries(jni oqs)\r\n\r\nset_target_properties(jni PROPERTIES PUBLIC_HEADER \"jni/handle.h;jni/KEMs.h;jni/KeyEncapsulation.h;jni/Rand.h;jni/Signature.h;jni/Sigs.h\")\r\n\r\nINSTALL(TARGETS jni\r\n        LIBRARY DESTINATION lib\r\n        PUBLIC_HEADER DESTINATION lib\r\n)\r\n...\r\n```   \r\nAnd i have overriden the Common Class of this Repo: \r\n\r\n```java\r\npublic class Common {\r\n    ...\r\n    public static void loadNativeLibrary() {\r\n        // overrides all changes from this repo method.\r\n        System.loadLibrary(\"oqs\");\r\n        System.loadLibrary(\"jni\");\r\n   }\r\n   ...\r\n}\r\n```\r\nI did override all packages and paths like:  \r\n```\r\nJava_org_openquantumsafe => Java_de_hartz_software_parannoying_helper_security_liboqs_java\r\norg/openquantumsafe => de/hartz/software/parannoying/helper/security/liboqs/java\r\n```\r\n\r\nThe crash occours probably on the equivalent of:  \r\nhttps://github.com/open-quantum-safe/liboqs-java/blob/109534741ace8442129b20dce9cfce62aa54048a/src/test/java/org/openquantumsafe/KEMTest.java#L37  \r\nwhich is calling JNI  \r\nhttps://github.com/open-quantum-safe/liboqs-java/blob/109534741ace8442129b20dce9cfce62aa54048a/src/main/c/KeyEncapsulation.c#L41  \r\n\r\n```\r\n2021-01-02 20:21:08.357 7642-7697/de.hartz.software.parannoying E/zygote64: JNI ERROR (app bug): accessed stale Local 0x76e6ea9241  (index 1852746020 in a table of size 2)\r\n2021-01-02 20:21:08.388 7642-7697/de.hartz.software.parannoying A/zygote64: java_vm_ext.cc:534] JNI DETECTED ERROR IN APPLICATION: use of deleted local reference 0x76e6ea9241\r\n2021-01-02 20:21:08.389 7642-7697/de.hartz.software.parannoying A/zygote64: java_vm_ext.cc:534]     from de.hartz.software.parannoying.helper.security.liboqs.java.KeyEncapsulation$KeyEncapsulationDetails de.hartz.software.parannoying.helper.security.liboqs.java.KeyEncapsulation.get_KEM_details()\r\n2021-01-02 20:21:08.389 7642-7697/de.hartz.software.parannoying A/zygote64: java_vm_ext.cc:534] \"Instr: androidx.test.runner.AndroidJUnitRunner\" prio=5 tid=22 Runnable\r\n```\r\n  \r\n</details>\r\n  \r\nI am not very familiar with writing c and never had contact with JNI before.   \r\nSo i am not sure whether it could be simple to solve. So my question is will you consider to make this repo be able to build for different abis at a time?  ","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/comments/757505403","html_url":"https://github.com/open-quantum-safe/liboqs-java/issues/11#issuecomment-757505403","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/11","id":757505403,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NzUwNTQwMw==","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars0.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2021-01-10T16:42:12Z","updated_at":"2021-01-10T16:42:12Z","author_association":"MEMBER","body":"No, we were just speculating about the environment in which you might be encountering this combination of requirements.  We thought it would be an Android app written in Java, needing to use the Java JNI wrapper to access the C library compiled for ARM.","performed_via_github_app":null}},"public":true,"created_at":"2021-01-10T16:42:12Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
