{"id":"17632620319","type":"IssueCommentEvent","actor":{"id":57333073,"login":"madbrain76","display_login":"madbrain76","gravatar_id":"","url":"https://api.github.com/users/madbrain76","avatar_url":"https://avatars.githubusercontent.com/u/57333073?"},"repo":{"id":218087071,"name":"open-quantum-safe/oqs-demos","url":"https://api.github.com/repos/open-quantum-safe/oqs-demos"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/97","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/97/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/97/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/97/events","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/97","id":970797017,"node_id":"MDU6SXNzdWU5NzA3OTcwMTc=","number":97,"title":"Can't build oqs-demos/chromium","user":{"login":"madbrain76","id":57333073,"node_id":"MDQ6VXNlcjU3MzMzMDcz","avatar_url":"https://avatars.githubusercontent.com/u/57333073?v=4","gravatar_id":"","url":"https://api.github.com/users/madbrain76","html_url":"https://github.com/madbrain76","followers_url":"https://api.github.com/users/madbrain76/followers","following_url":"https://api.github.com/users/madbrain76/following{/other_user}","gists_url":"https://api.github.com/users/madbrain76/gists{/gist_id}","starred_url":"https://api.github.com/users/madbrain76/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madbrain76/subscriptions","organizations_url":"https://api.github.com/users/madbrain76/orgs","repos_url":"https://api.github.com/users/madbrain76/repos","events_url":"https://api.github.com/users/madbrain76/events{/privacy}","received_events_url":"https://api.github.com/users/madbrain76/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2021-08-14T02:08:10Z","updated_at":"2021-08-19T09:52:15Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I followed the instructions at \r\nhttps://github.com/open-quantum-safe/oqs-demos/tree/main/chromium .\r\n\r\nI am building on Ubuntu 20.04 .\r\n\r\nThe first build error I got was :\r\n\r\nninja: Entering directory `out/Default'\r\n[1/1] Regenerating ninja files\r\nFAILED: build.ninja \r\n../../buildtools/linux64/gn --root=../.. -q gen .\r\nERROR at //third_party/boringssl/BUILD.gn:48:46: Undefined identifier\r\nall_headers = crypto_headers + ssl_headers + oqs_headers\r\n                                             ^----------\r\nSee //crypto/BUILD.gn:78:19: which caused the file to be included.\r\n  public_deps = [ \"//third_party/boringssl\" ]\r\n                  ^------------------------\r\n\r\n\r\nI tried to comment out oqs_headers . Then I hit the following :\r\n\r\n../../net/cert/internal/simple_path_builder_delegate.cc:38:7: error: use of undeclared identifier 'IS_OQS_PKEY'\r\n  if (IS_OQS_PKEY(curve_nid)) {\r\n      ^\r\n../../net/cert/internal/simple_path_builder_delegate.cc:117:7: error: use of undeclared identifier 'IS_OQS_PKEY'\r\n  if (IS_OQS_PKEY(pkey_id)) {\r\n      ^\r\n2 errors generated.\r\n\r\nIt looks like the oqs-mods.patch file is quite old - 5 months.\r\nI don't think it works with the current liboqs 0.7.0 .\r\nI tried liboqs 0.6.0 and 0.5.0, and reinstalled them into the Chromium tree, but I still hit the same error.\r\n\r\nCan someone please provide the proper version of liboqs I should be using with Chromium, as well as the correct patch ?\r\n\r\nThanks.\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/901775051","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/97#issuecomment-901775051","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/97","id":901775051,"node_id":"IC_kwDODP--n841v_7L","user":{"login":"madbrain76","id":57333073,"node_id":"MDQ6VXNlcjU3MzMzMDcz","avatar_url":"https://avatars.githubusercontent.com/u/57333073?v=4","gravatar_id":"","url":"https://api.github.com/users/madbrain76","html_url":"https://github.com/madbrain76","followers_url":"https://api.github.com/users/madbrain76/followers","following_url":"https://api.github.com/users/madbrain76/following{/other_user}","gists_url":"https://api.github.com/users/madbrain76/gists{/gist_id}","starred_url":"https://api.github.com/users/madbrain76/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madbrain76/subscriptions","organizations_url":"https://api.github.com/users/madbrain76/orgs","repos_url":"https://api.github.com/users/madbrain76/repos","events_url":"https://api.github.com/users/madbrain76/events{/privacy}","received_events_url":"https://api.github.com/users/madbrain76/received_events","type":"User","site_admin":false},"created_at":"2021-08-19T09:52:15Z","updated_at":"2021-08-19T09:52:15Z","author_association":"NONE","body":"I have completed the scripts, but I'm waiting for permission for my employer to publish them in full.\r\n\r\nI'm also trying to build liboqs on Windows. I guess that is a separate issue. I'm doing this at the command-line. I installed cmake and Visual Studio 2019 . CMAKE apparently needs some environment to be setup.\r\n\r\n@echo off\r\nmkdir %PROJECT%\r\ncd %PROJECT%\r\ncall git clone --branch main https://github.com/open-quantum-safe/liboqs.git\r\ncd liboqs\r\nmkdir build\r\ncd build\r\ncmake .. -G\"Ninja\" -DCMAKE_INSTALL_PREFIX=%CHROMIUM_ROOT%\\third_party\\boringssl\\src\\oqs -DOQS_USE_OPENSSL=OFF\r\nninja && ninja install\r\n\r\nD:\\chromium\\pqc>build_liboqs.bat\r\nCloning into 'liboqs'...\r\nremote: Enumerating objects: 24320, done.\r\nremote: Counting objects: 100% (1680/1680), done.\r\nremote: Compressing objects: 100% (918/918), done.\r\nRremote: Total 24320 (delta 1025), reused 1237 (delta 742), pack-reused 22640\r\nReceiving objects: 100% (24320/24320), 132.88 MiB | 15.80 MiB/s, done.\r\nResolving deltas: 100% (17198/17198), done.\r\nUpdating files: 100% (4955/4955), done.\r\n-- The C compiler identification is MSVC 19.29.30133.0\r\n-- The ASM compiler identification is MSVC\r\n-- Found assembler: C:/Program Files (x86)/Microsoft Visual Studio/2019/Community/VC/Tools/MSVC/14.29.30133/bin/Hostx64/x64/cl.exe\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - failed\r\n-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2019/Community/VC/Tools/MSVC/14.29.30133/bin/Hostx64/x64/cl.exe\r\n-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2019/Community/VC/Tools/MSVC/14.29.30133/bin/Hostx64/x64/cl.exe - broken\r\nCMake Error at C:/Program Files/CMake/share/cmake-3.21/Modules/CMakeTestCCompiler.cmake:69 (message):\r\n  The C compiler\r\n\r\n    \"C:/Program Files (x86)/Microsoft Visual Studio/2019/Community/VC/Tools/MSVC/14.29.30133/bin/Hostx64/x64/cl.exe\"\r\n\r\n  is not able to compile a simple test program.\r\n\r\n  It fails with the following output:\r\n\r\n    Change Dir: D:/liboqs/liboqs/build/CMakeFiles/CMakeTmp\r\n\r\n    Run Build Command(s):C:/depot_tools/ninja.exe cmTC_4d685 && [1/2] Building C object CMakeFiles\\cmTC_4d685.dir\\testCCompiler.c.obj\r\n    [2/2] Linking C executable cmTC_4d685.exe\r\n    FAILED: cmTC_4d685.exe\r\n    cmd.exe /C \"cd . && \"C:\\Program Files\\CMake\\bin\\cmake.exe\" -E vs_link_exe --intdir=CMakeFiles\\cmTC_4d685.dir --rc=rc --mt=CMAKE_MT-NOTFOUND --manifests  -- C:\\PROGRA~2\\MICROS~4\\2019\\COMMUN~1\\VC\\Tools\\MSVC\\1429~1.301\\bin\\Hostx64\\x64\\link.exe /nologo CMakeFiles\\cmTC_4d685.dir\\testCCompiler.c.obj  /out:cmTC_4d685.exe /implib:cmTC_4d685.lib /pdb:cmTC_4d685.pdb /version:0.0 /machine:x64  /debug /INCREMENTAL /subsystem:console  kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib && cd .\"\r\n    RC Pass 1: command \"rc /fo CMakeFiles\\cmTC_4d685.dir/manifest.res CMakeFiles\\cmTC_4d685.dir/manifest.rc\" failed (exit code 0) with the following output:\r\n    The system cannot find the file specified\r\n    ninja: build stopped: subcommand failed.\r\n\r\n\r\n\r\n\r\n\r\n  CMake will not be able to correctly generate this project.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:15 (project)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nSee also \"D:/liboqs/liboqs/build/CMakeFiles/CMakeOutput.log\".\r\nSee also \"D:/liboqs/liboqs/build/CMakeFiles/CMakeError.log\".\r\nninja: error: loading 'build.ninja': The system cannot find the file specified.\r\n\r\nPress any key to continue . . .\r\n\r\nAny idea what I should do to fix this ?\r\n\r\nI setup the environment as follows :\r\n\r\nd:\\chromium\\pqc>type set_env.bat\r\n@echo off\r\npath c:\\depot_tools;C:\\Program Files (x86)\\Resource Kit;c:\\Program Files\\Cmake\\bin;%path%;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\Hostx64\\x64\r\nset DEPOT_TOOLS_WIN_TOOLCHAIN=0\r\nset vs2019_install=C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\r\n\r\nd:\\chromium\\pqc>notepad set_env.bat\r\n\r\nd:\\chromium\\pqc>type set_root.bat\r\n@echo off\r\nset CHROMIUM_ROOT=%PROJECT%\\src\r\nd:\\chromium\\pqc>\r\n\r\nMy Windows batches are fine as far as the non-PQC build goes, but I'm stuck at liboqs build at the moment.\r\n","performed_via_github_app":null}},"public":true,"created_at":"2021-08-19T09:52:15Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"17638540494","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":218087071,"name":"open-quantum-safe/oqs-demos","url":"https://api.github.com/repos/open-quantum-safe/oqs-demos"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/97","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/97/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/97/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/97/events","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/97","id":970797017,"node_id":"MDU6SXNzdWU5NzA3OTcwMTc=","number":97,"title":"Can't build oqs-demos/chromium","user":{"login":"madbrain76","id":57333073,"node_id":"MDQ6VXNlcjU3MzMzMDcz","avatar_url":"https://avatars.githubusercontent.com/u/57333073?v=4","gravatar_id":"","url":"https://api.github.com/users/madbrain76","html_url":"https://github.com/madbrain76","followers_url":"https://api.github.com/users/madbrain76/followers","following_url":"https://api.github.com/users/madbrain76/following{/other_user}","gists_url":"https://api.github.com/users/madbrain76/gists{/gist_id}","starred_url":"https://api.github.com/users/madbrain76/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madbrain76/subscriptions","organizations_url":"https://api.github.com/users/madbrain76/orgs","repos_url":"https://api.github.com/users/madbrain76/repos","events_url":"https://api.github.com/users/madbrain76/events{/privacy}","received_events_url":"https://api.github.com/users/madbrain76/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2021-08-14T02:08:10Z","updated_at":"2021-08-19T16:28:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I followed the instructions at \r\nhttps://github.com/open-quantum-safe/oqs-demos/tree/main/chromium .\r\n\r\nI am building on Ubuntu 20.04 .\r\n\r\nThe first build error I got was :\r\n\r\nninja: Entering directory `out/Default'\r\n[1/1] Regenerating ninja files\r\nFAILED: build.ninja \r\n../../buildtools/linux64/gn --root=../.. -q gen .\r\nERROR at //third_party/boringssl/BUILD.gn:48:46: Undefined identifier\r\nall_headers = crypto_headers + ssl_headers + oqs_headers\r\n                                             ^----------\r\nSee //crypto/BUILD.gn:78:19: which caused the file to be included.\r\n  public_deps = [ \"//third_party/boringssl\" ]\r\n                  ^------------------------\r\n\r\n\r\nI tried to comment out oqs_headers . Then I hit the following :\r\n\r\n../../net/cert/internal/simple_path_builder_delegate.cc:38:7: error: use of undeclared identifier 'IS_OQS_PKEY'\r\n  if (IS_OQS_PKEY(curve_nid)) {\r\n      ^\r\n../../net/cert/internal/simple_path_builder_delegate.cc:117:7: error: use of undeclared identifier 'IS_OQS_PKEY'\r\n  if (IS_OQS_PKEY(pkey_id)) {\r\n      ^\r\n2 errors generated.\r\n\r\nIt looks like the oqs-mods.patch file is quite old - 5 months.\r\nI don't think it works with the current liboqs 0.7.0 .\r\nI tried liboqs 0.6.0 and 0.5.0, and reinstalled them into the Chromium tree, but I still hit the same error.\r\n\r\nCan someone please provide the proper version of liboqs I should be using with Chromium, as well as the correct patch ?\r\n\r\nThanks.\r\n","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/902057238","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/97#issuecomment-902057238","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/97","id":902057238,"node_id":"IC_kwDODP--n841xE0W","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2021-08-19T16:28:33Z","updated_at":"2021-08-19T16:28:33Z","author_association":"MEMBER","body":">  I guess that is a separate issue.\r\n\r\nIt definitely is. Could you please create an issue [here](https://github.com/open-quantum-safe/liboqs/issues) after checking the Windows CI scripts (e.g., https://github.com/open-quantum-safe/liboqs/blob/main/appveyor_build.bat) and [platform specific build hints](https://github.com/open-quantum-safe/liboqs/wiki/Platform-specific-notes-for-building-liboqs) for guidance?\r\n\r\nSorry to be of no more help but I had only very limited exposure to building \"stuff\" on Windows, surely none with Chromium :-(","performed_via_github_app":null}},"public":true,"created_at":"2021-08-19T16:28:34Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
