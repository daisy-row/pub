{"id":"15645980181","type":"IssuesEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/502","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/502/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/502/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/502/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/502","id":461567325,"node_id":"MDU6SXNzdWU0NjE1NjczMjU=","number":502,"title":"Use OpenSSL SHA3 for incremental API","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[{"id":423520878,"node_id":"MDU6TGFiZWw0MjM1MjA4Nzg=","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"New feature or request"},{"id":1876026231,"node_id":"MDU6TGFiZWwxODc2MDI2MjMx","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/future-work","name":"future-work","color":"cccccc","default":false,"description":"Will not be fixed in current release cycle"}],"state":"closed","locked":false,"assignee":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"assignees":[{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2019-06-27T14:35:46Z","updated_at":"2021-03-22T23:55:25Z","closed_at":"2021-03-22T23:55:25Z","author_association":"MEMBER","active_lock_reason":null,"body":"","performed_via_github_app":null}},"public":true,"created_at":"2021-03-22T23:55:25Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"15645987883","type":"IssuesEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/791","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/791/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/791/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/791/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/791","id":657670194,"node_id":"MDU6SXNzdWU2NTc2NzAxOTQ=","number":791,"title":"Undefined behaviour in KeccakP-1600-times4-SIMD256","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/milestones/13","html_url":"https://github.com/open-quantum-safe/liboqs/milestone/13","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/milestones/13/labels","id":6475880,"node_id":"MDk6TWlsZXN0b25lNjQ3NTg4MA==","number":13,"title":"0.5.1 RC1","description":"","creator":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"open_issues":4,"closed_issues":5,"state":"open","created_at":"2021-02-24T18:42:42Z","updated_at":"2021-03-22T23:56:14Z","due_on":"2021-03-19T07:00:00Z","closed_at":null},"comments":3,"created_at":"2020-07-15T21:25:39Z","updated_at":"2021-03-22T23:56:14Z","closed_at":"2021-03-22T23:56:14Z","author_association":"MEMBER","active_lock_reason":null,"body":"When enabling clang's UndefinedBehaviorSanitizer using the build sequence\r\n```\r\nmkdir build && cd build\r\ncmake -DCMAKE_C_COMPILER=clang-9 -DCMAKE_BUILD_TYPE=Debug -DUSE_SANITIZER=Undefined -GNinja ..\r\nninja\r\n```\r\nthere are several undefined behaviours in many algorithms, related to the KeccakP-1600-times4-SIMD256 operation.  I can't tell at this point whether the undefined behaviour is present in the Keccak code package or in how code in liboqs/implementations are calling it.  Here's an example:\r\n\r\n```\r\ntests/test_kem Kyber512\r\nConfiguration info\r\n==================\r\nTarget platform:  x86_64-Linux-4.19.76-linuxkit\r\nCompiler:         clang (9.0.0 (tags/RELEASE_900/final))\r\nOQS version:      0.3.1-dev\r\nGit commit:       53937db0c2c5e40afc50c4a8be2362379ca407de\r\nOpenSSL enabled:  Yes (OpenSSL 1.1.1  11 Sep 2018)\r\nAES:              OpenSSL\r\nSHA-2:            OpenSSL\r\nSHA-3:            OpenSSL\r\n\r\n================================================================================\r\nSample computation for KEM Kyber512\r\n================================================================================\r\n/usr/lib/llvm-9/lib/clang/9.0.0/include/avxintrin.h:3145:10: runtime error: load of misaligned address 0x000001220830 for type 'const __m256i' (vector of 4 'long long' values), which requires 32 byte alignment\r\n0x000001220830: note: pointer points here\r\n 00 00 00 00  07 00 01 02 03 04 05 06  0f 08 09 0a 0b 0c 0d 0e  17 10 11 12 13 14 15 16  1f 18 19 1a\r\n              ^ \r\nUndefinedBehaviorSanitizer:DEADLYSIGNAL\r\n==5033==ERROR: UndefinedBehaviorSanitizer: SEGV on unknown address 0x000000000000 (pc 0x000000bc2081 bp 0x7fa205e65fb0 sp 0x7fa205e1d640 T5034)\r\n==5033==The signal is caused by a READ memory access.\r\n==5033==Hint: address points to the zero page.\r\n    #0 0xbc2080 in KeccakP1600times4_PermuteAll_24rounds /root/liboqs/build/../src/common/sha3/keccak4x/KeccakP-1600-times4-SIMD256.c\r\n    #1 0xb80301 in keccak_squeezeblocks4x /root/liboqs/build/../src/kem/kyber/pqclean_kyber512_avx2/fips202x4.c:101:9\r\n    #2 0xb802ad in PQCLEAN_KYBER512_AVX2_shake128x4_squeezeblocks /root/liboqs/build/../src/kem/kyber/pqclean_kyber512_avx2/fips202x4.c:154:5\r\n    #3 0xa1c4aa in gen_matrix /root/liboqs/build/../src/kem/kyber/pqclean_kyber512_avx2/indcpa.c:149:5\r\n    #4 0xa1bbd9 in PQCLEAN_KYBER512_AVX2_indcpa_keypair /root/liboqs/build/../src/kem/kyber/pqclean_kyber512_avx2/indcpa.c:192:5\r\n    #5 0x67423f in PQCLEAN_KYBER512_AVX2_crypto_kem_keypair /root/liboqs/build/../src/kem/kyber/pqclean_kyber512_avx2/kem.c:22:5\r\n    #6 0x673209 in OQS_KEM_kyber_512_keypair /root/liboqs/build/../src/kem/kyber/kem_kyber_512.c:49:23\r\n    #7 0x42b961 in OQS_KEM_keypair /root/liboqs/build/../src/kem/kem.c:805:10\r\n    #8 0x424e9a in kem_test_correctness /root/liboqs/build/../tests/test_kem.c:78:7\r\n    #9 0x424115 in test_wrapper /root/liboqs/build/../tests/test_kem.c:151:11\r\n    #10 0x7fa2068866da in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76da)\r\n    #11 0x7fa205f8b88e in clone (/lib/x86_64-linux-gnu/libc.so.6+0x12188e)\r\n\r\nUndefinedBehaviorSanitizer can not provide additional info.\r\n==5033==ABORTING\r\n```\r\n\r\nI thought it might be due to the variable `state` in [indcpa.c/gen_matrix](https://github.com/open-quantum-safe/liboqs/blob/53937db0c2c5e40afc50c4a8be2362379ca407de/src/kem/kyber/pqclean_kyber512_avx2/indcpa.c#L141) being on the heap, so I tried allocating its contents using aligned\\_alloc, but to no avail.  I'm at a loss at how to proceed.  Any ideas? @thomwiggers @cryptojedi @baentsch ","performed_via_github_app":null}},"public":true,"created_at":"2021-03-22T23:56:14Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
