{"id":"15712027849","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/294","id":836797345,"node_id":"MDU6SXNzdWU4MzY3OTczNDU=","number":294,"title":"cannot generate self-signed root CA certificate","user":{"login":"IsTyping","id":75671533,"node_id":"MDQ6VXNlcjc1NjcxNTMz","avatar_url":"https://avatars.githubusercontent.com/u/75671533?v=4","gravatar_id":"","url":"https://api.github.com/users/IsTyping","html_url":"https://github.com/IsTyping","followers_url":"https://api.github.com/users/IsTyping/followers","following_url":"https://api.github.com/users/IsTyping/following{/other_user}","gists_url":"https://api.github.com/users/IsTyping/gists{/gist_id}","starred_url":"https://api.github.com/users/IsTyping/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IsTyping/subscriptions","organizations_url":"https://api.github.com/users/IsTyping/orgs","repos_url":"https://api.github.com/users/IsTyping/repos","events_url":"https://api.github.com/users/IsTyping/events{/privacy}","received_events_url":"https://api.github.com/users/IsTyping/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2021-03-20T12:32:19Z","updated_at":"2021-03-27T10:13:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm starting the TLS demmo on Ubuntu 18 with a shared library set up and these default algorithms announced: -DOQS_DEFAULT_GROUPS=\\\"CRYSTALS-kyber:FRODO:SABER\\\" . \r\nI try to generate the self signed certificate from my openssl-1.1.1 main directory with:\r\n\r\n`apps/openssl req -x509 -new -newkey kyber512 -keyout kyber512_CA.key -out kyber512_CA.crt -nodes -subj \"/CN=oqstest CA\" -days 365 -config apps/openssl.cnf`\r\n\r\nI get this error:\r\n\r\n`Can't load /root/.rnd into RNG\r\n140383120265664:error:2406F079:random number generator:RAND_load_file:Cannot open file:crypto/rand/randfile.c:88:Filename=/root/.rnd\r\nUnknown algorithm kyber512`\r\n\r\nThere is no such file /root/.rnd. \r\nIf I try the ECDSA certificate example I get the same error but instead of unknown algorithm it generates EC private key. \r\nI've followed quick start several times but cannot see where I've gone wrong.","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/808706482","html_url":"https://github.com/open-quantum-safe/openssl/issues/294#issuecomment-808706482","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294","id":808706482,"node_id":"MDEyOklzc3VlQ29tbWVudDgwODcwNjQ4Mg==","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2021-03-27T10:13:23Z","updated_at":"2021-03-27T10:13:23Z","author_association":"MEMBER","body":"> ./Configure shared linux-x86_64 -lm\r\n\r\nAgain, you did not set LDFLAGS or RPATH as per my (and the OpenSSL build) suggestions above. Why? Alternatively, did you run `make install`?\r\n\r\n> What am I doing wrong?\r\n\r\nOne thing I don't understand is your use of ` -DQOS_ENABLE_KEM_KRYSTALS-Kyber`: Why do set this? Where did you find this constant defined? Generally, why do you explicitly enable algorithms? And why don't you explicitly enable dilithium? Or in other words, is ` OQS_ENABLE_SIG_DILITHIUM` set (probably in `/opt/openssl/openssl-1.1.1j/oqs/include/oqs/)oqsconfig.h` at all? If not, the error message is explained.\r\n\r\nIf still unresolved, please provide a full listing of how you are \"trying to generate the self-signed CA cert\", incl. value of LD_LIBRARY_PATH and the contents of that directory as well as the contents of `oqsconfig.h` (embedded in your openssl build directory; even better than that would be the output of `./apps/openssl speed x`).\r\n","performed_via_github_app":null}},"public":true,"created_at":"2021-03-27T10:13:23Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"15713281523","type":"IssueCommentEvent","actor":{"id":37668804,"login":"taimoorgit","display_login":"taimoorgit","gravatar_id":"","url":"https://api.github.com/users/taimoorgit","avatar_url":"https://avatars.githubusercontent.com/u/37668804?"},"repo":{"id":247826799,"name":"open-quantum-safe/liboqs-java","url":"https://api.github.com/repos/open-quantum-safe/liboqs-java"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/14","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/14/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/14/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/14/events","html_url":"https://github.com/open-quantum-safe/liboqs-java/issues/14","id":842527991,"node_id":"MDU6SXNzdWU4NDI1Mjc5OTE=","number":14,"title":"JAVA_HOME is set, but jni.h not found","user":{"login":"taimoorgit","id":37668804,"node_id":"MDQ6VXNlcjM3NjY4ODA0","avatar_url":"https://avatars.githubusercontent.com/u/37668804?v=4","gravatar_id":"","url":"https://api.github.com/users/taimoorgit","html_url":"https://github.com/taimoorgit","followers_url":"https://api.github.com/users/taimoorgit/followers","following_url":"https://api.github.com/users/taimoorgit/following{/other_user}","gists_url":"https://api.github.com/users/taimoorgit/gists{/gist_id}","starred_url":"https://api.github.com/users/taimoorgit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taimoorgit/subscriptions","organizations_url":"https://api.github.com/users/taimoorgit/orgs","repos_url":"https://api.github.com/users/taimoorgit/repos","events_url":"https://api.github.com/users/taimoorgit/events{/privacy}","received_events_url":"https://api.github.com/users/taimoorgit/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-03-27T15:32:15Z","updated_at":"2021-03-27T15:32:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI am trying to build the Maven package on WSL/Ubuntu. I have liboqs installed with shared libs enabled. I have installed JDK 11 and set my JAVA_HOME environment variable, but it seems like jni.h still isn't found. Is there a step I am missing that can fix this? \r\n\r\n```\r\ntaimoor@GAMING-PC:~/liboqs-java$ lsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 20.04.1 LTS\r\nRelease:        20.04\r\nCodename:       focal\r\ntaimoor@GAMING-PC:~/liboqs-java$ java --version\r\nopenjdk 11.0.10 2021-01-19\r\nOpenJDK Runtime Environment (build 11.0.10+9-Ubuntu-0ubuntu1.20.04)\r\nOpenJDK 64-Bit Server VM (build 11.0.10+9-Ubuntu-0ubuntu1.20.04, mixed mode, sharing)\r\ntaimoor@GAMING-PC:~/liboqs-java$ echo $JAVA_HOME && ls $JAVA_HOME\r\n/usr/lib/jvm/java-1.11.0-openjdk-amd64\r\nbin  conf  docs  legal  lib  man  release\r\ntaimoor@GAMING-PC:~/liboqs-java$ mvn package -P linux -Dliboqs.include.dir=\"/usr/local/include\" -Dliboqs.lib.dir=\"/usr/local/lib\"\r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by com.google.inject.internal.cglib.core.$ReflectUtils$1 (file:/usr/share/maven/lib/guice.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)\r\nWARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.$ReflectUtils$1\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\n[INFO] Scanning for projects...\r\n[INFO]\r\n[INFO] ------------------< org.openquantumsafe:liboqs-java >-------------------\r\n[INFO] Building liboqs-java: Java wrapper for liboqs 1.0\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] --- maven-antrun-plugin:3.0.0:run (default) @ liboqs-java ---\r\n[INFO] Executing tasks\r\n[INFO] Executed tasks\r\n[INFO]\r\n[INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ liboqs-java ---\r\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\r\n[INFO] Copying 0 resource\r\n[INFO]\r\n[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ liboqs-java ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO]\r\n[INFO] --- native-maven-plugin:1.0-alpha-9:initialize (generate-shared-oqs-library) @ liboqs-java ---\r\n[INFO]\r\n[INFO] --- native-maven-plugin:1.0-alpha-9:compile (generate-shared-oqs-library) @ liboqs-java ---\r\n[INFO] /bin/sh -c cd '/home/taimoor/liboqs-java' && 'gcc' '-I/usr/lib/jvm/java-1.11.0-openjdk-amd64/include' '-I/usr/lib/jvm/java-1.11.0-openjdk-amd64/include/linux' '-fPIC' '-Wall' '-O3' '-I/usr/local/include' '-I/home/taimoor/liboqs-java/src/main/c' '-I/home/taimoor/liboqs-java/target/generated-sources/annotations' '-o/home/taimoor/liboqs-java/target/objs/handle.o' '-c' '/home/taimoor/liboqs-java/src/main/c/handle.c'\r\nIn file included from /home/taimoor/liboqs-java/src/main/c/handle.c:1:\r\n/home/taimoor/liboqs-java/src/main/c/handle.h:4:10: fatal error: jni.h: No such file or directory\r\n    4 | #include <jni.h>\r\n      |          ^~~~~~~\r\ncompilation terminated.\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.905 s\r\n[INFO] Finished at: 2021-03-27T11:21:45-04:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.codehaus.mojo:native-maven-plugin:1.0-alpha-9:compile (generate-shared-oqs-library) on project liboqs-java: Error executing command line. Exit code:1 -> [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n```\r\n\r\nThank you","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/comments/808750134","html_url":"https://github.com/open-quantum-safe/liboqs-java/issues/14#issuecomment-808750134","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/14","id":808750134,"node_id":"MDEyOklzc3VlQ29tbWVudDgwODc1MDEzNA==","user":{"login":"taimoorgit","id":37668804,"node_id":"MDQ6VXNlcjM3NjY4ODA0","avatar_url":"https://avatars.githubusercontent.com/u/37668804?v=4","gravatar_id":"","url":"https://api.github.com/users/taimoorgit","html_url":"https://github.com/taimoorgit","followers_url":"https://api.github.com/users/taimoorgit/followers","following_url":"https://api.github.com/users/taimoorgit/following{/other_user}","gists_url":"https://api.github.com/users/taimoorgit/gists{/gist_id}","starred_url":"https://api.github.com/users/taimoorgit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taimoorgit/subscriptions","organizations_url":"https://api.github.com/users/taimoorgit/orgs","repos_url":"https://api.github.com/users/taimoorgit/repos","events_url":"https://api.github.com/users/taimoorgit/events{/privacy}","received_events_url":"https://api.github.com/users/taimoorgit/received_events","type":"User","site_admin":false},"created_at":"2021-03-27T15:32:43Z","updated_at":"2021-03-27T15:32:43Z","author_association":"NONE","body":"```\r\ntaimoor@GAMING-PC:~/liboqs-java$ mvn --version\r\nApache Maven 3.6.3\r\nMaven home: /usr/share/maven\r\nJava version: 11.0.10, vendor: Ubuntu, runtime: /usr/lib/jvm/java-11-openjdk-amd64\r\nDefault locale: en, platform encoding: UTF-8\r\nOS name: \"linux\", version: \"5.4.72-microsoft-standard-wsl2\", arch: \"amd64\", family: \"unix\"\r\n```","performed_via_github_app":null}},"public":true,"created_at":"2021-03-27T15:32:43Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"15713735801","type":"IssueCommentEvent","actor":{"id":75671533,"login":"IsTyping","display_login":"IsTyping","gravatar_id":"","url":"https://api.github.com/users/IsTyping","avatar_url":"https://avatars.githubusercontent.com/u/75671533?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/294","id":836797345,"node_id":"MDU6SXNzdWU4MzY3OTczNDU=","number":294,"title":"cannot generate self-signed root CA certificate","user":{"login":"IsTyping","id":75671533,"node_id":"MDQ6VXNlcjc1NjcxNTMz","avatar_url":"https://avatars.githubusercontent.com/u/75671533?v=4","gravatar_id":"","url":"https://api.github.com/users/IsTyping","html_url":"https://github.com/IsTyping","followers_url":"https://api.github.com/users/IsTyping/followers","following_url":"https://api.github.com/users/IsTyping/following{/other_user}","gists_url":"https://api.github.com/users/IsTyping/gists{/gist_id}","starred_url":"https://api.github.com/users/IsTyping/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IsTyping/subscriptions","organizations_url":"https://api.github.com/users/IsTyping/orgs","repos_url":"https://api.github.com/users/IsTyping/repos","events_url":"https://api.github.com/users/IsTyping/events{/privacy}","received_events_url":"https://api.github.com/users/IsTyping/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-03-20T12:32:19Z","updated_at":"2021-03-27T17:17:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm starting the TLS demmo on Ubuntu 18 with a shared library set up and these default algorithms announced: -DOQS_DEFAULT_GROUPS=\\\"CRYSTALS-kyber:FRODO:SABER\\\" . \r\nI try to generate the self signed certificate from my openssl-1.1.1 main directory with:\r\n\r\n`apps/openssl req -x509 -new -newkey kyber512 -keyout kyber512_CA.key -out kyber512_CA.crt -nodes -subj \"/CN=oqstest CA\" -days 365 -config apps/openssl.cnf`\r\n\r\nI get this error:\r\n\r\n`Can't load /root/.rnd into RNG\r\n140383120265664:error:2406F079:random number generator:RAND_load_file:Cannot open file:crypto/rand/randfile.c:88:Filename=/root/.rnd\r\nUnknown algorithm kyber512`\r\n\r\nThere is no such file /root/.rnd. \r\nIf I try the ECDSA certificate example I get the same error but instead of unknown algorithm it generates EC private key. \r\nI've followed quick start several times but cannot see where I've gone wrong.","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/808764558","html_url":"https://github.com/open-quantum-safe/openssl/issues/294#issuecomment-808764558","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294","id":808764558,"node_id":"MDEyOklzc3VlQ29tbWVudDgwODc2NDU1OA==","user":{"login":"IsTyping","id":75671533,"node_id":"MDQ6VXNlcjc1NjcxNTMz","avatar_url":"https://avatars.githubusercontent.com/u/75671533?v=4","gravatar_id":"","url":"https://api.github.com/users/IsTyping","html_url":"https://github.com/IsTyping","followers_url":"https://api.github.com/users/IsTyping/followers","following_url":"https://api.github.com/users/IsTyping/following{/other_user}","gists_url":"https://api.github.com/users/IsTyping/gists{/gist_id}","starred_url":"https://api.github.com/users/IsTyping/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IsTyping/subscriptions","organizations_url":"https://api.github.com/users/IsTyping/orgs","repos_url":"https://api.github.com/users/IsTyping/repos","events_url":"https://api.github.com/users/IsTyping/events{/privacy}","received_events_url":"https://api.github.com/users/IsTyping/received_events","type":"User","site_admin":false},"created_at":"2021-03-27T17:17:12Z","updated_at":"2021-03-27T17:17:12Z","author_association":"NONE","body":"I defined the algorithms as I read in build this would make the algorithms within available - like NTRU makes ntru_hps2048509 ect available. I did not specify dilithium as it is part of the default setting. With your feedback I have tried:\r\n```\r\nsudo apt install cmake gcc libtool libssl-dev make ninja-build git\r\nsudo apt install doxygen graphviz              //because I get an error asking for doxygen and dot\r\n\r\n/opt/openssl/openssl-1.1.1j      make install\r\n/opt/openssl/                            git clone --branch main https://github.com/open-quantum-safe/liboqs.git\r\n/opt/openssl/liboqs/build         cmake -GNinja -DCMAKE_INSTALL_PREFIX=/opt/openssl/openssl-1.1.1j/oqs -DOQS_USE_OPENSSL=ON -DBUILD_SHARED_LIBS=ON -DOPENSSL_ROOT_DIR=/opt/openssl/openssl-1.1.1j ..\r\n                                                  ninja\r\n                                                  ninja install\r\n/opt/openssl/openssl-1.1.1j      ./Configure shared linux-x86_64 -lm\r\n                                          \t  make -j\r\n```\r\nThis finishes with 'make[1]: Leaving directory'/opt/openssl/openssl-1.1.1j'.\r\nThen I try to generate the CA certificate:\r\n```\r\n/opt/openssl/openssl-1.1.1j      apps/openssl req -x509 -new -newkey dilithium2 -keyout dilithium2_CA.key -out dilithium2_CA.crt -nodes -subj \"/CN=oqstest CA\" -days 365 -config apps/openssl.cnf\r\n```\r\nOUTPUT: 'Unknown algorithm dilithium2'\r\n/opt/openssl/openssl-1.1.1j/oqs/include/oqs/ contains 'sig_dilithium.h' and 'oqsconfig.h' which has '#define OQS_SIG_DEFAULT OQS_SIG_alg_dilithium_2'. \r\n\r\nIf I try:\r\n/opt/openssl/openssl-1.1.1j     ./config -W1,-rpath=/opt/openssl/lib\r\nOUTPUT: 'gcc error: unrecognised command line  'W1'' and the same error for rpath \r\n\r\necho $LD_LIBRARY_PATH\r\n```\r\n/opt/openssl/lib\r\n/opt/openssl/lib# ls\r\nengines-1.1      libcrypto.so          libssl.a         libssl.so.1.1\r\nlibcrypto.a        libcrypto.so.1.1     libssl.so       pkgconfig\r\n```\r\n\r\n./apps/openssl speed x\r\n```\r\nspeed: Unknown algorithm x\r\n```\r\nI can send the output of oqsconfig.h later if also needed.\r\n","performed_via_github_app":null}},"public":true,"created_at":"2021-03-27T17:17:12Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"15713966009","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/294","id":836797345,"node_id":"MDU6SXNzdWU4MzY3OTczNDU=","number":294,"title":"cannot generate self-signed root CA certificate","user":{"login":"IsTyping","id":75671533,"node_id":"MDQ6VXNlcjc1NjcxNTMz","avatar_url":"https://avatars.githubusercontent.com/u/75671533?v=4","gravatar_id":"","url":"https://api.github.com/users/IsTyping","html_url":"https://github.com/IsTyping","followers_url":"https://api.github.com/users/IsTyping/followers","following_url":"https://api.github.com/users/IsTyping/following{/other_user}","gists_url":"https://api.github.com/users/IsTyping/gists{/gist_id}","starred_url":"https://api.github.com/users/IsTyping/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IsTyping/subscriptions","organizations_url":"https://api.github.com/users/IsTyping/orgs","repos_url":"https://api.github.com/users/IsTyping/repos","events_url":"https://api.github.com/users/IsTyping/events{/privacy}","received_events_url":"https://api.github.com/users/IsTyping/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2021-03-20T12:32:19Z","updated_at":"2021-03-27T18:10:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm starting the TLS demmo on Ubuntu 18 with a shared library set up and these default algorithms announced: -DOQS_DEFAULT_GROUPS=\\\"CRYSTALS-kyber:FRODO:SABER\\\" . \r\nI try to generate the self signed certificate from my openssl-1.1.1 main directory with:\r\n\r\n`apps/openssl req -x509 -new -newkey kyber512 -keyout kyber512_CA.key -out kyber512_CA.crt -nodes -subj \"/CN=oqstest CA\" -days 365 -config apps/openssl.cnf`\r\n\r\nI get this error:\r\n\r\n`Can't load /root/.rnd into RNG\r\n140383120265664:error:2406F079:random number generator:RAND_load_file:Cannot open file:crypto/rand/randfile.c:88:Filename=/root/.rnd\r\nUnknown algorithm kyber512`\r\n\r\nThere is no such file /root/.rnd. \r\nIf I try the ECDSA certificate example I get the same error but instead of unknown algorithm it generates EC private key. \r\nI've followed quick start several times but cannot see where I've gone wrong.","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/808775135","html_url":"https://github.com/open-quantum-safe/openssl/issues/294#issuecomment-808775135","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/294","id":808775135,"node_id":"MDEyOklzc3VlQ29tbWVudDgwODc3NTEzNQ==","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2021-03-27T18:10:52Z","updated_at":"2021-03-27T18:10:52Z","author_association":"MEMBER","body":"If this happens:\r\n\r\n```\r\n./apps/openssl speed x\r\n\r\nspeed: Unknown algorithm x\r\n```\r\nyou are not running an OQS-enabled openssl.\r\n\r\nThis is what _should_ happen:\r\n```\r\n>~/git/oqs/openssl$ ./apps/openssl version\r\nOpenSSL 1.1.1k  25 Mar 2021, Open Quantum Safe xxxx-xx snapshot\r\n>~/git/oqs/openssl$ ./apps/openssl speed x\r\nspeed: Unknown algorithm x\r\nOQSKEM config: -frodo640aes,frodo640shake,frodo976aes,frodo976shake,frodo1344aes,frodo1344shake,bike1l1cpa,bike1l3cpa,kyber512,kyber768,kyber1024,ntru_hps2048509,ntru_hps2048677,ntru_hps4096821,ntru_hrss701,lightsaber,saber,firesaber,sidhp434,sidhp503,sidhp610,sidhp751,sikep434,sikep503,sikep610,sikep751,bike1l1fo,bike1l3fo,kyber90s512,kyber90s768,kyber90s1024,hqc128,hqc192,hqc256,ntrulpr653,ntrulpr761,ntrulpr857,sntrup653,sntrup761,sntrup857\r\nOQSSIG config: -oqs_sig_default,p256_oqs_sig_default,rsa3072_oqs_sig_default,dilithium2,p256_dilithium2,rsa3072_dilithium2,dilithium3,p384_dilithium3,dilithium5,p521_dilithium5,dilithium2_aes,p256_dilithium2_aes,rsa3072_dilithium2_aes,dilithium3_aes,p384_dilithium3_aes,dilithium5_aes,p521_dilithium5_aes,falcon512,p256_falcon512,rsa3072_falcon512,falcon1024,p521_falcon1024,picnicl1full,p256_picnicl1full,rsa3072_picnicl1full,picnic3l1,p256_picnic3l1,rsa3072_picnic3l1,rainbowIclassic,p256_rainbowIclassic,rsa3072_rainbowIclassic,rainbowVclassic,p521_rainbowVclassic,sphincsharaka128frobust,p256_sphincsharaka128frobust,rsa3072_sphincsharaka128frobust,sphincssha256128frobust,p256_sphincssha256128frobust,rsa3072_sphincssha256128frobust,sphincsshake256128frobust,p256_sphincsshake256128frobust,rsa3072_sphincsshake256128frobust\r\n```\r\n\r\nOne more test: Please check the symbols in your local openssl build (e.g. `nm apps/openssl | grep dilithium2`):\r\nIf you don't get some 170 lines back, dilithium is not configured in (or your build is simply not building OQS-OpenSSL but a stock openssl: Can you please show the `git clone` command with which you cloned oqs-openssl? Or just run `git status` in the oqs-openssl build dir (which seems to be `/opt/openssl/openssl-1.1.1j` in your case)? If this doesn't show `OQS-OpenSSL_1_1_1-stable` you're not building OQS-OpenSSL. Is there no way you could start from scratch following _exactly_ the steps outlined in https://github.com/open-quantum-safe/openssl#building with `<OPENSSL_DIR>` set to something other than a plain OpenSSL install directory (your `/opt/openssl/openssl-1.1.1j`)? I'm really afraid your setup mixes up plain OpenSSL (needed for building liboqs) and OQS-OpenSSL (which is what you want to run).","performed_via_github_app":null}},"public":true,"created_at":"2021-03-27T18:10:53Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
