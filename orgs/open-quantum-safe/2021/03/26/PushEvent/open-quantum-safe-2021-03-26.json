{"id":"15696480587","type":"PushEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"push_id":6788746112,"size":1,"distinct_size":1,"ref":"refs/heads/OQS-OpenSSL_1_1_1-stable","head":"c2d0e86fb9202c6cf303b78b6f999cad5fdcdd37","before":"f5937740a1272ae3af0bec4c41c80bee3e931825","commits":[{"sha":"c2d0e86fb9202c6cf303b78b6f999cad5fdcdd37","author":{"name":"Michael Baentsch","email":"59bd0a3ff43b32849b319e645d4798d8a5d1e889@baentsch.ch"},"message":"ossl111k merge (#298)\n\n* Prepare for 1.1.1j-dev\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n* Fix typo in OPENSSL_malloc.pod\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13632)\r\n\r\n(cherry picked from commit 74c8dd1c516c7017477a205fd1f5f975cfa86722)\r\n\r\n* v3nametest: Make the gennames structure static\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/13635)\r\n\r\n(cherry picked from commit 7eea331eabe8b0a7ce03c9602a2bc72e9ddfe676)\r\n\r\n* Modify is_tls13_capable() to take account of the servername cb\r\n\r\nA servername cb may change the available certificates, so if we have one\r\nset then we cannot rely on the configured certificates to determine if we\r\nare capable of negotiating TLSv1.3 or not.\r\n\r\nFixes #13291\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13305)\r\n\r\n* Test that we can negotiate TLSv1.3 if we have an SNI callback\r\n\r\nIf an SNI callback has been set then we may have no certificuates suitable\r\nfor TLSv1.3 use configured for the current SSL_CTX. This should not prevent\r\nus from negotiating TLSv1.3, since we may change the SSL_CTX by the time we\r\nneed a suitable certificate.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13305)\r\n\r\n* Configurations: PowerPC is big endian\r\n\r\nDefine B_ENDIAN on PowerPC because it is a big endian architecture. With\r\nthis change the BN* related tests pass.\r\n\r\nFixes: #12199\r\n\r\nSigned-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/12371)\r\n\r\n(cherry picked from commit 52c6c12c1cad6f1046b34f4139d1aa3e967a5530)\r\n\r\n* Github CI: run also on repository pushes\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13686)\r\n\r\n(cherry picked from commit 4159ebca3cb3d9586d6709c7a0166a4af5676f91)\r\n\r\n* Document OCSP_REQ_CTX_i2d.\r\n\r\nThis is a backport of the documentation from #13620.\r\n\r\nReviewed-by: David von Oheimb <david.von.oheimb@siemens.com>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13691)\r\n\r\n* GitHub CI: Add 'check-update' and 'check-docs'\r\n\r\n'check-update' runs a 'make update' to check that it wasn't forgotten.\r\n\r\n'check-docs' runs 'make doc-nits'.  We have that as a separate job to\r\nmake it more prominent.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/13701)\r\n\r\n(cherry picked from commit 8175476b81c6b54bfa1c8555b35561099b202c4d)\r\n\r\n* Fix NULL pointer access caused by X509_ATTRIBUTE_create()\r\n\r\nWhen X509_ATTRIBUTE_create() receives an invalid NID (e.g., -1), return\r\nfailure rather than silently constructing a broken X509_ATTRIBUTE object\r\nthat might cause NULL pointer accesses later on.  This matters because\r\nX509_ATTRIBUTE_create() is used by API functions like PKCS7_add_attribute(3)\r\nand the NID comes straight from the user.\r\n\r\nThis bug was found while working on LibreSSL documentation.\r\n\r\nReviewed-by: Theo Buehler <tb@openbsd.org>\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/12052)\r\n\r\n(cherry picked from commit c4b2c53fadb158bee34aef90d5a7d500aead1f70)\r\n\r\n* CRYPTO_secure_malloc_init: BSD support improvements.\r\n\r\nBackport of #13394\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\n(Merged from https://github.com/openssl/openssl/pull/13637)\r\n\r\n* Update copyright years of auto-generated headers (make update)\r\n\r\nThis backports #13764.\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13769)\r\n\r\n* poly1305/asm/poly1305-armv4.pl: fix Clang compatibility issue\r\n\r\nI.e.:\r\n\r\n    error: out of range immediate fixup value\r\n\r\nThis fix is identical to one of the changes made in 3405db9, which I\r\ndiscovered right after taking a quick stab at fixing this.\r\n\r\nCLA: trivial\r\nFixes #7878\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13757)\r\n\r\n* Ensure DTLS free functions can handle NULL\r\n\r\nOur free functions should be able to deal with the case where the object\r\nbeing freed is NULL. This turns out to not be quite the case for DTLS\r\nrelated objects.\r\n\r\nFixes #13649\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13655)\r\n\r\n(cherry picked from commit d0afb30ef3950cacff50ec539e90073b95a276df)\r\n\r\n* Fix for negative return value from `SSL_CTX_sess_accept()`\r\n\r\nFixes #13183\r\n\r\nFrom the original issue report, before this commit, on master and on\r\n1.1.1, the issue can be detected with the following steps:\r\n\r\n- Start with a default SSL_CTX, initiate a TLS 1.3 connection with SNI,\r\n  \"Accept\" count of default context gets incremented\r\n- After servername lookup, \"Accept\" count of default context gets\r\n  decremented and that of SNI context is incremented\r\n- Server sends a \"Hello Retry Request\"\r\n- Client sends the second \"Client Hello\", now again \"Accept\" count of\r\n  default context is decremented. Hence giving a negative value.\r\n\r\nThis commit fixes it by adding a check on `s->hello_retry_request` in\r\naddition to `SSL_IS_FIRST_HANDSHAKE(s)`, to ensure the counter is moved\r\nonly on the first ClientHello.\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/13297)\r\n\r\n* [crypto/dh] side channel hardening for computing DH shared keys (1.1.1)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\n(Merged from https://github.com/openssl/openssl/pull/13772)\r\n\r\n* OPENSSL_cpuid_setup FreeBSD PowerPC update\r\n\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13821)\r\n\r\n(cherry picked from commit b57ec7394aace731c460b509aa84039274337600)\r\n\r\n* OPENSSL_cpuid_setup FreeBSD arm update.\r\n\r\nwhen possible using the getauxval equivalent which has similar ids as Linux, instead of bad instructions catch approach.\r\n\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13650)\r\n\r\n(cherry picked from commit 5eb24fbd1c3e0d130ba7f81f1ccf457a2b9d75ad)\r\n\r\n* Fix -static builds\r\n\r\nPull in check from #10878\r\nMove disabling of pic, threads and statics up higher before they\r\nare checked.\r\n\r\nFixes #12772\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/12773)\r\n\r\n* Skip BOM when reading the config file\r\n\r\nFixes #13840\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13857)\r\n\r\n(cherry picked from commit 4369a882a565c42673b28c586a5c46a8bca98d17)\r\n\r\n* X509_cmp(): Fix comparison in case x509v3_cache_extensions() failed to due to invalid cert\r\n\r\nThis is the backport of #13755 to v1.1.1.\r\nFixes #13698\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13756)\r\n\r\n* x509_vfy.c: Fix a regression in find_isser()\r\n\r\n...in case the candidate issuer cert is identical to the target cert.\r\n\r\nFixes #13739\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13749)\r\n\r\n* DOCS: Fix incorrect pass phrase options references\r\n\r\nThere were a number of older style references to the pass phrase\r\noptions section, now streamlined with the current openssl(1).\r\n\r\nFixes #13883\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/13886)\r\n\r\n* Fix regression in no-deprecated build\r\n\r\nAlso add a new no-deprecated CI build to test it.\r\n\r\nFixes #13896\r\n\r\nReviewed-by: David von Oheimb <david.von.oheimb@siemens.com>\r\n(Merged from https://github.com/openssl/openssl/pull/13902)\r\n\r\n* Ensure SRP BN_mod_exp follows the constant time path\r\n\r\nSRP_Calc_client_key calls BN_mod_exp with private data. However it was\r\nnot setting BN_FLG_CONSTTIME and therefore not using the constant time\r\nimplementation. This could be exploited in a side channel attack to\r\nrecover the password.\r\n\r\nSince the attack is local host only this is outside of the current OpenSSL\r\nthreat model and therefore no CVE is assigned.\r\n\r\nThanks to Mohammed Sabt and Daniel De Almeida Braga for reporting this\r\nissue.\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13889)\r\n\r\n* Fix typo in crl2pkcs documentation\r\n\r\nFixes #13910\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13911)\r\n\r\n(cherry picked from commit 6857058016e91d3182c2117922dd8001b27f5639)\r\n\r\n* CI: Add some legacy stuff that we do not test in GitHub CI yet\r\n\r\nThere are some options that seem to belong to the legacy build.\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\n(Merged from https://github.com/openssl/openssl/pull/13903)\r\n\r\n(cherry picked from commit adcaebc3148fe0fde3f7641c4b607f30e1479986)\r\n\r\n* Drop Travis\r\n\r\nAt this point, we have transitioned completely from Travis to GitHub Actions\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13941)\r\n\r\n* check_sig_alg_match(): weaken sig nid comparison to base alg\r\n\r\nThis (re-)allows RSA-PSS signers\r\n\r\nFixes #13931\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13982)\r\n\r\n* Add some missing committers to the AUTHORS list\r\n\r\nFixes #13815\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14029)\r\n\r\n(cherry picked from commit af403db090ee66715e81f0062d1ef614e8d921b5)\r\n\r\n* apps/ca: Properly handle certificate expiration times in do_updatedb\r\n\r\nFixes #13944\r\n\r\n   + changed ASN1_UTCTIME to ASN1_TIME\r\n   + removed all Y2K code from do_updatedb\r\n   + changed compare to ASN1_TIME_compare\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14026)\r\n\r\n* Prevent creating empty folder \"../apps/include\"\r\n\r\nThis folder \"../apps/include\" is accidentally created.\r\nThis prevents this glitch.\r\n\r\nFixes 19b4fe5844b (\"Add a CMAC test\")\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14051)\r\n\r\n* NOTES.WIN: fix typo\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/14078)\r\n\r\n* configdata.pm: Better display of enabled/disabled options\r\n\r\nThe options listed in the array @disablables are regular expressions.\r\nFor most of them, it's not visible, but there are a few.\r\n\r\nHowever, configdata.pm didn't quite treat them that way, which meant\r\nthat the few that are visibly regular expressions, there's a\r\ndifference between that and the corresponding the key in %disabled,\r\nwhich is never a regular expression.\r\n\r\nTo correctly display the enabled and disabled options with --dump,\r\nwe must therefore go through a bit of Perl gymnastics to get the\r\noutput correct enough, primarly so that disabled features don't look\r\nenabled.\r\n\r\nFixes #13790\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14081)\r\n\r\n* Configuration: ensure that 'no-tests' works correctly\r\n\r\n'no-tests' wasn't entirely respected by test/build.info.\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14081)\r\n\r\n* Remove unused 'peer_type' from SSL_SESSION\r\n\r\nThis field has not been used since #3858 was merged in 2017 when we\r\nmoved to a table-based lookup for certificate type properties instead of\r\nan index-based one.\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/13991)\r\n\r\n(cherry picked from commit 3bc0b621a7baf1a11bc5cad69a287ad093674d68)\r\n\r\n* Configurations/descrip.mms.tmpl: avoid enormous PIPE commands\r\n\r\nDCL has a total command line limitation that's too easily broken by\r\nthem.\r\n\r\nWe solve them by creating separate message scripts and using them.\r\n\r\nFixes #13789\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13834)\r\n\r\n* VMS documentation fixes\r\n\r\nThis mostly clarifies details.\r\n\r\nFixes #13789\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13834)\r\n\r\n* Fix Null pointer deref in X509_issuer_and_serial_hash()\r\n\r\nThe OpenSSL public API function X509_issuer_and_serial_hash() attempts\r\nto create a unique hash value based on the issuer and serial number data\r\ncontained within an X509 certificate. However it fails to correctly\r\nhandle any errors that may occur while parsing the issuer field (which\r\nmight occur if the issuer field is maliciously constructed). This may\r\nsubsequently result in a NULL pointer deref and a crash leading to a\r\npotential denial of service attack.\r\n\r\nThe function X509_issuer_and_serial_hash() is never directly called by\r\nOpenSSL itself so applications are only vulnerable if they use this\r\nfunction directly and they use it on certificates that may have been\r\nobtained from untrusted sources.\r\n\r\nCVE-2021-23841\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(cherry picked from commit 8130d654d1de922ea224fa18ee3bc7262edc39c0)\r\n\r\n* Test that X509_issuer_and_serial_hash doesn't crash\r\n\r\nProvide a certificate with a bad issuer and check that\r\nX509_issuer_and_serial_hash doesn't crash.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(cherry picked from commit 55869f594f052561b11a2db6a7c42690051868de)\r\n\r\n* Refactor rsa_test\r\n\r\nReduce code copying by factoring out common code into a separate function.\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Fix the RSA_SSLV23_PADDING padding type\r\n\r\nThis also fixes the public function RSA_padding_check_SSLv23.\r\n\r\nCommit 6555a89 changed the padding check logic in RSA_padding_check_SSLv23\r\nso that padding is rejected if the nul delimiter byte is not immediately\r\npreceded by at least 8 bytes containing 0x03. Prior to that commit the\r\npadding is rejected if it *is* preceded by at least 8 bytes containing 0x03.\r\n\r\nPresumably this change was made to be consistent with what it says in\r\nappendix E.3 of RFC 5246. Unfortunately that RFC is in error, and the\r\noriginal behaviour was correct. This is fixed in later errata issued for\r\nthat RFC.\r\n\r\nThis has no impact on libssl for modern versions of OpenSSL because\r\nthere is no protocol support for SSLv2 in these versions. However\r\napplications that call RSA_paddin_check_SSLv23 directly, or use the\r\nRSA_SSLV23_PADDING mode may still be impacted. The effect of the original\r\nerror is that an RSA message encrypted by an SSLv2 only client will fail to\r\nbe decrypted properly by a TLS capable server, or a message encrypted by a\r\nTLS capable client will fail to decrypt on an SSLv2 only server. Most\r\nsignificantly an RSA message encrypted by a TLS capable client will be\r\nsuccessfully decrypted by a TLS capable server. This last case should fail\r\ndue to a rollback being detected.\r\n\r\nThanks to D. Katz and Joel Luellwitz (both from Trustwave) for reporting\r\nthis issue.\r\n\r\nCVE-2021-23839\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Fix rsa_test to properly test RSA_SSLV23_PADDING\r\n\r\nWe test all three cases:\r\n- An SSLv2 only client talking to a TLS capable server\r\n- A TLS capable client talking to an SSLv2 only server\r\n- A TLS capable client talking to a TLS capable server (should fail due\r\nto detecting a rollback attack)\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Don't overflow the output length in EVP_CipherUpdate calls\r\n\r\nCVE-2021-23840\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Update CHANGES and NEWS for new release\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n* Update copyright year\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n* Prepare for 1.1.1j release\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n* Prepare for 1.1.1k-dev\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n* TEST: Add missing initialization\r\n\r\nCompiler complained.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14204)\r\n\r\n(cherry picked from commit 55e9d8cfffc1a40b0ab72e014ff62d5ef2a0ed63)\r\n\r\n* Use CRIOGET to fetch a crypto descriptor when present.\r\n\r\nFreeBSD's current /dev/crypto implementation requires that consumers\r\nclone a separate file descriptor via the CRIOGET ioctl that can then\r\nbe used with other ioctls such as CIOCGSESSION.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\n\r\n(cherry picked from commit b39c215decf6e68c28cb64dcfaf5ae5a7e8d35b4)\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13853)\r\n\r\n* Close /dev/crypto file descriptor after CRIOGET ioctl().\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\n\r\n(cherry picked from commit 3ddf44ea5a2c1c8c55f4f4072a611791c79d4e7c)\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13853)\r\n\r\n* CRYPTO_gcm128_decrypt: fix mac or tag calculation\r\n\r\nThe incorrect code is in #ifdef branch that is normally\r\nnot compiled in.\r\n\r\nSigned-off-by: Zhang Jinde <zjd5536@163.com>\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/12968)\r\n\r\n(cherry picked from commit 1d724b5e82ba36fb50fd24db3cd664da570daf84)\r\n\r\n* Fix an integer overflow in o_time.c\r\n\r\nIf input offset_sec is sufficiently large (> INT32_MAX * SECS_PER_DAY, which is possible for a long on 64-bit platforms), then the first assignment contains an overflow.\r\n\r\nI think leaving offset_hms as an int is still safe.\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14252)\r\n\r\n(cherry picked from commit 75de54363506e2b2480fc6baf0cd45b1f7fc8816)\r\n\r\n* Fix filename escaping in c_rehash\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14301)\r\n\r\n(cherry picked from commit 2d968951227acd422f0e712035de3216d47fc980)\r\n\r\n* Check ASN1_item_ndef_i2d() return value.\r\n\r\nReturn an error instead of trying to malloc a negative number.\r\nThe other usage in this file already had a similar check, and the caller\r\nshould have put an entry on the error stack already.\r\n\r\nNote that we only check the initial calls to obtain the encoded length,\r\nand assume that the follow-up call to actually encode to the allocated\r\nstorage will succeed if the first one did.\r\n\r\nFixes: #14177\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/14308)\r\n\r\n(cherry picked from commit 90b4247cc5dca58cee9da5f6975bb38fd200100a)\r\n\r\n* [github-ci] Add a out-of-tree_build job\r\n\r\nThis adds a new job to trigger the bug reported in\r\n<https://github.com/openssl/openssl/issues/11940>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14388)\r\n\r\n* [1.1.1] Fix `make update` for out-of-tree builds\r\n\r\nFixes #11940\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\n(Merged from https://github.com/openssl/openssl/pull/14388)\r\n\r\n* Check SSL_set1_chain error in set_cert_cb\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14469)\r\n\r\n(cherry picked from commit 1aa7ecd0d3f6d9c3739cf2e2d87673a3be03b352)\r\n\r\n* modes: fix coverity 1449860: overlapping memory copy\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14584)\r\n\r\n(cherry picked from commit 145f12d12dc83c737676883c625c2a95d34251ed)\r\n\r\n* modes: fix coverity 1449851: overlapping memory copy\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14584)\r\n\r\n(cherry picked from commit b875e0e820b07420429ebb90724ed28686a98853)\r\n\r\n* ssl: fix coverity 1451515: out of bounds memory access\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14585)\r\n\r\n(cherry picked from commit 3de7f014a985637361bdee775f78209300c88aae)\r\n\r\n* apps: fix coverity 966560: division by zero\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14586)\r\n\r\n(cherry picked from commit 7e7e034a10842dad3866c9447481b8527024bf44)\r\n\r\n* Add a missing RUN_ONCE in rand_lib.c\r\n\r\nSome of the callbacks in rand_lib.c were being invoked without the\r\nRUN_ONCE for that file being called. We add it during rand_pool_new\r\nwhich should cover all cases.\r\n\r\nFixes #7870\r\nFixes #11144\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14603)\r\n\r\n* ASN1: Reset the content dump flag after dumping\r\n\r\nWhen encountering a badly coded item, the DER printer (ASN1_print_dump())\r\nsets a flag to ensure that an additional hex dump of the offending content\r\nis printed as part of the output.  Unfortunately, this flag is never reset,\r\nwhich means that all following items are printed with the extra hex dump,\r\nwhether they are faulty or not.\r\n\r\nResetting the flag after hex dumping ensures that only the faulty contents\r\nare printed with the additional hex dump.\r\n\r\nFixes #14626\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14627)\r\n\r\n(cherry picked from commit 6e34a1048ce4871371eac224b995c3b4338f6166)\r\n\r\n* Fix missing INVALID_EXTENSION\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14639)\r\n\r\n* check_chain_extensions: Do not override error return value by check_curve\r\n\r\nThe X509_V_FLAG_X509_STRICT flag enables additional security checks of the\r\ncertificates present in a certificate chain. It is not set by default.\r\n\r\nStarting from OpenSSL version 1.1.1h a check to disallow certificates with\r\nexplicitly encoded elliptic curve parameters in the chain was added to the\r\nstrict checks.\r\n\r\nAn error in the implementation of this check meant that the result of a\r\nprevious check to confirm that certificates in the chain are valid CA\r\ncertificates was overwritten. This effectively bypasses the check\r\nthat non-CA certificates must not be able to issue other certificates.\r\n\r\nIf a \"purpose\" has been configured then a subsequent check that the\r\ncertificate is consistent with that purpose also checks that it is a\r\nvalid CA. Therefore where a purpose is set the certificate chain will\r\nstill be rejected even when the strict flag has been used. A purpose is\r\nset by default in libssl client and server certificate verification\r\nroutines, but it can be overriden by an application.\r\n\r\nAffected applications explicitly set the X509_V_FLAG_X509_STRICT\r\nverification flag and either do not set a purpose for the certificate\r\nverification or, in the case of TLS client or server applications,\r\noverride the default purpose to make it not set.\r\n\r\nCVE-2021-3450\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Teach TLSProxy how to encrypt <= TLSv1.2 ETM records\r\n\r\nPreviously TLSProxy only knew how to \"repack\" messages for TLSv1.3.\r\nMost of the handshake in <= TLSv1.2 is unencrypted so this hasn't been\r\ntoo much of restriction. However we now want to modify reneg handshakes\r\nwhich are encrypted so we need to add that capability.\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Add a test for CVE-2021-3449\r\n\r\nWe perform a reneg handshake, where the second ClientHello drops the\r\nsig_algs extension. It must also contain cert_sig_algs for the test to\r\nwork.\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* ssl sigalg extension: fix NULL pointer dereference\r\n\r\nAs the variable peer_sigalgslen is not cleared on ssl rehandshake, it's\r\npossible to crash an openssl tls secured server remotely by sending a\r\nmanipulated hello message in a rehandshake.\r\n\r\nOn such a manipulated rehandshake, tls1_set_shared_sigalgs() calls\r\ntls12_shared_sigalgs() with the peer_sigalgslen of the previous\r\nhandshake, while the peer_sigalgs has been freed.\r\nAs a result tls12_shared_sigalgs() walks over the available\r\npeer_sigalgs and tries to access data of a NULL pointer.\r\n\r\nThis issue was introduced by c589c34e61 (Add support for the TLS 1.3\r\nsignature_algorithms_cert extension, 2018-01-11).\r\n\r\nSigned-off-by: Peter Kästle <peter.kaestle@nokia.com>\r\nSigned-off-by: Samuel Sapalski <samuel.sapalski@nokia.com>\r\n\r\nCVE-2021-3449\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n* Ensure buffer/length pairs are always in sync\r\n\r\nFollowing on from CVE-2021-3449 which was caused by a non-zero length\r\nassociated with a NULL buffer, other buffer/length pairs are updated to\r\nensure that they too are always in sync.\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Update CHANGES and NEWS for new release\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n\r\n* Update copyright year\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n\r\n* Prepare for 1.1.1k release\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n\r\n* README version update [skip ci]\r\n\r\nCo-authored-by: Matt Caswell <matt@openssl.org>\r\nCo-authored-by: Nan Xiao <nan@chinadtrace.org>\r\nCo-authored-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nCo-authored-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>\r\nCo-authored-by: Rich Salz <rsalz@akamai.com>\r\nCo-authored-by: Richard Levitte <levitte@openssl.org>\r\nCo-authored-by: Ingo Schwarze <schwarze@openbsd.org>\r\nCo-authored-by: David Carlier <devnexen@gmail.com>\r\nCo-authored-by: Dr. David von Oheimb <David.von.Oheimb@siemens.com>\r\nCo-authored-by: Ole André Vadla Ravnås <oleavr@gmail.com>\r\nCo-authored-by: anupamam13 <anuavnd@gmail.com>\r\nCo-authored-by: Billy Brumley <bbrumley@gmail.com>\r\nCo-authored-by: Todd Short <tshort@akamai.com>\r\nCo-authored-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nCo-authored-by: Tim Hitchins <tim.hitchins@ekkosense.co.uk>\r\nCo-authored-by: Dr. Matthias St. Pierre <matthias.st.pierre@ncp-e.com>\r\nCo-authored-by: Armin Fuerst <armin@fuerst.priv.at>\r\nCo-authored-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\nCo-authored-by: Jay Satiro <raysatiro@yahoo.com>\r\nCo-authored-by: Benjamin Kaduk <bkaduk@akamai.com>\r\nCo-authored-by: John Baldwin <jhb@FreeBSD.org>\r\nCo-authored-by: Zhang Jinde <zjd5536@163.com>\r\nCo-authored-by: jwalch <jeremy.walch@gmail.com>\r\nCo-authored-by: Mark <mark@asx.hu>\r\nCo-authored-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nCo-authored-by: panda <daniel.phan36@gmail.com>\r\nCo-authored-by: Pauli <ppzgs1@gmail.com>\r\nCo-authored-by: Chenglong Zhang <auvkone@gmail.com>\r\nCo-authored-by: Tomas Mraz <tomas@openssl.org>\r\nCo-authored-by: Peter Kaestle <peter.kaestle@nokia.com>","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/c2d0e86fb9202c6cf303b78b6f999cad5fdcdd37"}]},"public":true,"created_at":"2021-03-26T02:08:50Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"15696496762","type":"PushEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"push_id":6788754609,"size":1,"distinct_size":1,"ref":"refs/heads/releasenotes","head":"d4c54435976f25a2617a6cbb173be1c7698bd6ff","before":"6a6c19fbdcf79028c4c395a422c606b3b94ae3a0","commits":[{"sha":"d4c54435976f25a2617a6cbb173be1c7698bd6ff","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@uwaterloo.ca"},"message":"Update version number [skip ci]","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/d4c54435976f25a2617a6cbb173be1c7698bd6ff"}]},"public":true,"created_at":"2021-03-26T02:11:14Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"15696529383","type":"PushEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"push_id":6788771271,"size":4,"distinct_size":3,"ref":"refs/heads/releasenotes","head":"d3873e6ed1c3086a2b2834bfd202440828505257","before":"d4c54435976f25a2617a6cbb173be1c7698bd6ff","commits":[{"sha":"c2d0e86fb9202c6cf303b78b6f999cad5fdcdd37","author":{"name":"Michael Baentsch","email":"59bd0a3ff43b32849b319e645d4798d8a5d1e889@baentsch.ch"},"message":"ossl111k merge (#298)\n\n* Prepare for 1.1.1j-dev\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n* Fix typo in OPENSSL_malloc.pod\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13632)\r\n\r\n(cherry picked from commit 74c8dd1c516c7017477a205fd1f5f975cfa86722)\r\n\r\n* v3nametest: Make the gennames structure static\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/13635)\r\n\r\n(cherry picked from commit 7eea331eabe8b0a7ce03c9602a2bc72e9ddfe676)\r\n\r\n* Modify is_tls13_capable() to take account of the servername cb\r\n\r\nA servername cb may change the available certificates, so if we have one\r\nset then we cannot rely on the configured certificates to determine if we\r\nare capable of negotiating TLSv1.3 or not.\r\n\r\nFixes #13291\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13305)\r\n\r\n* Test that we can negotiate TLSv1.3 if we have an SNI callback\r\n\r\nIf an SNI callback has been set then we may have no certificuates suitable\r\nfor TLSv1.3 use configured for the current SSL_CTX. This should not prevent\r\nus from negotiating TLSv1.3, since we may change the SSL_CTX by the time we\r\nneed a suitable certificate.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13305)\r\n\r\n* Configurations: PowerPC is big endian\r\n\r\nDefine B_ENDIAN on PowerPC because it is a big endian architecture. With\r\nthis change the BN* related tests pass.\r\n\r\nFixes: #12199\r\n\r\nSigned-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/12371)\r\n\r\n(cherry picked from commit 52c6c12c1cad6f1046b34f4139d1aa3e967a5530)\r\n\r\n* Github CI: run also on repository pushes\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13686)\r\n\r\n(cherry picked from commit 4159ebca3cb3d9586d6709c7a0166a4af5676f91)\r\n\r\n* Document OCSP_REQ_CTX_i2d.\r\n\r\nThis is a backport of the documentation from #13620.\r\n\r\nReviewed-by: David von Oheimb <david.von.oheimb@siemens.com>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13691)\r\n\r\n* GitHub CI: Add 'check-update' and 'check-docs'\r\n\r\n'check-update' runs a 'make update' to check that it wasn't forgotten.\r\n\r\n'check-docs' runs 'make doc-nits'.  We have that as a separate job to\r\nmake it more prominent.\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/13701)\r\n\r\n(cherry picked from commit 8175476b81c6b54bfa1c8555b35561099b202c4d)\r\n\r\n* Fix NULL pointer access caused by X509_ATTRIBUTE_create()\r\n\r\nWhen X509_ATTRIBUTE_create() receives an invalid NID (e.g., -1), return\r\nfailure rather than silently constructing a broken X509_ATTRIBUTE object\r\nthat might cause NULL pointer accesses later on.  This matters because\r\nX509_ATTRIBUTE_create() is used by API functions like PKCS7_add_attribute(3)\r\nand the NID comes straight from the user.\r\n\r\nThis bug was found while working on LibreSSL documentation.\r\n\r\nReviewed-by: Theo Buehler <tb@openbsd.org>\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/12052)\r\n\r\n(cherry picked from commit c4b2c53fadb158bee34aef90d5a7d500aead1f70)\r\n\r\n* CRYPTO_secure_malloc_init: BSD support improvements.\r\n\r\nBackport of #13394\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\n(Merged from https://github.com/openssl/openssl/pull/13637)\r\n\r\n* Update copyright years of auto-generated headers (make update)\r\n\r\nThis backports #13764.\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13769)\r\n\r\n* poly1305/asm/poly1305-armv4.pl: fix Clang compatibility issue\r\n\r\nI.e.:\r\n\r\n    error: out of range immediate fixup value\r\n\r\nThis fix is identical to one of the changes made in 3405db9, which I\r\ndiscovered right after taking a quick stab at fixing this.\r\n\r\nCLA: trivial\r\nFixes #7878\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13757)\r\n\r\n* Ensure DTLS free functions can handle NULL\r\n\r\nOur free functions should be able to deal with the case where the object\r\nbeing freed is NULL. This turns out to not be quite the case for DTLS\r\nrelated objects.\r\n\r\nFixes #13649\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13655)\r\n\r\n(cherry picked from commit d0afb30ef3950cacff50ec539e90073b95a276df)\r\n\r\n* Fix for negative return value from `SSL_CTX_sess_accept()`\r\n\r\nFixes #13183\r\n\r\nFrom the original issue report, before this commit, on master and on\r\n1.1.1, the issue can be detected with the following steps:\r\n\r\n- Start with a default SSL_CTX, initiate a TLS 1.3 connection with SNI,\r\n  \"Accept\" count of default context gets incremented\r\n- After servername lookup, \"Accept\" count of default context gets\r\n  decremented and that of SNI context is incremented\r\n- Server sends a \"Hello Retry Request\"\r\n- Client sends the second \"Client Hello\", now again \"Accept\" count of\r\n  default context is decremented. Hence giving a negative value.\r\n\r\nThis commit fixes it by adding a check on `s->hello_retry_request` in\r\naddition to `SSL_IS_FIRST_HANDSHAKE(s)`, to ensure the counter is moved\r\nonly on the first ClientHello.\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Paul Dale <paul.dale@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/13297)\r\n\r\n* [crypto/dh] side channel hardening for computing DH shared keys (1.1.1)\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\n(Merged from https://github.com/openssl/openssl/pull/13772)\r\n\r\n* OPENSSL_cpuid_setup FreeBSD PowerPC update\r\n\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13821)\r\n\r\n(cherry picked from commit b57ec7394aace731c460b509aa84039274337600)\r\n\r\n* OPENSSL_cpuid_setup FreeBSD arm update.\r\n\r\nwhen possible using the getauxval equivalent which has similar ids as Linux, instead of bad instructions catch approach.\r\n\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13650)\r\n\r\n(cherry picked from commit 5eb24fbd1c3e0d130ba7f81f1ccf457a2b9d75ad)\r\n\r\n* Fix -static builds\r\n\r\nPull in check from #10878\r\nMove disabling of pic, threads and statics up higher before they\r\nare checked.\r\n\r\nFixes #12772\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/12773)\r\n\r\n* Skip BOM when reading the config file\r\n\r\nFixes #13840\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13857)\r\n\r\n(cherry picked from commit 4369a882a565c42673b28c586a5c46a8bca98d17)\r\n\r\n* X509_cmp(): Fix comparison in case x509v3_cache_extensions() failed to due to invalid cert\r\n\r\nThis is the backport of #13755 to v1.1.1.\r\nFixes #13698\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13756)\r\n\r\n* x509_vfy.c: Fix a regression in find_isser()\r\n\r\n...in case the candidate issuer cert is identical to the target cert.\r\n\r\nFixes #13739\r\n\r\nReviewed-by: Tomas Mraz <tmraz@fedoraproject.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13749)\r\n\r\n* DOCS: Fix incorrect pass phrase options references\r\n\r\nThere were a number of older style references to the pass phrase\r\noptions section, now streamlined with the current openssl(1).\r\n\r\nFixes #13883\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/13886)\r\n\r\n* Fix regression in no-deprecated build\r\n\r\nAlso add a new no-deprecated CI build to test it.\r\n\r\nFixes #13896\r\n\r\nReviewed-by: David von Oheimb <david.von.oheimb@siemens.com>\r\n(Merged from https://github.com/openssl/openssl/pull/13902)\r\n\r\n* Ensure SRP BN_mod_exp follows the constant time path\r\n\r\nSRP_Calc_client_key calls BN_mod_exp with private data. However it was\r\nnot setting BN_FLG_CONSTTIME and therefore not using the constant time\r\nimplementation. This could be exploited in a side channel attack to\r\nrecover the password.\r\n\r\nSince the attack is local host only this is outside of the current OpenSSL\r\nthreat model and therefore no CVE is assigned.\r\n\r\nThanks to Mohammed Sabt and Daniel De Almeida Braga for reporting this\r\nissue.\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13889)\r\n\r\n* Fix typo in crl2pkcs documentation\r\n\r\nFixes #13910\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13911)\r\n\r\n(cherry picked from commit 6857058016e91d3182c2117922dd8001b27f5639)\r\n\r\n* CI: Add some legacy stuff that we do not test in GitHub CI yet\r\n\r\nThere are some options that seem to belong to the legacy build.\r\n\r\nReviewed-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\n(Merged from https://github.com/openssl/openssl/pull/13903)\r\n\r\n(cherry picked from commit adcaebc3148fe0fde3f7641c4b607f30e1479986)\r\n\r\n* Drop Travis\r\n\r\nAt this point, we have transitioned completely from Travis to GitHub Actions\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13941)\r\n\r\n* check_sig_alg_match(): weaken sig nid comparison to base alg\r\n\r\nThis (re-)allows RSA-PSS signers\r\n\r\nFixes #13931\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13982)\r\n\r\n* Add some missing committers to the AUTHORS list\r\n\r\nFixes #13815\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14029)\r\n\r\n(cherry picked from commit af403db090ee66715e81f0062d1ef614e8d921b5)\r\n\r\n* apps/ca: Properly handle certificate expiration times in do_updatedb\r\n\r\nFixes #13944\r\n\r\n   + changed ASN1_UTCTIME to ASN1_TIME\r\n   + removed all Y2K code from do_updatedb\r\n   + changed compare to ASN1_TIME_compare\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14026)\r\n\r\n* Prevent creating empty folder \"../apps/include\"\r\n\r\nThis folder \"../apps/include\" is accidentally created.\r\nThis prevents this glitch.\r\n\r\nFixes 19b4fe5844b (\"Add a CMAC test\")\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14051)\r\n\r\n* NOTES.WIN: fix typo\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Matthias St. Pierre <Matthias.St.Pierre@ncp-e.com>\r\n(Merged from https://github.com/openssl/openssl/pull/14078)\r\n\r\n* configdata.pm: Better display of enabled/disabled options\r\n\r\nThe options listed in the array @disablables are regular expressions.\r\nFor most of them, it's not visible, but there are a few.\r\n\r\nHowever, configdata.pm didn't quite treat them that way, which meant\r\nthat the few that are visibly regular expressions, there's a\r\ndifference between that and the corresponding the key in %disabled,\r\nwhich is never a regular expression.\r\n\r\nTo correctly display the enabled and disabled options with --dump,\r\nwe must therefore go through a bit of Perl gymnastics to get the\r\noutput correct enough, primarly so that disabled features don't look\r\nenabled.\r\n\r\nFixes #13790\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14081)\r\n\r\n* Configuration: ensure that 'no-tests' works correctly\r\n\r\n'no-tests' wasn't entirely respected by test/build.info.\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14081)\r\n\r\n* Remove unused 'peer_type' from SSL_SESSION\r\n\r\nThis field has not been used since #3858 was merged in 2017 when we\r\nmoved to a table-based lookup for certificate type properties instead of\r\nan index-based one.\r\n\r\nReviewed-by: Kurt Roeckx <kurt@roeckx.be>\r\n(Merged from https://github.com/openssl/openssl/pull/13991)\r\n\r\n(cherry picked from commit 3bc0b621a7baf1a11bc5cad69a287ad093674d68)\r\n\r\n* Configurations/descrip.mms.tmpl: avoid enormous PIPE commands\r\n\r\nDCL has a total command line limitation that's too easily broken by\r\nthem.\r\n\r\nWe solve them by creating separate message scripts and using them.\r\n\r\nFixes #13789\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13834)\r\n\r\n* VMS documentation fixes\r\n\r\nThis mostly clarifies details.\r\n\r\nFixes #13789\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13834)\r\n\r\n* Fix Null pointer deref in X509_issuer_and_serial_hash()\r\n\r\nThe OpenSSL public API function X509_issuer_and_serial_hash() attempts\r\nto create a unique hash value based on the issuer and serial number data\r\ncontained within an X509 certificate. However it fails to correctly\r\nhandle any errors that may occur while parsing the issuer field (which\r\nmight occur if the issuer field is maliciously constructed). This may\r\nsubsequently result in a NULL pointer deref and a crash leading to a\r\npotential denial of service attack.\r\n\r\nThe function X509_issuer_and_serial_hash() is never directly called by\r\nOpenSSL itself so applications are only vulnerable if they use this\r\nfunction directly and they use it on certificates that may have been\r\nobtained from untrusted sources.\r\n\r\nCVE-2021-23841\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(cherry picked from commit 8130d654d1de922ea224fa18ee3bc7262edc39c0)\r\n\r\n* Test that X509_issuer_and_serial_hash doesn't crash\r\n\r\nProvide a certificate with a bad issuer and check that\r\nX509_issuer_and_serial_hash doesn't crash.\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(cherry picked from commit 55869f594f052561b11a2db6a7c42690051868de)\r\n\r\n* Refactor rsa_test\r\n\r\nReduce code copying by factoring out common code into a separate function.\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Fix the RSA_SSLV23_PADDING padding type\r\n\r\nThis also fixes the public function RSA_padding_check_SSLv23.\r\n\r\nCommit 6555a89 changed the padding check logic in RSA_padding_check_SSLv23\r\nso that padding is rejected if the nul delimiter byte is not immediately\r\npreceded by at least 8 bytes containing 0x03. Prior to that commit the\r\npadding is rejected if it *is* preceded by at least 8 bytes containing 0x03.\r\n\r\nPresumably this change was made to be consistent with what it says in\r\nappendix E.3 of RFC 5246. Unfortunately that RFC is in error, and the\r\noriginal behaviour was correct. This is fixed in later errata issued for\r\nthat RFC.\r\n\r\nThis has no impact on libssl for modern versions of OpenSSL because\r\nthere is no protocol support for SSLv2 in these versions. However\r\napplications that call RSA_paddin_check_SSLv23 directly, or use the\r\nRSA_SSLV23_PADDING mode may still be impacted. The effect of the original\r\nerror is that an RSA message encrypted by an SSLv2 only client will fail to\r\nbe decrypted properly by a TLS capable server, or a message encrypted by a\r\nTLS capable client will fail to decrypt on an SSLv2 only server. Most\r\nsignificantly an RSA message encrypted by a TLS capable client will be\r\nsuccessfully decrypted by a TLS capable server. This last case should fail\r\ndue to a rollback being detected.\r\n\r\nThanks to D. Katz and Joel Luellwitz (both from Trustwave) for reporting\r\nthis issue.\r\n\r\nCVE-2021-23839\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Fix rsa_test to properly test RSA_SSLV23_PADDING\r\n\r\nWe test all three cases:\r\n- An SSLv2 only client talking to a TLS capable server\r\n- A TLS capable client talking to an SSLv2 only server\r\n- A TLS capable client talking to a TLS capable server (should fail due\r\nto detecting a rollback attack)\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Don't overflow the output length in EVP_CipherUpdate calls\r\n\r\nCVE-2021-23840\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Update CHANGES and NEWS for new release\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n* Update copyright year\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n* Prepare for 1.1.1j release\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n* Prepare for 1.1.1k-dev\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n\r\n* TEST: Add missing initialization\r\n\r\nCompiler complained.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14204)\r\n\r\n(cherry picked from commit 55e9d8cfffc1a40b0ab72e014ff62d5ef2a0ed63)\r\n\r\n* Use CRIOGET to fetch a crypto descriptor when present.\r\n\r\nFreeBSD's current /dev/crypto implementation requires that consumers\r\nclone a separate file descriptor via the CRIOGET ioctl that can then\r\nbe used with other ioctls such as CIOCGSESSION.\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\n\r\n(cherry picked from commit b39c215decf6e68c28cb64dcfaf5ae5a7e8d35b4)\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13853)\r\n\r\n* Close /dev/crypto file descriptor after CRIOGET ioctl().\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\n\r\n(cherry picked from commit 3ddf44ea5a2c1c8c55f4f4072a611791c79d4e7c)\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/13853)\r\n\r\n* CRYPTO_gcm128_decrypt: fix mac or tag calculation\r\n\r\nThe incorrect code is in #ifdef branch that is normally\r\nnot compiled in.\r\n\r\nSigned-off-by: Zhang Jinde <zjd5536@163.com>\r\n\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/12968)\r\n\r\n(cherry picked from commit 1d724b5e82ba36fb50fd24db3cd664da570daf84)\r\n\r\n* Fix an integer overflow in o_time.c\r\n\r\nIf input offset_sec is sufficiently large (> INT32_MAX * SECS_PER_DAY, which is possible for a long on 64-bit platforms), then the first assignment contains an overflow.\r\n\r\nI think leaving offset_hms as an int is still safe.\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14252)\r\n\r\n(cherry picked from commit 75de54363506e2b2480fc6baf0cd45b1f7fc8816)\r\n\r\n* Fix filename escaping in c_rehash\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14301)\r\n\r\n(cherry picked from commit 2d968951227acd422f0e712035de3216d47fc980)\r\n\r\n* Check ASN1_item_ndef_i2d() return value.\r\n\r\nReturn an error instead of trying to malloc a negative number.\r\nThe other usage in this file already had a similar check, and the caller\r\nshould have put an entry on the error stack already.\r\n\r\nNote that we only check the initial calls to obtain the encoded length,\r\nand assume that the follow-up call to actually encode to the allocated\r\nstorage will succeed if the first one did.\r\n\r\nFixes: #14177\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\n(Merged from https://github.com/openssl/openssl/pull/14308)\r\n\r\n(cherry picked from commit 90b4247cc5dca58cee9da5f6975bb38fd200100a)\r\n\r\n* [github-ci] Add a out-of-tree_build job\r\n\r\nThis adds a new job to trigger the bug reported in\r\n<https://github.com/openssl/openssl/issues/11940>\r\n\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14388)\r\n\r\n* [1.1.1] Fix `make update` for out-of-tree builds\r\n\r\nFixes #11940\r\n\r\nReviewed-by: Nicola Tuveri <nic.tuv@gmail.com>\r\n(Merged from https://github.com/openssl/openssl/pull/14388)\r\n\r\n* Check SSL_set1_chain error in set_cert_cb\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Shane Lontis <shane.lontis@oracle.com>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14469)\r\n\r\n(cherry picked from commit 1aa7ecd0d3f6d9c3739cf2e2d87673a3be03b352)\r\n\r\n* modes: fix coverity 1449860: overlapping memory copy\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14584)\r\n\r\n(cherry picked from commit 145f12d12dc83c737676883c625c2a95d34251ed)\r\n\r\n* modes: fix coverity 1449851: overlapping memory copy\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14584)\r\n\r\n(cherry picked from commit b875e0e820b07420429ebb90724ed28686a98853)\r\n\r\n* ssl: fix coverity 1451515: out of bounds memory access\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14585)\r\n\r\n(cherry picked from commit 3de7f014a985637361bdee775f78209300c88aae)\r\n\r\n* apps: fix coverity 966560: division by zero\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Richard Levitte <levitte@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14586)\r\n\r\n(cherry picked from commit 7e7e034a10842dad3866c9447481b8527024bf44)\r\n\r\n* Add a missing RUN_ONCE in rand_lib.c\r\n\r\nSome of the callbacks in rand_lib.c were being invoked without the\r\nRUN_ONCE for that file being called. We add it during rand_pool_new\r\nwhich should cover all cases.\r\n\r\nFixes #7870\r\nFixes #11144\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14603)\r\n\r\n* ASN1: Reset the content dump flag after dumping\r\n\r\nWhen encountering a badly coded item, the DER printer (ASN1_print_dump())\r\nsets a flag to ensure that an additional hex dump of the offending content\r\nis printed as part of the output.  Unfortunately, this flag is never reset,\r\nwhich means that all following items are printed with the extra hex dump,\r\nwhether they are faulty or not.\r\n\r\nResetting the flag after hex dumping ensures that only the faulty contents\r\nare printed with the additional hex dump.\r\n\r\nFixes #14626\r\n\r\nReviewed-by: Tim Hudson <tjh@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14627)\r\n\r\n(cherry picked from commit 6e34a1048ce4871371eac224b995c3b4338f6166)\r\n\r\n* Fix missing INVALID_EXTENSION\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Ben Kaduk <kaduk@mit.edu>\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n(Merged from https://github.com/openssl/openssl/pull/14639)\r\n\r\n* check_chain_extensions: Do not override error return value by check_curve\r\n\r\nThe X509_V_FLAG_X509_STRICT flag enables additional security checks of the\r\ncertificates present in a certificate chain. It is not set by default.\r\n\r\nStarting from OpenSSL version 1.1.1h a check to disallow certificates with\r\nexplicitly encoded elliptic curve parameters in the chain was added to the\r\nstrict checks.\r\n\r\nAn error in the implementation of this check meant that the result of a\r\nprevious check to confirm that certificates in the chain are valid CA\r\ncertificates was overwritten. This effectively bypasses the check\r\nthat non-CA certificates must not be able to issue other certificates.\r\n\r\nIf a \"purpose\" has been configured then a subsequent check that the\r\ncertificate is consistent with that purpose also checks that it is a\r\nvalid CA. Therefore where a purpose is set the certificate chain will\r\nstill be rejected even when the strict flag has been used. A purpose is\r\nset by default in libssl client and server certificate verification\r\nroutines, but it can be overriden by an application.\r\n\r\nAffected applications explicitly set the X509_V_FLAG_X509_STRICT\r\nverification flag and either do not set a purpose for the certificate\r\nverification or, in the case of TLS client or server applications,\r\noverride the default purpose to make it not set.\r\n\r\nCVE-2021-3450\r\n\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Teach TLSProxy how to encrypt <= TLSv1.2 ETM records\r\n\r\nPreviously TLSProxy only knew how to \"repack\" messages for TLSv1.3.\r\nMost of the handshake in <= TLSv1.2 is unencrypted so this hasn't been\r\ntoo much of restriction. However we now want to modify reneg handshakes\r\nwhich are encrypted so we need to add that capability.\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Add a test for CVE-2021-3449\r\n\r\nWe perform a reneg handshake, where the second ClientHello drops the\r\nsig_algs extension. It must also contain cert_sig_algs for the test to\r\nwork.\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* ssl sigalg extension: fix NULL pointer dereference\r\n\r\nAs the variable peer_sigalgslen is not cleared on ssl rehandshake, it's\r\npossible to crash an openssl tls secured server remotely by sending a\r\nmanipulated hello message in a rehandshake.\r\n\r\nOn such a manipulated rehandshake, tls1_set_shared_sigalgs() calls\r\ntls12_shared_sigalgs() with the peer_sigalgslen of the previous\r\nhandshake, while the peer_sigalgs has been freed.\r\nAs a result tls12_shared_sigalgs() walks over the available\r\npeer_sigalgs and tries to access data of a NULL pointer.\r\n\r\nThis issue was introduced by c589c34e61 (Add support for the TLS 1.3\r\nsignature_algorithms_cert extension, 2018-01-11).\r\n\r\nSigned-off-by: Peter Kästle <peter.kaestle@nokia.com>\r\nSigned-off-by: Samuel Sapalski <samuel.sapalski@nokia.com>\r\n\r\nCVE-2021-3449\r\n\r\nCLA: trivial\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\nReviewed-by: Matt Caswell <matt@openssl.org>\r\n\r\n* Ensure buffer/length pairs are always in sync\r\n\r\nFollowing on from CVE-2021-3449 which was caused by a non-zero length\r\nassociated with a NULL buffer, other buffer/length pairs are updated to\r\nensure that they too are always in sync.\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\nReviewed-by: Paul Dale <pauli@openssl.org>\r\n\r\n* Update CHANGES and NEWS for new release\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n\r\n* Update copyright year\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n\r\n* Prepare for 1.1.1k release\r\n\r\nReviewed-by: Tomas Mraz <tomas@openssl.org>\r\n\r\n* README version update [skip ci]\r\n\r\nCo-authored-by: Matt Caswell <matt@openssl.org>\r\nCo-authored-by: Nan Xiao <nan@chinadtrace.org>\r\nCo-authored-by: Tomas Mraz <tmraz@fedoraproject.org>\r\nCo-authored-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>\r\nCo-authored-by: Rich Salz <rsalz@akamai.com>\r\nCo-authored-by: Richard Levitte <levitte@openssl.org>\r\nCo-authored-by: Ingo Schwarze <schwarze@openbsd.org>\r\nCo-authored-by: David Carlier <devnexen@gmail.com>\r\nCo-authored-by: Dr. David von Oheimb <David.von.Oheimb@siemens.com>\r\nCo-authored-by: Ole André Vadla Ravnås <oleavr@gmail.com>\r\nCo-authored-by: anupamam13 <anuavnd@gmail.com>\r\nCo-authored-by: Billy Brumley <bbrumley@gmail.com>\r\nCo-authored-by: Todd Short <tshort@akamai.com>\r\nCo-authored-by: Dmitry Belyavskiy <beldmit@gmail.com>\r\nCo-authored-by: Tim Hitchins <tim.hitchins@ekkosense.co.uk>\r\nCo-authored-by: Dr. Matthias St. Pierre <matthias.st.pierre@ncp-e.com>\r\nCo-authored-by: Armin Fuerst <armin@fuerst.priv.at>\r\nCo-authored-by: Bernd Edlinger <bernd.edlinger@hotmail.de>\r\nCo-authored-by: Jay Satiro <raysatiro@yahoo.com>\r\nCo-authored-by: Benjamin Kaduk <bkaduk@akamai.com>\r\nCo-authored-by: John Baldwin <jhb@FreeBSD.org>\r\nCo-authored-by: Zhang Jinde <zjd5536@163.com>\r\nCo-authored-by: jwalch <jeremy.walch@gmail.com>\r\nCo-authored-by: Mark <mark@asx.hu>\r\nCo-authored-by: Nicola Tuveri <nic.tuv@gmail.com>\r\nCo-authored-by: panda <daniel.phan36@gmail.com>\r\nCo-authored-by: Pauli <ppzgs1@gmail.com>\r\nCo-authored-by: Chenglong Zhang <auvkone@gmail.com>\r\nCo-authored-by: Tomas Mraz <tomas@openssl.org>\r\nCo-authored-by: Peter Kaestle <peter.kaestle@nokia.com>","distinct":false,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/c2d0e86fb9202c6cf303b78b6f999cad5fdcdd37"},{"sha":"8fc09d021328abf6bed992e29220a152636d6179","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@uwaterloo.ca"},"message":"Draft of 2021-03 snapshot release","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/8fc09d021328abf6bed992e29220a152636d6179"},{"sha":"ea2b41ad129dd28ed9276f1930ba4f29b3fe0c6b","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@uwaterloo.ca"},"message":"Update release notes [skip ci]","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/ea2b41ad129dd28ed9276f1930ba4f29b3fe0c6b"},{"sha":"d3873e6ed1c3086a2b2834bfd202440828505257","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@uwaterloo.ca"},"message":"Update version number [skip ci]","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/d3873e6ed1c3086a2b2834bfd202440828505257"}]},"public":true,"created_at":"2021-03-26T02:16:04Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"15704042023","type":"PushEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"push_id":6792450659,"size":1,"distinct_size":1,"ref":"refs/heads/releasenotes","head":"424a759bcf14d46d60f55647a206944423fd6a2c","before":"d3873e6ed1c3086a2b2834bfd202440828505257","commits":[{"sha":"424a759bcf14d46d60f55647a206944423fd6a2c","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@uwaterloo.ca"},"message":"Set date in release notes [skip ci]","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/424a759bcf14d46d60f55647a206944423fd6a2c"}]},"public":true,"created_at":"2021-03-26T14:33:37Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"15704048993","type":"PushEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":179335992,"name":"open-quantum-safe/boringssl","url":"https://api.github.com/repos/open-quantum-safe/boringssl"},"payload":{"push_id":6792453986,"size":1,"distinct_size":1,"ref":"refs/heads/releasenotes","head":"2f103c0d37f529e4f11700ecb9107a331fb0ef67","before":"7acdcffefa375986760f7f68bc7912ceb7a8e501","commits":[{"sha":"2f103c0d37f529e4f11700ecb9107a331fb0ef67","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@uwaterloo.ca"},"message":"Set date in release notes [skip ci]","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/boringssl/commits/2f103c0d37f529e4f11700ecb9107a331fb0ef67"}]},"public":true,"created_at":"2021-03-26T14:34:06Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"15704057323","type":"PushEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"push_id":6792457999,"size":1,"distinct_size":1,"ref":"refs/heads/OQS-OpenSSL_1_1_1-stable","head":"7c899f551a31c7f8d5f214fd4775ec95a7793ade","before":"c2d0e86fb9202c6cf303b78b6f999cad5fdcdd37","commits":[{"sha":"7c899f551a31c7f8d5f214fd4775ec95a7793ade","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@users.noreply.github.com"},"message":"2021-03 snapshot release (#293)","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/openssl/commits/7c899f551a31c7f8d5f214fd4775ec95a7793ade"}]},"public":true,"created_at":"2021-03-26T14:34:40Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"15704064919","type":"PushEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":179335992,"name":"open-quantum-safe/boringssl","url":"https://api.github.com/repos/open-quantum-safe/boringssl"},"payload":{"push_id":6792461727,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"369c0b0e019a7b5e1a0d22cad4ebbdda4c7ee16a","before":"75f9e247f1a1549bf6cb1c3e4fe3c610c2d14455","commits":[{"sha":"369c0b0e019a7b5e1a0d22cad4ebbdda4c7ee16a","author":{"name":"Douglas Stebila","email":"b00bf5c152be32a8a3632a9751d43d05edde6c4e@users.noreply.github.com"},"message":"2021-03 snapshot release (#56)","distinct":true,"url":"https://api.github.com/repos/open-quantum-safe/boringssl/commits/369c0b0e019a7b5e1a0d22cad4ebbdda4c7ee16a"}]},"public":true,"created_at":"2021-03-26T14:35:11Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
