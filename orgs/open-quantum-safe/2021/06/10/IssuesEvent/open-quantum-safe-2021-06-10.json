{"id":"16727508354","type":"IssuesEvent","actor":{"id":36664211,"login":"vt-alt","display_login":"vt-alt","gravatar_id":"","url":"https://api.github.com/users/vt-alt","avatar_url":"https://avatars.githubusercontent.com/u/36664211?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1016","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1016/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1016/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1016/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1016","id":917415148,"node_id":"MDU6SXNzdWU5MTc0MTUxNDg=","number":1016,"title":"Build failures on 32-bit armv8l / Cortex-A72","user":{"login":"vt-alt","id":36664211,"node_id":"MDQ6VXNlcjM2NjY0MjEx","avatar_url":"https://avatars.githubusercontent.com/u/36664211?v=4","gravatar_id":"","url":"https://api.github.com/users/vt-alt","html_url":"https://github.com/vt-alt","followers_url":"https://api.github.com/users/vt-alt/followers","following_url":"https://api.github.com/users/vt-alt/following{/other_user}","gists_url":"https://api.github.com/users/vt-alt/gists{/gist_id}","starred_url":"https://api.github.com/users/vt-alt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vt-alt/subscriptions","organizations_url":"https://api.github.com/users/vt-alt/orgs","repos_url":"https://api.github.com/users/vt-alt/repos","events_url":"https://api.github.com/users/vt-alt/events{/privacy}","received_events_url":"https://api.github.com/users/vt-alt/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-06-10T14:31:52Z","updated_at":"2021-06-10T14:31:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When building package for ALT Linux for liboqs 0.6.0:\r\n1. On Cortex-A72 hardware [which is identified as arch `armv8l`] we get build failure:\r\n```\r\n[00:00:06] + /bin/mkdir -p /usr/src/RPM/BUILD\r\n[00:00:06] + cd /usr/src/RPM/BUILD\r\n[00:00:06] + cd liboqs-0.6.0\r\n[00:00:06] + mkdir -p armh-alt-linux-gnueabi\r\n[00:00:06] + cmake -DCMAKE_SKIP_INSTALL_RPATH:BOOL=yes '-DCMAKE_C_FLAGS:STRING=-pipe -frecord-gcc-switches -Wall -g -O2 -fomit-frame-pointer -march=armv7-a -mthumb' '-DCMAKE_CXX_FLAGS:STRING=-pipe -frecord-gcc-switches -Wall -g -O2 -fomit-frame-pointer -march=armv7-a -mthumb' '-DCMAKE_Fortran_FLAGS:STRING=-pipe -frecord-gcc-switches -Wall -g -O2 -fomit-frame-pointer -march=armv7-a -mthumb' -DCMAKE_INSTALL_PREFIX=/usr -DINCLUDE_INSTALL_DIR:PATH=/usr/include -DLIB_INSTALL_DIR:PATH=/usr/lib -DSYSCONF_INSTALL_DIR:PATH=/etc -DSHARE_INSTALL_PREFIX:PATH=/usr/share -DLIB_DESTINATION=lib -DLIB_SUFFIX= -S . -B armh-alt-linux-gnueabi -B build -GNinja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DBUILD_SHARED_LIBS=ON -DOQS_DIST_BUILD=ON -DOQS_OPT_TARGET=generic -DOQS_KEM_DEFAULT=OQS_KEM_alg_ntruprime_ntrulpr653 -DOQS_SIG_DEFAULT=OQS_SIG_alg_sphincs_haraka_192f_simple\r\n[00:00:06] -- The C compiler identification is GNU 10.2.1\r\n[00:00:06] -- The ASM compiler identification is GNU\r\n[00:00:06] -- Found assembler: /usr/bin/cc\r\n[00:00:06] -- Detecting C compiler ABI info\r\n[00:00:07] -- Detecting C compiler ABI info - done\r\n[00:00:07] -- Check for working C compiler: /usr/bin/cc - skipped\r\n[00:00:07] -- Detecting C compile features\r\n[00:00:07] -- Detecting C compile features - done\r\n[00:00:07] CMake Error at CMakeLists.txt:50 (message):\r\n[00:00:07]   Unknown or unsupported processor: armv8l\r\n```\r\nWhen I try to \"fix\" like this:\r\n```patch\r\ndiff --git a/CMakeLists.txt b/CMakeLists.txt\r\nindex c09671c6..b7bd3246 100644\r\n--- a/CMakeLists.txt\r\n+++ b/CMakeLists.txt\r\n@@ -40,7 +40,7 @@ elseif(CMAKE_SYSTEM_PROCESSOR MATCHES \"aarch64|arm64|arm64v8\")\r\n     if(${OQS_DIST_BUILD})\r\n         set(OQS_DIST_ARM64v8_BUILD ON)\r\n     endif()\r\n-elseif(CMAKE_SYSTEM_PROCESSOR MATCHES \"armel|armhf|armv7|arm32v7\")\r\n+elseif(CMAKE_SYSTEM_PROCESSOR MATCHES \"armel|armhf|armv7|arm32v7|armv8l\")\r\n     set(ARCH \"arm32v7\")\r\n     set(ARCH_ARM32v7 ON)\r\n     if(${OQS_DIST_BUILD})\r\n```\r\n2. Another failure appears:\r\n```\r\n[00:00:08] [1/1081] Building C object src/kem/bike/CMakeFiles/bike1_l1_cpa.dir/additional/error.c.o\r\n[00:00:08] FAILED: src/kem/bike/CMakeFiles/bike1_l1_cpa.dir/additional/error.c.o \r\n[00:00:08] /usr/bin/cc -DFUNC_PREFIX=OQS_KEM_bike1_l1_cpa -DINDCPA=1 -DLEVEL=1 -DPORTABLE -Iinclude -pipe -frecord-gcc-switches -Wall -g -O2 -fomit-frame-pointer -march=armv7-a -mthumb -O2 -g -DNDEBUG -fPIC -fvisibility=hidden -mcpu=cortex-a5 -Werror -Wall -Wextra -Wpedantic -Wstrict-prototypes -Wshadow -Wformat=2 -Wfloat-equal -Wwrite-strings -Wstrict-overflow -ggdb3 -include /usr/src/RPM/BUILD/liboqs-0.6.0/src/kem/bike/functions_renaming.h -std=gnu11 -MD -MT src/kem/bike/CMakeFiles/bike1_l1_cpa.dir/additional/error.c.o -MF src/kem/bike/CMakeFiles/bike1_l1_cpa.dir/additional/error.c.o.d -o src/kem/bike/CMakeFiles/bike1_l1_cpa.dir/additional/error.c.o -c ../src/kem/bike/additional/error.c\r\n[00:00:08] cc1: error: switch '-mcpu=cortex-a5' conflicts with '-march=armv7-a' switch [-Werror]\r\n[00:00:08] cc1: all warnings being treated as errors\r\n```\r\nWhat would you suggest?\r\n","performed_via_github_app":null}},"public":true,"created_at":"2021-06-10T14:31:53Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
