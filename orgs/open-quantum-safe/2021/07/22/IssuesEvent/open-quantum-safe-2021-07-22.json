{"id":"17259506790","type":"IssuesEvent","actor":{"id":7589678,"login":"MaChengxin","display_login":"MaChengxin","gravatar_id":"","url":"https://api.github.com/users/MaChengxin","avatar_url":"https://avatars.githubusercontent.com/u/7589678?"},"repo":{"id":247826799,"name":"open-quantum-safe/liboqs-java","url":"https://api.github.com/repos/open-quantum-safe/liboqs-java"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/19","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/19/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/19/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs-java/issues/19/events","html_url":"https://github.com/open-quantum-safe/liboqs-java/issues/19","id":950293527,"node_id":"MDU6SXNzdWU5NTAyOTM1Mjc=","number":19,"title":"Examples fail to run with some JDKs on macOS","user":{"login":"MaChengxin","id":7589678,"node_id":"MDQ6VXNlcjc1ODk2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/7589678?v=4","gravatar_id":"","url":"https://api.github.com/users/MaChengxin","html_url":"https://github.com/MaChengxin","followers_url":"https://api.github.com/users/MaChengxin/followers","following_url":"https://api.github.com/users/MaChengxin/following{/other_user}","gists_url":"https://api.github.com/users/MaChengxin/gists{/gist_id}","starred_url":"https://api.github.com/users/MaChengxin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaChengxin/subscriptions","organizations_url":"https://api.github.com/users/MaChengxin/orgs","repos_url":"https://api.github.com/users/MaChengxin/repos","events_url":"https://api.github.com/users/MaChengxin/events{/privacy}","received_events_url":"https://api.github.com/users/MaChengxin/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-07-22T04:35:24Z","updated_at":"2021-07-22T04:35:24Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am trying to integrate `liboqs` into a Java project by using `liboqs-java`.\r\nThe OS is macOS Big Sur (11.4) and the JDK is Amazon Corretto 8, installed by `brew install --cask corretto8`.\r\n\r\nWhen I try to run the signature example, I got the following error:\r\n```\r\n~/Code/open-quantum-safe/liboqs-java master ❯ javac -cp target/liboqs-java.jar examples/SigExample.java                                  12:13:20\r\n~/Code/open-quantum-safe/liboqs-java master ❯ java -cp target/liboqs-java.jar:examples/ SigExample                                       12:13:24\r\nSupported signatures:\r\nException in thread \"main\" java.lang.UnsatisfiedLinkError: /private/var/folders/jm/886yj20s08bcrb560kxvfbwm0000gn/T/oqs-native-lib5047501627777998882/liboqs-jni.jnilib: dlopen(/private/var/folders/jm/886yj20s08bcrb560kxvfbwm0000gn/T/oqs-native-lib5047501627777998882/liboqs-jni.jnilib, 1): Library not loaded: @rpath/liboqs.0.dylib\r\n  Referenced from: /private/var/folders/jm/886yj20s08bcrb560kxvfbwm0000gn/T/oqs-native-lib5047501627777998882/liboqs-jni.jnilib\r\n  Reason: image not found\r\n\tat java.lang.ClassLoader$NativeLibrary.load(Native Method)\r\n\tat java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1934)\r\n\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1817)\r\n\tat java.lang.Runtime.load0(Runtime.java:810)\r\n\tat java.lang.System.load(System.java:1088)\r\n\tat org.openquantumsafe.Common.loadNativeLibrary(Common.java:53)\r\n\tat org.openquantumsafe.Sigs.<clinit>(Sigs.java:12)\r\n\tat SigExample.main(SigExample.java:9)\r\n```\r\n\r\nThe same error occurred for the key encapsulation example as well.\r\n\r\nI've already tried the suggestion in [the troubleshooting section](https://github.com/open-quantum-safe/liboqs-java#troubleshooting), but it doesn't help.\r\nI also tried switching from Amazon Corretto to Azul Zulu Java 8, but it didn't help either.\r\nWhat works for me is to change the JDK to `openjdk@8` (installed by `brew install openjdk@8`), with which both `SigExample` and `KEMExample` can run.\r\n\r\nHowever, the problem for me is that `openjdk@8` is actually not the recommended JDK for the project I'm working with due to its own limitations, so I'd prefer to stick with Amazon Corretto.\r\n\r\nHow can I successfully run the examples with Amazon Corretto then?","performed_via_github_app":null}},"public":true,"created_at":"2021-07-22T04:35:24Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
