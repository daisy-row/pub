{"id":"28718396159","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146","id":1687519445,"node_id":"PR_kwDOE_A9l85PVRaL","number":146,"title":"Add OQS_init and OQS_destroy & GithubCI on PRs","user":{"login":"bhess","id":149199,"node_id":"MDQ6VXNlcjE0OTE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/149199?v=4","gravatar_id":"","url":"https://api.github.com/users/bhess","html_url":"https://github.com/bhess","followers_url":"https://api.github.com/users/bhess/followers","following_url":"https://api.github.com/users/bhess/following{/other_user}","gists_url":"https://api.github.com/users/bhess/gists{/gist_id}","starred_url":"https://api.github.com/users/bhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhess/subscriptions","organizations_url":"https://api.github.com/users/bhess/orgs","repos_url":"https://api.github.com/users/bhess/repos","events_url":"https://api.github.com/users/bhess/events{/privacy}","received_events_url":"https://api.github.com/users/bhess/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-04-27T20:40:35Z","updated_at":"2023-04-28T00:11:48Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/pulls/146","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146","diff_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146.diff","patch_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146.patch","merged_at":null},"body":"- Adds OQS_init() and OQS_destroy() on provider load / teardown (required after https://github.com/open-quantum-safe/liboqs/pull/1431)\r\n- Run GithubCI on PRs\r\n\r\nCloses #144 \r\n\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1526799763","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146#issuecomment-1526799763","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146","id":1526799763,"node_id":"IC_kwDOE_A9l85bAR2T","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2023-04-28T00:11:48Z","updated_at":"2023-04-28T00:11:48Z","author_association":"MEMBER","body":"Looks good to me but let's let @baentsch review as well.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1526799763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-04-28T00:11:48Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28733754459","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-04-28T14:42:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1527674419","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1527674419","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1527674419,"node_id":"IC_kwDOE_A9l85bDnYz","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-04-28T14:42:39Z","updated_at":"2023-04-28T14:42:39Z","author_association":"MEMBER","body":"This is expected: Downlevel versions of OpenSSL don't have full support for provider based algorithms. Please try with Master branch.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1527674419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-04-28T14:42:39Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28738387713","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-04-28T18:25:26Z","closed_at":"2023-04-28T18:25:26Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"completed"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1527935766","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1527935766","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1527935766,"node_id":"IC_kwDOE_A9l85bEnMW","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-04-28T18:25:26Z","updated_at":"2023-04-28T18:25:26Z","author_association":"NONE","body":"> Downlevel versions of OpenSSL don't have full support for provider based algorithms. \r\n\r\nThat's a pity...\r\n\r\n> Please try with Master branch.\r\n\r\nThank you - indeed, it works!!\r\n\r\nP.S. Are you also involved with Botan? Just curious...","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1527935766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-04-28T18:25:27Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28739997041","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-04-28T19:58:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1528024862","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1528024862","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1528024862,"node_id":"IC_kwDOE_A9l85bE88e","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-04-28T19:58:32Z","updated_at":"2023-04-28T19:58:32Z","author_association":"NONE","body":"Ive tried with the master of OpenSSL, and it worked - but crashed in the end.\r\n\r\n```text\r\n$ openssl3 speed kyber1024\r\nDoing kyber1024 keygen's for 10s: 520009 kyber1024 KEM keygens in 9.97s\r\nDoing kyber1024 encaps's for 10s: 549509 kyber1024 KEM encaps in 9.99s\r\nDoing kyber1024 decaps's for 10s: 684932 kyber1024 KEM decaps in 9.99s\r\nversion: 3.2.0-dev\r\nbuilt on: Sun Apr 16 17:44:32 2023 UTC\r\noptions: bn(64,64)\r\ncompiler: clang -fPIC -arch x86_64 -O3 -std=gnu18 -march=native -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -g -DL_ENDIAN -DOPENSSL_PIC -D_REENTRANT -DOPENSSL_BUILDING_OPENSSL -DZLIB -DZLIB_SHARED\r\nCPUINFO: OPENSSL_ia32cap=0x7ffaf3bfffebffff:0x40000008029c67af\r\n                               keygen    encaps    decaps keygens/s  encaps/s  decaps/s\r\n                  kyber1024 0.000019s 0.000018s 0.000015s   52157.4   55005.9   68561.8\r\nSegmentation fault: 11\r\n$ \r\n```\r\n\r\nHere's the crash report:\r\n```text\r\nException Type:        EXC_BAD_ACCESS (SIGSEGV)\r\nException Codes:       KERN_INVALID_ADDRESS at 0x0000000000000000\r\nException Codes:       0x0000000000000001, 0x0000000000000000\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 11 Segmentation fault: 11\r\nTerminating Process:   exc handler [67804]\r\n\r\nVM Region Info: 0 is not in any region.  Bytes before following region: 4550868992\r\n      REGION TYPE                    START - END         [ VSIZE] PRT/MAX SHRMOD  REGION DETAIL\r\n      UNUSED SPACE AT START\r\n--->  \r\n      __TEXT                      10f40c000-10f4a4000    [  608K] r-x/r-x SM=COW  ...SER/*/openssl\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_pthread.dylib       \t    0x7ff81d1a83c1 pthread_rwlock_wrlock + 0\r\n1   libcrypto.3.dylib             \t       0x1104998ea CRYPTO_THREAD_write_lock + 9\r\n2   libcrypto.3.dylib             \t       0x11044eb29 ERR_unload_strings + 57\r\n3   libcrypto.3.dylib             \t       0x110496dab ossl_provider_free + 78\r\n4   libcrypto.3.dylib             \t       0x1105a5e24 OPENSSL_sk_pop_free + 45\r\n5   libcrypto.3.dylib             \t       0x110496883 ossl_provider_store_free + 63\r\n6   libcrypto.3.dylib             \t       0x11048b15f context_deinit_objs + 194\r\n7   libcrypto.3.dylib             \t       0x11048a9c4 context_deinit + 27\r\n8   libcrypto.3.dylib             \t       0x11048ac88 OSSL_LIB_CTX_free + 49\r\n9   legacy.dylib                  \t       0x10f59efa2 legacy_teardown + 22\r\n10  libcrypto.3.dylib             \t       0x10ff03ccd ossl_provider_teardown + 27 (provider_core.c:1553) [inlined]\r\n11  libcrypto.3.dylib             \t       0x10ff03ccd ossl_provider_free + 61 (provider_core.c:687)\r\n12  libcrypto.3.dylib             \t       0x110024a5b OPENSSL_sk_pop_free + 59 (stack.c:439)\r\n13  libcrypto.3.dylib             \t       0x10ff03704 sk_OSSL_PROVIDER_pop_free + 12 (provider_core.c:199) [inlined]\r\n14  libcrypto.3.dylib             \t       0x10ff03704 ossl_provider_store_free + 68 (provider_core.c:295)\r\n15  libcrypto.3.dylib             \t       0x10fef2852 context_deinit_objs + 194 (context.c:250)\r\n16  libcrypto.3.dylib             \t       0x10fef1d86 context_deinit + 23 (context.c:334) [inlined]\r\n17  libcrypto.3.dylib             \t       0x10fef1d86 ossl_lib_ctx_default_deinit + 38 (context.c:374)\r\n18  libcrypto.3.dylib             \t       0x10fef61d8 OPENSSL_cleanup + 728 (init.c:431)\r\n19  libsystem_c.dylib             \t    0x7ff81d07cba8 __cxa_finalize_ranges + 416\r\n20  libsystem_c.dylib             \t    0x7ff81d07c9bb exit + 35\r\n21  openssl                       \t       0x10f434ab4 main + 1348 (openssl.c:311)\r\n22  dyld                          \t    0x7ff81ce5141f start + 1903\r\n```\r\n\r\n@mattcaswell, any opinion...?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1528024862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-04-28T19:58:33Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28742014660","type":"IssueCommentEvent","actor":{"id":10420519,"login":"distorted-mdw","display_login":"distorted-mdw","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","avatar_url":"https://avatars.githubusercontent.com/u/10420519?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149","id":1689143680,"node_id":"PR_kwDOE_A9l85Paucr","number":149,"title":"oqsprov/oqsprov_keys.c (oqsx_key_fromdata): Set composites after import","user":{"login":"distorted-mdw","id":10420519,"node_id":"MDQ6VXNlcjEwNDIwNTE5","avatar_url":"https://avatars.githubusercontent.com/u/10420519?v=4","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","html_url":"https://github.com/distorted-mdw","followers_url":"https://api.github.com/users/distorted-mdw/followers","following_url":"https://api.github.com/users/distorted-mdw/following{/other_user}","gists_url":"https://api.github.com/users/distorted-mdw/gists{/gist_id}","starred_url":"https://api.github.com/users/distorted-mdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/distorted-mdw/subscriptions","organizations_url":"https://api.github.com/users/distorted-mdw/orgs","repos_url":"https://api.github.com/users/distorted-mdw/repos","events_url":"https://api.github.com/users/distorted-mdw/events{/privacy}","received_events_url":"https://api.github.com/users/distorted-mdw/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-04-28T21:15:48Z","updated_at":"2023-04-28T22:14:11Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/pulls/149","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149","diff_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149.diff","patch_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149.patch","merged_at":null},"body":"Import is nonfunctional otherwise: the `comp_privkey' and `comp_pubkey' vectors are left unpopulated.  Trying to do anything with the key is then dicey: in testing, I've had `oqs_sig_verify' bail because the slot was null, but I've also seen junk data used as a public key; for some reason, I've not seen a segfault, but it seems distinctly possible.\r\n\r\nI did a superficial survey of the other places in the code where `privkey' and `pubkey' get set: `oqsx_key_fromdata' is the only function which does it by hand; `oqsx_key_op' and `oqsx_key_gen' are the only callers of `oqsx_allocate_keymaterial', even though it's an external function.\r\n\r\nIt seems common to leave the `privkey' and `pubkey' buffers allocated in the event of a subsequent failure, so I just returned the failure indicator, assuming that `oqsx_key_set_composites' would have already noted the problem with OpenSSL; but in fact, `oqsx_key_set_composites' is secretly infallible anyway, so the question doesn't arise in practice.\r\n\r\nFixes #148\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1528146693","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149#issuecomment-1528146693","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149","id":1528146693,"node_id":"IC_kwDOE_A9l85bFasF","user":{"login":"distorted-mdw","id":10420519,"node_id":"MDQ6VXNlcjEwNDIwNTE5","avatar_url":"https://avatars.githubusercontent.com/u/10420519?v=4","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","html_url":"https://github.com/distorted-mdw","followers_url":"https://api.github.com/users/distorted-mdw/followers","following_url":"https://api.github.com/users/distorted-mdw/following{/other_user}","gists_url":"https://api.github.com/users/distorted-mdw/gists{/gist_id}","starred_url":"https://api.github.com/users/distorted-mdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/distorted-mdw/subscriptions","organizations_url":"https://api.github.com/users/distorted-mdw/orgs","repos_url":"https://api.github.com/users/distorted-mdw/repos","events_url":"https://api.github.com/users/distorted-mdw/events{/privacy}","received_events_url":"https://api.github.com/users/distorted-mdw/received_events","type":"User","site_admin":false},"created_at":"2023-04-28T22:14:11Z","updated_at":"2023-04-28T22:14:11Z","author_association":"NONE","body":"OK, so apparently fixing this pops open a can of worms.  I'm investigating, though I don't really understand this part of the provider machinery.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1528146693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-04-28T22:14:11Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28742313167","type":"IssueCommentEvent","actor":{"id":10420519,"login":"distorted-mdw","display_login":"distorted-mdw","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","avatar_url":"https://avatars.githubusercontent.com/u/10420519?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149","id":1689143680,"node_id":"PR_kwDOE_A9l85Paucr","number":149,"title":"oqsprov/oqsprov_keys.c (oqsx_key_fromdata): Set composites after import","user":{"login":"distorted-mdw","id":10420519,"node_id":"MDQ6VXNlcjEwNDIwNTE5","avatar_url":"https://avatars.githubusercontent.com/u/10420519?v=4","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","html_url":"https://github.com/distorted-mdw","followers_url":"https://api.github.com/users/distorted-mdw/followers","following_url":"https://api.github.com/users/distorted-mdw/following{/other_user}","gists_url":"https://api.github.com/users/distorted-mdw/gists{/gist_id}","starred_url":"https://api.github.com/users/distorted-mdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/distorted-mdw/subscriptions","organizations_url":"https://api.github.com/users/distorted-mdw/orgs","repos_url":"https://api.github.com/users/distorted-mdw/repos","events_url":"https://api.github.com/users/distorted-mdw/events{/privacy}","received_events_url":"https://api.github.com/users/distorted-mdw/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-04-28T21:15:48Z","updated_at":"2023-04-28T22:41:02Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/pulls/149","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149","diff_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149.diff","patch_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149.patch","merged_at":null},"body":"Import is nonfunctional otherwise: the `comp_privkey' and `comp_pubkey' vectors are left unpopulated.  Trying to do anything with the key is then dicey: in testing, I've had `oqs_sig_verify' bail because the slot was null, but I've also seen junk data used as a public key; for some reason, I've not seen a segfault, but it seems distinctly possible.\r\n\r\nI did a superficial survey of the other places in the code where `privkey' and `pubkey' get set: `oqsx_key_fromdata' is the only function which does it by hand; `oqsx_key_op' and `oqsx_key_gen' are the only callers of `oqsx_allocate_keymaterial', even though it's an external function.\r\n\r\nIt seems common to leave the `privkey' and `pubkey' buffers allocated in the event of a subsequent failure, so I just returned the failure indicator, assuming that `oqsx_key_set_composites' would have already noted the problem with OpenSSL; but in fact, `oqsx_key_set_composites' is secretly infallible anyway, so the question doesn't arise in practice.\r\n\r\nFixes #148\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1528165879","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149#issuecomment-1528165879","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149","id":1528165879,"node_id":"IC_kwDOE_A9l85bFfX3","user":{"login":"distorted-mdw","id":10420519,"node_id":"MDQ6VXNlcjEwNDIwNTE5","avatar_url":"https://avatars.githubusercontent.com/u/10420519?v=4","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","html_url":"https://github.com/distorted-mdw","followers_url":"https://api.github.com/users/distorted-mdw/followers","following_url":"https://api.github.com/users/distorted-mdw/following{/other_user}","gists_url":"https://api.github.com/users/distorted-mdw/gists{/gist_id}","starred_url":"https://api.github.com/users/distorted-mdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/distorted-mdw/subscriptions","organizations_url":"https://api.github.com/users/distorted-mdw/orgs","repos_url":"https://api.github.com/users/distorted-mdw/repos","events_url":"https://api.github.com/users/distorted-mdw/events{/privacy}","received_events_url":"https://api.github.com/users/distorted-mdw/received_events","type":"User","site_admin":false},"created_at":"2023-04-28T22:41:01Z","updated_at":"2023-04-28T22:41:01Z","author_association":"NONE","body":"Oh, no.  I see now.  I failed to spot that `oqsx_key_set_composites` has its exit status reversed from the usual OpenSSL convention.  Let me try that again.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1528165879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-04-28T22:41:02Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28742400403","type":"IssueCommentEvent","actor":{"id":10420519,"login":"distorted-mdw","display_login":"distorted-mdw","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","avatar_url":"https://avatars.githubusercontent.com/u/10420519?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149","id":1689143680,"node_id":"PR_kwDOE_A9l85Paucr","number":149,"title":"oqsprov/oqsprov_keys.c (oqsx_key_fromdata): Set composites after import","user":{"login":"distorted-mdw","id":10420519,"node_id":"MDQ6VXNlcjEwNDIwNTE5","avatar_url":"https://avatars.githubusercontent.com/u/10420519?v=4","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","html_url":"https://github.com/distorted-mdw","followers_url":"https://api.github.com/users/distorted-mdw/followers","following_url":"https://api.github.com/users/distorted-mdw/following{/other_user}","gists_url":"https://api.github.com/users/distorted-mdw/gists{/gist_id}","starred_url":"https://api.github.com/users/distorted-mdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/distorted-mdw/subscriptions","organizations_url":"https://api.github.com/users/distorted-mdw/orgs","repos_url":"https://api.github.com/users/distorted-mdw/repos","events_url":"https://api.github.com/users/distorted-mdw/events{/privacy}","received_events_url":"https://api.github.com/users/distorted-mdw/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-28T21:15:48Z","updated_at":"2023-04-28T22:50:21Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/pulls/149","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149","diff_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149.diff","patch_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149.patch","merged_at":null},"body":"Import is nonfunctional otherwise: the `comp_privkey' and `comp_pubkey' vectors are left unpopulated.  Trying to do anything with the key is then dicey: in testing, I've had `oqs_sig_verify' bail because the slot was null, but I've also seen junk data used as a public key; for some reason, I've not seen a segfault, but it seems distinctly possible.\r\n\r\nI did a superficial survey of the other places in the code where `privkey' and `pubkey' get set: `oqsx_key_fromdata' is the only function which does it by hand; `oqsx_key_op' and `oqsx_key_gen' are the only callers of `oqsx_allocate_keymaterial', even though it's an external function.\r\n\r\nIt seems common to leave the `privkey' and `pubkey' buffers allocated in the event of a subsequent failure, so I just returned the failure indicator, assuming that `oqsx_key_set_composites' would have already noted the problem with OpenSSL; but in fact, `oqsx_key_set_composites' is secretly infallible anyway, so the question doesn't arise in practice.\r\n\r\nFixes #148\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1528170378","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149#issuecomment-1528170378","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149","id":1528170378,"node_id":"IC_kwDOE_A9l85bFgeK","user":{"login":"distorted-mdw","id":10420519,"node_id":"MDQ6VXNlcjEwNDIwNTE5","avatar_url":"https://avatars.githubusercontent.com/u/10420519?v=4","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","html_url":"https://github.com/distorted-mdw","followers_url":"https://api.github.com/users/distorted-mdw/followers","following_url":"https://api.github.com/users/distorted-mdw/following{/other_user}","gists_url":"https://api.github.com/users/distorted-mdw/gists{/gist_id}","starred_url":"https://api.github.com/users/distorted-mdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/distorted-mdw/subscriptions","organizations_url":"https://api.github.com/users/distorted-mdw/orgs","repos_url":"https://api.github.com/users/distorted-mdw/repos","events_url":"https://api.github.com/users/distorted-mdw/events{/privacy}","received_events_url":"https://api.github.com/users/distorted-mdw/received_events","type":"User","site_admin":false},"created_at":"2023-04-28T22:50:20Z","updated_at":"2023-04-28T22:50:20Z","author_association":"NONE","body":"Well, the good news is that, with the did-it-work check the right way round, my thing still works.  I'd failed to spot that the provider hand-off had failed and OpenSSL just asked my provider to do the verification itself.\r\n\r\nI have no idea why OpenSSL thought it was a good idea to load the key into one provider and ask another to do the crypto with it, but that's what seems to be going on.\r\n\r\nI've actually run your tests locally now.  *sheepish-face*","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1528170378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-04-28T22:50:21Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
