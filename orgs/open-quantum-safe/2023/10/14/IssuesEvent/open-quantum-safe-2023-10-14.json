{"id":"32557753458","type":"IssuesEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1579","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1579/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1579/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1579/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1579","id":1941795149,"node_id":"I_kwDOA-eq3c5zvXFN","number":1579,"title":"Update to use OpenSSL 3","user":{"login":"chenrui333","id":1580956,"node_id":"MDQ6VXNlcjE1ODA5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/1580956?v=4","gravatar_id":"","url":"https://api.github.com/users/chenrui333","html_url":"https://github.com/chenrui333","followers_url":"https://api.github.com/users/chenrui333/followers","following_url":"https://api.github.com/users/chenrui333/following{/other_user}","gists_url":"https://api.github.com/users/chenrui333/gists{/gist_id}","starred_url":"https://api.github.com/users/chenrui333/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenrui333/subscriptions","organizations_url":"https://api.github.com/users/chenrui333/orgs","repos_url":"https://api.github.com/users/chenrui333/repos","events_url":"https://api.github.com/users/chenrui333/events{/privacy}","received_events_url":"https://api.github.com/users/chenrui333/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-10-13T11:47:37Z","updated_at":"2023-10-14T04:56:16Z","closed_at":"2023-10-14T04:56:15Z","author_association":"NONE","active_lock_reason":null,"body":"OpenSSL 1.1.1 is already EOL this September, https://www.openssl.org/blog/blog/2023/09/11/eol-111/, needs to update to use OpenSSL 3","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1579/timeline","performed_via_github_app":null,"state_reason":"completed"}},"public":true,"created_at":"2023-10-14T04:56:16Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"32562846221","type":"IssuesEvent","actor":{"id":147936270,"login":"MakeCartWheel","display_login":"MakeCartWheel","gravatar_id":"","url":"https://api.github.com/users/MakeCartWheel","avatar_url":"https://avatars.githubusercontent.com/u/147936270?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1581","id":1943385298,"node_id":"I_kwDOA-eq3c5z1bTS","number":1581,"title":"Failed to compile tests with manually installed Openssl 3.x.x","user":{"login":"MakeCartWheel","id":147936270,"node_id":"U_kgDOCNFUDg","avatar_url":"https://avatars.githubusercontent.com/u/147936270?v=4","gravatar_id":"","url":"https://api.github.com/users/MakeCartWheel","html_url":"https://github.com/MakeCartWheel","followers_url":"https://api.github.com/users/MakeCartWheel/followers","following_url":"https://api.github.com/users/MakeCartWheel/following{/other_user}","gists_url":"https://api.github.com/users/MakeCartWheel/gists{/gist_id}","starred_url":"https://api.github.com/users/MakeCartWheel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MakeCartWheel/subscriptions","organizations_url":"https://api.github.com/users/MakeCartWheel/orgs","repos_url":"https://api.github.com/users/MakeCartWheel/repos","events_url":"https://api.github.com/users/MakeCartWheel/events{/privacy}","received_events_url":"https://api.github.com/users/MakeCartWheel/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-10-14T16:40:16Z","updated_at":"2023-10-14T16:40:16Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Failed to compile tests\r\nAll previous files compiled successfuly\r\n```FAILED: tests/test_aes\r\n: && /usr/bin/cc   -Wl,-z,noexecstack src/common/sha3/xkcp_low/CMakeFiles/xkcp_low_keccakp_1600_plain64.dir/KeccakP-1kP-1600times4/serial/KeccakP-1600-times4-on1.c.o src/common/sha3/xkcp_low/CMakeFiles/xkcp_low_keccakp_1600_avx2.dir/K1600times4/avx2/KeccakP-1600-times4-SIMD256.c.o src/common/CMakeFiles/common.dir/aes/aes.c.o src/common/CMakeFiles/co.c.o src/common/CMakeFiles/common.dir/sha2/sha2_ossl.c.o src/common/CMakeFiles/common.dir/sha3/xkcp_sha3.c.o src/commmmon.dir/common.c.o src/common/CMakeFiles/common.dir/pqclean_shims/nistseedexpander.c.o src/common/CMakeFiles/common.dir/rand/rand.c.o src/common/CMakeFiles/common.dir/rand/rand_nist.c.o tests/CMakeFiles/test_aes.dir/test_aes.c.o  -o\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x14): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x2b): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x42): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x59): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x70): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o:ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x87): mo\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xcc): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xe3): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xfa): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x10): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x1c): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x28): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x34): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x40): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o:ossl_helpers.c:(.text.oqs_free_ossl_objects+0x4c): mor\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x70): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x7c): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x8c): undefined reference to `EVP_CIPHER_free'\r\ncollect2: error: ld returned 1 exit status\r\n[1200/1226] Linking C executable tests/speed_sig\r\nFAILED: tests/speed_sig\r\n: && /usr/bin/cc   -Wl,-z,noexecstack tests/CMakeFiles/speed_sig.dir/speed_sig.c.o  -o tests/speed_sig  lib/liboqs.a\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x14): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x2b): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x42): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x59): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x70): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o):ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x87): more undefined refere\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xcc): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xe3): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xfa): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x10): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x1c): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x28): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x34): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x40): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o):ossl_helpers.c:(.text.oqs_free_ossl_objects+0x4c): more undefined referen\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x70): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x7c): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x8c): undefined reference to `EVP_CIPHER_free'\r\ncollect2: error: ld returned 1 exit status\r\nninja: build stopped: subcommand failed.\r\n```\r\n\r\n**Environment**\r\n - OS: Linux 5.4.0-162-generic Ubuntu 20.04.6 LTS\r\n - OpenSSL 1.1.1f from apt\r\n - OpenSSL 3.1.2 Builded from source and installed manually (```make install```) (NOT by oqs-provider scripts)\r\n - liboqs version 0.9.0 main branch\r\n - cmake version 3.16.3\r\n\r\n**Solution**\r\nIm not sure, but I think ```make install``` from openssl installs the libraries in /usr/local\r\nand the cmake uses the first available libcrypt, libssl which in my case chose\r\n```-- Found OpenSSL: /usr/lib/x86_64-linux-gnu/libcrypto.so (found suitable version \"1.1.1f\", minimum required is \"1.1.1\")```\r\nmanually adding args to cmake with paths to openssl libraries v3 solves the problem\r\n```-DOPENSSL_CRYPTO_LIBRARY:FILEPATH=/usr/local/lib64/libcrypto.so.3 -DOPENSSL_SSL_LIBRARY:FILEPATH=/usr/local/lib64/libssl.so.3 -DOPENSSL_INCLUDE_DIR:PATH=/usr/local/include/```\r\n\r\n**Tests with cmake args**\r\n315 passed, 87 skipped, no errors\r\n\r\nidk, this is a mistake on my side with the openssl installation or cmake libs discovery\r\nhope the solution helps someone.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2023-10-14T16:40:17Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"32563278350","type":"IssuesEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1581","id":1943385298,"node_id":"I_kwDOA-eq3c5z1bTS","number":1581,"title":"Failed to compile tests with manually installed Openssl 3.x.x","user":{"login":"MakeCartWheel","id":147936270,"node_id":"U_kgDOCNFUDg","avatar_url":"https://avatars.githubusercontent.com/u/147936270?v=4","gravatar_id":"","url":"https://api.github.com/users/MakeCartWheel","html_url":"https://github.com/MakeCartWheel","followers_url":"https://api.github.com/users/MakeCartWheel/followers","following_url":"https://api.github.com/users/MakeCartWheel/following{/other_user}","gists_url":"https://api.github.com/users/MakeCartWheel/gists{/gist_id}","starred_url":"https://api.github.com/users/MakeCartWheel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MakeCartWheel/subscriptions","organizations_url":"https://api.github.com/users/MakeCartWheel/orgs","repos_url":"https://api.github.com/users/MakeCartWheel/repos","events_url":"https://api.github.com/users/MakeCartWheel/events{/privacy}","received_events_url":"https://api.github.com/users/MakeCartWheel/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-10-14T16:40:16Z","updated_at":"2023-10-14T17:35:14Z","closed_at":"2023-10-14T17:35:13Z","author_association":"NONE","active_lock_reason":null,"body":"Failed to compile tests\r\nAll previous files compiled successfuly\r\n```FAILED: tests/test_aes\r\n: && /usr/bin/cc   -Wl,-z,noexecstack src/common/sha3/xkcp_low/CMakeFiles/xkcp_low_keccakp_1600_plain64.dir/KeccakP-1kP-1600times4/serial/KeccakP-1600-times4-on1.c.o src/common/sha3/xkcp_low/CMakeFiles/xkcp_low_keccakp_1600_avx2.dir/K1600times4/avx2/KeccakP-1600-times4-SIMD256.c.o src/common/CMakeFiles/common.dir/aes/aes.c.o src/common/CMakeFiles/co.c.o src/common/CMakeFiles/common.dir/sha2/sha2_ossl.c.o src/common/CMakeFiles/common.dir/sha3/xkcp_sha3.c.o src/commmmon.dir/common.c.o src/common/CMakeFiles/common.dir/pqclean_shims/nistseedexpander.c.o src/common/CMakeFiles/common.dir/rand/rand.c.o src/common/CMakeFiles/common.dir/rand/rand_nist.c.o tests/CMakeFiles/test_aes.dir/test_aes.c.o  -o\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x14): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x2b): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x42): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x59): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x70): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o:ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x87): mo\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xcc): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xe3): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xfa): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x10): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x1c): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x28): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x34): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x40): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o:ossl_helpers.c:(.text.oqs_free_ossl_objects+0x4c): mor\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x70): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x7c): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x8c): undefined reference to `EVP_CIPHER_free'\r\ncollect2: error: ld returned 1 exit status\r\n[1200/1226] Linking C executable tests/speed_sig\r\nFAILED: tests/speed_sig\r\n: && /usr/bin/cc   -Wl,-z,noexecstack tests/CMakeFiles/speed_sig.dir/speed_sig.c.o  -o tests/speed_sig  lib/liboqs.a\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x14): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x2b): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x42): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x59): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x70): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o):ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x87): more undefined refere\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xcc): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xe3): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xfa): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x10): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x1c): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x28): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x34): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x40): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o):ossl_helpers.c:(.text.oqs_free_ossl_objects+0x4c): more undefined referen\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x70): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x7c): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x8c): undefined reference to `EVP_CIPHER_free'\r\ncollect2: error: ld returned 1 exit status\r\nninja: build stopped: subcommand failed.\r\n```\r\n\r\n**Environment**\r\n - OS: Linux 5.4.0-162-generic Ubuntu 20.04.6 LTS\r\n - OpenSSL 1.1.1f from apt\r\n - OpenSSL 3.1.2 Builded from source and installed manually (```make install```) (NOT by oqs-provider scripts)\r\n - liboqs version 0.9.0 main branch\r\n - cmake version 3.16.3\r\n\r\n**Solution**\r\nIm not sure, but I think ```make install``` from openssl installs the libraries in /usr/local\r\nand the cmake uses the first available libcrypt, libssl which in my case chose\r\n```-- Found OpenSSL: /usr/lib/x86_64-linux-gnu/libcrypto.so (found suitable version \"1.1.1f\", minimum required is \"1.1.1\")```\r\nmanually adding args to cmake with paths to openssl libraries v3 solves the problem\r\n```-DOPENSSL_CRYPTO_LIBRARY:FILEPATH=/usr/local/lib64/libcrypto.so.3 -DOPENSSL_SSL_LIBRARY:FILEPATH=/usr/local/lib64/libssl.so.3 -DOPENSSL_INCLUDE_DIR:PATH=/usr/local/include/```\r\n\r\n**Tests with cmake args**\r\n315 passed, 87 skipped, no errors\r\n\r\nidk, this is a mistake on my side with the openssl installation or cmake libs discovery\r\nhope the solution helps someone.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/timeline","performed_via_github_app":null,"state_reason":"completed"}},"public":true,"created_at":"2023-10-14T17:35:14Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
