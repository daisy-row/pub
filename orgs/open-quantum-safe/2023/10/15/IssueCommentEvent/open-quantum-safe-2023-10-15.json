{"id":"32567209962","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1581","id":1943385298,"node_id":"I_kwDOA-eq3c5z1bTS","number":1581,"title":"Failed to compile tests with manually installed Openssl 3.x.x","user":{"login":"MakeCartWheel","id":147936270,"node_id":"U_kgDOCNFUDg","avatar_url":"https://avatars.githubusercontent.com/u/147936270?v=4","gravatar_id":"","url":"https://api.github.com/users/MakeCartWheel","html_url":"https://github.com/MakeCartWheel","followers_url":"https://api.github.com/users/MakeCartWheel/followers","following_url":"https://api.github.com/users/MakeCartWheel/following{/other_user}","gists_url":"https://api.github.com/users/MakeCartWheel/gists{/gist_id}","starred_url":"https://api.github.com/users/MakeCartWheel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MakeCartWheel/subscriptions","organizations_url":"https://api.github.com/users/MakeCartWheel/orgs","repos_url":"https://api.github.com/users/MakeCartWheel/repos","events_url":"https://api.github.com/users/MakeCartWheel/events{/privacy}","received_events_url":"https://api.github.com/users/MakeCartWheel/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2023-10-14T16:40:16Z","updated_at":"2023-10-15T04:21:37Z","closed_at":"2023-10-14T17:35:13Z","author_association":"NONE","active_lock_reason":null,"body":"Failed to compile tests\r\nAll previous files compiled successfuly\r\n```FAILED: tests/test_aes\r\n: && /usr/bin/cc   -Wl,-z,noexecstack src/common/sha3/xkcp_low/CMakeFiles/xkcp_low_keccakp_1600_plain64.dir/KeccakP-1kP-1600times4/serial/KeccakP-1600-times4-on1.c.o src/common/sha3/xkcp_low/CMakeFiles/xkcp_low_keccakp_1600_avx2.dir/K1600times4/avx2/KeccakP-1600-times4-SIMD256.c.o src/common/CMakeFiles/common.dir/aes/aes.c.o src/common/CMakeFiles/co.c.o src/common/CMakeFiles/common.dir/sha2/sha2_ossl.c.o src/common/CMakeFiles/common.dir/sha3/xkcp_sha3.c.o src/commmmon.dir/common.c.o src/common/CMakeFiles/common.dir/pqclean_shims/nistseedexpander.c.o src/common/CMakeFiles/common.dir/rand/rand.c.o src/common/CMakeFiles/common.dir/rand/rand_nist.c.o tests/CMakeFiles/test_aes.dir/test_aes.c.o  -o\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x14): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x2b): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x42): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x59): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x70): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o:ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x87): mo\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xcc): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xe3): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xfa): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x10): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x1c): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x28): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x34): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x40): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o:ossl_helpers.c:(.text.oqs_free_ossl_objects+0x4c): mor\r\n/usr/bin/ld: src/common/CMakeFiles/common.dir/ossl_helpers.c.o: in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x70): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x7c): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x8c): undefined reference to `EVP_CIPHER_free'\r\ncollect2: error: ld returned 1 exit status\r\n[1200/1226] Linking C executable tests/speed_sig\r\nFAILED: tests/speed_sig\r\n: && /usr/bin/cc   -Wl,-z,noexecstack tests/CMakeFiles/speed_sig.dir/speed_sig.c.o  -o tests/speed_sig  lib/liboqs.a\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x14): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x2b): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x42): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x59): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x70): undefined reference to `EVP_MD_fetch'\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o):ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0x87): more undefined refere\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_fetch_ossl_objects':\r\nossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xcc): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xe3): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_fetch_ossl_objects+0xfa): undefined reference to `EVP_CIPHER_fetch'\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x10): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x1c): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x28): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x34): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x40): undefined reference to `EVP_MD_free'\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o):ossl_helpers.c:(.text.oqs_free_ossl_objects+0x4c): more undefined referen\r\n/usr/bin/ld: lib/liboqs.a(ossl_helpers.c.o): in function `oqs_free_ossl_objects':\r\nossl_helpers.c:(.text.oqs_free_ossl_objects+0x70): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x7c): undefined reference to `EVP_CIPHER_free'\r\n/usr/bin/ld: ossl_helpers.c:(.text.oqs_free_ossl_objects+0x8c): undefined reference to `EVP_CIPHER_free'\r\ncollect2: error: ld returned 1 exit status\r\nninja: build stopped: subcommand failed.\r\n```\r\n\r\n**Environment**\r\n - OS: Linux 5.4.0-162-generic Ubuntu 20.04.6 LTS\r\n - OpenSSL 1.1.1f from apt\r\n - OpenSSL 3.1.2 Builded from source and installed manually (```make install```) (NOT by oqs-provider scripts)\r\n - liboqs version 0.9.0 main branch\r\n - cmake version 3.16.3\r\n\r\n**Solution**\r\nIm not sure, but I think ```make install``` from openssl installs the libraries in /usr/local\r\nand the cmake uses the first available libcrypt, libssl which in my case chose\r\n```-- Found OpenSSL: /usr/lib/x86_64-linux-gnu/libcrypto.so (found suitable version \"1.1.1f\", minimum required is \"1.1.1\")```\r\nmanually adding args to cmake with paths to openssl libraries v3 solves the problem\r\n```-DOPENSSL_ROOT_DIR:PATH=/usr/local/lib64/```\r\n\r\n**OLD SOLUTION**\r\n```-DOPENSSL_CRYPTO_LIBRARY:FILEPATH=/usr/local/lib64/libcrypto.so.3 -DOPENSSL_SSL_LIBRARY:FILEPATH=/usr/local/lib64/libssl.so.3 -DOPENSSL_INCLUDE_DIR:PATH=/usr/local/include/```\r\n\r\n**Tests with cmake args**\r\n315 passed, 87 skipped, no errors\r\n\r\nidk, this is a mistake on my side with the openssl installation or cmake libs discovery\r\nhope the solution helps someone.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581/timeline","performed_via_github_app":null,"state_reason":"completed"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1763267265","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1581#issuecomment-1763267265","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1581","id":1763267265,"node_id":"IC_kwDOA-eq3c5pGVLB","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-10-15T04:21:37Z","updated_at":"2023-10-15T04:21:37Z","author_association":"MEMBER","body":"> Setting to only installed libraries /usr/local/lib64/ makes a mess\r\n\r\nThat is expected as per its documentation: According to that, it must be  \r\n\r\n> Set to the root directory of an OpenSSL installation.\r\n\r\ni.e., the path set to the \"--prefix\" setting configuring `openssl`, not the source directory.\r\n\r\nAdded a link to this documentation in #1582 to avoid other's/future confusions.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1763267265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-10-15T04:21:38Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"32568036277","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1573","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1573/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1573/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1573/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1573","id":1926239442,"node_id":"I_kwDOA-eq3c5y0BTS","number":1573,"title":"ARM build fails with `-DOQS_DIST_BUILD=OFF`","user":{"login":"SWilson4","id":39264796,"node_id":"MDQ6VXNlcjM5MjY0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39264796?v=4","gravatar_id":"","url":"https://api.github.com/users/SWilson4","html_url":"https://github.com/SWilson4","followers_url":"https://api.github.com/users/SWilson4/followers","following_url":"https://api.github.com/users/SWilson4/following{/other_user}","gists_url":"https://api.github.com/users/SWilson4/gists{/gist_id}","starred_url":"https://api.github.com/users/SWilson4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SWilson4/subscriptions","organizations_url":"https://api.github.com/users/SWilson4/orgs","repos_url":"https://api.github.com/users/SWilson4/repos","events_url":"https://api.github.com/users/SWilson4/events{/privacy}","received_events_url":"https://api.github.com/users/SWilson4/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-10-04T13:36:54Z","updated_at":"2023-10-15T06:47:27Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nliboqs is failing to build on ARM with the configuration `-DOQS_DIST_BUILD=OFF`. The error occurs when `ninja` is called.\r\n\r\nOn the other hand, a build in the same environment with `-DOQS_DIST_BUILD=OFF -DOQS_OPT_TARGET=generic` succeeds.\r\n\r\n**To Reproduce**\r\nSee https://app.circleci.com/pipelines/github/open-quantum-safe/liboqs/2869/workflows/fef62d49-fe36-4118-8ea8-e520bac6d7c0/jobs/23049 for the failing build.\r\n\r\n**Expected behavior**\r\nThe build should succeed, as it did [here](https://app.circleci.com/pipelines/github/open-quantum-safe/liboqs/2869/workflows/fef62d49-fe36-4118-8ea8-e520bac6d7c0/jobs/23048) and [here](https://app.circleci.com/pipelines/github/open-quantum-safe/liboqs/2867/workflows/1ae502c5-f484-436a-a1ea-7de67cb96813/jobs/23043).\r\n\r\n(The first of the pipelines linked above failed because no tests were run, not because of a build error. That said, I'm not sure why no tests were run.)\r\n\r\n**Additional context**\r\nI used the [`arm_machine`](https://github.com/open-quantum-safe/liboqs/blob/f0326a42209491a2333d351b60474ef8fc2dc065/.circleci/config.yml#L147) template for both jobs.\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1573/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1763294853","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1573#issuecomment-1763294853","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1573","id":1763294853,"node_id":"IC_kwDOA-eq3c5pGb6F","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-10-15T06:47:27Z","updated_at":"2023-10-15T06:47:27Z","author_association":"MEMBER","body":"> both the \"generic\" ARM configuration and the \"native\" ARM configuration seem to enable the aarch64 implementations\r\n\r\nThis is IMO not wrong: `aarch64` is the architecture designator (like `x64`). The difference should be that \"auto\" enables the \"neon\" and all \"sha\" and \"aes\" optimizations and \"generic\" doesn't (equivalent to the \"avx2\" optimization instructions for `x64`).\r\n\r\nThat said, this is not what is happening: The [code](https://github.com/open-quantum-safe/liboqs/blob/7c3a0e9aa7f9568e4dcafaf908ff8aa0008f0b71/.CMake/compiler_opts.cmake#L58) in fact activates all optimizations also for \"generic\" config. Tagging @Martyrshot for an explanation as to why this is so/correct (as per https://github.com/open-quantum-safe/liboqs/commit/c520cdb8715964bfb6bf12747630b1ae5db8bfdb#diff-8390d41b621f91157f77df2a276f933c189a6ad67634fa4949e8b802f53b62f2)? Related question: Did I read correctly that all `aarch64` chips do have support for \"neon\" no matter what? Or are also the crypto extensions contained in all `aarch64` chips? Then indeed the question changes to \"What is the difference between \"auto\" and \"generic\" chip config for `aarch64`?\r\n\r\nFinally answering my own question above after having done the test I suggested:\r\n\r\n> How does the liboqs build in this config behave there?\r\n\r\n`liboqs` builds (and tests) perfectly on an `aarch64` (AWS) VM as well as on an `aarch64` M1, regardless of \"OQS_DIST_BUILD\" setting. Thus, re-labelling this issue.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1763294853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-10-15T06:47:27Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"32569293078","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/255","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/255/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/255/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/255/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/255","id":1897683687,"node_id":"I_kwDOE_A9l85xHFrn","number":255,"title":"main branch build error in Win11 amd64 MSVC","user":{"login":"roelds","id":33097828,"node_id":"MDQ6VXNlcjMzMDk3ODI4","avatar_url":"https://avatars.githubusercontent.com/u/33097828?v=4","gravatar_id":"","url":"https://api.github.com/users/roelds","html_url":"https://github.com/roelds","followers_url":"https://api.github.com/users/roelds/followers","following_url":"https://api.github.com/users/roelds/following{/other_user}","gists_url":"https://api.github.com/users/roelds/gists{/gist_id}","starred_url":"https://api.github.com/users/roelds/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roelds/subscriptions","organizations_url":"https://api.github.com/users/roelds/orgs","repos_url":"https://api.github.com/users/roelds/repos","events_url":"https://api.github.com/users/roelds/events{/privacy}","received_events_url":"https://api.github.com/users/roelds/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-09-15T04:23:26Z","updated_at":"2023-10-15T09:53:50Z","closed_at":"2023-10-15T09:53:50Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nmain branch build error in Win11 amd64 MSVC\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nWindows Sandbox (or VM in VMware Workstation 16)\r\n\r\ninstalled all prereqs & added to PATH:\r\nVS Pro 2022\r\n\tall current desktop C/C++ options\r\nWin64OpenSSL-3_1_2.msi\r\n\tPATH env var += C:\\Program Files\\OpenSSL-Win64\\bin\\\r\nninja\r\n\tPATH env var += C:\\a\\ninja-win\r\nps7\r\npython\r\ncmake\r\ngraphviz\r\ngit\r\ndoxygen\r\npip install pytest pytest-xdist pyyaml\r\n\r\nbuilt liboqs ok using MSVC, not Ninja (see cmd output at bottom)\r\ntried oqs-provider build using Ninja, fails with this error:\r\n...\r\nC:\\b\\oqs-provider\\oqsprov\\oqsprov_capabilities.c(222): error C2059: syntax error: '}'\r\n...\r\n(or see cmd output at bottom)\r\n**Expected behavior**\r\nbuild ok\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\nsee cmd output at bottom, from msvc x64 cmd prompt run as admin\r\n\r\n**Environment (please complete the following information):**\r\n - OS: [e.g. Ubuntu 20] Win11 amd64 all updates, in Windows Sandbox (also occurs in Win10 VM in VMware Workstation 16)\r\n - OpenSSL version [e.g., 3.2.0-dev] Win64OpenSSL-3_1_2.msi installed & found by build script\r\n - oqsprovider version [e.g. 0.4.0] current main branch\r\n\r\nPlease run the following commands to obtain the version information:\r\n - For OpenSSL: `openssl version` \r\n - For oqsprovider: `openssl list -providers` N/A : this is build error report\r\nI have manually added openssl to PATH\r\nC:\\b\\oqs-provider\\_build>openssl version -a\r\nOpenSSL 3.1.2 1 Aug 2023 (Library: OpenSSL 3.1.2 1 Aug 2023)\r\nbuilt on: Wed Aug  2 14:43:24 2023 UTC\r\nplatform: VC-WIN64A\r\noptions:  bn(64,64)\r\ncompiler: cl  /Z7 /Fdossl_static.pdb /Gs0 /GF /Gy /MD /W3 /wd4090 /nologo /O2 -DL_ENDIAN -DOPENSSL_PIC -D_USING_V110_SDK71_ -D_WINSOCK_DEPRECATED_NO_WARNINGS -D_WIN32_WINNT=0x0502\r\nOPENSSLDIR: \"C:\\Program Files\\Common Files\\SSL\"\r\nENGINESDIR: \"C:\\Program Files\\OpenSSL\\lib\\engines-3\"\r\nMODULESDIR: \"C:\\Program Files\\OpenSSL\\lib\\ossl-modules\"\r\nSeeding source: os-specific\r\nCPUINFO: OPENSSL_ia32cap=0xfefab2035f8bffff:0x405f46f2bf27a9\r\n\r\nIf `oqsprovider` is not listed as active, be sure to first follow all\r\n[USAGE guidance](https://github.com/open-quantum-safe/oqs-provider/blob/main/USAGE.md).\r\nN/A : this is build error report\r\n\r\nIf reporting bugs triggered by OpenSSL API integrations, e.g. running\r\na provider build [statically](https://github.com/open-quantum-safe/oqs-provider/blob/main/CONFIGURE.md#oqs_provider_build_static)\r\nor directly invoking any OpenSSL API, be sure to retrieve and report all errors\r\nreported by using the OpenSSL [ERR_get_error_all](https://www.openssl.org/docs/man3.1/man3/ERR_get_error_all.html)\r\nfunction.\r\nN/A : this is build error report\r\n\r\nBug reports generated from [Debug builds](https://github.com/open-quantum-safe/oqs-provider/wiki/Debugging)\r\nwth the debug environment variable \"OQSPROV=1\" set will be particularly helpful to find underlying\r\nproblems.\r\nN/A : this is build error report\r\n\r\n**Additional context**\r\nI'd like to build win bin so I can try out the sphincsshake256 alg, since I don't see it provided by the released win bin\r\n\r\n**Hints**\r\nTo exclude a build/setup error, please consider running your test\r\ncommands to reproduce the problem in our [pre-build docker image](https://hub.docker.com/repository/docker/openquantumsafe/oqs-ossl3/general),\r\ne.g. as such: `docker run -it openquantumsafe/oqs-ossl3` and\r\nprovide full command input and output traces in the bug report.\r\n\r\nI don't see sphincsshake256ssimple or sphincsshake256256srobust listed as available in this docker image\r\n\r\n[syntax_err.txt](https://github.com/open-quantum-safe/oqs-provider/files/12615463/syntax_err.txt)\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/255/timeline","performed_via_github_app":null,"state_reason":"completed"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1763339276","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/255#issuecomment-1763339276","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/255","id":1763339276,"node_id":"IC_kwDOE_A9l85pGmwM","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-10-15T09:53:50Z","updated_at":"2023-10-15T09:53:50Z","author_association":"MEMBER","body":"Closing due to inactivity. Please re-open if/when you can confirm the problem still persists in the most current code base, @roelds ","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1763339276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-10-15T09:53:51Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"32572527813","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":218087071,"name":"open-quantum-safe/oqs-demos","url":"https://api.github.com/repos/open-quantum-safe/oqs-demos"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/231","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/231/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/231/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/231/events","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/231","id":1932256398,"node_id":"I_kwDODP--n85zK-SO","number":231,"title":"OQS Chromium(117.0.5863.0) : ERR_SSL_VERSION_OR_CIPHER_MISMATCH","user":{"login":"ColligenceLabs","id":98071587,"node_id":"U_kgDOBdh0Iw","avatar_url":"https://avatars.githubusercontent.com/u/98071587?v=4","gravatar_id":"","url":"https://api.github.com/users/ColligenceLabs","html_url":"https://github.com/ColligenceLabs","followers_url":"https://api.github.com/users/ColligenceLabs/followers","following_url":"https://api.github.com/users/ColligenceLabs/following{/other_user}","gists_url":"https://api.github.com/users/ColligenceLabs/gists{/gist_id}","starred_url":"https://api.github.com/users/ColligenceLabs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ColligenceLabs/subscriptions","organizations_url":"https://api.github.com/users/ColligenceLabs/orgs","repos_url":"https://api.github.com/users/ColligenceLabs/repos","events_url":"https://api.github.com/users/ColligenceLabs/events{/privacy}","received_events_url":"https://api.github.com/users/ColligenceLabs/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2023-10-09T03:53:08Z","updated_at":"2023-10-15T16:34:21Z","closed_at":"2023-10-15T16:34:20Z","author_association":"NONE","active_lock_reason":null,"body":"I build oqs-demo chromium with liboqs 0.8.0 and later oqs boringssl, etc. on my M1 Macbook.\r\n\r\nAt the test site (ttps://test.openquantumsafe.org/chromium-base.html) these are not supported :\r\n\r\n    ecdsap256/p256_frodo640aes <-- OK\r\n    rsa3072/p256_frodo640aes <-- OK\r\n    >> The other are not ok. I got ERR_SSL_VERSION_OR_CIPHER_MISMATCH error.\r\n          dilithium2/p256_frodo640aes\r\n          alcon512/p256_frodo640aes\r\n          sphincssha2128fsimple/p256_frodo640aes\r\n          sphincssha2128ssimple/p256_frodo640aes\r\n          sphincsshake128fsimple/p256_frodo640aes\r\n\r\nWhat did I missed when compiling OQS Chromium(117.0.5863.0) ?\r\n**Is there any missing on the file \"oqs-changes.patch\" for 117.0.5863.0 chromium ?**","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/231/timeline","performed_via_github_app":null,"state_reason":"completed"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1763441558","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/231#issuecomment-1763441558","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/231","id":1763441558,"node_id":"IC_kwDODP--n85pG_uW","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-10-15T16:34:20Z","updated_at":"2023-10-15T16:34:20Z","author_association":"MEMBER","body":"Resolved via #234 : Thanks @Raytonne !","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1763441558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-10-15T16:34:21Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"32572539960","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":218087071,"name":"open-quantum-safe/oqs-demos","url":"https://api.github.com/repos/open-quantum-safe/oqs-demos"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/229","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/229/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/229/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/229/events","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/229","id":1885660916,"node_id":"I_kwDODP--n85wZOb0","number":229,"title":"Cannot switch off OQS_HAVE_GETENTROPY, OQS_HAVE_EXPLICIT_BZERO","user":{"login":"marcbrevoort-cyberhive","id":69469731,"node_id":"MDQ6VXNlcjY5NDY5NzMx","avatar_url":"https://avatars.githubusercontent.com/u/69469731?v=4","gravatar_id":"","url":"https://api.github.com/users/marcbrevoort-cyberhive","html_url":"https://github.com/marcbrevoort-cyberhive","followers_url":"https://api.github.com/users/marcbrevoort-cyberhive/followers","following_url":"https://api.github.com/users/marcbrevoort-cyberhive/following{/other_user}","gists_url":"https://api.github.com/users/marcbrevoort-cyberhive/gists{/gist_id}","starred_url":"https://api.github.com/users/marcbrevoort-cyberhive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcbrevoort-cyberhive/subscriptions","organizations_url":"https://api.github.com/users/marcbrevoort-cyberhive/orgs","repos_url":"https://api.github.com/users/marcbrevoort-cyberhive/repos","events_url":"https://api.github.com/users/marcbrevoort-cyberhive/events{/privacy}","received_events_url":"https://api.github.com/users/marcbrevoort-cyberhive/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-09-07T10:59:31Z","updated_at":"2023-10-15T16:35:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When linking against OQS for `armv6`, I've been experiencing issues with undefined references for symbols `__explicit_bzero` and 'getentropy'. This is down to using `rpi_tools` for linking (pretty much required to build this for armv6), but unfortunately this only provides gcc v4.9.3 which is too low a version to compile OQS, so I end up with a mixed toolchain. As a result, cmake thinks these symbols will be available during link time, but they're not.\r\n\r\nIt appears the code caters for this eventuality, and contains both checks and fallback code depending on whether `OQS_HAVE_GETENTROPY` and `OQS_HAVE_EXPLICIT_BZERO` are defined. There's even a mechanism to switch these values to ON /defined, but unfortunately there doesn't seem to be a way to _undefine_ these. \r\n\r\nAs a workaround, I'm now patching CMakeLists.txt by commenting out the symbol checks:\r\n```\r\n# patch CMakeLists file so \"getentropy\" and \"explicit_bzero\" are undefined\r\nsed -i 's/check_symbol_exists[\\(]getentropy/#check_symbol_exists(getentropy/' src/common/CMakeLists.txt\r\nsed -i 's/check_symbol_exists[\\(]explicit_bzero/#check_symbol_exists(explicit_bzero/' src/common/CMakeLists.txt\r\n```\r\n\r\nThis allows me to complete my builds, but I'd much rather do this via an environment variable or \r\n`-DOQS_HAVE_GETENTROPY=OFF` / `-DOQS_HAVE_EXPLICIT_BZERO=OFF` settings. Sadly this doesn't work.\r\n\r\nBoth code snippets use `#if defined(....)`, perhaps this could check for the value of the variables instead?\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/229/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1763441899","html_url":"https://github.com/open-quantum-safe/oqs-demos/issues/229#issuecomment-1763441899","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/229","id":1763441899,"node_id":"IC_kwDODP--n85pG_zr","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-10-15T16:35:54Z","updated_at":"2023-10-15T16:35:54Z","author_association":"MEMBER","body":"@marcbrevoort-cyberhive Any input re my questions above? Or is the issue not relevant to you any longer and shall we close it?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1763441899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-10-15T16:35:55Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
