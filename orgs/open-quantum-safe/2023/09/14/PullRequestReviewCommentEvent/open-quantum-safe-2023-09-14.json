{"id":"31822073300","type":"PullRequestReviewCommentEvent","actor":{"id":144749118,"login":"captain-hoity-toity","display_login":"captain-hoity-toity","gravatar_id":"","url":"https://api.github.com/users/captain-hoity-toity","avatar_url":"https://avatars.githubusercontent.com/u/144749118?"},"repo":{"id":218087071,"name":"open-quantum-safe/oqs-demos","url":"https://api.github.com/repos/open-quantum-safe/oqs-demos"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/comments/1325318469","pull_request_review_id":1625778369,"id":1325318469,"node_id":"PRRC_kwDODP--n85O_sFF","diff_hunk":"@@ -1,47 +1,76 @@\n-FROM ubuntu:18.04","path":"unbound/Dockerfile-unbound","commit_id":"e13fa18a19424caeed54782042aad9052b66bac8","original_commit_id":"e13fa18a19424caeed54782042aad9052b66bac8","user":{"login":"captain-hoity-toity","id":144749118,"node_id":"U_kgDOCKCyPg","avatar_url":"https://avatars.githubusercontent.com/u/144749118?v=4","gravatar_id":"","url":"https://api.github.com/users/captain-hoity-toity","html_url":"https://github.com/captain-hoity-toity","followers_url":"https://api.github.com/users/captain-hoity-toity/followers","following_url":"https://api.github.com/users/captain-hoity-toity/following{/other_user}","gists_url":"https://api.github.com/users/captain-hoity-toity/gists{/gist_id}","starred_url":"https://api.github.com/users/captain-hoity-toity/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/captain-hoity-toity/subscriptions","organizations_url":"https://api.github.com/users/captain-hoity-toity/orgs","repos_url":"https://api.github.com/users/captain-hoity-toity/repos","events_url":"https://api.github.com/users/captain-hoity-toity/events{/privacy}","received_events_url":"https://api.github.com/users/captain-hoity-toity/received_events","type":"User","site_admin":false},"body":"Overall, the Dockerfile and the shell script are well written and follow best practices. However, there are a few points that could be improved:\n\n1. **Use of latest tag**: The code uses the `latest` tag for the Unbound download URL. It is generally recommended to avoid using the `latest` tag and instead pin versions in dockerfiles to make builds reproducible.\n\n```diff\n- ENV UNBOUND_DOWNLOAD_URL https://www.unbound.net/downloads/unbound-latest.tar.gz\n+ ENV UNBOUND_DOWNLOAD_URL https://www.unbound.net/downloads/unbound-1.13.2.tar.gz\n```\n\n2. **Use of `apk upgrade`**: The `apk upgrade` command is used which is generally not recommended in Dockerfiles as it can lead to unnecessary size increase and potential instability.\n\n```diff\n- RUN apk update && apk upgrade\n+ RUN apk update\n```\n\n3. **Grouping of `RUN` instructions**: To reduce the number of layers in the image, it is recommended to group `RUN` instructions together.\n\n```diff\n- RUN apk update && apk add build-base linux-headers \\\n-            libtool automake autoconf cmake ninja \\\n-            make \\\n-            openssl openssl-dev \\\n-            git wget\n- RUN git clone --depth 1 --branch main https://github.com/open-quantum-safe/liboqs && \\\n-    git clone --depth 1 --branch master https://github.com/openssl/openssl.git && \\\n-    git clone --depth 1 --branch main https://github.com/open-quantum-safe/oqs-provider.git\n+ RUN apk update && \\\n+     apk add build-base linux-headers libtool automake autoconf cmake ninja make openssl openssl-dev git wget && \\\n+     git clone --depth 1 --branch main https://github.com/open-quantum-safe/liboqs && \\\n+     git clone --depth 1 --branch master https://github.com/openssl/openssl.git && \\\n+     git clone --depth 1 --branch main https://github.com/open-quantum-safe/oqs-provider.git\n```\n\n4. **Use of `chmod 777`**: Using `chmod 777` is generally not recommended as it gives all permissions to all users. Consider using more restrictive permissions.\n\n```diff\n- RUN chmod 777 /opt/unbound.sh\n+ RUN chmod 755 /opt/unbound.sh\n```\n\n5. **Cleaning up**: After installing packages, it's a good practice to clean up the cache to reduce the size of the image.\n\n```diff\n+ RUN rm -rf /var/cache/apk/*\n```\n\n6. **Use of `set -x`**: The `set -x` command is used which prints all commands before executing them. This could potentially expose sensitive information in logs. Consider removing it if not necessary.\n\n```diff\n- RUN set -x && \\\n+ RUN \\\n```\n\n7. **Use of `wget --no-check-certificate`**: It's generally not a good practice to disable certificate check. Consider removing `--no-check-certificate` if the server's SSL certificate is valid.\n\n```diff\n- wget --no-check-certificate -O unbound.tar.gz $UNBOUND_DOWNLOAD_URL && \\\n+ wget -O unbound.tar.gz $UNBOUND_DOWNLOAD_URL && \\\n``","created_at":"2023-09-14T03:44:39Z","updated_at":"2023-09-14T03:44:39Z","html_url":"https://github.com/open-quantum-safe/oqs-demos/pull/220#discussion_r1325318469","pull_request_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/220","author_association":"NONE","_links":{"self":{"href":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/comments/1325318469"},"html":{"href":"https://github.com/open-quantum-safe/oqs-demos/pull/220#discussion_r1325318469"},"pull_request":{"href":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/220"}},"reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/comments/1325318469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":1,"original_line":1,"side":"LEFT","original_position":1,"position":1,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/220","id":1446038399,"node_id":"PR_kwDODP--n85WMMt_","html_url":"https://github.com/open-quantum-safe/oqs-demos/pull/220","diff_url":"https://github.com/open-quantum-safe/oqs-demos/pull/220.diff","patch_url":"https://github.com/open-quantum-safe/oqs-demos/pull/220.patch","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/220","number":220,"state":"open","locked":false,"title":"Update unbound DNS for openssl 3.x.x","user":{"login":"ryndia","id":68096721,"node_id":"MDQ6VXNlcjY4MDk2NzIx","avatar_url":"https://avatars.githubusercontent.com/u/68096721?v=4","gravatar_id":"","url":"https://api.github.com/users/ryndia","html_url":"https://github.com/ryndia","followers_url":"https://api.github.com/users/ryndia/followers","following_url":"https://api.github.com/users/ryndia/following{/other_user}","gists_url":"https://api.github.com/users/ryndia/gists{/gist_id}","starred_url":"https://api.github.com/users/ryndia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryndia/subscriptions","organizations_url":"https://api.github.com/users/ryndia/orgs","repos_url":"https://api.github.com/users/ryndia/repos","events_url":"https://api.github.com/users/ryndia/events{/privacy}","received_events_url":"https://api.github.com/users/ryndia/received_events","type":"User","site_admin":false},"body":"this update used the latest openssl oqs provider as recommended.","created_at":"2023-07-24T05:18:41Z","updated_at":"2023-09-14T03:44:39Z","closed_at":null,"merged_at":null,"merge_commit_sha":"edaab79c2ae12651916a263487ea45e034130df7","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/220/commits","review_comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/220/comments","review_comment_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/comments{/number}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/220/comments","statuses_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/statuses/e13fa18a19424caeed54782042aad9052b66bac8","head":{"label":"ryndia:main","ref":"main","sha":"e13fa18a19424caeed54782042aad9052b66bac8","user":{"login":"ryndia","id":68096721,"node_id":"MDQ6VXNlcjY4MDk2NzIx","avatar_url":"https://avatars.githubusercontent.com/u/68096721?v=4","gravatar_id":"","url":"https://api.github.com/users/ryndia","html_url":"https://github.com/ryndia","followers_url":"https://api.github.com/users/ryndia/followers","following_url":"https://api.github.com/users/ryndia/following{/other_user}","gists_url":"https://api.github.com/users/ryndia/gists{/gist_id}","starred_url":"https://api.github.com/users/ryndia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryndia/subscriptions","organizations_url":"https://api.github.com/users/ryndia/orgs","repos_url":"https://api.github.com/users/ryndia/repos","events_url":"https://api.github.com/users/ryndia/events{/privacy}","received_events_url":"https://api.github.com/users/ryndia/received_events","type":"User","site_admin":false},"repo":{"id":670006048,"node_id":"R_kgDOJ-97IA","name":"oqs-demos","full_name":"ryndia/oqs-demos","private":false,"owner":{"login":"ryndia","id":68096721,"node_id":"MDQ6VXNlcjY4MDk2NzIx","avatar_url":"https://avatars.githubusercontent.com/u/68096721?v=4","gravatar_id":"","url":"https://api.github.com/users/ryndia","html_url":"https://github.com/ryndia","followers_url":"https://api.github.com/users/ryndia/followers","following_url":"https://api.github.com/users/ryndia/following{/other_user}","gists_url":"https://api.github.com/users/ryndia/gists{/gist_id}","starred_url":"https://api.github.com/users/ryndia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryndia/subscriptions","organizations_url":"https://api.github.com/users/ryndia/orgs","repos_url":"https://api.github.com/users/ryndia/repos","events_url":"https://api.github.com/users/ryndia/events{/privacy}","received_events_url":"https://api.github.com/users/ryndia/received_events","type":"User","site_admin":false},"html_url":"https://github.com/ryndia/oqs-demos","description":"Instructions for enabling the use of quantum-safe cryptography in assorted software using the OQS suite","fork":true,"url":"https://api.github.com/repos/ryndia/oqs-demos","forks_url":"https://api.github.com/repos/ryndia/oqs-demos/forks","keys_url":"https://api.github.com/repos/ryndia/oqs-demos/keys{/key_id}","collaborators_url":"https://api.github.com/repos/ryndia/oqs-demos/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/ryndia/oqs-demos/teams","hooks_url":"https://api.github.com/repos/ryndia/oqs-demos/hooks","issue_events_url":"https://api.github.com/repos/ryndia/oqs-demos/issues/events{/number}","events_url":"https://api.github.com/repos/ryndia/oqs-demos/events","assignees_url":"https://api.github.com/repos/ryndia/oqs-demos/assignees{/user}","branches_url":"https://api.github.com/repos/ryndia/oqs-demos/branches{/branch}","tags_url":"https://api.github.com/repos/ryndia/oqs-demos/tags","blobs_url":"https://api.github.com/repos/ryndia/oqs-demos/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/ryndia/oqs-demos/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/ryndia/oqs-demos/git/refs{/sha}","trees_url":"https://api.github.com/repos/ryndia/oqs-demos/git/trees{/sha}","statuses_url":"https://api.github.com/repos/ryndia/oqs-demos/statuses/{sha}","languages_url":"https://api.github.com/repos/ryndia/oqs-demos/languages","stargazers_url":"https://api.github.com/repos/ryndia/oqs-demos/stargazers","contributors_url":"https://api.github.com/repos/ryndia/oqs-demos/contributors","subscribers_url":"https://api.github.com/repos/ryndia/oqs-demos/subscribers","subscription_url":"https://api.github.com/repos/ryndia/oqs-demos/subscription","commits_url":"https://api.github.com/repos/ryndia/oqs-demos/commits{/sha}","git_commits_url":"https://api.github.com/repos/ryndia/oqs-demos/git/commits{/sha}","comments_url":"https://api.github.com/repos/ryndia/oqs-demos/comments{/number}","issue_comment_url":"https://api.github.com/repos/ryndia/oqs-demos/issues/comments{/number}","contents_url":"https://api.github.com/repos/ryndia/oqs-demos/contents/{+path}","compare_url":"https://api.github.com/repos/ryndia/oqs-demos/compare/{base}...{head}","merges_url":"https://api.github.com/repos/ryndia/oqs-demos/merges","archive_url":"https://api.github.com/repos/ryndia/oqs-demos/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/ryndia/oqs-demos/downloads","issues_url":"https://api.github.com/repos/ryndia/oqs-demos/issues{/number}","pulls_url":"https://api.github.com/repos/ryndia/oqs-demos/pulls{/number}","milestones_url":"https://api.github.com/repos/ryndia/oqs-demos/milestones{/number}","notifications_url":"https://api.github.com/repos/ryndia/oqs-demos/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/ryndia/oqs-demos/labels{/name}","releases_url":"https://api.github.com/repos/ryndia/oqs-demos/releases{/id}","deployments_url":"https://api.github.com/repos/ryndia/oqs-demos/deployments","created_at":"2023-07-24T04:59:10Z","updated_at":"2023-07-24T05:15:36Z","pushed_at":"2023-07-24T05:15:32Z","git_url":"git://github.com/ryndia/oqs-demos.git","ssh_url":"git@github.com:ryndia/oqs-demos.git","clone_url":"https://github.com/ryndia/oqs-demos.git","svn_url":"https://github.com/ryndia/oqs-demos","homepage":"https://openquantumsafe.org/","size":523,"stargazers_count":0,"watchers_count":0,"language":"Dockerfile","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"open-quantum-safe:main","ref":"main","sha":"aa063be713ce50d0784ffb63ed5613184d6bd329","user":{"login":"open-quantum-safe","id":20689385,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNjg5Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/20689385?v=4","gravatar_id":"","url":"https://api.github.com/users/open-quantum-safe","html_url":"https://github.com/open-quantum-safe","followers_url":"https://api.github.com/users/open-quantum-safe/followers","following_url":"https://api.github.com/users/open-quantum-safe/following{/other_user}","gists_url":"https://api.github.com/users/open-quantum-safe/gists{/gist_id}","starred_url":"https://api.github.com/users/open-quantum-safe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/open-quantum-safe/subscriptions","organizations_url":"https://api.github.com/users/open-quantum-safe/orgs","repos_url":"https://api.github.com/users/open-quantum-safe/repos","events_url":"https://api.github.com/users/open-quantum-safe/events{/privacy}","received_events_url":"https://api.github.com/users/open-quantum-safe/received_events","type":"Organization","site_admin":false},"repo":{"id":218087071,"node_id":"MDEwOlJlcG9zaXRvcnkyMTgwODcwNzE=","name":"oqs-demos","full_name":"open-quantum-safe/oqs-demos","private":false,"owner":{"login":"open-quantum-safe","id":20689385,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwNjg5Mzg1","avatar_url":"https://avatars.githubusercontent.com/u/20689385?v=4","gravatar_id":"","url":"https://api.github.com/users/open-quantum-safe","html_url":"https://github.com/open-quantum-safe","followers_url":"https://api.github.com/users/open-quantum-safe/followers","following_url":"https://api.github.com/users/open-quantum-safe/following{/other_user}","gists_url":"https://api.github.com/users/open-quantum-safe/gists{/gist_id}","starred_url":"https://api.github.com/users/open-quantum-safe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/open-quantum-safe/subscriptions","organizations_url":"https://api.github.com/users/open-quantum-safe/orgs","repos_url":"https://api.github.com/users/open-quantum-safe/repos","events_url":"https://api.github.com/users/open-quantum-safe/events{/privacy}","received_events_url":"https://api.github.com/users/open-quantum-safe/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/open-quantum-safe/oqs-demos","description":"Instructions for enabling the use of quantum-safe cryptography in assorted software using the OQS suite","fork":false,"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos","forks_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/forks","keys_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/keys{/key_id}","collaborators_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/teams","hooks_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/hooks","issue_events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/events{/number}","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/events","assignees_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/assignees{/user}","branches_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/branches{/branch}","tags_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/tags","blobs_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/git/refs{/sha}","trees_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/git/trees{/sha}","statuses_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/statuses/{sha}","languages_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/languages","stargazers_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/stargazers","contributors_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/contributors","subscribers_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/subscribers","subscription_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/subscription","commits_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/commits{/sha}","git_commits_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/git/commits{/sha}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/comments{/number}","issue_comment_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments{/number}","contents_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/contents/{+path}","compare_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/compare/{base}...{head}","merges_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/merges","archive_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/downloads","issues_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues{/number}","pulls_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls{/number}","milestones_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/milestones{/number}","notifications_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/labels{/name}","releases_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/releases{/id}","deployments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/deployments","created_at":"2019-10-28T15:57:00Z","updated_at":"2023-09-12T01:14:12Z","pushed_at":"2023-08-31T05:16:02Z","git_url":"git://github.com/open-quantum-safe/oqs-demos.git","ssh_url":"git@github.com:open-quantum-safe/oqs-demos.git","clone_url":"https://github.com/open-quantum-safe/oqs-demos.git","svn_url":"https://github.com/open-quantum-safe/oqs-demos","homepage":"https://openquantumsafe.org/","size":522,"stargazers_count":82,"watchers_count":82,"language":"Dockerfile","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":50,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":10,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["chromium","cryptography","curl","httpd","nginx","post-quantum","tls"],"visibility":"public","forks":50,"open_issues":10,"watchers":82,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/220"},"html":{"href":"https://github.com/open-quantum-safe/oqs-demos/pull/220"},"issue":{"href":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/220"},"comments":{"href":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/220/comments"},"review_comments":{"href":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/220/comments"},"review_comment":{"href":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/220/commits"},"statuses":{"href":"https://api.github.com/repos/open-quantum-safe/oqs-demos/statuses/e13fa18a19424caeed54782042aad9052b66bac8"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2023-09-14T03:44:39Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
