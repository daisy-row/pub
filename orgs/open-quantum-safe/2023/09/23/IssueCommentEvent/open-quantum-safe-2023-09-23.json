{"id":"32046020739","type":"IssueCommentEvent","actor":{"id":31362124,"login":"res0nance","display_login":"res0nance","gravatar_id":"","url":"https://api.github.com/users/res0nance","avatar_url":"https://avatars.githubusercontent.com/u/31362124?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1256","id":1303490190,"node_id":"I_kwDOA-eq3c5Nsa6O","number":1256,"title":"Compiling liboqs for x86 on Windows","user":{"login":"pqprogrammer","id":109220915,"node_id":"U_kgDOBoKUMw","avatar_url":"https://avatars.githubusercontent.com/u/109220915?v=4","gravatar_id":"","url":"https://api.github.com/users/pqprogrammer","html_url":"https://github.com/pqprogrammer","followers_url":"https://api.github.com/users/pqprogrammer/followers","following_url":"https://api.github.com/users/pqprogrammer/following{/other_user}","gists_url":"https://api.github.com/users/pqprogrammer/gists{/gist_id}","starred_url":"https://api.github.com/users/pqprogrammer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pqprogrammer/subscriptions","organizations_url":"https://api.github.com/users/pqprogrammer/orgs","repos_url":"https://api.github.com/users/pqprogrammer/repos","events_url":"https://api.github.com/users/pqprogrammer/events{/privacy}","received_events_url":"https://api.github.com/users/pqprogrammer/received_events","type":"User","site_admin":false},"labels":[{"id":1168141259,"node_id":"MDU6TGFiZWwxMTY4MTQxMjU5","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/help%20wanted","name":"help wanted","color":"008672","default":true,"description":"Asking for support from non-core team"},{"id":1876026231,"node_id":"MDU6TGFiZWwxODc2MDI2MjMx","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/future-work","name":"future-work","color":"cccccc","default":false,"description":"Will not be fixed in current release cycle"},{"id":5700733396,"node_id":"LA_kwDOA-eq3c8AAAABU8pJ1A","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/platform-specific","name":"platform-specific","color":"C4AA6F","default":false,"description":"Issue related to a specific platform configuration; core team may not have required platform"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2022-07-13T14:04:03Z","updated_at":"2023-09-23T02:24:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI'm trying to compile liboqs as a static library with Visual Studio 2022 for x86 without ninja.\r\n\r\nWithin the build folder I executed the following cmake command:\r\n`cmake .. -A Win32 -DCMAKE_BUILD_TYPE=Release -DOQS_BUILD_ONLY_LIB=ON`\r\n\r\nAfter this I used the following commands:\r\n`msbuild ALL_BUILD.vcxproj`\r\nand\r\n`msbuild INSTALL.vcxproj`\r\n\r\nThe build and installation process finish successfully and I have the built library and header files within the C:\\Program Files (x86)\\liboqs directory.\r\n\r\nI noticed that within the generated CMake Visual Studio project files, the default configuration is Debug and not Release.\r\nIf I compile it manually by opening the generated ALL_BUILD.vcxproj and setting the configuration to Release, it will compile using the Release configuration. The same will not happen by using msbuild commands.\r\n\r\nAnother issue that I have is that by using the compiled library by the method which I said above I'm getting the following linking errors when I try to compile a simple test project (example_kem.c):\r\n- LNK2001\tunresolved external symbol __subborrow_u64\t\r\n- LNK2001\tunresolved external symbol __addcarry_u64\r\n- LNK2001\tunresolved external symbol __umul128\r\n- LNK2001\tunresolved external symbol ___shiftright128\r\n- LNK2001\tunresolved external symbol ___shiftleft128\r\n\r\nAll of the mentioned unresolved symbols are coming from oqs.lib.\r\n\r\nCompiling the same project with x64 configuration with the x64 static library works without issues.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1732184995","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1256#issuecomment-1732184995","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256","id":1732184995,"node_id":"IC_kwDOA-eq3c5nPwuj","user":{"login":"res0nance","id":31362124,"node_id":"MDQ6VXNlcjMxMzYyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/31362124?v=4","gravatar_id":"","url":"https://api.github.com/users/res0nance","html_url":"https://github.com/res0nance","followers_url":"https://api.github.com/users/res0nance/followers","following_url":"https://api.github.com/users/res0nance/following{/other_user}","gists_url":"https://api.github.com/users/res0nance/gists{/gist_id}","starred_url":"https://api.github.com/users/res0nance/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/res0nance/subscriptions","organizations_url":"https://api.github.com/users/res0nance/orgs","repos_url":"https://api.github.com/users/res0nance/repos","events_url":"https://api.github.com/users/res0nance/events{/privacy}","received_events_url":"https://api.github.com/users/res0nance/received_events","type":"User","site_admin":false},"created_at":"2023-09-23T02:24:34Z","updated_at":"2023-09-23T02:24:34Z","author_association":"CONTRIBUTOR","body":"I think with https://github.com/open-quantum-safe/liboqs/pull/1554 we can close this","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1732184995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-09-23T02:24:35Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"32047599793","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1554","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1554/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1554/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1554/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1554","id":1905048346,"node_id":"PR_kwDOA-eq3c5ayZQm","number":1554,"title":"ci: github actions CI for Windows x86 and x64","user":{"login":"res0nance","id":31362124,"node_id":"MDQ6VXNlcjMxMzYyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/31362124?v=4","gravatar_id":"","url":"https://api.github.com/users/res0nance","html_url":"https://github.com/res0nance","followers_url":"https://api.github.com/users/res0nance/followers","following_url":"https://api.github.com/users/res0nance/following{/other_user}","gists_url":"https://api.github.com/users/res0nance/gists{/gist_id}","starred_url":"https://api.github.com/users/res0nance/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/res0nance/subscriptions","organizations_url":"https://api.github.com/users/res0nance/orgs","repos_url":"https://api.github.com/users/res0nance/repos","events_url":"https://api.github.com/users/res0nance/events{/privacy}","received_events_url":"https://api.github.com/users/res0nance/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-09-20T13:49:31Z","updated_at":"2023-09-23T06:48:50Z","closed_at":"2023-09-20T18:46:50Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/1554","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1554","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/1554.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/1554.patch","merged_at":"2023-09-20T18:46:50Z"},"body":"Add CI with testing\r\n\r\n* [ ] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [ ] Does this PR change the list of algorithms available -- either adding, removing, or renaming? Does this PR otherwise change an API? (If so, PRs in [oqs-provider](https://github.com/open-quantum-safe/oqs-provider), [OQS-OpenSSL](https://github.com/open-quantum-safe/openssl), [OQS-BoringSSL](https://github.com/open-quantum-safe/boringssl), and [OQS-OpenSSH](https://github.com/open-quantum-safe/openssh) will also need to be ready for review and merge by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1554/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1732234040","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1554#issuecomment-1732234040","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1554","id":1732234040,"node_id":"IC_kwDOA-eq3c5nP8s4","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-09-23T06:48:50Z","updated_at":"2023-09-23T06:48:50Z","author_association":"MEMBER","body":"@qnfm Can you confirm your problem described above is gone since #1557 landed? If not, can you please create a new issue documenting what's still not OK after #1554 and #1557 landed? It's not good to discuss on a merged PR....","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1732234040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-09-23T06:48:50Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"32047708644","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1256","id":1303490190,"node_id":"I_kwDOA-eq3c5Nsa6O","number":1256,"title":"Compiling liboqs for x86 on Windows","user":{"login":"pqprogrammer","id":109220915,"node_id":"U_kgDOBoKUMw","avatar_url":"https://avatars.githubusercontent.com/u/109220915?v=4","gravatar_id":"","url":"https://api.github.com/users/pqprogrammer","html_url":"https://github.com/pqprogrammer","followers_url":"https://api.github.com/users/pqprogrammer/followers","following_url":"https://api.github.com/users/pqprogrammer/following{/other_user}","gists_url":"https://api.github.com/users/pqprogrammer/gists{/gist_id}","starred_url":"https://api.github.com/users/pqprogrammer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pqprogrammer/subscriptions","organizations_url":"https://api.github.com/users/pqprogrammer/orgs","repos_url":"https://api.github.com/users/pqprogrammer/repos","events_url":"https://api.github.com/users/pqprogrammer/events{/privacy}","received_events_url":"https://api.github.com/users/pqprogrammer/received_events","type":"User","site_admin":false},"labels":[{"id":1168141259,"node_id":"MDU6TGFiZWwxMTY4MTQxMjU5","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/help%20wanted","name":"help wanted","color":"008672","default":true,"description":"Asking for support from non-core team"},{"id":1876026231,"node_id":"MDU6TGFiZWwxODc2MDI2MjMx","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/future-work","name":"future-work","color":"cccccc","default":false,"description":"Will not be fixed in current release cycle"},{"id":5700733396,"node_id":"LA_kwDOA-eq3c8AAAABU8pJ1A","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/platform-specific","name":"platform-specific","color":"C4AA6F","default":false,"description":"Issue related to a specific platform configuration; core team may not have required platform"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2022-07-13T14:04:03Z","updated_at":"2023-09-23T07:06:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI'm trying to compile liboqs as a static library with Visual Studio 2022 for x86 without ninja.\r\n\r\nWithin the build folder I executed the following cmake command:\r\n`cmake .. -A Win32 -DCMAKE_BUILD_TYPE=Release -DOQS_BUILD_ONLY_LIB=ON`\r\n\r\nAfter this I used the following commands:\r\n`msbuild ALL_BUILD.vcxproj`\r\nand\r\n`msbuild INSTALL.vcxproj`\r\n\r\nThe build and installation process finish successfully and I have the built library and header files within the C:\\Program Files (x86)\\liboqs directory.\r\n\r\nI noticed that within the generated CMake Visual Studio project files, the default configuration is Debug and not Release.\r\nIf I compile it manually by opening the generated ALL_BUILD.vcxproj and setting the configuration to Release, it will compile using the Release configuration. The same will not happen by using msbuild commands.\r\n\r\nAnother issue that I have is that by using the compiled library by the method which I said above I'm getting the following linking errors when I try to compile a simple test project (example_kem.c):\r\n- LNK2001\tunresolved external symbol __subborrow_u64\t\r\n- LNK2001\tunresolved external symbol __addcarry_u64\r\n- LNK2001\tunresolved external symbol __umul128\r\n- LNK2001\tunresolved external symbol ___shiftright128\r\n- LNK2001\tunresolved external symbol ___shiftleft128\r\n\r\nAll of the mentioned unresolved symbols are coming from oqs.lib.\r\n\r\nCompiling the same project with x64 configuration with the x64 static library works without issues.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1732237024","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1256#issuecomment-1732237024","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256","id":1732237024,"node_id":"IC_kwDOA-eq3c5nP9bg","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-09-23T07:06:43Z","updated_at":"2023-09-23T07:06:43Z","author_association":"MEMBER","body":"> I think with #1554 we can close this\r\n\r\nI very nearly agreed -- but then checked the [latest CI](https://github.com/open-quantum-safe/liboqs/actions/runs/6275328618/job/17042580369), so a question to @res0nance : Am I right assuming that the title of the job (\"windows-x86\") is misleading (as it really is running on (and should be reading) windows-amd64)? If so, I am somewhat surprised that the CI run time of the two \"sibling\" \"windows-x86\" jobs is nearly identical: Shouldn't the one running `x86` (as one would assume reading the toolchain file) be much slower (as presumably emulating 32bit x86 on github CI's `x64` machines) than the one running on \"real\" `amd64`/`x64`? Where in the logs can one find \"proof\" that [this](https://github.com/open-quantum-safe/liboqs/actions/runs/6275328618/job/17042580008) is _really_ running/compiling/testing on a 32-bit x86 machine? Or is #1554 only really activating \"Win32\" Windows APIs without actually compiling for & running on `x86` hardware? Or are Windows toolchains able to generate & execute `x86` code so efficiently for/on `x64` hardware?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1732237024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-09-23T07:06:44Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"32051009129","type":"IssueCommentEvent","actor":{"id":31362124,"login":"res0nance","display_login":"res0nance","gravatar_id":"","url":"https://api.github.com/users/res0nance","avatar_url":"https://avatars.githubusercontent.com/u/31362124?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1256","id":1303490190,"node_id":"I_kwDOA-eq3c5Nsa6O","number":1256,"title":"Compiling liboqs for x86 on Windows","user":{"login":"pqprogrammer","id":109220915,"node_id":"U_kgDOBoKUMw","avatar_url":"https://avatars.githubusercontent.com/u/109220915?v=4","gravatar_id":"","url":"https://api.github.com/users/pqprogrammer","html_url":"https://github.com/pqprogrammer","followers_url":"https://api.github.com/users/pqprogrammer/followers","following_url":"https://api.github.com/users/pqprogrammer/following{/other_user}","gists_url":"https://api.github.com/users/pqprogrammer/gists{/gist_id}","starred_url":"https://api.github.com/users/pqprogrammer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pqprogrammer/subscriptions","organizations_url":"https://api.github.com/users/pqprogrammer/orgs","repos_url":"https://api.github.com/users/pqprogrammer/repos","events_url":"https://api.github.com/users/pqprogrammer/events{/privacy}","received_events_url":"https://api.github.com/users/pqprogrammer/received_events","type":"User","site_admin":false},"labels":[{"id":1168141259,"node_id":"MDU6TGFiZWwxMTY4MTQxMjU5","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/help%20wanted","name":"help wanted","color":"008672","default":true,"description":"Asking for support from non-core team"},{"id":1876026231,"node_id":"MDU6TGFiZWwxODc2MDI2MjMx","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/future-work","name":"future-work","color":"cccccc","default":false,"description":"Will not be fixed in current release cycle"},{"id":5700733396,"node_id":"LA_kwDOA-eq3c8AAAABU8pJ1A","url":"https://api.github.com/repos/open-quantum-safe/liboqs/labels/platform-specific","name":"platform-specific","color":"C4AA6F","default":false,"description":"Issue related to a specific platform configuration; core team may not have required platform"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-07-13T14:04:03Z","updated_at":"2023-09-23T14:56:19Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI'm trying to compile liboqs as a static library with Visual Studio 2022 for x86 without ninja.\r\n\r\nWithin the build folder I executed the following cmake command:\r\n`cmake .. -A Win32 -DCMAKE_BUILD_TYPE=Release -DOQS_BUILD_ONLY_LIB=ON`\r\n\r\nAfter this I used the following commands:\r\n`msbuild ALL_BUILD.vcxproj`\r\nand\r\n`msbuild INSTALL.vcxproj`\r\n\r\nThe build and installation process finish successfully and I have the built library and header files within the C:\\Program Files (x86)\\liboqs directory.\r\n\r\nI noticed that within the generated CMake Visual Studio project files, the default configuration is Debug and not Release.\r\nIf I compile it manually by opening the generated ALL_BUILD.vcxproj and setting the configuration to Release, it will compile using the Release configuration. The same will not happen by using msbuild commands.\r\n\r\nAnother issue that I have is that by using the compiled library by the method which I said above I'm getting the following linking errors when I try to compile a simple test project (example_kem.c):\r\n- LNK2001\tunresolved external symbol __subborrow_u64\t\r\n- LNK2001\tunresolved external symbol __addcarry_u64\r\n- LNK2001\tunresolved external symbol __umul128\r\n- LNK2001\tunresolved external symbol ___shiftright128\r\n- LNK2001\tunresolved external symbol ___shiftleft128\r\n\r\nAll of the mentioned unresolved symbols are coming from oqs.lib.\r\n\r\nCompiling the same project with x64 configuration with the x64 static library works without issues.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1732335935","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1256#issuecomment-1732335935","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1256","id":1732335935,"node_id":"IC_kwDOA-eq3c5nQVk_","user":{"login":"res0nance","id":31362124,"node_id":"MDQ6VXNlcjMxMzYyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/31362124?v=4","gravatar_id":"","url":"https://api.github.com/users/res0nance","html_url":"https://github.com/res0nance","followers_url":"https://api.github.com/users/res0nance/followers","following_url":"https://api.github.com/users/res0nance/following{/other_user}","gists_url":"https://api.github.com/users/res0nance/gists{/gist_id}","starred_url":"https://api.github.com/users/res0nance/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/res0nance/subscriptions","organizations_url":"https://api.github.com/users/res0nance/orgs","repos_url":"https://api.github.com/users/res0nance/repos","events_url":"https://api.github.com/users/res0nance/events{/privacy}","received_events_url":"https://api.github.com/users/res0nance/received_events","type":"User","site_admin":false},"created_at":"2023-09-23T14:56:19Z","updated_at":"2023-09-23T14:56:19Z","author_association":"CONTRIBUTOR","body":"> > I think with #1554 we can close this\r\n> \r\n> I very nearly agreed -- but then checked the [latest CI](https://github.com/open-quantum-safe/liboqs/actions/runs/6275328618/job/17042580369), so a question to @res0nance : Am I right assuming that the title of the job (\"windows-x86\") is misleading (as it really is running on (and should be reading) windows-amd64)? If so, I am somewhat surprised that the CI run time of the two \"sibling\" \"windows-x86\" jobs is nearly identical: Shouldn't the one running `x86` (as one would assume reading the toolchain file) be much slower (as presumably emulating 32bit x86 on github CI's `x64` machines) than the one running on \"real\" `amd64`/`x64`? \r\n\r\nIt is misleading, The intention was x86 family since it does both x86 and x86_64 but I didn't know how best to express that.\r\n\r\nPerhaps the reason x64 and x86 are so similar on windows is because we do not use the AVX2 optimized codepaths on Windows.\r\n\r\n>Where in the logs can one find \"proof\" that [this](https://github.com/open-quantum-safe/liboqs/actions/runs/6275328618/job/17042580008) is _really_ running/compiling/testing on a 32-bit x86 machine? Or is #1554 only really activating \"Win32\" Windows APIs without actually compiling for & running on `x86` hardware? Or are Windows toolchains able to generate & execute `x86` code so efficiently for/on `x64` hardware?\r\n\r\nIn the Generate Project section:\r\n\r\nx64 would use\r\n```\r\n-- Found assembler: C:/Program Files/Microsoft Visual Studio/2022/Enterprise/VC/Tools/MSVC/14.35.32215/bin/HostX64/x64/cl.exe\r\n```\r\n\r\nx86 would use:\r\n\r\n```\r\n-- Found assembler: C:/Program Files/Microsoft Visual Studio/2022/Enterprise/VC/Tools/MSVC/14.35.32215/bin/HostX64/x86/cl.exe\r\n```\r\n\r\nWindows ships with separate compilers based on arch.\r\n\r\nBonus round ARM64\r\n```\r\n-- Found assembler: C:/Program Files/Microsoft Visual Studio/2022/Enterprise/VC/Tools/MSVC/14.35.32215/bin/HostX64/arm64/cl.exe\r\n```\r\n\r\nAnd yes it seems that for x86 family of architectures windows seems to be able to cross compile them pretty easily. In terms of test execution however I don't have that great an answer here.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1732335935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-09-23T14:56:19Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
