{"id":"31722508049","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1544","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1544/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1544/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1544/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1544","id":1887541601,"node_id":"PR_kwDOA-eq3c5Z3sNn","number":1544,"title":"Prefer arc4random on Apple platforms","user":{"login":"res0nance","id":31362124,"node_id":"MDQ6VXNlcjMxMzYyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/31362124?v=4","gravatar_id":"","url":"https://api.github.com/users/res0nance","html_url":"https://github.com/res0nance","followers_url":"https://api.github.com/users/res0nance/followers","following_url":"https://api.github.com/users/res0nance/following{/other_user}","gists_url":"https://api.github.com/users/res0nance/gists{/gist_id}","starred_url":"https://api.github.com/users/res0nance/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/res0nance/subscriptions","organizations_url":"https://api.github.com/users/res0nance/orgs","repos_url":"https://api.github.com/users/res0nance/repos","events_url":"https://api.github.com/users/res0nance/events{/privacy}","received_events_url":"https://api.github.com/users/res0nance/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-09-08T11:59:25Z","updated_at":"2023-09-10T15:16:25Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/1544","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1544","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/1544.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/1544.patch","merged_at":null},"body":"<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\nOn Apple platforms arc4random is always available and it never fails. This removes a possible failure mode of liboqs on Apple platforms with `getentropy()`.\r\n\r\nThe man page for `getentropy()` on MacOSX also discourages its use\r\n\r\n```\r\nHowever, it should be noted that getentropy() is primarily intended for use in the construction and seeding of userspace PRNGs like\r\n     arc4random(3) or CC_crypto(3).  Clients who simply require random data should use arc4random(3), CCRandomGenerateBytes() from\r\n     CC_crypto(3), or SecRandomCopyBytes() from the Security framework instead of getentropy() or random(4)\r\n```\r\n\r\nOn iOS we currently use SecRandomCopyBytes() this requires linking to the Security framework and the call can fail. We have run into issues with this call failing so we propose using `arc4random_buf()` as it can never fail.\r\n\r\n\r\n* [ ] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [ ] Does this PR change the list of algorithms available -- either adding, removing, or renaming? Does this PR otherwise change an API? (If so, PRs in [oqs-provider](https://github.com/open-quantum-safe/oqs-provider), [OQS-OpenSSL](https://github.com/open-quantum-safe/openssl), [OQS-BoringSSL](https://github.com/open-quantum-safe/boringssl), and [OQS-OpenSSH](https://github.com/open-quantum-safe/openssh) will also need to be ready for review and merge by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1544/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1712840527","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1544#issuecomment-1712840527","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1544","id":1712840527,"node_id":"IC_kwDOA-eq3c5mF99P","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-09-10T15:16:25Z","updated_at":"2023-09-10T15:16:25Z","author_association":"MEMBER","body":"> Maybe we can use the file in https://github.com/leetal/ios-cmake to setup builds for the iOS / tvOS platforms? I'm assuming the licensing is fine. I can set that up in a different PR.\r\n\r\nSounds like a nice addition to avoid regression, too. Looking forward to the PR. Any chance to _run_ the result in CI, too (in an emulator)?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1712840527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-09-10T15:16:25Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
