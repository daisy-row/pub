{"id":"29447838102","type":"IssuesEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1483","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1483/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1483/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1483/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1483","id":1727813623,"node_id":"I_kwDOA-eq3c5m_Ff3","number":1483,"title":"40 tests fail on ARM32 (armv7hf): AssertionError: Got unexpected return code -4","user":{"login":"vt-alt","id":36664211,"node_id":"MDQ6VXNlcjM2NjY0MjEx","avatar_url":"https://avatars.githubusercontent.com/u/36664211?v=4","gravatar_id":"","url":"https://api.github.com/users/vt-alt","html_url":"https://github.com/vt-alt","followers_url":"https://api.github.com/users/vt-alt/followers","following_url":"https://api.github.com/users/vt-alt/following{/other_user}","gists_url":"https://api.github.com/users/vt-alt/gists{/gist_id}","starred_url":"https://api.github.com/users/vt-alt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vt-alt/subscriptions","organizations_url":"https://api.github.com/users/vt-alt/orgs","repos_url":"https://api.github.com/users/vt-alt/repos","events_url":"https://api.github.com/users/vt-alt/events{/privacy}","received_events_url":"https://api.github.com/users/vt-alt/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2023-05-26T15:13:38Z","updated_at":"2023-06-01T00:02:47Z","closed_at":"2023-06-01T00:02:47Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nI try to build `0.8.0-rc1` for ALT Linux and found that 40 tests failed on armv7hf arch.\r\n```\r\n[00:00:48] + timeout 222 /usr/bin/ninja -j32 -C build run_tests\r\n[00:00:48] ninja: Entering directory `build'\r\n[00:00:49] [0/1] cd /usr/src/RPM/BUILD/liboqs-0.8.0.rc1 && /usr/bin/cmake -E env OQS_BUILD_DIR=/usr/src/RPM/BUILD/liboqs-0.8.0.rc1/build python3 -m pytest --verbose --numprocesses=auto --ignore=scripts/copy_from_upstream/repos\r\n[00:00:55] ============================= test session starts ==============================\r\n[00:00:55] platform linux -- Python 3.10.8, pytest-7.3.1, pluggy-1.0.0 -- /usr/bin/python3\r\n[00:00:55] cachedir: .pytest_cache\r\n[00:00:55] rootdir: /usr/src/RPM/BUILD/liboqs-0.8.0.rc1\r\n[00:00:55] plugins: xdist-3.3.1\r\n[00:00:55] created: 32/32 workers\r\n[00:00:55] 32 workers [402 items]\r\n...\r\n[00:01:30] =================================== FAILURES ===================================\r\n[00:01:30] ______________________ test_kem[Classic-McEliece-348864] _______________________\r\n[00:01:30] [gw26] linux -- Python 3.10.8 /usr/bin/python3\r\n[00:01:30] \r\n[00:01:30] kem_name = 'Classic-McEliece-348864'\r\n[00:01:30] \r\n[00:01:30]     @helpers.filtered_test\r\n[00:01:30]     @pytest.mark.parametrize('kem_name', helpers.available_kems_by_name())\r\n[00:01:30]     def test_kem(kem_name):\r\n[00:01:30]         kats = helpers.get_kats(\"kem\")\r\n[00:01:30]         if not(helpers.is_kem_enabled_by_name(kem_name)): pytest.skip('Not enabled')\r\n[00:01:30] >       helpers.run_subprocess( [helpers.path_to_executable('speed_kem'), kem_name, \"-f\"] )\r\n[00:01:30] \r\n[00:01:30] tests/test_speed.py:14: \r\n[00:01:30] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[00:01:30] \r\n[00:01:30] command = ['/usr/src/RPM/BUILD/liboqs-0.8.0.rc1/build/tests/speed_kem', 'Classic-McEliece-348864', '-f']\r\n[00:01:30] working_dir = '.'\r\n[00:01:30] env = {'G_BROKEN_FILENAMES': '1', 'HISTFILESIZE': '9999', 'HISTSIZE': '999', 'HOME': '/usr/src', ...}\r\n[00:01:30] expected_returncode = 0, input = None, ignore_returncode = False\r\n[00:01:30] \r\n[00:01:30]     def run_subprocess(command, working_dir='.', env=None, expected_returncode=0, input=None, ignore_returncode=False):\r\n[00:01:30]         \"\"\"\r\n[00:01:30]         Helper function to run a shell command and report success/failure\r\n[00:01:30]         depending on the exit status of the shell command.\r\n[00:01:30]         \"\"\"\r\n[00:01:30]         env_ = os.environ.copy()\r\n[00:01:30]         if env is not None:\r\n[00:01:30]             env_.update(env)\r\n[00:01:30]         env = env_\r\n[00:01:30]     \r\n[00:01:30]         # Note we need to capture stdout/stderr from the subprocess,\r\n[00:01:30]         # then print it, which pytest will then capture and\r\n[00:01:30]         # buffer appropriately\r\n[00:01:30]         print(working_dir + \" > \" + \" \".join(command))\r\n[00:01:30]     \r\n[00:01:30]         result = subprocess.run(\r\n[00:01:30]                 command,\r\n[00:01:30]                 input=input,\r\n[00:01:30]                 stdout=subprocess.PIPE,\r\n[00:01:30]                 stderr=subprocess.STDOUT,\r\n[00:01:30]                 cwd=working_dir,\r\n[00:01:30]                 env=env,\r\n[00:01:30]             )\r\n[00:01:30]     \r\n[00:01:30]         if not(ignore_returncode) and (result.returncode != expected_returncode):\r\n[00:01:30]             print(result.stdout.decode('utf-8'))\r\n[00:01:30] >           assert False, \"Got unexpected return code {}\".format(result.returncode)\r\n[00:01:30] E           AssertionError: Got unexpected return code -4\r\n[00:01:30] \r\n[00:01:30] tests/helpers.py:42: AssertionError\r\n[00:01:30] ----------------------------- Captured stdout call -----------------------------\r\n[00:01:30] . > /usr/src/RPM/BUILD/liboqs-0.8.0.rc1/build/tests/speed_kem Classic-McEliece-348864 -f\r\n[00:01:30] \r\n...\r\n...\r\n[00:01:30] =========================== short test summary info ============================\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Classic-McEliece-348864] - AssertionErro...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Classic-McEliece-348864f] - AssertionErr...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Classic-McEliece-460896f] - AssertionErr...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Classic-McEliece-6960119] - AssertionErr...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Classic-McEliece-460896] - AssertionErro...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Classic-McEliece-6688128f] - AssertionEr...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Classic-McEliece-6960119f] - AssertionEr...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Classic-McEliece-8192128] - AssertionErr...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[HQC-192] - AssertionError: Got unexpecte...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[HQC-128] - AssertionError: Got unexpecte...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Classic-McEliece-8192128f] - AssertionEr...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Kyber512] - AssertionError: Got unexpect...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[HQC-256] - AssertionError: Got unexpecte...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Kyber768] - AssertionError: Got unexpect...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[sntrup761] - AssertionError: Got unexpec...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[FrodoKEM-640-AES] - AssertionError: Got ...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[FrodoKEM-640-SHAKE] - AssertionError: Go...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[FrodoKEM-976-AES] - AssertionError: Got ...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[FrodoKEM-1344-AES] - AssertionError: Got...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[Dilithium3] - AssertionError: Got unexpe...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[FrodoKEM-1344-SHAKE] - AssertionError: G...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[FrodoKEM-976-SHAKE] - AssertionError: Go...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[Dilithium5] - AssertionError: Got unexpe...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[Falcon-512] - AssertionError: Got unexpe...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[Dilithium2] - AssertionError: Got unexpe...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[Falcon-1024] - AssertionError: Got unexp...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHA2-128s-simple] - AssertionEr...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHA2-128f-simple] - AssertionEr...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHA2-192f-simple] - AssertionEr...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHA2-192s-simple] - AssertionEr...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHA2-256f-simple] - AssertionEr...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHA2-256s-simple] - AssertionEr...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHAKE-128f-simple] - AssertionE...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHAKE-128s-simple] - AssertionE...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHAKE-192f-simple] - AssertionE...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHAKE-256f-simple] - AssertionE...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHAKE-256s-simple] - AssertionE...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Classic-McEliece-6688128] - AssertionErr...\r\n[00:01:30] FAILED tests/test_speed.py::test_kem[Kyber1024] - AssertionError: Got unexpec...\r\n[00:01:30] FAILED tests/test_speed.py::test_sig[SPHINCS+-SHAKE-192s-simple] - AssertionE...\r\n[00:01:30] ================= 40 failed, 218 passed, 144 skipped in 40.35s =================\r\n```\r\n**Environment (please complete the following information):**\r\n - OS: `ALT Linux`\r\n - OpenSSL version `1.1.1t`\r\n - Compiler version used `gcc 12.2.1`\r\n - Build variables used `-DBUILD_SHARED_LIBS=ON -DOQS_DIST_BUILD=ON -DOQS_OPT_TARGET=generic`\r\n - liboqs version `0.8.0.rc1`\r\n\r\nFull build log is temporary available there https://git.altlinux.org/tasks/321944/build/100/armh/log\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1483/timeline","performed_via_github_app":null,"state_reason":"completed"}},"public":true,"created_at":"2023-06-01T00:02:48Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"29449101758","type":"IssuesEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/451","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/451/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/451/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/451/events","html_url":"https://github.com/open-quantum-safe/openssl/issues/451","id":1735289981,"node_id":"I_kwDOA_fpb85nbmx9","number":451,"title":"Update to OpenSSL 1.1.1u","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-01T01:48:13Z","updated_at":"2023-06-01T01:48:13Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":null,"reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/451/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2023-06-01T01:48:14Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"29449143624","type":"IssuesEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1484","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1484/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1484/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1484/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1484","id":1728947818,"node_id":"I_kwDOA-eq3c5nDaZq","number":1484,"title":"Error while building liboqs  with \"-DDILITHIUM_USE_AES\" enabled","user":{"login":"kamlesh0hrs","id":74731594,"node_id":"MDQ6VXNlcjc0NzMxNTk0","avatar_url":"https://avatars.githubusercontent.com/u/74731594?v=4","gravatar_id":"","url":"https://api.github.com/users/kamlesh0hrs","html_url":"https://github.com/kamlesh0hrs","followers_url":"https://api.github.com/users/kamlesh0hrs/followers","following_url":"https://api.github.com/users/kamlesh0hrs/following{/other_user}","gists_url":"https://api.github.com/users/kamlesh0hrs/gists{/gist_id}","starred_url":"https://api.github.com/users/kamlesh0hrs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamlesh0hrs/subscriptions","organizations_url":"https://api.github.com/users/kamlesh0hrs/orgs","repos_url":"https://api.github.com/users/kamlesh0hrs/repos","events_url":"https://api.github.com/users/kamlesh0hrs/events{/privacy}","received_events_url":"https://api.github.com/users/kamlesh0hrs/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-27T21:16:53Z","updated_at":"2023-06-01T01:51:50Z","closed_at":"2023-06-01T01:51:49Z","author_association":"NONE","active_lock_reason":null,"body":"Getting error when trying to build liboqs for dilithium5 with  -DDILITHIUM_USE_AES enabled.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n       1. Modify  src/sig/dilithium/CMakeLists.txt file to enable DILITHIUM_USE_AES\r\n       \r\n\r\n                diff --git a/src/sig/dilithium/CMakeLists.txt b/src/sig/dilithium/CMakeLists.txt          \r\n                index b992392b..7c14b103 100644\r\n                --- a/src/sig/dilithium/CMakeLists.txt\r\n                +++ b/src/sig/dilithium/CMakeLists.txt\r\n                @@ -59,7 +59,7 @@ endif()\r\n                if(OQS_ENABLE_SIG_dilithium_5)\r\n                  add_library(dilithium_5_ref OBJECT sig_dilithium_5.c pqcrystals-dilithium_dilithium5_ref/ntt.c pqcrystals- \r\n                   dilithium_dilithium5_ref/packing.c pqcrystals-dilithium_dilithium5_ref/poly.c pqcrystals- \r\n                   dilithium_dilithium5_ref/polyvec.c pqcrystals-dilithium_dilithium5_ref/reduce.c pqcrystals- \r\n                   dilithium_dilithium5_ref/rounding.c pqcrystals-dilithium_dilithium5_ref/sign.c pqcrystals- \r\n                   dilithium_dilithium5_ref/symmetric-shake.c)\r\n                -    target_compile_options(dilithium_5_ref PUBLIC -DDILITHIUM_MODE=5 -DDILITHIUM_RANDOMIZED_SIGNING)\r\n               +    target_compile_options(dilithium_5_ref PUBLIC -DDILITHIUM_MODE=5 -DDILITHIUM_RANDOMIZED_SIGNING  -DDILITHIUM_USE_AES)\r\n                    target_include_directories(dilithium_5_ref PRIVATE ${CMAKE_CURRENT_LIST_DIR}/pqcrystals-dilithium_dilithium5_ref)\r\n                    target_include_directories(dilithium_5_ref PRIVATE ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims)\r\n                    target_compile_options(dilithium_5_ref PUBLIC -DDILITHIUM_MODE=5 -DDILITHIUM_RANDOMIZED_SIGNING)\r\n\r\n2.  Run build command\r\n                 **cmake -DCMAKE_INSTALL_PREFIX=$INSTALLDIR -S . -B _build  -DBUILD_SHARED_LIBS=ON -DOPENSSL_ROOT_DIR=$OPENSSLINSTALL -DCMAKE_BUILD_TYPE=Debug**\r\n\r\n**Error:**\r\nScanning dependencies of target oqs\r\n[ 94%] Building C object src/CMakeFiles/oqs.dir/kem/kem.c.o\r\n[ 94%] Building C object src/CMakeFiles/oqs.dir/sig/sig.c.o\r\n[ 95%] Linking C shared library ../lib/liboqs.so\r\n[ 95%] Built target oqs\r\nScanning dependencies of target speed_sig\r\n[ 95%] Building C object tests/CMakeFiles/speed_sig.dir/speed_sig.c.o\r\n[ 96%] Linking C executable speed_sig\r\n/usr/bin/ld: ../lib/liboqs.so.0.8.0-dev: undefined reference to `pqcrystals_dilithium5_ref_verify'\r\n/usr/bin/ld: ../lib/liboqs.so.0.8.0-dev: undefined reference to `pqcrystals_dilithium5_ref_keypair'\r\n/usr/bin/ld: ../lib/liboqs.so.0.8.0-dev: undefined reference to `pqcrystals_dilithium5aes_ref_dilithium_aes256ctr_init'\r\n/usr/bin/ld: ../lib/liboqs.so.0.8.0-dev: undefined reference to `pqcrystals_dilithium5_ref_signature'\r\ncollect2: error: ld returned 1 exit status\r\nmake[2]: *** [tests/CMakeFiles/speed_sig.dir/build.make:85: tests/speed_sig] Error 1\r\nmake[1]: *** [CMakeFiles/Makefile2:1665: tests/CMakeFiles/speed_sig.dir/all] Error 2\r\nmake: *** [Makefile:152: all] Error 2\r\n\r\n\r\n**liboqs - master-dev**\r\n**openssl - 3.2-dev**\r\n\r\nCould you please help if I am doing it the right way, or am i missing something?\r\n\r\nThanks,\r\nKamlesh","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1484/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"public":true,"created_at":"2023-06-01T01:51:50Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"29463983949","type":"IssuesEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/174","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/174/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/174/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/174/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/174","id":1736360515,"node_id":"I_kwDOE_A9l85nfsJD","number":174,"title":"Master fails oqs_tlssig test on MacOS","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-01T13:42:41Z","updated_at":"2023-06-01T13:42:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nCurrent master fails `oqs_tlssig` test:\r\n```text\r\nSuccessful build for source-based OpenSSL\r\nUri's DYLD_LIBRARY_PATH=\"/Users/ur20980/openssl-3/lib:/usr/local/lib:/opt/local/lib:\"\r\nTest setup:\r\nLD_LIBRARY_PATH=/Users/ur20980/openssl-3/lib:/usr/local/lib:/opt/local/lib:\r\nOPENSSL_APP=/Users/ur20980/openssl-3/bin/openssl\r\nOPENSSL_CONF=/Users/ur20980/openssl-3/etc/openssl.cnf\r\nOPENSSL_MODULES=/Users/ur20980/openssl-3/lib/ossl-modules\r\nDYLD_LIBRARY_PATH=/Users/ur20980/openssl-3/lib:/usr/local/lib:/opt/local/lib:\r\nNo OQS-OpenSSL111 interop test because of absence of docker\r\nVersion information:\r\nOpenSSL 3.2.0-dev  (Library: OpenSSL 3.2.0-dev )\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.2.0\r\n    status: active\r\n    build info: 3.2.0-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.2.0\r\n    status: active\r\n    build info: 3.2.0-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n    build info: OQS Provider v.0.5.0-dev (5dc4bbf) based on liboqs v.0.8.0-rc1\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  oqsprovider\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n    build info: OQS Provider v.0.5.0-dev (5dc4bbf) based on liboqs v.0.8.0-rc1\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.2.0\r\n    status: active\r\n    build info: 3.2.0-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\nCert gen/verify, CMS sign/verify, CA tests for all enabled OQS signature algorithms commencing: \r\n\r\nTest project /Users/ur20980/src/oqs-provider/_build\r\n    Start 1: oqs_signatures\r\n1/5 Test #1: oqs_signatures ...................   Passed    4.01 sec\r\n    Start 2: oqs_kems\r\n2/5 Test #2: oqs_kems .........................   Passed    0.43 sec\r\n    Start 3: oqs_groups\r\n3/5 Test #3: oqs_groups .......................   Passed    0.56 sec\r\n    Start 4: oqs_tlssig\r\n4/5 Test #4: oqs_tlssig .......................***Failed    0.24 sec\r\n    Start 5: oqs_endecode\r\n5/5 Test #5: oqs_endecode .....................   Passed    5.16 sec\r\n\r\n80% tests passed, 1 tests failed out of 5\r\n\r\nTotal Test time (real) =  10.41 sec\r\n\r\nThe following tests FAILED:\r\n\t  4 - oqs_tlssig (Failed)\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Run and observe. ;-)\r\n\r\n**Expected behavior**\r\nAll tests passing, like:\r\n```text\r\nTest project /Users/ur20980/src/oqs-provider/_build\r\n    Start 1: oqs_signatures\r\n1/5 Test #1: oqs_signatures ...................   Passed    3.99 sec\r\n    Start 2: oqs_kems\r\n2/5 Test #2: oqs_kems .........................   Passed    0.45 sec\r\n    Start 3: oqs_groups\r\n3/5 Test #3: oqs_groups .......................   Passed    0.55 sec\r\n    Start 4: oqs_tlssig\r\n4/5 Test #4: oqs_tlssig .......................   Passed    0.15 sec\r\n    Start 5: oqs_endecode\r\n5/5 Test #5: oqs_endecode .....................   Passed    5.74 sec\r\n\r\n100% tests passed, 0 tests failed out of 5\r\n```\r\n\r\n**Logs**\r\n\r\n**Build that is failing tests** (OpenSSL-3.2.0-dev):\r\n[tests-out-s.txt](https://github.com/open-quantum-safe/oqs-provider/files/11625820/tests-out-s.txt)\r\n[build-out-s.txt](https://github.com/open-quantum-safe/oqs-provider/files/11625821/build-out-s.txt)\r\n\r\n[LastTest.log](https://github.com/open-quantum-safe/oqs-provider/files/11625851/LastTest.log)\r\n\r\n\r\n**Build that passes the tests** (OpenSSL-3.1.0):\r\n[tests-out.txt](https://github.com/open-quantum-safe/oqs-provider/files/11625822/tests-out.txt)\r\n[build-out.txt](https://github.com/open-quantum-safe/oqs-provider/files/11625823/build-out.txt)\r\n\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Platform: Apple computers, **both** Intel x86_64 and M2 Apple Silicon\r\n - OS: MacOS Ventura 13.4\r\n - OpenSSL version: 3.2.0-dev (failing)\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/174/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2023-06-01T13:42:42Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
