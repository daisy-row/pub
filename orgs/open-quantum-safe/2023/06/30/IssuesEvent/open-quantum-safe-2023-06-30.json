{"id":"30116909835","type":"IssuesEvent","actor":{"id":1215544,"login":"Honzaik","display_login":"Honzaik","gravatar_id":"","url":"https://api.github.com/users/Honzaik","avatar_url":"https://avatars.githubusercontent.com/u/1215544?"},"repo":{"id":288761656,"name":"open-quantum-safe/profiling","url":"https://api.github.com/repos/open-quantum-safe/profiling"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/101","repository_url":"https://api.github.com/repos/open-quantum-safe/profiling","labels_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/101/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/101/comments","events_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/101/events","html_url":"https://github.com/open-quantum-safe/profiling/issues/101","id":1782433519,"node_id":"I_kwDOETYnOM5qPcbv","number":101,"title":"Handshake performance of \"reference code\" vs \"performance code\"","user":{"login":"Honzaik","id":1215544,"node_id":"MDQ6VXNlcjEyMTU1NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1215544?v=4","gravatar_id":"","url":"https://api.github.com/users/Honzaik","html_url":"https://github.com/Honzaik","followers_url":"https://api.github.com/users/Honzaik/followers","following_url":"https://api.github.com/users/Honzaik/following{/other_user}","gists_url":"https://api.github.com/users/Honzaik/gists{/gist_id}","starred_url":"https://api.github.com/users/Honzaik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Honzaik/subscriptions","organizations_url":"https://api.github.com/users/Honzaik/orgs","repos_url":"https://api.github.com/users/Honzaik/repos","events_url":"https://api.github.com/users/Honzaik/events{/privacy}","received_events_url":"https://api.github.com/users/Honzaik/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-30T12:18:50Z","updated_at":"2023-06-30T12:18:50Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nwhile looking at the TLS handshake performance data at https://openquantumsafe.org/benchmarking/visualization/handshakes.html (specifically, from 2023-06-24 but other days have the same potential discrepancy) I came across a strange result. The reference code on x86 (and sometimes aarch64) is (almost) always faster (more handshakes per second) than the performance version for classical ECDHE (x25519/x448) with signature algorithm: Ed25519 or Dilithium2.\r\nWith Ed25519:\r\n\r\n- X25519 (x86_64-ref) | 1575.83\r\n- X448 (x86_64-ref) | 1033.33\r\n\r\nvs\r\n\r\n- X25519 (x86_64-noport) | 1514.52\r\n- X448 (x86_64-noport) | 1054.72 (here the performance code is faster)\r\n\r\nor (aarch64)\r\n\r\n- X25519 (aarch64-ref) | 1261.40\r\n- X448 (aarch64-ref) | 608.65\r\n\r\nvs\r\n\r\n- X25519 (aarch64-noport) | 1252.21\r\n- X448 (aarch64-noport) | 602.88\r\n\r\nWith Dilitihum2:\r\n\r\n- X25519 (x86_64-ref) | 1320.63\r\n- X448 (x86_64-ref) | 836.89\r\n\r\nvs\r\n\r\n- X25519 (x86_64-noport) | 1283.85\r\n- X448 (x86_64-noport) | 814.40\r\n\r\nWhen looking at post-quantum key exchanges it makes sense (performance code is faster than reference) but with classical key exchange it seems to be the opposite on x86.\r\n\r\nHowever, when I select RSA2048 or ECDSAprime256v1 those results for ECDHE make sense (performance code is faster than reference) but then Kyber key exchange has the opposite effect (reference code Kyber + (RSA or ECDSA) is faster than performance code).\r\n\r\nIs this a measurement error due to high variance? Is the \"performance code\" for classical key exchanges even different from the \"reference code\" since I would guess you use the OpenSSL implementation? Is there any other explanation for these strange results?\r\n\r\nBy the way, thank you for making and maintaining this project!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/101/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2023-06-30T12:18:51Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
