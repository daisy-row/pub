{"id":"30226765729","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/199","id":1778287767,"node_id":"I_kwDOE_A9l85p_oSX","number":199,"title":"build failure on Mac Pro with Apple M2 Chip.","user":{"login":"tpa10","id":4023371,"node_id":"MDQ6VXNlcjQwMjMzNzE=","avatar_url":"https://avatars.githubusercontent.com/u/4023371?v=4","gravatar_id":"","url":"https://api.github.com/users/tpa10","html_url":"https://github.com/tpa10","followers_url":"https://api.github.com/users/tpa10/followers","following_url":"https://api.github.com/users/tpa10/following{/other_user}","gists_url":"https://api.github.com/users/tpa10/gists{/gist_id}","starred_url":"https://api.github.com/users/tpa10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tpa10/subscriptions","organizations_url":"https://api.github.com/users/tpa10/orgs","repos_url":"https://api.github.com/users/tpa10/repos","events_url":"https://api.github.com/users/tpa10/events{/privacy}","received_events_url":"https://api.github.com/users/tpa10/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-06-28T06:23:12Z","updated_at":"2023-07-06T01:39:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nld emits warning:\r\nld: warning: ignoring file /Users/tpa/oqs-provider-git-repo/oqs-provider/.local/lib/libcrypto.dylib, building for macOS-x86_64 but attempting to link with file built for macOS-arm64 \r\nand subsequent link step fails due to not finding entry points...\r\n\r\nUndefined symbols for architecture x86_64:\r\n  \"_ASN1_item_d2i_ex\", referenced from:\r\n      _oqsx_d2i_X509_PUBKEY_INTERNAL in oqs_decode_der2key.c.o\r\n  \"_ERR_new\", referenced from:\r\n      _OSSL_provider_init in oqsprov.c.o\r\n      _oqsx_key_op in oqsprov_keys.c.o\r\n      _oqsx_key_new in oqsprov_keys.c.o\r\n      _oqsx_key_fromdata in oqsprov_keys.c.o\r\n      _oqsx_key_recreate_classickey in oqsprov_keys.c.o\r\n      _oqsx_key_new_from_nid in oqsprov_keys.c.o\r\n      _oqsx_import in oqs_kmgmt.c.o\r\n      ...\r\netc, etc.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. git clone https://github.com/open-quantum-safe/oqs-provider.git\r\n2. cd ors-provider\r\n3. scripts/fullbuild.sh -F\r\n\r\n**Expected behavior**\r\nExpected build to complete without error.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1\r\n - OpenSSL version:  OpenSSL 3.2.0-dev  (Library: OpenSSL 3.2.0-dev ) \r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nit appears that openssl is being built for arm64 and oqs-provider is trying to build for X86_64, but I have no idea how to fix this.\r\nnote that I get the same result, whether I use the \"fullbuild.sh\" script, or if I manually build & install openssl and liboqs.  \r\nThose components build and run, but when I attempt to use them to build oqs-provider, I get the arch mismatch problem.\r\nI expect this is NOT an issue on an older Mac that is using an intel chip.\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1622790460","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/199#issuecomment-1622790460","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199","id":1622790460,"node_id":"IC_kwDOE_A9l85gudE8","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2023-07-06T01:39:55Z","updated_at":"2023-07-06T01:39:55Z","author_association":"MEMBER","body":"I just compiled on my M2 with macOS 13.4.1 and did not get any errors. I wonder if it has something to do with the OpenSSL version.  How did you install OpenSSL 3.2.0-dev?  For me, cmake finds OpenSSL 1.1.1u via brew.  I do have OpenSSL 3.1.1 installed via brew but the build scripts apparently find the 1.1.1 installation.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1622790460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-07-06T01:39:56Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"30248959947","type":"IssueCommentEvent","actor":{"id":4023371,"login":"tpa10","display_login":"tpa10","gravatar_id":"","url":"https://api.github.com/users/tpa10","avatar_url":"https://avatars.githubusercontent.com/u/4023371?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/199","id":1778287767,"node_id":"I_kwDOE_A9l85p_oSX","number":199,"title":"build failure on Mac Pro with Apple M2 Chip.","user":{"login":"tpa10","id":4023371,"node_id":"MDQ6VXNlcjQwMjMzNzE=","avatar_url":"https://avatars.githubusercontent.com/u/4023371?v=4","gravatar_id":"","url":"https://api.github.com/users/tpa10","html_url":"https://github.com/tpa10","followers_url":"https://api.github.com/users/tpa10/followers","following_url":"https://api.github.com/users/tpa10/following{/other_user}","gists_url":"https://api.github.com/users/tpa10/gists{/gist_id}","starred_url":"https://api.github.com/users/tpa10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tpa10/subscriptions","organizations_url":"https://api.github.com/users/tpa10/orgs","repos_url":"https://api.github.com/users/tpa10/repos","events_url":"https://api.github.com/users/tpa10/events{/privacy}","received_events_url":"https://api.github.com/users/tpa10/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-06-28T06:23:12Z","updated_at":"2023-07-06T18:49:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nld emits warning:\r\nld: warning: ignoring file /Users/tpa/oqs-provider-git-repo/oqs-provider/.local/lib/libcrypto.dylib, building for macOS-x86_64 but attempting to link with file built for macOS-arm64 \r\nand subsequent link step fails due to not finding entry points...\r\n\r\nUndefined symbols for architecture x86_64:\r\n  \"_ASN1_item_d2i_ex\", referenced from:\r\n      _oqsx_d2i_X509_PUBKEY_INTERNAL in oqs_decode_der2key.c.o\r\n  \"_ERR_new\", referenced from:\r\n      _OSSL_provider_init in oqsprov.c.o\r\n      _oqsx_key_op in oqsprov_keys.c.o\r\n      _oqsx_key_new in oqsprov_keys.c.o\r\n      _oqsx_key_fromdata in oqsprov_keys.c.o\r\n      _oqsx_key_recreate_classickey in oqsprov_keys.c.o\r\n      _oqsx_key_new_from_nid in oqsprov_keys.c.o\r\n      _oqsx_import in oqs_kmgmt.c.o\r\n      ...\r\netc, etc.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. git clone https://github.com/open-quantum-safe/oqs-provider.git\r\n2. cd ors-provider\r\n3. scripts/fullbuild.sh -F\r\n\r\n**Expected behavior**\r\nExpected build to complete without error.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1\r\n - OpenSSL version:  OpenSSL 3.2.0-dev  (Library: OpenSSL 3.2.0-dev ) \r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nit appears that openssl is being built for arm64 and oqs-provider is trying to build for X86_64, but I have no idea how to fix this.\r\nnote that I get the same result, whether I use the \"fullbuild.sh\" script, or if I manually build & install openssl and liboqs.  \r\nThose components build and run, but when I attempt to use them to build oqs-provider, I get the arch mismatch problem.\r\nI expect this is NOT an issue on an older Mac that is using an intel chip.\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1624160639","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/199#issuecomment-1624160639","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199","id":1624160639,"node_id":"IC_kwDOE_A9l85gzrl_","user":{"login":"tpa10","id":4023371,"node_id":"MDQ6VXNlcjQwMjMzNzE=","avatar_url":"https://avatars.githubusercontent.com/u/4023371?v=4","gravatar_id":"","url":"https://api.github.com/users/tpa10","html_url":"https://github.com/tpa10","followers_url":"https://api.github.com/users/tpa10/followers","following_url":"https://api.github.com/users/tpa10/following{/other_user}","gists_url":"https://api.github.com/users/tpa10/gists{/gist_id}","starred_url":"https://api.github.com/users/tpa10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tpa10/subscriptions","organizations_url":"https://api.github.com/users/tpa10/orgs","repos_url":"https://api.github.com/users/tpa10/repos","events_url":"https://api.github.com/users/tpa10/events{/privacy}","received_events_url":"https://api.github.com/users/tpa10/received_events","type":"User","site_admin":false},"created_at":"2023-07-06T18:49:59Z","updated_at":"2023-07-06T18:49:59Z","author_association":"NONE","body":"Thank you for following up.  I will go back and re-check my steps from\r\nOpenSSL install/build, liboqs install/build (making sure to run the “test”\r\ntarget), and the oqs-provider build and let you know.\r\n\r\n\r\nOn Wed, Jul 5, 2023 at 6:40 PM Douglas Stebila ***@***.***>\r\nwrote:\r\n\r\n> I just compiled on my M2 with macOS 13.4.1 and did not get any errors. I\r\n> wonder if it has something to do with the OpenSSL version. How did you\r\n> install OpenSSL 3.2.0-dev? For me, cmake finds OpenSSL 1.1.1u via brew. I\r\n> do have OpenSSL 3.1.1 installed via brew but the build scripts apparently\r\n> find the 1.1.1 installation.\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/open-quantum-safe/oqs-provider/issues/199#issuecomment-1622790460>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AA6WIS65CTZFGT4QQFVYRVTXOYJPPANCNFSM6AAAAAAZWRUSUM>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1624160639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-07-06T18:49:59Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
