{"id":"30439928777","type":"IssueCommentEvent","actor":{"id":4023371,"login":"tpa10","display_login":"tpa10","gravatar_id":"","url":"https://api.github.com/users/tpa10","avatar_url":"https://avatars.githubusercontent.com/u/4023371?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/199","id":1778287767,"node_id":"I_kwDOE_A9l85p_oSX","number":199,"title":"build failure on Mac Pro with Apple M2 Chip.","user":{"login":"tpa10","id":4023371,"node_id":"MDQ6VXNlcjQwMjMzNzE=","avatar_url":"https://avatars.githubusercontent.com/u/4023371?v=4","gravatar_id":"","url":"https://api.github.com/users/tpa10","html_url":"https://github.com/tpa10","followers_url":"https://api.github.com/users/tpa10/followers","following_url":"https://api.github.com/users/tpa10/following{/other_user}","gists_url":"https://api.github.com/users/tpa10/gists{/gist_id}","starred_url":"https://api.github.com/users/tpa10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tpa10/subscriptions","organizations_url":"https://api.github.com/users/tpa10/orgs","repos_url":"https://api.github.com/users/tpa10/repos","events_url":"https://api.github.com/users/tpa10/events{/privacy}","received_events_url":"https://api.github.com/users/tpa10/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-06-28T06:23:12Z","updated_at":"2023-07-15T01:01:38Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nld emits warning:\r\nld: warning: ignoring file /Users/tpa/oqs-provider-git-repo/oqs-provider/.local/lib/libcrypto.dylib, building for macOS-x86_64 but attempting to link with file built for macOS-arm64 \r\nand subsequent link step fails due to not finding entry points...\r\n\r\nUndefined symbols for architecture x86_64:\r\n  \"_ASN1_item_d2i_ex\", referenced from:\r\n      _oqsx_d2i_X509_PUBKEY_INTERNAL in oqs_decode_der2key.c.o\r\n  \"_ERR_new\", referenced from:\r\n      _OSSL_provider_init in oqsprov.c.o\r\n      _oqsx_key_op in oqsprov_keys.c.o\r\n      _oqsx_key_new in oqsprov_keys.c.o\r\n      _oqsx_key_fromdata in oqsprov_keys.c.o\r\n      _oqsx_key_recreate_classickey in oqsprov_keys.c.o\r\n      _oqsx_key_new_from_nid in oqsprov_keys.c.o\r\n      _oqsx_import in oqs_kmgmt.c.o\r\n      ...\r\netc, etc.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. git clone https://github.com/open-quantum-safe/oqs-provider.git\r\n2. cd ors-provider\r\n3. scripts/fullbuild.sh -F\r\n\r\n**Expected behavior**\r\nExpected build to complete without error.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1\r\n - OpenSSL version:  OpenSSL 3.2.0-dev  (Library: OpenSSL 3.2.0-dev ) \r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nit appears that openssl is being built for arm64 and oqs-provider is trying to build for X86_64, but I have no idea how to fix this.\r\nnote that I get the same result, whether I use the \"fullbuild.sh\" script, or if I manually build & install openssl and liboqs.  \r\nThose components build and run, but when I attempt to use them to build oqs-provider, I get the arch mismatch problem.\r\nI expect this is NOT an issue on an older Mac that is using an intel chip.\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1636600494","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/199#issuecomment-1636600494","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/199","id":1636600494,"node_id":"IC_kwDOE_A9l85hjIqu","user":{"login":"tpa10","id":4023371,"node_id":"MDQ6VXNlcjQwMjMzNzE=","avatar_url":"https://avatars.githubusercontent.com/u/4023371?v=4","gravatar_id":"","url":"https://api.github.com/users/tpa10","html_url":"https://github.com/tpa10","followers_url":"https://api.github.com/users/tpa10/followers","following_url":"https://api.github.com/users/tpa10/following{/other_user}","gists_url":"https://api.github.com/users/tpa10/gists{/gist_id}","starred_url":"https://api.github.com/users/tpa10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tpa10/subscriptions","organizations_url":"https://api.github.com/users/tpa10/orgs","repos_url":"https://api.github.com/users/tpa10/repos","events_url":"https://api.github.com/users/tpa10/events{/privacy}","received_events_url":"https://api.github.com/users/tpa10/received_events","type":"User","site_admin":false},"created_at":"2023-07-15T01:01:38Z","updated_at":"2023-07-15T01:01:38Z","author_association":"NONE","body":"Will do, thanks!\r\n\r\nOn Fri, Jul 14, 2023 at 2:22 AM Michael Baentsch ***@***.***>\r\nwrote:\r\n\r\n> but the build scripts apparently find the 1.1.1 installation.\r\n>\r\n> This should be fixed by now courtesy #212\r\n> <https://github.com/open-quantum-safe/oqs-provider/pull/212>.\r\n>\r\n> @tpa <https://github.com/tpa>, please retry with latest code.\r\n>\r\n> â€”\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/open-quantum-safe/oqs-provider/issues/199#issuecomment-1635566947>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AA6WIS3PGLHBPWK4OXRCSR3XQEFVBANCNFSM6AAAAAAZWRUSUM>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1636600494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-07-15T01:01:39Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"30442338618","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":288761656,"name":"open-quantum-safe/profiling","url":"https://api.github.com/repos/open-quantum-safe/profiling"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/102","repository_url":"https://api.github.com/repos/open-quantum-safe/profiling","labels_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/102/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/102/comments","events_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/102/events","html_url":"https://github.com/open-quantum-safe/profiling/issues/102","id":1798110616,"node_id":"I_kwDOETYnOM5rLP2Y","number":102,"title":"Data collection inconsistent","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-07-11T05:13:18Z","updated_at":"2023-07-15T08:02:10Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"Data as requested by @christianpaquin in #93 is being collected (see e.g. https://openquantumsafe.org/benchmarking/visualization/2023-07-08/handshakes.json) but in an inconsistent manner: Many algorithm combinations deliver results on `x64` but not `aarch64` and `m1` and in many cases it's the opposite. Investigation warranted -- as on the many other issues in this project. Not fun being alone looking at these...","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/102/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/comments/1636704081","html_url":"https://github.com/open-quantum-safe/profiling/issues/102#issuecomment-1636704081","issue_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/102","id":1636704081,"node_id":"IC_kwDOETYnOM5hjh9R","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-07-15T08:02:10Z","updated_at":"2023-07-15T08:02:10Z","author_association":"MEMBER","body":"> Many algorithm combinations deliver results on x64 but not aarch64 and m1 and in many cases it's the opposite.\r\n\r\nWhen checking the results for July 8 collected on the different architectures, I noticed something confusing: only the `x64` run collected handshake data for all algorithm combinations -- contrary to what the new logic as per #100 dictates. Weird and inexplicable given that the most current docker image is pulled as part of VM startup:\r\n\r\n```\r\ndocker container prune -f\r\ndocker volume prune -f\r\ndocker pull openquantumsafe/oqs-perf >> /home/ec2-user/run.log\r\ndocker run --rm --privileged [...] openquantumsafe/oqs-perf >> /home/ec2-user/run.log\r\n```\r\n\r\nIdeas welcome why this may be so.\r\n\r\nAlso visible in the run.log is a `cp` error I didn't notice before: Activation of the `-ref` and `-noport` \"oqsprovider\" failed due to incorrect file permissions. Hence, all runs since the switch to \"openssl3\" were done with the same `oqsprovider`/`liboqs` optimization level (default=OQS_DIST_BUILD) :-( Fix in #104.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/comments/1636704081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-07-15T08:02:10Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
