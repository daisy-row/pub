{"id":"28811014322","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426/events","html_url":"https://github.com/open-quantum-safe/openssl/pull/426","id":1558537607,"node_id":"PR_kwDOA_fpb85InKrc","number":426,"title":"WIP: Enable access to the curves and certificate type","user":{"login":"akihikokuroda","id":16141898,"node_id":"MDQ6VXNlcjE2MTQxODk4","avatar_url":"https://avatars.githubusercontent.com/u/16141898?v=4","gravatar_id":"","url":"https://api.github.com/users/akihikokuroda","html_url":"https://github.com/akihikokuroda","followers_url":"https://api.github.com/users/akihikokuroda/followers","following_url":"https://api.github.com/users/akihikokuroda/following{/other_user}","gists_url":"https://api.github.com/users/akihikokuroda/gists{/gist_id}","starred_url":"https://api.github.com/users/akihikokuroda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akihikokuroda/subscriptions","organizations_url":"https://api.github.com/users/akihikokuroda/orgs","repos_url":"https://api.github.com/users/akihikokuroda/repos","events_url":"https://api.github.com/users/akihikokuroda/events{/privacy}","received_events_url":"https://api.github.com/users/akihikokuroda/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-01-26T17:53:48Z","updated_at":"2023-05-03T05:28:40Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/pulls/426","html_url":"https://github.com/open-quantum-safe/openssl/pull/426","diff_url":"https://github.com/open-quantum-safe/openssl/pull/426.diff","patch_url":"https://github.com/open-quantum-safe/openssl/pull/426.patch","merged_at":null},"body":"This PR changes enable access to the curves and certificate type used in TLSv1.3 handshakes.\r\n\r\nThis equivalent to access to the ciphers used in the TLS session. The benefit is that monitoring/logging can not only report the protocol and ciphers, but also the curve and certificate type used for a TLSv1.3 connection on the client side. In particular, an user can verify that a quantum-safe-crypto curve and certificate was used.\r\n\r\n<!--\r\nThank you for your pull request. Please review these requirements:\r\n\r\nContributors guide: https://github.com/openssl/openssl/blob/master/CONTRIBUTING\r\n\r\nOther than that, provide a description above this comment if there isn't one already\r\n\r\nIf this fixes a github issue, make sure to have a line saying 'Fixes #XXXX' (without quotes) in the commit message.\r\n-->\r\n\r\n##### Checklist\r\n<!-- Remove items that do not apply. For completed items, change [ ] to [x]. -->\r\n- [x] documentation is added or updated\r\n- [ ] tests are added or updated\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1532469950","html_url":"https://github.com/open-quantum-safe/openssl/pull/426#issuecomment-1532469950","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426","id":1532469950,"node_id":"IC_kwDOA_fpb85bV6K-","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T05:28:40Z","updated_at":"2023-05-03T05:28:40Z","author_association":"MEMBER","body":"@akihikokuroda Is this PR still something you'd like to move forward (and address the feedback) or shall we close this?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1532469950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T05:28:40Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28811030706","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/429","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/429/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/429/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/429/events","html_url":"https://github.com/open-quantum-safe/openssl/pull/429","id":1575290424,"node_id":"PR_kwDOA_fpb85Je22N","number":429,"title":"Enabling signing of arbitrary data","user":{"login":"opencrypto","id":7943812,"node_id":"MDQ6VXNlcjc5NDM4MTI=","avatar_url":"https://avatars.githubusercontent.com/u/7943812?v=4","gravatar_id":"","url":"https://api.github.com/users/opencrypto","html_url":"https://github.com/opencrypto","followers_url":"https://api.github.com/users/opencrypto/followers","following_url":"https://api.github.com/users/opencrypto/following{/other_user}","gists_url":"https://api.github.com/users/opencrypto/gists{/gist_id}","starred_url":"https://api.github.com/users/opencrypto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opencrypto/subscriptions","organizations_url":"https://api.github.com/users/opencrypto/orgs","repos_url":"https://api.github.com/users/opencrypto/repos","events_url":"https://api.github.com/users/opencrypto/events{/privacy}","received_events_url":"https://api.github.com/users/opencrypto/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-02-08T01:13:22Z","updated_at":"2023-05-03T05:30:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/pulls/429","html_url":"https://github.com/open-quantum-safe/openssl/pull/429","diff_url":"https://github.com/open-quantum-safe/openssl/pull/429.diff","patch_url":"https://github.com/open-quantum-safe/openssl/pull/429.patch","merged_at":null},"body":"<!--\r\nThank you for your pull request. Please review these requirements:\r\n\r\nContributors guide: https://github.com/openssl/openssl/blob/master/CONTRIBUTING\r\n\r\nOther than that, provide a description above this comment if there isn't one already\r\n\r\nIf this fixes a github issue, make sure to have a line saying 'Fixes #XXXX' (without quotes) in the commit message.\r\n-->\r\n\r\nThis patch provides two different different changes:\r\n- (bb172fb) Enables the use of a EVP_md_null together with NULL in OQS/PQC pkey meth for setting the digest via the CTRL interface\r\n- (fc7ab7d) Enables the use of EVP_PKEY_sign() and EVP_PKEY_verify() with OQS/PQC algorithms by porting the code from the pkey_oqs digestsign() and pkey_oqs_digestverify() into pkey_sign() and pkey_verify() of the pkey meth.\r\n\r\n##### Checklist\r\n<!-- Remove items that do not apply. For completed items, change [ ] to [x]. -->\r\n- [ ] documentation is added or updated\r\n- [ ] tests are added or updated\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/429/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1532470661","html_url":"https://github.com/open-quantum-safe/openssl/pull/429#issuecomment-1532470661","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/429","id":1532470661,"node_id":"IC_kwDOA_fpb85bV6WF","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T05:30:02Z","updated_at":"2023-05-03T05:30:02Z","author_association":"MEMBER","body":"@opencrypto Do you intend to move this PR forward (incl. test and documentation) or shall we close this given the long time this is \"dormant\"?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1532470661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T05:30:03Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28811075043","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/154","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/154/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/154/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/154/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/154","id":1692987477,"node_id":"I_kwDOE_A9l85k6PBV","number":154,"title":"QSC encoder library build loses cross-compilation settings","user":{"login":"distorted-mdw","id":10420519,"node_id":"MDQ6VXNlcjEwNDIwNTE5","avatar_url":"https://avatars.githubusercontent.com/u/10420519?v=4","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","html_url":"https://github.com/distorted-mdw","followers_url":"https://api.github.com/users/distorted-mdw/followers","following_url":"https://api.github.com/users/distorted-mdw/following{/other_user}","gists_url":"https://api.github.com/users/distorted-mdw/gists{/gist_id}","starred_url":"https://api.github.com/users/distorted-mdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/distorted-mdw/subscriptions","organizations_url":"https://api.github.com/users/distorted-mdw/orgs","repos_url":"https://api.github.com/users/distorted-mdw/repos","events_url":"https://api.github.com/users/distorted-mdw/events{/privacy}","received_events_url":"https://api.github.com/users/distorted-mdw/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-02T19:33:00Z","updated_at":"2023-05-03T05:33:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"/Suppose I configure the OQS provider for cross-compilation with\r\n\r\n```\r\ncmake \\\r\n                -DCMAKE_SYSTEM_NAME=Linux -DCMAKE_SYSTEM_PROCESSOR=aarch64 \\\r\n                -DCMAKE_CROSSCOMPILING_EMULATOR=qemu-aarch64 \\\r\n                -DCMAKE_C_COMPILER=.../bin/aarch64-linux-gnu \\\r\n                ..\r\n```\r\n\r\nMy build fails with \r\n\r\n```\r\n$ make VERBOSE=1\r\n[...]\r\n[ 33%] Linking C shared library ../lib/oqsprovider.so\r\ncd BUILDDIR/oqsprov && /usr/bin/cmake -E cmake_link_script CMakeFiles/oqsprovider.dir/link.txt --verbose=1\r\nTOOLCHAIN/bin/aarch64-linux-gnu-gcc -fPIC -shared -Wl,-soname,oqsprovider.so.1 -o ../lib/oqsprovider.so.0.5.0-dev CMakeFiles/oqsprovider.dir/oqsprov.c.o CMakeFiles/oqsprovider.dir/oqsprov_capabilities.c.o CMakeFiles/oqsprovider.dir/oqsprov_keys.c.o CMakeFiles/oqsprovider.dir/oqs_kmgmt.c.o CMakeFiles/oqsprovider.dir/oqs_sig.c.o CMakeFiles/oqsprovider.dir/oqs_kem.c.o CMakeFiles/oqsprovider.dir/oqs_encode_key2any.c.o CMakeFiles/oqsprovider.dir/oqs_endecoder_common.c.o CMakeFiles/oqsprovider.dir/oqs_decode_der2key.c.o CMakeFiles/oqsprovider.dir/oqsprov_bio.c.o  -Wl,-rpath,PREFIX/lib: PREFIX/lib/liboqs.a PREFIX/lib/libcrypto.so ../install/lib/libqsc_key_encoder.a\r\nTOOLCHAIN/aarch64-linux-gnu/bin/ld: ../install/lib/libqsc_key_encoder.a(encoding_qsc.c.o): Relocations in generic ELF (EM: 62)\r\nTOOLCHAIN/aarch64-linux-gnu/bin/ld: ../install/lib/libqsc_key_encoder.a(encoding_qsc.c.o): Relocations in generic ELF (EM: 62)\r\nTOOLCHAIN/aarch64-linux-gnu/bin/ld: ../install/lib/libqsc_key_encoder.a(encoding_qsc.c.o): Relocations in generic ELF (EM: 62)\r\n../install/lib/libqsc_key_encoder.a: error adding symbols: File in wrong format\r\ncollect2: error: ld returned 1 exit status\r\nmake[2]: *** [oqsprov/CMakeFiles/oqsprovider.dir/build.make:242: lib/oqsprovider.so.0.5.0-dev] Error 1\r\nmake[2]: Leaving directory 'BUILDDIR'\r\nmake[1]: *** [CMakeFiles/Makefile2:138: oqsprov/CMakeFiles/oqsprovider.dir/all] Error 2\r\nmake[1]: Leaving directory 'BUILDDIR'\r\nmake: *** [Makefile:182: all] Error 2\r\n```\r\n\r\nThe problem is that \r\n\r\n```\r\n$ objdump -f oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o | head\r\n\r\noqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o:     file format elf64-littleaarch64\r\narchitecture: aarch64, flags 0x00000011:\r\nHAS_RELOC, HAS_SYMS\r\nstart address 0x0000000000000000\r\n\r\n$ objdump -f install/lib/libqsc_key_encoder.a | head\r\nIn archive install/lib/libqsc_key_encoder.a:\r\n\r\nencoding_qsc.c.o:     file format elf64-x86-64\r\narchitecture: i386:x86-64, flags 0x00000011:\r\nHAS_RELOC, HAS_SYMS\r\nstart address 0x0000000000000000\r\n\r\n\r\nencoding_kyber.c.o:     file format elf64-x86-64\r\narchitecture: i386:x86-64, flags 0x00000011:\r\n```\r\n\r\nThe provider code has been built for ARM64, but the QSC encoder library is built for the host AMD64 architecture.\r\n\r\nI don't need this functionality, so I've just set `-DUSE_ENCODING_LIB=OFF`, but I think it's still a bug.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/154/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532472367","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/154#issuecomment-1532472367","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/154","id":1532472367,"node_id":"IC_kwDOE_A9l85bV6wv","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T05:33:43Z","updated_at":"2023-05-03T05:33:43Z","author_association":"MEMBER","body":"Thanks for the bug report. We have disabled QSC encoder library by default now, so this should not hit other users.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532472367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T05:33:44Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28812473021","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests on OSX","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":64,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-05-03T07:06:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Updated\r\nTo make some details clear, as previous overly-generic description invited useless overly-generic observations, like \"could not replicate on Windows\".\r\n\r\n**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL _system-wide_, e.g., in `/opt/local/libexec/openssl3`. For this test I used OpenSSL-3.1.0, and used Macports to get the binary installed.\r\n2. Build and install `liboqs` _system-wide_. I used `liboqs` master, and installed it in `opt/local`: `/opt/local/lib` for the shared library, `/opt/local/include` for the header files.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `export OPENSSL_APP=/opt/local/libexec/openssl3/bin/openssl`, `export OPENSSL_MODULES=/opt/local/libexec/openssl3/lib/ossl-modules`\r\n5. _Optional?_ To make the environment closer to mine, install `pkcs11-provider` and GOST engine system-wide, and adjust `openssl.cnf` to point at them. \r\n6. _Further complication_ Install `oqs-provider` and make it available system-wide by adding it to `openssl.cnf`.\r\n7. Go to `_build` and do `ctest --output-on-failure`\r\n8. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532551138","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1532551138","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1532551138,"node_id":"IC_kwDOE_A9l85bWN_i","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T07:06:26Z","updated_at":"2023-05-03T07:06:26Z","author_association":"MEMBER","body":"> Why shouldn't I be able to build a provider in debug mode without OpenSSL source available? \r\n\r\nFYI, this `oqsprovider` limitation is gone as of today (resolving https://github.com/open-quantum-safe/oqs-provider/issues/137)\r\n\r\n> Again, with the current (as of today) OpenSSL master, tests still fail if openssl.cnf already has oqs-provider defined.\r\n\r\nDoes it also happen if `pkcs11` provider is not active? Just wondering whether that may deliver an \"unexpected\" algorithm implementation to `oqsprovider`...","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532551138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T07:06:27Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28815572214","type":"IssueCommentEvent","actor":{"id":149199,"login":"bhess","display_login":"bhess","gravatar_id":"","url":"https://api.github.com/users/bhess","avatar_url":"https://avatars.githubusercontent.com/u/149199?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/152","id":1691167673,"node_id":"I_kwDOE_A9l85kzSu5","number":152,"title":"Missing definition of OQS_init() and OQS_destroy() breaks compilation","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2023-05-01T18:33:57Z","updated_at":"2023-05-03T09:25:42Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nCurrent master fails to build - commit fbd25381 is at fault.\r\n\r\nAlso, fails to clone qsc-key-encoder.git\r\n\r\n```\r\n$ ../oqsprov-build.sh \r\nmake: *** No rule to make target `clean'.  Stop.\r\nBuilding for source-based OpenSSL-3.2.x-dev...\r\n-- The C compiler identification is AppleClang 14.0.3.14030022\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Check for working C compiler: /opt/local/bin/clang - skipped\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Creating Debug build with OQS-Debug env vars enabled\r\n-- Build will store public keys in PKCS#8 structures\r\n-- Build will include external encoding library for SPKI/PKCS#8\r\n-- Found OpenSSL: /Users/ur20980/src/openssl/libcrypto.dylib (found suitable version \"3.2.0\", minimum required is \"3.0\")  \r\n-- Building commit fbd2538 in /Users/ur20980/src/oqs-provider\r\nCMake Warning at test/CMakeLists.txt:35 (message):\r\n  OpenSSL source build directory\r\n  '/Users/ur20980/src/oqs-provider/test/../openssl' not present.  Some\r\n  dependent tests will be skipped.\r\n\r\n\r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /Users/ur20980/src/oqs-provider/_build\r\n/opt/local/bin/cmake -S/Users/ur20980/src/oqs-provider -B/Users/ur20980/src/oqs-provider/_build --check-build-system CMakeFiles/Makefile.cmake 0\r\n/opt/local/bin/cmake -E cmake_progress_start /Users/ur20980/src/oqs-provider/_build/CMakeFiles /Users/ur20980/src/oqs-provider/_build//CMakeFiles/progress.marks\r\n/opt/local/bin/gmake  -f CMakeFiles/Makefile2 all\r\ngmake[1]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n/opt/local/bin/gmake  -f oqsprov/CMakeFiles/encoder.dir/build.make oqsprov/CMakeFiles/encoder.dir/depend\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\ncd /Users/ur20980/src/oqs-provider/_build && /opt/local/bin/cmake -E cmake_depends \"Unix Makefiles\" /Users/ur20980/src/oqs-provider /Users/ur20980/src/oqs-provider/oqsprov /Users/ur20980/src/oqs-provider/_build /Users/ur20980/src/oqs-provider/_build/oqsprov /Users/ur20980/src/oqs-provider/_build/oqsprov/CMakeFiles/encoder.dir/DependInfo.cmake --color=\r\ngmake[2]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\n/opt/local/bin/gmake  -f oqsprov/CMakeFiles/encoder.dir/build.make oqsprov/CMakeFiles/encoder.dir/build\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n[  4%] Creating directories for 'encoder'\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/cmake -Dcfgdir= -P /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/tmp/encoder-mkdirs.cmake\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/cmake -E touch /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/src/encoder-stamp/encoder-mkdir\r\n[  8%] Performing download step (git clone) for 'encoder'\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/src && /opt/local/bin/cmake -P /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/tmp/encoder-gitclone.cmake\r\nCloning into 'encoder'...\r\nerror: git-remote-https died of signal 11\r\nfatal: remote transport reported error\r\nCloning into 'encoder'...\r\nerror: git-remote-https died of signal 11\r\nfatal: remote transport reported error\r\nCloning into 'encoder'...\r\nerror: git-remote-https died of signal 11\r\nfatal: remote transport reported error\r\n-- Had to git clone more than once: 3 times.\r\nCMake Error at /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/tmp/encoder-gitclone.cmake:39 (message):\r\n  Failed to clone repository:\r\n  'https://github.com/Quantum-Safe-Collaboration/qsc-key-encoder.git'\r\n\r\n.  .  .\r\n\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n[ 22%] Building C object oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/clang -DOQSPROVIDER_VERSION_TEXT=\\\"0.5.0-dev\\\" -DOQS_PROVIDER_COMMIT=\"\\\" (fbd2538)\\\"\" -DUSE_ENCODING_LIB -Doqsprovider_EXPORTS -I/Users/ur20980/src/openssl/include -I/Users/ur20980/src/oqs-provider/_build/install/include -isystem /opt/local/include/oqs -O3 -std=gnu18 -march=native -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -I/opt/local/include -L/opt/local/lib -g -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX13.3.sdk -fPIC -Wunused-function -std=gnu11 -MD -MT oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o -MF CMakeFiles/oqsprovider.dir/oqsprov.c.o.d -o CMakeFiles/oqsprovider.dir/oqsprov.c.o -c /Users/ur20980/src/oqs-provider/oqsprov/oqsprov.c\r\nclang: warning: argument unused during compilation: '-L/opt/local/lib' [-Wunused-command-line-argument]\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov.c:555:4: error: call to undeclared function 'OQS_destroy'; ISO C99 and later do not support implicit function declarations [-Wimplicit-function-declaration]\r\n   OQS_destroy();\r\n   ^\r\n1 error generated.\r\ngmake[2]: *** [oqsprov/CMakeFiles/oqsprovider.dir/build.make:79: oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o] Error 1\r\ngmake[2]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\ngmake[1]: *** [CMakeFiles/Makefile2:155: oqsprov/CMakeFiles/oqsprovider.dir/all] Error 2\r\ngmake[1]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\n\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `git clone https://github.com/open-quantum-safe/oqs-provider.git --recurse-submodules`\r\n2. `cmake -DCMAKE_BUILD_TYPE=Debug -DOPENSSL_ROOT_DIR=\"$HOME/src/openssl\" -DCMAKE_C_FLAGS=\"$CFLAGS -I/opt/local/include -L/opt/local/lib\" -DCMAKE_VERBOSE_MAKEFILE:BOOL=True -S . -B _build`\r\n3. `cmake --build _build`\r\n4. See error\r\n\r\n**Expected behavior**\r\nA normal clean build, like before.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1\r\n - OpenSSL version 3.1.0 and 3.2.0-dev\r\n\r\n**Additional context**\r\nIMHO, it's not really nice to git-clone other repositories in the mid-build. Let's either define them as submodules, or add as a pre-requisite to the README.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532710125","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/152#issuecomment-1532710125","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152","id":1532710125,"node_id":"IC_kwDOE_A9l85bW0zt","user":{"login":"bhess","id":149199,"node_id":"MDQ6VXNlcjE0OTE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/149199?v=4","gravatar_id":"","url":"https://api.github.com/users/bhess","html_url":"https://github.com/bhess","followers_url":"https://api.github.com/users/bhess/followers","following_url":"https://api.github.com/users/bhess/following{/other_user}","gists_url":"https://api.github.com/users/bhess/gists{/gist_id}","starred_url":"https://api.github.com/users/bhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhess/subscriptions","organizations_url":"https://api.github.com/users/bhess/orgs","repos_url":"https://api.github.com/users/bhess/repos","events_url":"https://api.github.com/users/bhess/events{/privacy}","received_events_url":"https://api.github.com/users/bhess/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T09:25:42Z","updated_at":"2023-05-03T09:25:42Z","author_association":"MEMBER","body":"> I can't explain it, but this time it did not seem to even need to pull...\r\n> [curl-debug.txt](https://github.com/open-quantum-safe/oqs-provider/files/11377958/curl-debug.txt)\r\n\r\nIf oqs-provider is updated after @baentsch's PR https://github.com/open-quantum-safe/oqs-provider/pull/153, this is expected (sets `-DUSE_ENCODING_LIB=OFF` as default, which doesn't pull anything during the build).","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532710125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T09:25:42Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28817919751","type":"IssueCommentEvent","actor":{"id":10420519,"login":"distorted-mdw","display_login":"distorted-mdw","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","avatar_url":"https://avatars.githubusercontent.com/u/10420519?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149","id":1689143680,"node_id":"PR_kwDOE_A9l85Paucr","number":149,"title":"oqsprov/oqsprov_keys.c (oqsx_key_fromdata): Set composites after import","user":{"login":"distorted-mdw","id":10420519,"node_id":"MDQ6VXNlcjEwNDIwNTE5","avatar_url":"https://avatars.githubusercontent.com/u/10420519?v=4","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","html_url":"https://github.com/distorted-mdw","followers_url":"https://api.github.com/users/distorted-mdw/followers","following_url":"https://api.github.com/users/distorted-mdw/following{/other_user}","gists_url":"https://api.github.com/users/distorted-mdw/gists{/gist_id}","starred_url":"https://api.github.com/users/distorted-mdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/distorted-mdw/subscriptions","organizations_url":"https://api.github.com/users/distorted-mdw/orgs","repos_url":"https://api.github.com/users/distorted-mdw/repos","events_url":"https://api.github.com/users/distorted-mdw/events{/privacy}","received_events_url":"https://api.github.com/users/distorted-mdw/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-04-28T21:15:48Z","updated_at":"2023-05-03T11:06:58Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/pulls/149","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149","diff_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149.diff","patch_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149.patch","merged_at":null},"body":"Import is nonfunctional otherwise: the `comp_privkey' and `comp_pubkey' vectors are left unpopulated.  Trying to do anything with the key is then dicey: in testing, I've had `oqs_sig_verify' bail because the slot was null, but I've also seen junk data used as a public key; for some reason, I've not seen a segfault, but it seems distinctly possible.\r\n\r\nI did a superficial survey of the other places in the code where `privkey' and `pubkey' get set: `oqsx_key_fromdata' is the only function which does it by hand; `oqsx_key_op' and `oqsx_key_gen' are the only callers of `oqsx_allocate_keymaterial', even though it's an external function.\r\n\r\nIt seems common to leave the `privkey' and `pubkey' buffers allocated in the event of a subsequent failure, so I just returned the failure indicator, assuming that `oqsx_key_set_composites' would have already noted the problem with OpenSSL; but in fact, `oqsx_key_set_composites' is secretly infallible anyway, so the question doesn't arise in practice.\r\n\r\nFixes #148\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532842344","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149#issuecomment-1532842344","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149","id":1532842344,"node_id":"IC_kwDOE_A9l85bXVFo","user":{"login":"distorted-mdw","id":10420519,"node_id":"MDQ6VXNlcjEwNDIwNTE5","avatar_url":"https://avatars.githubusercontent.com/u/10420519?v=4","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","html_url":"https://github.com/distorted-mdw","followers_url":"https://api.github.com/users/distorted-mdw/followers","following_url":"https://api.github.com/users/distorted-mdw/following{/other_user}","gists_url":"https://api.github.com/users/distorted-mdw/gists{/gist_id}","starred_url":"https://api.github.com/users/distorted-mdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/distorted-mdw/subscriptions","organizations_url":"https://api.github.com/users/distorted-mdw/orgs","repos_url":"https://api.github.com/users/distorted-mdw/repos","events_url":"https://api.github.com/users/distorted-mdw/events{/privacy}","received_events_url":"https://api.github.com/users/distorted-mdw/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T11:06:57Z","updated_at":"2023-05-03T11:06:57Z","author_association":"NONE","body":"Hmm.  That's a bit tricky.  The only case I know which triggers it involves two providers, and we only have the one.  It's possible that there's some way to confuse OpenSSL into loading the same provider twice, which might show the problem up.  I'll experiment this evening.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532842344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T11:06:58Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28818834403","type":"IssueCommentEvent","actor":{"id":16141898,"login":"akihikokuroda","display_login":"akihikokuroda","gravatar_id":"","url":"https://api.github.com/users/akihikokuroda","avatar_url":"https://avatars.githubusercontent.com/u/16141898?"},"repo":{"id":66578799,"name":"open-quantum-safe/openssl","url":"https://api.github.com/repos/open-quantum-safe/openssl"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426","repository_url":"https://api.github.com/repos/open-quantum-safe/openssl","labels_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426/comments","events_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426/events","html_url":"https://github.com/open-quantum-safe/openssl/pull/426","id":1558537607,"node_id":"PR_kwDOA_fpb85InKrc","number":426,"title":"WIP: Enable access to the curves and certificate type","user":{"login":"akihikokuroda","id":16141898,"node_id":"MDQ6VXNlcjE2MTQxODk4","avatar_url":"https://avatars.githubusercontent.com/u/16141898?v=4","gravatar_id":"","url":"https://api.github.com/users/akihikokuroda","html_url":"https://github.com/akihikokuroda","followers_url":"https://api.github.com/users/akihikokuroda/followers","following_url":"https://api.github.com/users/akihikokuroda/following{/other_user}","gists_url":"https://api.github.com/users/akihikokuroda/gists{/gist_id}","starred_url":"https://api.github.com/users/akihikokuroda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akihikokuroda/subscriptions","organizations_url":"https://api.github.com/users/akihikokuroda/orgs","repos_url":"https://api.github.com/users/akihikokuroda/repos","events_url":"https://api.github.com/users/akihikokuroda/events{/privacy}","received_events_url":"https://api.github.com/users/akihikokuroda/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-01-26T17:53:48Z","updated_at":"2023-05-03T11:48:10Z","closed_at":"2023-05-03T11:48:10Z","author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/pulls/426","html_url":"https://github.com/open-quantum-safe/openssl/pull/426","diff_url":"https://github.com/open-quantum-safe/openssl/pull/426.diff","patch_url":"https://github.com/open-quantum-safe/openssl/pull/426.patch","merged_at":null},"body":"This PR changes enable access to the curves and certificate type used in TLSv1.3 handshakes.\r\n\r\nThis equivalent to access to the ciphers used in the TLS session. The benefit is that monitoring/logging can not only report the protocol and ciphers, but also the curve and certificate type used for a TLSv1.3 connection on the client side. In particular, an user can verify that a quantum-safe-crypto curve and certificate was used.\r\n\r\n<!--\r\nThank you for your pull request. Please review these requirements:\r\n\r\nContributors guide: https://github.com/openssl/openssl/blob/master/CONTRIBUTING\r\n\r\nOther than that, provide a description above this comment if there isn't one already\r\n\r\nIf this fixes a github issue, make sure to have a line saying 'Fixes #XXXX' (without quotes) in the commit message.\r\n-->\r\n\r\n##### Checklist\r\n<!-- Remove items that do not apply. For completed items, change [ ] to [x]. -->\r\n- [x] documentation is added or updated\r\n- [ ] tests are added or updated\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1532887351","html_url":"https://github.com/open-quantum-safe/openssl/pull/426#issuecomment-1532887351","issue_url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/426","id":1532887351,"node_id":"IC_kwDOA_fpb85bXgE3","user":{"login":"akihikokuroda","id":16141898,"node_id":"MDQ6VXNlcjE2MTQxODk4","avatar_url":"https://avatars.githubusercontent.com/u/16141898?v=4","gravatar_id":"","url":"https://api.github.com/users/akihikokuroda","html_url":"https://github.com/akihikokuroda","followers_url":"https://api.github.com/users/akihikokuroda/followers","following_url":"https://api.github.com/users/akihikokuroda/following{/other_user}","gists_url":"https://api.github.com/users/akihikokuroda/gists{/gist_id}","starred_url":"https://api.github.com/users/akihikokuroda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akihikokuroda/subscriptions","organizations_url":"https://api.github.com/users/akihikokuroda/orgs","repos_url":"https://api.github.com/users/akihikokuroda/repos","events_url":"https://api.github.com/users/akihikokuroda/events{/privacy}","received_events_url":"https://api.github.com/users/akihikokuroda/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T11:48:10Z","updated_at":"2023-05-03T11:48:10Z","author_association":"NONE","body":"Hi!  [V3 work](https://github.com/openssl/openssl/pull/20318) is moving forward, I close this.  Thanks for your help!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/openssl/issues/comments/1532887351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T11:48:10Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28819458588","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149","id":1689143680,"node_id":"PR_kwDOE_A9l85Paucr","number":149,"title":"oqsprov/oqsprov_keys.c (oqsx_key_fromdata): Set composites after import","user":{"login":"distorted-mdw","id":10420519,"node_id":"MDQ6VXNlcjEwNDIwNTE5","avatar_url":"https://avatars.githubusercontent.com/u/10420519?v=4","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","html_url":"https://github.com/distorted-mdw","followers_url":"https://api.github.com/users/distorted-mdw/followers","following_url":"https://api.github.com/users/distorted-mdw/following{/other_user}","gists_url":"https://api.github.com/users/distorted-mdw/gists{/gist_id}","starred_url":"https://api.github.com/users/distorted-mdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/distorted-mdw/subscriptions","organizations_url":"https://api.github.com/users/distorted-mdw/orgs","repos_url":"https://api.github.com/users/distorted-mdw/repos","events_url":"https://api.github.com/users/distorted-mdw/events{/privacy}","received_events_url":"https://api.github.com/users/distorted-mdw/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-04-28T21:15:48Z","updated_at":"2023-05-03T12:14:04Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/pulls/149","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149","diff_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149.diff","patch_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149.patch","merged_at":null},"body":"Import is nonfunctional otherwise: the `comp_privkey' and `comp_pubkey' vectors are left unpopulated.  Trying to do anything with the key is then dicey: in testing, I've had `oqs_sig_verify' bail because the slot was null, but I've also seen junk data used as a public key; for some reason, I've not seen a segfault, but it seems distinctly possible.\r\n\r\nI did a superficial survey of the other places in the code where `privkey' and `pubkey' get set: `oqsx_key_fromdata' is the only function which does it by hand; `oqsx_key_op' and `oqsx_key_gen' are the only callers of `oqsx_allocate_keymaterial', even though it's an external function.\r\n\r\nIt seems common to leave the `privkey' and `pubkey' buffers allocated in the event of a subsequent failure, so I just returned the failure indicator, assuming that `oqsx_key_set_composites' would have already noted the problem with OpenSSL; but in fact, `oqsx_key_set_composites' is secretly infallible anyway, so the question doesn't arise in practice.\r\n\r\nFixes #148\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532920238","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/149#issuecomment-1532920238","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/149","id":1532920238,"node_id":"IC_kwDOE_A9l85bXoGu","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T12:14:04Z","updated_at":"2023-05-03T12:14:04Z","author_association":"MEMBER","body":"> The only case I know which triggers it involves two providers, and we only have the one.\r\n\r\nHow that? What about using base, gost or pkcs11 provider? Or would they need to provide the same algorithms?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532920238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T12:14:04Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28820440352","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests on OSX","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":65,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-05-03T12:52:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Updated\r\nTo make some details clear, as previous overly-generic description invited useless overly-generic observations, like \"could not replicate on Windows\".\r\n\r\n**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL _system-wide_, e.g., in `/opt/local/libexec/openssl3`. For this test I used OpenSSL-3.1.0, and used Macports to get the binary installed.\r\n2. Build and install `liboqs` _system-wide_. I used `liboqs` master, and installed it in `opt/local`: `/opt/local/lib` for the shared library, `/opt/local/include` for the header files.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `export OPENSSL_APP=/opt/local/libexec/openssl3/bin/openssl`, `export OPENSSL_MODULES=/opt/local/libexec/openssl3/lib/ossl-modules`\r\n5. _Optional?_ To make the environment closer to mine, install `pkcs11-provider` and GOST engine system-wide, and adjust `openssl.cnf` to point at them. \r\n6. _Further complication_ Install `oqs-provider` and make it available system-wide by adding it to `openssl.cnf`.\r\n7. Go to `_build` and do `ctest --output-on-failure`\r\n8. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532977617","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1532977617","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1532977617,"node_id":"IC_kwDOE_A9l85bX2HR","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T12:52:12Z","updated_at":"2023-05-03T12:52:12Z","author_association":"NONE","body":"> Does it also happen if pkcs11 provider is not active? Just wondering whether that may deliver an \"unexpected\" algorithm implementation to oqsprovider...\r\n\r\nYes, same thing, same behavior.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1532977617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T12:52:12Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28821402387","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/152","id":1691167673,"node_id":"I_kwDOE_A9l85kzSu5","number":152,"title":"Missing definition of OQS_init() and OQS_destroy() breaks compilation","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2023-05-01T18:33:57Z","updated_at":"2023-05-03T13:25:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nCurrent master fails to build - commit fbd25381 is at fault.\r\n\r\nAlso, fails to clone qsc-key-encoder.git\r\n\r\n```\r\n$ ../oqsprov-build.sh \r\nmake: *** No rule to make target `clean'.  Stop.\r\nBuilding for source-based OpenSSL-3.2.x-dev...\r\n-- The C compiler identification is AppleClang 14.0.3.14030022\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Check for working C compiler: /opt/local/bin/clang - skipped\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Creating Debug build with OQS-Debug env vars enabled\r\n-- Build will store public keys in PKCS#8 structures\r\n-- Build will include external encoding library for SPKI/PKCS#8\r\n-- Found OpenSSL: /Users/ur20980/src/openssl/libcrypto.dylib (found suitable version \"3.2.0\", minimum required is \"3.0\")  \r\n-- Building commit fbd2538 in /Users/ur20980/src/oqs-provider\r\nCMake Warning at test/CMakeLists.txt:35 (message):\r\n  OpenSSL source build directory\r\n  '/Users/ur20980/src/oqs-provider/test/../openssl' not present.  Some\r\n  dependent tests will be skipped.\r\n\r\n\r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /Users/ur20980/src/oqs-provider/_build\r\n/opt/local/bin/cmake -S/Users/ur20980/src/oqs-provider -B/Users/ur20980/src/oqs-provider/_build --check-build-system CMakeFiles/Makefile.cmake 0\r\n/opt/local/bin/cmake -E cmake_progress_start /Users/ur20980/src/oqs-provider/_build/CMakeFiles /Users/ur20980/src/oqs-provider/_build//CMakeFiles/progress.marks\r\n/opt/local/bin/gmake  -f CMakeFiles/Makefile2 all\r\ngmake[1]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n/opt/local/bin/gmake  -f oqsprov/CMakeFiles/encoder.dir/build.make oqsprov/CMakeFiles/encoder.dir/depend\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\ncd /Users/ur20980/src/oqs-provider/_build && /opt/local/bin/cmake -E cmake_depends \"Unix Makefiles\" /Users/ur20980/src/oqs-provider /Users/ur20980/src/oqs-provider/oqsprov /Users/ur20980/src/oqs-provider/_build /Users/ur20980/src/oqs-provider/_build/oqsprov /Users/ur20980/src/oqs-provider/_build/oqsprov/CMakeFiles/encoder.dir/DependInfo.cmake --color=\r\ngmake[2]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\n/opt/local/bin/gmake  -f oqsprov/CMakeFiles/encoder.dir/build.make oqsprov/CMakeFiles/encoder.dir/build\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n[  4%] Creating directories for 'encoder'\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/cmake -Dcfgdir= -P /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/tmp/encoder-mkdirs.cmake\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/cmake -E touch /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/src/encoder-stamp/encoder-mkdir\r\n[  8%] Performing download step (git clone) for 'encoder'\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/src && /opt/local/bin/cmake -P /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/tmp/encoder-gitclone.cmake\r\nCloning into 'encoder'...\r\nerror: git-remote-https died of signal 11\r\nfatal: remote transport reported error\r\nCloning into 'encoder'...\r\nerror: git-remote-https died of signal 11\r\nfatal: remote transport reported error\r\nCloning into 'encoder'...\r\nerror: git-remote-https died of signal 11\r\nfatal: remote transport reported error\r\n-- Had to git clone more than once: 3 times.\r\nCMake Error at /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/tmp/encoder-gitclone.cmake:39 (message):\r\n  Failed to clone repository:\r\n  'https://github.com/Quantum-Safe-Collaboration/qsc-key-encoder.git'\r\n\r\n.  .  .\r\n\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n[ 22%] Building C object oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/clang -DOQSPROVIDER_VERSION_TEXT=\\\"0.5.0-dev\\\" -DOQS_PROVIDER_COMMIT=\"\\\" (fbd2538)\\\"\" -DUSE_ENCODING_LIB -Doqsprovider_EXPORTS -I/Users/ur20980/src/openssl/include -I/Users/ur20980/src/oqs-provider/_build/install/include -isystem /opt/local/include/oqs -O3 -std=gnu18 -march=native -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -I/opt/local/include -L/opt/local/lib -g -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX13.3.sdk -fPIC -Wunused-function -std=gnu11 -MD -MT oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o -MF CMakeFiles/oqsprovider.dir/oqsprov.c.o.d -o CMakeFiles/oqsprovider.dir/oqsprov.c.o -c /Users/ur20980/src/oqs-provider/oqsprov/oqsprov.c\r\nclang: warning: argument unused during compilation: '-L/opt/local/lib' [-Wunused-command-line-argument]\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov.c:555:4: error: call to undeclared function 'OQS_destroy'; ISO C99 and later do not support implicit function declarations [-Wimplicit-function-declaration]\r\n   OQS_destroy();\r\n   ^\r\n1 error generated.\r\ngmake[2]: *** [oqsprov/CMakeFiles/oqsprovider.dir/build.make:79: oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o] Error 1\r\ngmake[2]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\ngmake[1]: *** [CMakeFiles/Makefile2:155: oqsprov/CMakeFiles/oqsprovider.dir/all] Error 2\r\ngmake[1]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\n\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `git clone https://github.com/open-quantum-safe/oqs-provider.git --recurse-submodules`\r\n2. `cmake -DCMAKE_BUILD_TYPE=Debug -DOPENSSL_ROOT_DIR=\"$HOME/src/openssl\" -DCMAKE_C_FLAGS=\"$CFLAGS -I/opt/local/include -L/opt/local/lib\" -DCMAKE_VERBOSE_MAKEFILE:BOOL=True -S . -B _build`\r\n3. `cmake --build _build`\r\n4. See error\r\n\r\n**Expected behavior**\r\nA normal clean build, like before.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1\r\n - OpenSSL version 3.1.0 and 3.2.0-dev\r\n\r\n**Additional context**\r\nIMHO, it's not really nice to git-clone other repositories in the mid-build. Let's either define them as submodules, or add as a pre-requisite to the README.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1533027522","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/152#issuecomment-1533027522","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152","id":1533027522,"node_id":"IC_kwDOE_A9l85bYCTC","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T13:25:32Z","updated_at":"2023-05-03T13:25:32Z","author_association":"NONE","body":"> this is expected (sets `-DUSE_ENCODING_LIB=OFF` as default)\r\n\r\nNo, I changed this default for this test. Though in general I intend to keep that default for \"production\" builds.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1533027522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T13:25:32Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28826043073","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests on OSX","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":66,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-05-03T16:08:16Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Updated\r\nTo make some details clear, as previous overly-generic description invited useless overly-generic observations, like \"could not replicate on Windows\".\r\n\r\n**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL _system-wide_, e.g., in `/opt/local/libexec/openssl3`. For this test I used OpenSSL-3.1.0, and used Macports to get the binary installed.\r\n2. Build and install `liboqs` _system-wide_. I used `liboqs` master, and installed it in `opt/local`: `/opt/local/lib` for the shared library, `/opt/local/include` for the header files.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `export OPENSSL_APP=/opt/local/libexec/openssl3/bin/openssl`, `export OPENSSL_MODULES=/opt/local/libexec/openssl3/lib/ossl-modules`\r\n5. _Optional?_ To make the environment closer to mine, install `pkcs11-provider` and GOST engine system-wide, and adjust `openssl.cnf` to point at them. \r\n6. _Further complication_ Install `oqs-provider` and make it available system-wide by adding it to `openssl.cnf`.\r\n7. Go to `_build` and do `ctest --output-on-failure`\r\n8. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1533317791","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1533317791","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1533317791,"node_id":"IC_kwDOE_A9l85bZJKf","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T16:08:15Z","updated_at":"2023-05-03T16:08:15Z","author_association":"MEMBER","body":"> Yes, same thing, same behavior.\r\n\r\nSo all you need is (one) oqsprovider and default provider active and the error above happens? Just asking as the listing above shows two active `oqsprovider` instances...\r\n\r\nIf you can still reproduce, would you mind building `oqsprovider` as \"Debug\" (in \"main\" branch should now be possible without OpenSSL dependency) and set env vars OQSSIG=1 and OQSKM=1 when running the test again and sharing the log output?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1533317791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T16:08:16Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28827633267","type":"IssueCommentEvent","actor":{"id":16247285,"login":"christianpaquin","display_login":"christianpaquin","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","avatar_url":"https://avatars.githubusercontent.com/u/16247285?"},"repo":{"id":288761656,"name":"open-quantum-safe/profiling","url":"https://api.github.com/repos/open-quantum-safe/profiling"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/93","repository_url":"https://api.github.com/repos/open-quantum-safe/profiling","labels_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/93/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/93/comments","events_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/93/events","html_url":"https://github.com/open-quantum-safe/profiling/issues/93","id":1694483480,"node_id":"I_kwDOETYnOM5k_8QY","number":93,"title":"Add P-521 kex and sig","user":{"login":"christianpaquin","id":16247285,"node_id":"MDQ6VXNlcjE2MjQ3Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=4","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-03T17:16:24Z","updated_at":"2023-05-03T17:16:48Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"It would be useful to add the P-521 curve as a standalone choice for KEX and auth in TLS (currently, only P-256 and P-384 options are available). This is for performance testing in the NCCoE project, to compare with the L5 CNSA 2.0 suite (Kyber1024/Dilithium5).","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/93/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/93/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/comments/1533419306","html_url":"https://github.com/open-quantum-safe/profiling/issues/93#issuecomment-1533419306","issue_url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/93","id":1533419306,"node_id":"IC_kwDOETYnOM5bZh8q","user":{"login":"christianpaquin","id":16247285,"node_id":"MDQ6VXNlcjE2MjQ3Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/16247285?v=4","gravatar_id":"","url":"https://api.github.com/users/christianpaquin","html_url":"https://github.com/christianpaquin","followers_url":"https://api.github.com/users/christianpaquin/followers","following_url":"https://api.github.com/users/christianpaquin/following{/other_user}","gists_url":"https://api.github.com/users/christianpaquin/gists{/gist_id}","starred_url":"https://api.github.com/users/christianpaquin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christianpaquin/subscriptions","organizations_url":"https://api.github.com/users/christianpaquin/orgs","repos_url":"https://api.github.com/users/christianpaquin/repos","events_url":"https://api.github.com/users/christianpaquin/events{/privacy}","received_events_url":"https://api.github.com/users/christianpaquin/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T17:16:48Z","updated_at":"2023-05-03T17:16:48Z","author_association":"NONE","body":"@baentsch, as discussed on OQS's call today","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/profiling/issues/comments/1533419306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T17:16:48Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28829378808","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146","id":1687519445,"node_id":"PR_kwDOE_A9l85PVRaL","number":146,"title":"Add OQS_init and OQS_destroy & GithubCI on PRs","user":{"login":"bhess","id":149199,"node_id":"MDQ6VXNlcjE0OTE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/149199?v=4","gravatar_id":"","url":"https://api.github.com/users/bhess","html_url":"https://github.com/bhess","followers_url":"https://api.github.com/users/bhess/followers","following_url":"https://api.github.com/users/bhess/following{/other_user}","gists_url":"https://api.github.com/users/bhess/gists{/gist_id}","starred_url":"https://api.github.com/users/bhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhess/subscriptions","organizations_url":"https://api.github.com/users/bhess/orgs","repos_url":"https://api.github.com/users/bhess/repos","events_url":"https://api.github.com/users/bhess/events{/privacy}","received_events_url":"https://api.github.com/users/bhess/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-04-27T20:40:35Z","updated_at":"2023-05-03T18:36:46Z","closed_at":"2023-05-01T05:57:06Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/pulls/146","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146","diff_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146.diff","patch_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146.patch","merged_at":"2023-05-01T05:57:06Z"},"body":"- Adds OQS_init() and OQS_destroy() on provider load / teardown (required after https://github.com/open-quantum-safe/liboqs/pull/1431)\r\n- Run GithubCI on PRs\r\n\r\nCloses #144 \r\n\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1533520722","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146#issuecomment-1533520722","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146","id":1533520722,"node_id":"IC_kwDOE_A9l85bZ6tS","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T18:36:46Z","updated_at":"2023-05-03T18:36:46Z","author_association":"MEMBER","body":"This function prototypes are in <oqs/common.h> which is included via <oqs/oqs.h> via `oqs_prov.h`.  What commit of liboqs are you building against?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1533520722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T18:36:46Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28830244177","type":"IssueCommentEvent","actor":{"id":8843219,"login":"dstebila","display_login":"dstebila","gravatar_id":"","url":"https://api.github.com/users/dstebila","avatar_url":"https://avatars.githubusercontent.com/u/8843219?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1449","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1449/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1449/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1449/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1449","id":1692921235,"node_id":"PR_kwDOA-eq3c5PnOnM","number":1449,"title":"src/common/pqclean_shims/compat.h: Fix polyfill version check sense","user":{"login":"distorted-mdw","id":10420519,"node_id":"MDQ6VXNlcjEwNDIwNTE5","avatar_url":"https://avatars.githubusercontent.com/u/10420519?v=4","gravatar_id":"","url":"https://api.github.com/users/distorted-mdw","html_url":"https://github.com/distorted-mdw","followers_url":"https://api.github.com/users/distorted-mdw/followers","following_url":"https://api.github.com/users/distorted-mdw/following{/other_user}","gists_url":"https://api.github.com/users/distorted-mdw/gists{/gist_id}","starred_url":"https://api.github.com/users/distorted-mdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/distorted-mdw/subscriptions","organizations_url":"https://api.github.com/users/distorted-mdw/orgs","repos_url":"https://api.github.com/users/distorted-mdw/repos","events_url":"https://api.github.com/users/distorted-mdw/events{/privacy}","received_events_url":"https://api.github.com/users/distorted-mdw/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-02T18:43:01Z","updated_at":"2023-05-03T19:17:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/1449","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1449","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/1449.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/1449.patch","merged_at":null},"body":"We need to define the types if GCC is too /old/.\r\n\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Please answer the following questions to help manage version and changes across projects. -->\r\n\r\n* [ ] Does this PR change the input/output behaviour of a cryptographic algorithm (i.e., does it change known answer test values)?  (If so, a version bump will be required from *x.y.z* to *x.(y+1).0*.)\r\n* [ ] Does this PR change the list of algorithms available -- either adding, removing, or renaming? Does this PR otherwise change an API? (If so, PRs in [oqs-provider](https://github.com/open-quantum-safe/oqs-provider), [OQS-OpenSSL](https://github.com/open-quantum-safe/openssl), [OQS-BoringSSL](https://github.com/open-quantum-safe/boringssl), and [OQS-OpenSSH](https://github.com/open-quantum-safe/openssh) will also need to be ready for review and merge by the time this is merged.)\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1449/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1533570831","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1449#issuecomment-1533570831","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1449","id":1533570831,"node_id":"IC_kwDOA-eq3c5baG8P","user":{"login":"dstebila","id":8843219,"node_id":"MDQ6VXNlcjg4NDMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/8843219?v=4","gravatar_id":"","url":"https://api.github.com/users/dstebila","html_url":"https://github.com/dstebila","followers_url":"https://api.github.com/users/dstebila/followers","following_url":"https://api.github.com/users/dstebila/following{/other_user}","gists_url":"https://api.github.com/users/dstebila/gists{/gist_id}","starred_url":"https://api.github.com/users/dstebila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dstebila/subscriptions","organizations_url":"https://api.github.com/users/dstebila/orgs","repos_url":"https://api.github.com/users/dstebila/repos","events_url":"https://api.github.com/users/dstebila/events{/privacy}","received_events_url":"https://api.github.com/users/dstebila/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T19:17:46Z","updated_at":"2023-05-03T19:17:46Z","author_association":"MEMBER","body":"I don't have a particular minimum gcc target in mind, but am agreeable to raising it unless we hear a strong demand and commitment to support.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1533570831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T19:17:46Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28830418262","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests on OSX","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":67,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-05-03T19:26:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Updated\r\nTo make some details clear, as previous overly-generic description invited useless overly-generic observations, like \"could not replicate on Windows\".\r\n\r\n**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL _system-wide_, e.g., in `/opt/local/libexec/openssl3`. For this test I used OpenSSL-3.1.0, and used Macports to get the binary installed.\r\n2. Build and install `liboqs` _system-wide_. I used `liboqs` master, and installed it in `opt/local`: `/opt/local/lib` for the shared library, `/opt/local/include` for the header files.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `export OPENSSL_APP=/opt/local/libexec/openssl3/bin/openssl`, `export OPENSSL_MODULES=/opt/local/libexec/openssl3/lib/ossl-modules`\r\n5. _Optional?_ To make the environment closer to mine, install `pkcs11-provider` and GOST engine system-wide, and adjust `openssl.cnf` to point at them. \r\n6. _Further complication_ Install `oqs-provider` and make it available system-wide by adding it to `openssl.cnf`.\r\n7. Go to `_build` and do `ctest --output-on-failure`\r\n8. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1533582047","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1533582047","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1533582047,"node_id":"IC_kwDOE_A9l85baJrf","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T19:26:29Z","updated_at":"2023-05-03T19:26:29Z","author_association":"NONE","body":"> the listing above shows **two** active `oqsprovider` instances...\r\n\r\n**Exactly!** One is what's been already installed and configured in `openssl.cnf`, and the _other_ one is the provider being just built and tested. I believe the \"pre-existing one\" is listed as `oqs`, and the one just-built (not installed yet) that's presumably being tested is listed as `oqsprovider`. \r\n\r\n> If you can still reproduce,\r\n\r\nAlas, I can, easily. :-) :-(\r\n\r\n> would you mind building oqsprovider as \"Debug\" (in \"main\" branch should now be possible without OpenSSL dependency) and set env vars OQSSIG=1 and OQSKM=1 when running the test again and sharing the log output?\r\n\r\nAll that is already done.\r\n\r\nHere's the screen for OpenSSL-3.2.0-dev (failing):\r\n```\r\n.  .  .\r\nTest setup:\r\nLD_LIBRARY_PATH=/Users/ur20980/src/oqs-provider/.local/lib64\r\nOPENSSL_APP=/Users/ur20980/openssl-3/bin/openssl\r\nOPENSSL_CONF=/Users/ur20980/openssl-3/etc/openssl.cnf\r\nOPENSSL_MODULES=/Users/ur20980/openssl-3/lib/ossl-modules\r\nNo OQS-OpenSSL111 interop test because of absence of docker\r\nVersion information:\r\nOpenSSL 3.2.0-dev  (Library: OpenSSL 3.2.0-dev )\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.2.0\r\n    status: active\r\n    build info: 3.2.0-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.2.0\r\n    status: active\r\n    build info: 3.2.0-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n    build info: OQS Provider v.0.5.0-dev (12a6418) based on liboqs v.0.8.0-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  oqsprovider\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n    build info: OQS Provider v.0.5.0-dev (12a6418) based on liboqs v.0.8.0-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\nCert gen/verify, CMS sign/verify, CA tests for all enabled algorithms commencing...\r\n.localalgtest dilithium2 failed. Exiting..\r\n-----\r\n-----\r\nWarning: CSR self-signature does not match the contentsCertificate request self-signature did not match the contents\r\n4083FE52F87F0000:error:4000000D:lib(128):oqs_sig_verify:reason(13):/Users/ur20980/src/oqs-provider/oqsprov/oqs_sig.c:400:\r\n4083FE52F87F0000:error:06880006:asn1 encoding routines:ASN1_item_verify_ctx:EVP lib:crypto/asn1/a_verify.c:215:\r\n4083FE52F87F0000:error:4000000D:lib(128):oqs_sig_verify:reason(13):/Users/ur20980/src/oqs-provider/oqsprov/oqs_sig.c:400:\r\n4083FE52F87F0000:error:06880006:asn1 encoding routines:ASN1_item_verify_ctx:EVP lib:crypto/asn1/a_verify.c:215:\r\n```\r\n\r\nand for OpenSSL-3.1.0, installed system-wide. OQS provider is present in `openssl.cnf`, but (a) tests are succeeding, and (b) this already-installed provider is _not_ listed below! Only the oqs-provider that's being tested is shown:\r\n```text\r\nTest setup:\r\nLD_LIBRARY_PATH=/Users/ur20980/src/oqs-provider/.local/lib64\r\nOPENSSL_APP=/opt/local/libexec/openssl3/bin/openssl\r\nOPENSSL_CONF=/opt/local/libexec/openssl3/etc/openssl/openssl.cnf\r\nOPENSSL_MODULES=/opt/local/libexec/openssl3/lib/ossl-modules\r\nNo OQS-OpenSSL111 interop test because of absence of docker\r\nVersion information:\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  oqsprovider\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n    build info: OQS Provider v.0.5.0-dev (12a6418) based on liboqs v.0.8.0-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\nCert gen/verify, CMS sign/verify, CA tests for all enabled algorithms commencing...\r\n..................................\r\nTest project /Users/ur20980/src/oqs-provider/_build\r\n    Start 1: oqs_signatures\r\n1/5 Test #1: oqs_signatures ...................   Passed    4.50 sec\r\n    Start 2: oqs_kems\r\n2/5 Test #2: oqs_kems .........................   Passed    0.24 sec\r\n    Start 3: oqs_groups\r\n3/5 Test #3: oqs_groups .......................   Passed    0.39 sec\r\n    Start 4: oqs_tlssig\r\n4/5 Test #4: oqs_tlssig .......................   Passed    0.01 sec\r\n    Start 5: oqs_endecode\r\n5/5 Test #5: oqs_endecode .....................   Passed    7.03 sec\r\n\r\n100% tests passed, 0 tests failed out of 5\r\n\r\nTotal Test time (real) =  12.18 sec\r\n\r\nAll oqsprovider tests passed.\r\n```\r\n\r\nand files:\r\n[screenlog.txt](https://github.com/open-quantum-safe/oqs-provider/files/11390373/screenlog.txt)\r\n\r\n[build-out-3.2.0-dev.txt](https://github.com/open-quantum-safe/oqs-provider/files/11390176/build-out-s.txt)\r\n[tests-out-3.2.0-dev.txt](https://github.com/open-quantum-safe/oqs-provider/files/11390180/tests-out-s.txt)\r\n\r\n[build-out-3.1.0.txt](https://github.com/open-quantum-safe/oqs-provider/files/11390142/build-out.txt)\r\n[tests-out-3.1.0.txt](https://github.com/open-quantum-safe/oqs-provider/files/11390146/tests-out.txt)\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1533582047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T19:26:29Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28830471173","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146","id":1687519445,"node_id":"PR_kwDOE_A9l85PVRaL","number":146,"title":"Add OQS_init and OQS_destroy & GithubCI on PRs","user":{"login":"bhess","id":149199,"node_id":"MDQ6VXNlcjE0OTE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/149199?v=4","gravatar_id":"","url":"https://api.github.com/users/bhess","html_url":"https://github.com/bhess","followers_url":"https://api.github.com/users/bhess/followers","following_url":"https://api.github.com/users/bhess/following{/other_user}","gists_url":"https://api.github.com/users/bhess/gists{/gist_id}","starred_url":"https://api.github.com/users/bhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhess/subscriptions","organizations_url":"https://api.github.com/users/bhess/orgs","repos_url":"https://api.github.com/users/bhess/repos","events_url":"https://api.github.com/users/bhess/events{/privacy}","received_events_url":"https://api.github.com/users/bhess/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-04-27T20:40:35Z","updated_at":"2023-05-03T19:29:09Z","closed_at":"2023-05-01T05:57:06Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/pulls/146","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146","diff_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146.diff","patch_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146.patch","merged_at":"2023-05-01T05:57:06Z"},"body":"- Adds OQS_init() and OQS_destroy() on provider load / teardown (required after https://github.com/open-quantum-safe/liboqs/pull/1431)\r\n- Run GithubCI on PRs\r\n\r\nCloses #144 \r\n\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1533589315","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146#issuecomment-1533589315","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146","id":1533589315,"node_id":"IC_kwDOE_A9l85baLdD","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T19:29:09Z","updated_at":"2023-05-03T19:29:09Z","author_association":"NONE","body":"> This function prototypes are in <oqs/common.h> which is included via <oqs/oqs.h> via `oqs_prov.h`. What commit of liboqs are you building against?\r\n\r\nNow I'm building against the current master. Did not realize this PR was requiring it, and (as I mentioned before), PR did not mention that it's requiring it - so (as other things were working fine), I did not think about updating liboqs at that time.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1533589315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T19:29:09Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28830891026","type":"IssueCommentEvent","actor":{"id":21228961,"login":"xvzcf","display_login":"xvzcf","gravatar_id":"","url":"https://api.github.com/users/xvzcf","avatar_url":"https://avatars.githubusercontent.com/u/21228961?"},"repo":{"id":218087071,"name":"open-quantum-safe/oqs-demos","url":"https://api.github.com/repos/open-quantum-safe/oqs-demos"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196/events","html_url":"https://github.com/open-quantum-safe/oqs-demos/pull/196","id":1665242464,"node_id":"PR_kwDODP--n85OK4e6","number":196,"title":"Add h2load to oqs-demos","user":{"login":"Keelan10","id":96436249,"node_id":"U_kgDOBb-AGQ","avatar_url":"https://avatars.githubusercontent.com/u/96436249?v=4","gravatar_id":"","url":"https://api.github.com/users/Keelan10","html_url":"https://github.com/Keelan10","followers_url":"https://api.github.com/users/Keelan10/followers","following_url":"https://api.github.com/users/Keelan10/following{/other_user}","gists_url":"https://api.github.com/users/Keelan10/gists{/gist_id}","starred_url":"https://api.github.com/users/Keelan10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Keelan10/subscriptions","organizations_url":"https://api.github.com/users/Keelan10/orgs","repos_url":"https://api.github.com/users/Keelan10/repos","events_url":"https://api.github.com/users/Keelan10/events{/privacy}","received_events_url":"https://api.github.com/users/Keelan10/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2023-04-12T20:57:43Z","updated_at":"2023-05-03T19:50:17Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/196","html_url":"https://github.com/open-quantum-safe/oqs-demos/pull/196","diff_url":"https://github.com/open-quantum-safe/oqs-demos/pull/196.diff","patch_url":"https://github.com/open-quantum-safe/oqs-demos/pull/196.patch","merged_at":null},"body":"Hi, I integrated openssl v3 and oqs-provider into h2load benchmarking tool and provided a Dockerfile to fully automate the integration.\r\n\r\nThanks for reviewing!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1533643256","html_url":"https://github.com/open-quantum-safe/oqs-demos/pull/196#issuecomment-1533643256","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196","id":1533643256,"node_id":"IC_kwDODP--n85baYn4","user":{"login":"xvzcf","id":21228961,"node_id":"MDQ6VXNlcjIxMjI4OTYx","avatar_url":"https://avatars.githubusercontent.com/u/21228961?v=4","gravatar_id":"","url":"https://api.github.com/users/xvzcf","html_url":"https://github.com/xvzcf","followers_url":"https://api.github.com/users/xvzcf/followers","following_url":"https://api.github.com/users/xvzcf/following{/other_user}","gists_url":"https://api.github.com/users/xvzcf/gists{/gist_id}","starred_url":"https://api.github.com/users/xvzcf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvzcf/subscriptions","organizations_url":"https://api.github.com/users/xvzcf/orgs","repos_url":"https://api.github.com/users/xvzcf/repos","events_url":"https://api.github.com/users/xvzcf/events{/privacy}","received_events_url":"https://api.github.com/users/xvzcf/received_events","type":"User","site_admin":false},"created_at":"2023-05-03T19:50:17Z","updated_at":"2023-05-03T19:50:17Z","author_association":"MEMBER","body":"> Thanks very much for creating this list, @Keelan10 ! This is the first time in a long time that I'm seeing such big differences between the different algorithms. This really looks worth while a deeper investigation. Do you agree @xvzcf @dstebila ? @Keelan10 Can you share (add to the PR) a script (ideally, to be made part of CI eventually) that creates this result?\r\n\r\nI think it is worth a closer look, probably has to do with the sizes of the keys/ciphertexts produced by those algorithms, @Keelan10 could you try debugging the segfault with frodo1344shake and seeing if a fix for that fixes it for other algorithms as well?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1533643256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-03T19:50:17Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
