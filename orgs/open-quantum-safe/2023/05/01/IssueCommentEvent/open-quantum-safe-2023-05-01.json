{"id":"28763952312","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":218087071,"name":"open-quantum-safe/oqs-demos","url":"https://api.github.com/repos/open-quantum-safe/oqs-demos"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196/events","html_url":"https://github.com/open-quantum-safe/oqs-demos/pull/196","id":1665242464,"node_id":"PR_kwDODP--n85OK4e6","number":196,"title":"Add h2load to oqs-demos","user":{"login":"Keelan10","id":96436249,"node_id":"U_kgDOBb-AGQ","avatar_url":"https://avatars.githubusercontent.com/u/96436249?v=4","gravatar_id":"","url":"https://api.github.com/users/Keelan10","html_url":"https://github.com/Keelan10","followers_url":"https://api.github.com/users/Keelan10/followers","following_url":"https://api.github.com/users/Keelan10/following{/other_user}","gists_url":"https://api.github.com/users/Keelan10/gists{/gist_id}","starred_url":"https://api.github.com/users/Keelan10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Keelan10/subscriptions","organizations_url":"https://api.github.com/users/Keelan10/orgs","repos_url":"https://api.github.com/users/Keelan10/repos","events_url":"https://api.github.com/users/Keelan10/events{/privacy}","received_events_url":"https://api.github.com/users/Keelan10/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2023-04-12T20:57:43Z","updated_at":"2023-05-01T05:52:16Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/pulls/196","html_url":"https://github.com/open-quantum-safe/oqs-demos/pull/196","diff_url":"https://github.com/open-quantum-safe/oqs-demos/pull/196.diff","patch_url":"https://github.com/open-quantum-safe/oqs-demos/pull/196.patch","merged_at":null},"body":"Hi, I integrated openssl v3 and oqs-provider into h2load benchmarking tool and provided a Dockerfile to fully automate the integration.\r\n\r\nThanks for reviewing!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1529377355","html_url":"https://github.com/open-quantum-safe/oqs-demos/pull/196#issuecomment-1529377355","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/196","id":1529377355,"node_id":"IC_kwDODP--n85bKHJL","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T05:52:16Z","updated_at":"2023-05-01T05:52:16Z","author_association":"MEMBER","body":"Thanks very much for creating this list, @Keelan10 ! This is the first time in a long time that I'm seeing such big differences between the different algorithms. This really looks worth while a deeper investigation. Do you agree @xvzcf @dstebila ? @Keelan10 Can you share (add to the PR) a script (ideally, to be made part of CI eventually) that creates this result?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-demos/issues/comments/1529377355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T05:52:17Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28763994551","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146","id":1687519445,"node_id":"PR_kwDOE_A9l85PVRaL","number":146,"title":"Add OQS_init and OQS_destroy & GithubCI on PRs","user":{"login":"bhess","id":149199,"node_id":"MDQ6VXNlcjE0OTE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/149199?v=4","gravatar_id":"","url":"https://api.github.com/users/bhess","html_url":"https://github.com/bhess","followers_url":"https://api.github.com/users/bhess/followers","following_url":"https://api.github.com/users/bhess/following{/other_user}","gists_url":"https://api.github.com/users/bhess/gists{/gist_id}","starred_url":"https://api.github.com/users/bhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhess/subscriptions","organizations_url":"https://api.github.com/users/bhess/orgs","repos_url":"https://api.github.com/users/bhess/repos","events_url":"https://api.github.com/users/bhess/events{/privacy}","received_events_url":"https://api.github.com/users/bhess/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-04-27T20:40:35Z","updated_at":"2023-05-01T05:56:54Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/pulls/146","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146","diff_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146.diff","patch_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146.patch","merged_at":null},"body":"- Adds OQS_init() and OQS_destroy() on provider load / teardown (required after https://github.com/open-quantum-safe/liboqs/pull/1431)\r\n- Run GithubCI on PRs\r\n\r\nCloses #144 \r\n\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529379397","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146#issuecomment-1529379397","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146","id":1529379397,"node_id":"IC_kwDOE_A9l85bKHpF","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T05:56:54Z","updated_at":"2023-05-01T05:56:54Z","author_association":"MEMBER","body":"Thanks for taking case of this @bhess !","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529379397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T05:56:54Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28766087680","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T08:52:13Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529492427","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529492427","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529492427,"node_id":"IC_kwDOE_A9l85bKjPL","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T08:52:13Z","updated_at":"2023-05-01T08:52:13Z","author_association":"MEMBER","body":"> > Downlevel versions of OpenSSL don't have full support for provider based algorithms.\r\n> \r\n> That's a pity...\r\n\r\nI'm also not particularly happy about this, but the OpenSSL team arguably has many other things at their hands beyond backporting the various PRs I created to enable this functionality.\r\n\r\n> \r\n> > Please try with Master branch.\r\n> \r\n> Thank you - indeed, it works!!\r\n\r\nGreat to hear\r\n\r\n> \r\n> P.S. Are you also involved with Botan? Just curious...\r\n\r\nProbably not as I don't know what it is :)","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529492427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T08:52:14Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28766139409","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T08:56:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529494615","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529494615","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529494615,"node_id":"IC_kwDOE_A9l85bKjxX","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T08:56:50Z","updated_at":"2023-05-01T08:56:50Z","author_association":"MEMBER","body":"> Here's the crash report:\r\n\r\nThis looks pretty OSX-specific _and_ I do not see a single reference to an `oqsprovider` function being involved in the trace -- not saying this could not trigger the problem, but everything works just fine under Linux and I wouldn't know how to debug into this in OSX... Ideas welcome.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529494615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T08:56:51Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28766214222","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/145","id":1686489671,"node_id":"I_kwDOE_A9l85khcpH","number":145,"title":"security bits=-1","user":{"login":"cryptobsv","id":89771619,"node_id":"MDQ6VXNlcjg5NzcxNjE5","avatar_url":"https://avatars.githubusercontent.com/u/89771619?v=4","gravatar_id":"","url":"https://api.github.com/users/cryptobsv","html_url":"https://github.com/cryptobsv","followers_url":"https://api.github.com/users/cryptobsv/followers","following_url":"https://api.github.com/users/cryptobsv/following{/other_user}","gists_url":"https://api.github.com/users/cryptobsv/gists{/gist_id}","starred_url":"https://api.github.com/users/cryptobsv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cryptobsv/subscriptions","organizations_url":"https://api.github.com/users/cryptobsv/orgs","repos_url":"https://api.github.com/users/cryptobsv/repos","events_url":"https://api.github.com/users/cryptobsv/events{/privacy}","received_events_url":"https://api.github.com/users/cryptobsv/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-04-27T09:38:06Z","updated_at":"2023-05-01T09:01:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I have generated a CA and a host certificate, both with sig algo dilithium5. When I start `openssl s_server` with option `-security_debug_verbose` I get:\r\n\r\n    Using default temp DH parameters\r\n    Security callback: Certificate chain EE key=, bits=256, security bits=256: yes\r\n    Security callback: Certificate chain CA digest=dilithium5, security bits=-1: no\r\n    error setting certificate\r\n    802BF3F4147F0000:error:0A00018E:SSL routines:SSL_CTX_use_certificate:ca md too weak:ssl/ssl_rsa.c:221\r\n\r\nThe certs look ok to me. I have tried this with falcon512 and with the branches `main` and `ossl-sigload`. I have straced `openssl` and verified that `oqs-provider` is being loaded. Probably, I am doing something wrong, but I have no idea what. Thanks!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529499285","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/145#issuecomment-1529499285","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145","id":1529499285,"node_id":"IC_kwDOE_A9l85bKk6V","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T09:01:22Z","updated_at":"2023-05-01T09:01:22Z","author_association":"MEMBER","body":"@cryptobsv Please share the output of `openssl version` and `openssl list -providers` to see whether my hunch above is correct. And/or please retry your test in the docker image at `openquantumsafe/oqs-ossl3`.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529499285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T09:01:23Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28766456688","type":"IssueCommentEvent","actor":{"id":7422273,"login":"mattcaswell","display_login":"mattcaswell","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","avatar_url":"https://avatars.githubusercontent.com/u/7422273?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T09:18:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529513691","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529513691","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529513691,"node_id":"IC_kwDOE_A9l85bKobb","user":{"login":"mattcaswell","id":7422273,"node_id":"MDQ6VXNlcjc0MjIyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/7422273?v=4","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","html_url":"https://github.com/mattcaswell","followers_url":"https://api.github.com/users/mattcaswell/followers","following_url":"https://api.github.com/users/mattcaswell/following{/other_user}","gists_url":"https://api.github.com/users/mattcaswell/gists{/gist_id}","starred_url":"https://api.github.com/users/mattcaswell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattcaswell/subscriptions","organizations_url":"https://api.github.com/users/mattcaswell/orgs","repos_url":"https://api.github.com/users/mattcaswell/repos","events_url":"https://api.github.com/users/mattcaswell/events{/privacy}","received_events_url":"https://api.github.com/users/mattcaswell/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T09:18:35Z","updated_at":"2023-05-01T09:18:35Z","author_association":"NONE","body":"The crash seems to occur during teardown of the legacy provider:\r\n\r\n````\r\n9   legacy.dylib                  \t       0x10f59efa2 legacy_teardown + 22\r\n````\r\n\r\nPart of that teardown is to unload any legacy provider specific error strings that may have been loaded:\r\n\r\n````\r\n0   libsystem_pthread.dylib       \t    0x7ff81d1a83c1 pthread_rwlock_wrlock + 0\r\n1   libcrypto.3.dylib             \t       0x1104998ea CRYPTO_THREAD_write_lock + 9\r\n2   libcrypto.3.dylib             \t       0x11044eb29 ERR_unload_strings + 57\r\n3   libcrypto.3.dylib             \t       0x110496dab ossl_provider_free + 78\r\n````\r\n\r\nThe problem seems to occur when getting the `err_stringlock`:\r\n\r\n```` C\r\nint ERR_unload_strings(int lib, ERR_STRING_DATA *str)\r\n{\r\n#ifndef OPENSSL_NO_ERR\r\n    if (!RUN_ONCE(&err_string_init, do_err_strings_init))\r\n        return 0;\r\n\r\n    if (!CRYPTO_THREAD_write_lock(err_string_lock))\r\n        return 0;\r\n````\r\n\r\nIt looks to me like `err_string_lock` is unexpectedly NULL:\r\n\r\n````\r\nException Codes:       KERN_INVALID_ADDRESS at 0x0000000000000000\r\n````\r\n\r\nThis is quite unexpected. There are two possible ways I can think of where this could be NULL: 1) Its never been initialised or 2) It was initialised, but has already been cleaned up and reset back to NULL.\r\n\r\nIn case (1) we can see above that immediately before we attempt to obtain the lock we do the `do_err_string_init` `RUN_ONCE` call, which does the initialisation for us if it hasn't been initialised for the first time yet. So I can't see how (1) can be the case.\r\n\r\nFor (2), the only place that we free `err_string_lock` and reset it to NULL is in `err_cleanup`. This is only ever called from one place, i.e. from `OPENSSL_cleanup`. We can see in the stack trace that we are actually in the middle of an `OPENSSL_cleanup` call:\r\n\r\n```` C\r\n17  libcrypto.3.dylib             \t       0x10fef1d86 ossl_lib_ctx_default_deinit + 38 (context.c:374)\r\n18  libcrypto.3.dylib             \t       0x10fef61d8 OPENSSL_cleanup + 728 (init.c:431)\r\n````\r\n\r\nSo, at the point of the crash we are processing `ossl_lib_ctx_default_deinit` in `OPENSSL_cleanup`. That bit of the `OPENSSL_cleanup` function looks like this:\r\n\r\n```` C\r\n    OSSL_TRACE(INIT, \"OPENSSL_cleanup: ossl_lib_ctx_default_deinit()\\n\");\r\n    ossl_lib_ctx_default_deinit();\r\n\r\n    ossl_cleanup_thread();\r\n\r\n    OSSL_TRACE(INIT, \"OPENSSL_cleanup: bio_cleanup()\\n\");\r\n    bio_cleanup();\r\n\r\n    OSSL_TRACE(INIT, \"OPENSSL_cleanup: evp_cleanup_int()\\n\");\r\n    evp_cleanup_int();\r\n\r\n    OSSL_TRACE(INIT, \"OPENSSL_cleanup: ossl_obj_cleanup_int()\\n\");\r\n    ossl_obj_cleanup_int();\r\n\r\n    OSSL_TRACE(INIT, \"OPENSSL_cleanup: err_int()\\n\");\r\n    err_cleanup();\r\n````\r\nAs we can see from the above code `err_cleanup` occurs *after* `ossl_lib_ctx_default_deinit`. So, at the moment, I don't currently understand how `err_string_lock` has ended up being NULL.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529513691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T09:18:35Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28767184263","type":"IssueCommentEvent","actor":{"id":89771619,"login":"cryptobsv","display_login":"cryptobsv","gravatar_id":"","url":"https://api.github.com/users/cryptobsv","avatar_url":"https://avatars.githubusercontent.com/u/89771619?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/145","id":1686489671,"node_id":"I_kwDOE_A9l85khcpH","number":145,"title":"security bits=-1","user":{"login":"cryptobsv","id":89771619,"node_id":"MDQ6VXNlcjg5NzcxNjE5","avatar_url":"https://avatars.githubusercontent.com/u/89771619?v=4","gravatar_id":"","url":"https://api.github.com/users/cryptobsv","html_url":"https://github.com/cryptobsv","followers_url":"https://api.github.com/users/cryptobsv/followers","following_url":"https://api.github.com/users/cryptobsv/following{/other_user}","gists_url":"https://api.github.com/users/cryptobsv/gists{/gist_id}","starred_url":"https://api.github.com/users/cryptobsv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cryptobsv/subscriptions","organizations_url":"https://api.github.com/users/cryptobsv/orgs","repos_url":"https://api.github.com/users/cryptobsv/repos","events_url":"https://api.github.com/users/cryptobsv/events{/privacy}","received_events_url":"https://api.github.com/users/cryptobsv/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-27T09:38:06Z","updated_at":"2023-05-01T10:18:26Z","closed_at":"2023-05-01T10:18:26Z","author_association":"NONE","active_lock_reason":null,"body":"I have generated a CA and a host certificate, both with sig algo dilithium5. When I start `openssl s_server` with option `-security_debug_verbose` I get:\r\n\r\n    Using default temp DH parameters\r\n    Security callback: Certificate chain EE key=, bits=256, security bits=256: yes\r\n    Security callback: Certificate chain CA digest=dilithium5, security bits=-1: no\r\n    error setting certificate\r\n    802BF3F4147F0000:error:0A00018E:SSL routines:SSL_CTX_use_certificate:ca md too weak:ssl/ssl_rsa.c:221\r\n\r\nThe certs look ok to me. I have tried this with falcon512 and with the branches `main` and `ossl-sigload`. I have straced `openssl` and verified that `oqs-provider` is being loaded. Probably, I am doing something wrong, but I have no idea what. Thanks!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/timeline","performed_via_github_app":null,"state_reason":"completed"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529553196","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/145#issuecomment-1529553196","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145","id":1529553196,"node_id":"IC_kwDOE_A9l85bKyEs","user":{"login":"cryptobsv","id":89771619,"node_id":"MDQ6VXNlcjg5NzcxNjE5","avatar_url":"https://avatars.githubusercontent.com/u/89771619?v=4","gravatar_id":"","url":"https://api.github.com/users/cryptobsv","html_url":"https://github.com/cryptobsv","followers_url":"https://api.github.com/users/cryptobsv/followers","following_url":"https://api.github.com/users/cryptobsv/following{/other_user}","gists_url":"https://api.github.com/users/cryptobsv/gists{/gist_id}","starred_url":"https://api.github.com/users/cryptobsv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cryptobsv/subscriptions","organizations_url":"https://api.github.com/users/cryptobsv/orgs","repos_url":"https://api.github.com/users/cryptobsv/repos","events_url":"https://api.github.com/users/cryptobsv/events{/privacy}","received_events_url":"https://api.github.com/users/cryptobsv/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T10:18:26Z","updated_at":"2023-05-01T10:18:26Z","author_association":"NONE","body":"Yes, your hunch above was correct. I thought any openssl 3.x would do and picked 3.0.8 to work with a well-defined version. Moving to master solved this problem. Thanks again for the quick and helpful support!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529553196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T10:18:27Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28767373376","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/151","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/151/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/151/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/151/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/151","id":1690301617,"node_id":"PR_kwDOE_A9l85PeZFb","number":151,"title":"Rewrite endecode to remove internal dependences on OSSL","user":{"login":"alexzas","id":1214959,"node_id":"MDQ6VXNlcjEyMTQ5NTk=","avatar_url":"https://avatars.githubusercontent.com/u/1214959?v=4","gravatar_id":"","url":"https://api.github.com/users/alexzas","html_url":"https://github.com/alexzas","followers_url":"https://api.github.com/users/alexzas/followers","following_url":"https://api.github.com/users/alexzas/following{/other_user}","gists_url":"https://api.github.com/users/alexzas/gists{/gist_id}","starred_url":"https://api.github.com/users/alexzas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexzas/subscriptions","organizations_url":"https://api.github.com/users/alexzas/orgs","repos_url":"https://api.github.com/users/alexzas/repos","events_url":"https://api.github.com/users/alexzas/events{/privacy}","received_events_url":"https://api.github.com/users/alexzas/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-01T03:09:52Z","updated_at":"2023-05-01T10:34:15Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/pulls/151","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/151","diff_url":"https://github.com/open-quantum-safe/oqs-provider/pull/151.diff","patch_url":"https://github.com/open-quantum-safe/oqs-provider/pull/151.patch","merged_at":null},"body":"Rewrite of encoders / decoders test to hopefully make it much more simpler and removing dependency on internal OSSL structures.     ","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/151/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529562180","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/151#issuecomment-1529562180","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/151","id":1529562180,"node_id":"IC_kwDOE_A9l85bK0RE","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T10:34:14Z","updated_at":"2023-05-01T10:34:14Z","author_association":"MEMBER","body":"PS: [This](https://github.com/open-quantum-safe/oqs-provider/blob/fbd2538173bf8f24274c89a94a6f950b65eb928e/test/CMakeLists.txt#L34-L36) `if` statement ideally should fall away either in this PR or #150 (by @distorted-mdw) to fully break the dependency on OpenSSL source code: https://github.com/open-quantum-safe/oqs-provider/blob/fbd2538173bf8f24274c89a94a6f950b65eb928e/test/CMakeLists.txt#L34-L36","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529562180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T10:34:15Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28768008266","type":"IssueCommentEvent","actor":{"id":9383677,"login":"geovandro","display_login":"geovandro","gravatar_id":"","url":"https://api.github.com/users/geovandro","avatar_url":"https://avatars.githubusercontent.com/u/9383677?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1072","id":962813852,"node_id":"MDU6SXNzdWU5NjI4MTM4NTI=","number":1072,"title":"Android Buildscript problem with Cross Compilation","user":{"login":"Hatzen","id":21283655,"node_id":"MDQ6VXNlcjIxMjgzNjU1","avatar_url":"https://avatars.githubusercontent.com/u/21283655?v=4","gravatar_id":"","url":"https://api.github.com/users/Hatzen","html_url":"https://github.com/Hatzen","followers_url":"https://api.github.com/users/Hatzen/followers","following_url":"https://api.github.com/users/Hatzen/following{/other_user}","gists_url":"https://api.github.com/users/Hatzen/gists{/gist_id}","starred_url":"https://api.github.com/users/Hatzen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hatzen/subscriptions","organizations_url":"https://api.github.com/users/Hatzen/orgs","repos_url":"https://api.github.com/users/Hatzen/repos","events_url":"https://api.github.com/users/Hatzen/events{/privacy}","received_events_url":"https://api.github.com/users/Hatzen/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-08-06T14:58:25Z","updated_at":"2023-05-01T11:26:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I try to setup a CI pipeline for compiling liboqs with liboqs-java for android.  \r\nBut with the current master version (and release 0.6.0) of this repo it is not possible to run the android build script (https://github.com/open-quantum-safe/liboqs/blob/main/scripts/build-android.sh)  \r\n  \r\ni run in a similar issue like compiling for windows.  But cannot use wine for this problem afaik.  \r\nhttps://github.com/open-quantum-safe/liboqs/issues/727  \r\n  \r\nWhen i run  \r\nbash build-android.sh $ndkPath -s 19-a x86_64  \r\n  \r\n1. it first runs into the problem that \"try_run\" is not working as the target architecture is not the same.  \r\nhttps://github.com/open-quantum-safe/liboqs/blob/2db7f97922a7d3e50aa9f56b7e86566f62c0365a/.CMake/gcc_clang_intrinsics.cmake#L3  \r\nExcluding that file let the compile process start.  \r\n  \r\n2. But then it crashes afterwards for the common c files  \r\n\r\n```\r\ncommon.c:169:9: error: incompatible integer to pointer conversion returning 'int' from a function with result type 'void *' [-Werror,-Wint-conversion]\r\n        return aligned_alloc(alignment, size);\r\n```\r\n\r\n<details>\r\n<summary>click for full build log</summary>  \r\n  \r\n```\r\n-- Build files have been written to: /home/hatzen/LibOQSTestApp--12-add-ci-for-prebuild-liboqs/liboqs-android/prebuild-liboqs/liboqs/build\r\nScanning dependencies of target falcon_512_clean\r\n[  0%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/sig_falcon_512.c.o\r\n[  0%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/codec.c.o\r\n[  0%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/common.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/fft.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/fpr.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/keygen.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/pqclean.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/rng.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/sign.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/vrfy.c.o\r\n[  1%] Built target falcon_512_clean\r\nScanning dependencies of target common\r\n[  1%] Building C object src/common/CMakeFiles/common.dir/aes/aes.c.o\r\n[  1%] Building C object src/common/CMakeFiles/common.dir/aes/aes_c.c.o\r\n[  1%] Building C object src/common/CMakeFiles/common.dir/sha2/sha2_c.c.o\r\n[  1%] Building C object src/common/CMakeFiles/common.dir/sha3/xkcp_sha3.c.o\r\n[  1%] Building C object src/common/CMakeFiles/common.dir/sha3/xkcp_sha3x4.c.o\r\n[  2%] Building C object src/common/CMakeFiles/common.dir/common.c.o\r\n/home/hatzen/LibOQSTestApp--12-add-ci-for-prebuild-liboqs/liboqs-android/prebuild-liboqs/liboqs/src/common/common.c:169:9: error: implicit declaration of function 'aligned_alloc' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\r\n        return aligned_alloc(alignment, size);\r\n               ^\r\n/home/hatzen/LibOQSTestApp--12-add-ci-for-prebuild-liboqs/liboqs-android/prebuild-liboqs/liboqs/src/common/common.c:169:9: error: incompatible integer to pointer conversion returning 'int' from a function with result type 'void *' [-Werror,-Wint-conversion]\r\n        return aligned_alloc(alignment, size);\r\n               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n2 errors generated.\r\nsrc/common/CMakeFiles/common.dir/build.make:182: recipe for target 'src/common/CMakeFiles/common.dir/common.c.o' failed\r\nmake[2]: *** [src/common/CMakeFiles/common.dir/common.c.o] Error 1\r\nCMakeFiles/Makefile2:260: recipe for target 'src/common/CMakeFiles/common.dir/all' failed\r\nmake[1]: *** [src/common/CMakeFiles/common.dir/all] Error 2\r\nMakefile:129: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n```  \r\n  \r\n</details>  \r\n  \r\nAs i would like to make a CI pipe for my android integration [here](https://github.com/Hatzen/LibOQSTestApp/pull/13/files#diff-cec8aea73739e8e679768673e3a38cee42b5fe69d0837642cdd7f7bfab56de59) it would be a charm if we can make the android build script work without the need of changing anything in the cloned files.  \r\nSo i would suggest \r\n1. For the first problem to pass a property which disables \"try_run\"\r\n2.  and for the second problem i need help as i am not very familiar with the code or error. So can anyone provide a suggestion or solution?   \r\n  \r\nThank you   ","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1529604259","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1072#issuecomment-1529604259","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072","id":1529604259,"node_id":"IC_kwDOA-eq3c5bK-ij","user":{"login":"geovandro","id":9383677,"node_id":"MDQ6VXNlcjkzODM2Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/9383677?v=4","gravatar_id":"","url":"https://api.github.com/users/geovandro","html_url":"https://github.com/geovandro","followers_url":"https://api.github.com/users/geovandro/followers","following_url":"https://api.github.com/users/geovandro/following{/other_user}","gists_url":"https://api.github.com/users/geovandro/gists{/gist_id}","starred_url":"https://api.github.com/users/geovandro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geovandro/subscriptions","organizations_url":"https://api.github.com/users/geovandro/orgs","repos_url":"https://api.github.com/users/geovandro/repos","events_url":"https://api.github.com/users/geovandro/events{/privacy}","received_events_url":"https://api.github.com/users/geovandro/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T11:25:59Z","updated_at":"2023-05-01T11:25:59Z","author_association":"CONTRIBUTOR","body":"I was able to fork @Hatzen's original testing project and get it to compile and test libOQS for the 4 major Android ABIs: x86, x86_64, armeabi-v7a, and arm64-v8a. There was an insufficient stack issue with Classic McEliece that also needed to be solved. The project has a CI workflow with tests on emulators (had to disable the \"s-robust\" variants of Sphincs+ since they would almost double the workflow time for ARMv8 emulation, but tests pass locally and instructions to reproduce are given in the README).\r\nProject: https://github.com/geovandro/PQCryptoOnAndroid","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1529604259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T11:26:00Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28768244163","type":"IssueCommentEvent","actor":{"id":974662,"login":"thomwiggers","display_login":"thomwiggers","gravatar_id":"","url":"https://api.github.com/users/thomwiggers","avatar_url":"https://avatars.githubusercontent.com/u/974662?"},"repo":{"id":252143304,"name":"open-quantum-safe/liboqs-rust","url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust/issues/203","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust/issues/203/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust/issues/203/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust/issues/203/events","html_url":"https://github.com/open-quantum-safe/liboqs-rust/pull/203","id":1679971719,"node_id":"PR_kwDODwdmyM5O77n1","number":203,"title":"fix #202","user":{"login":"wucke13","id":20400405,"node_id":"MDQ6VXNlcjIwNDAwNDA1","avatar_url":"https://avatars.githubusercontent.com/u/20400405?v=4","gravatar_id":"","url":"https://api.github.com/users/wucke13","html_url":"https://github.com/wucke13","followers_url":"https://api.github.com/users/wucke13/followers","following_url":"https://api.github.com/users/wucke13/following{/other_user}","gists_url":"https://api.github.com/users/wucke13/gists{/gist_id}","starred_url":"https://api.github.com/users/wucke13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wucke13/subscriptions","organizations_url":"https://api.github.com/users/wucke13/orgs","repos_url":"https://api.github.com/users/wucke13/repos","events_url":"https://api.github.com/users/wucke13/events{/privacy}","received_events_url":"https://api.github.com/users/wucke13/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-04-23T10:37:38Z","updated_at":"2023-05-01T11:47:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust/pulls/203","html_url":"https://github.com/open-quantum-safe/liboqs-rust/pull/203","diff_url":"https://github.com/open-quantum-safe/liboqs-rust/pull/203.diff","patch_url":"https://github.com/open-quantum-safe/liboqs-rust/pull/203.patch","merged_at":null},"body":"This allows to set the `OQS_PERMIT_UNSUPOPORTED_ARCHITECTURE` CMake option via an environment variable.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust/issues/203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust/issues/203/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust/issues/comments/1529613706","html_url":"https://github.com/open-quantum-safe/liboqs-rust/pull/203#issuecomment-1529613706","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust/issues/203","id":1529613706,"node_id":"IC_kwDODwdmyM5bLA2K","user":{"login":"thomwiggers","id":974662,"node_id":"MDQ6VXNlcjk3NDY2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/974662?v=4","gravatar_id":"","url":"https://api.github.com/users/thomwiggers","html_url":"https://github.com/thomwiggers","followers_url":"https://api.github.com/users/thomwiggers/followers","following_url":"https://api.github.com/users/thomwiggers/following{/other_user}","gists_url":"https://api.github.com/users/thomwiggers/gists{/gist_id}","starred_url":"https://api.github.com/users/thomwiggers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomwiggers/subscriptions","organizations_url":"https://api.github.com/users/thomwiggers/orgs","repos_url":"https://api.github.com/users/thomwiggers/repos","events_url":"https://api.github.com/users/thomwiggers/events{/privacy}","received_events_url":"https://api.github.com/users/thomwiggers/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T11:47:32Z","updated_at":"2023-05-01T11:47:32Z","author_association":"MEMBER","body":"Could you rebase this please?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs-rust/issues/comments/1529613706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T11:47:33Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28769119404","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T12:50:24Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529679075","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529679075","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529679075,"node_id":"IC_kwDOE_A9l85bLQzj","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T12:50:24Z","updated_at":"2023-05-01T12:50:24Z","author_association":"NONE","body":"> To investigate further, it would be helpful to run this in a debugger if you are willing @mouse07410.\r\n\r\n@mattcaswell I'm willing, but must say that Apple did not make it easy to run debugger outside of Xcode. In other words, I'm almost 100% clueless about `lldb`, which is the only working debugger on MacOS, AFAIK...\r\n\r\n> Another test we could do is to place a breakpoint at the beginning of `ERR_unload_strings()` and another one in `err_cleanup`. Any call to `err_cleanup` should occur after any calls to `ERR_unload_strings()`.\r\n\r\nI wish we had an easier way to trace... I'm almost thinking about adding `printf()` and recompiling OpenSSL-3.2.0-dev...","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529679075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T12:50:25Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28769152614","type":"IssueCommentEvent","actor":{"id":7422273,"login":"mattcaswell","display_login":"mattcaswell","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","avatar_url":"https://avatars.githubusercontent.com/u/7422273?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T12:52:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529680505","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529680505","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529680505,"node_id":"IC_kwDOE_A9l85bLRJ5","user":{"login":"mattcaswell","id":7422273,"node_id":"MDQ6VXNlcjc0MjIyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/7422273?v=4","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","html_url":"https://github.com/mattcaswell","followers_url":"https://api.github.com/users/mattcaswell/followers","following_url":"https://api.github.com/users/mattcaswell/following{/other_user}","gists_url":"https://api.github.com/users/mattcaswell/gists{/gist_id}","starred_url":"https://api.github.com/users/mattcaswell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattcaswell/subscriptions","organizations_url":"https://api.github.com/users/mattcaswell/orgs","repos_url":"https://api.github.com/users/mattcaswell/repos","events_url":"https://api.github.com/users/mattcaswell/events{/privacy}","received_events_url":"https://api.github.com/users/mattcaswell/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T12:52:47Z","updated_at":"2023-05-01T12:52:47Z","author_association":"NONE","body":"> @mattcaswell I'm willing, but must say that Apple did not make it easy to run debugger outside of Xcode. In other words, I'm almost 100% clueless about lldb, which is the only working debugger on MacOS, AFAIK...\r\n\r\nUnfortunately consider me 110% clueless about MacOS debuggers :-(\r\n\r\n> I wish we had an easier way to trace... I'm almost thinking about adding printf() and recompiling OpenSSL-3.2.0-dev...\r\n\r\nprintf would also work","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529680505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T12:52:47Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28769600172","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072/events","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1072","id":962813852,"node_id":"MDU6SXNzdWU5NjI4MTM4NTI=","number":1072,"title":"Android Buildscript problem with Cross Compilation","user":{"login":"Hatzen","id":21283655,"node_id":"MDQ6VXNlcjIxMjgzNjU1","avatar_url":"https://avatars.githubusercontent.com/u/21283655?v=4","gravatar_id":"","url":"https://api.github.com/users/Hatzen","html_url":"https://github.com/Hatzen","followers_url":"https://api.github.com/users/Hatzen/followers","following_url":"https://api.github.com/users/Hatzen/following{/other_user}","gists_url":"https://api.github.com/users/Hatzen/gists{/gist_id}","starred_url":"https://api.github.com/users/Hatzen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hatzen/subscriptions","organizations_url":"https://api.github.com/users/Hatzen/orgs","repos_url":"https://api.github.com/users/Hatzen/repos","events_url":"https://api.github.com/users/Hatzen/events{/privacy}","received_events_url":"https://api.github.com/users/Hatzen/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-08-06T14:58:25Z","updated_at":"2023-05-01T13:18:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I try to setup a CI pipeline for compiling liboqs with liboqs-java for android.  \r\nBut with the current master version (and release 0.6.0) of this repo it is not possible to run the android build script (https://github.com/open-quantum-safe/liboqs/blob/main/scripts/build-android.sh)  \r\n  \r\ni run in a similar issue like compiling for windows.  But cannot use wine for this problem afaik.  \r\nhttps://github.com/open-quantum-safe/liboqs/issues/727  \r\n  \r\nWhen i run  \r\nbash build-android.sh $ndkPath -s 19-a x86_64  \r\n  \r\n1. it first runs into the problem that \"try_run\" is not working as the target architecture is not the same.  \r\nhttps://github.com/open-quantum-safe/liboqs/blob/2db7f97922a7d3e50aa9f56b7e86566f62c0365a/.CMake/gcc_clang_intrinsics.cmake#L3  \r\nExcluding that file let the compile process start.  \r\n  \r\n2. But then it crashes afterwards for the common c files  \r\n\r\n```\r\ncommon.c:169:9: error: incompatible integer to pointer conversion returning 'int' from a function with result type 'void *' [-Werror,-Wint-conversion]\r\n        return aligned_alloc(alignment, size);\r\n```\r\n\r\n<details>\r\n<summary>click for full build log</summary>  \r\n  \r\n```\r\n-- Build files have been written to: /home/hatzen/LibOQSTestApp--12-add-ci-for-prebuild-liboqs/liboqs-android/prebuild-liboqs/liboqs/build\r\nScanning dependencies of target falcon_512_clean\r\n[  0%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/sig_falcon_512.c.o\r\n[  0%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/codec.c.o\r\n[  0%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/common.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/fft.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/fpr.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/keygen.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/pqclean.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/rng.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/sign.c.o\r\n[  1%] Building C object src/sig/falcon/CMakeFiles/falcon_512_clean.dir/pqclean_falcon-512_clean/vrfy.c.o\r\n[  1%] Built target falcon_512_clean\r\nScanning dependencies of target common\r\n[  1%] Building C object src/common/CMakeFiles/common.dir/aes/aes.c.o\r\n[  1%] Building C object src/common/CMakeFiles/common.dir/aes/aes_c.c.o\r\n[  1%] Building C object src/common/CMakeFiles/common.dir/sha2/sha2_c.c.o\r\n[  1%] Building C object src/common/CMakeFiles/common.dir/sha3/xkcp_sha3.c.o\r\n[  1%] Building C object src/common/CMakeFiles/common.dir/sha3/xkcp_sha3x4.c.o\r\n[  2%] Building C object src/common/CMakeFiles/common.dir/common.c.o\r\n/home/hatzen/LibOQSTestApp--12-add-ci-for-prebuild-liboqs/liboqs-android/prebuild-liboqs/liboqs/src/common/common.c:169:9: error: implicit declaration of function 'aligned_alloc' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\r\n        return aligned_alloc(alignment, size);\r\n               ^\r\n/home/hatzen/LibOQSTestApp--12-add-ci-for-prebuild-liboqs/liboqs-android/prebuild-liboqs/liboqs/src/common/common.c:169:9: error: incompatible integer to pointer conversion returning 'int' from a function with result type 'void *' [-Werror,-Wint-conversion]\r\n        return aligned_alloc(alignment, size);\r\n               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n2 errors generated.\r\nsrc/common/CMakeFiles/common.dir/build.make:182: recipe for target 'src/common/CMakeFiles/common.dir/common.c.o' failed\r\nmake[2]: *** [src/common/CMakeFiles/common.dir/common.c.o] Error 1\r\nCMakeFiles/Makefile2:260: recipe for target 'src/common/CMakeFiles/common.dir/all' failed\r\nmake[1]: *** [src/common/CMakeFiles/common.dir/all] Error 2\r\nMakefile:129: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n```  \r\n  \r\n</details>  \r\n  \r\nAs i would like to make a CI pipe for my android integration [here](https://github.com/Hatzen/LibOQSTestApp/pull/13/files#diff-cec8aea73739e8e679768673e3a38cee42b5fe69d0837642cdd7f7bfab56de59) it would be a charm if we can make the android build script work without the need of changing anything in the cloned files.  \r\nSo i would suggest \r\n1. For the first problem to pass a property which disables \"try_run\"\r\n2.  and for the second problem i need help as i am not very familiar with the code or error. So can anyone provide a suggestion or solution?   \r\n  \r\nThank you   ","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1529703689","html_url":"https://github.com/open-quantum-safe/liboqs/issues/1072#issuecomment-1529703689","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1072","id":1529703689,"node_id":"IC_kwDOA-eq3c5bLW0J","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T13:18:03Z","updated_at":"2023-05-01T13:18:03Z","author_association":"MEMBER","body":"@geovandro Thanks for letting us know about it. If you feel \"like it\", we'd very much welcome a PR to add build-and-test (CI) for android in this project. Alternatively, if you prefer to maintain it at https://github.com/geovandro/PQCryptoOnAndroid (?) shall we add a link to your repo at https://github.com/open-quantum-safe/liboqs/wiki/Platform-specific-notes-for-building-liboqs under heading \"Android\"?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1529703689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T13:18:03Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28770441369","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T14:08:26Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529751752","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529751752","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529751752,"node_id":"IC_kwDOE_A9l85bLijI","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T14:08:26Z","updated_at":"2023-05-01T14:08:26Z","author_association":"NONE","body":"> Unfortunately consider me 110% clueless about MacOS debuggers :-(\r\n\r\nWe'll contest for that title. ;-)\r\n\r\n```text\r\n$ OPENSSL_CONF=${HOME}/openssl-3/etc/openssl.cnf ggdb ~/openssl-3/bin/openssl\r\nGNU gdb (GDB) 13.1\r\nCopyright (C) 2023 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.\r\nType \"show copying\" and \"show warranty\" for details.\r\nThis GDB was configured as \"x86_64-apple-darwin22.3.0\".\r\nType \"show configuration\" for configuration details.\r\nFor bug reporting instructions, please see:\r\n<https://www.gnu.org/software/gdb/bugs/>.\r\nFind the GDB manual and other documentation resources online at:\r\n    <http://www.gnu.org/software/gdb/documentation/>.\r\n\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from /Users/ur20980/openssl-3/bin/openssl...\r\n(gdb) \r\n(gdb) b ERR_unload_strings\r\nFunction \"ERR_unload_strings\" not defined.\r\nMake breakpoint pending on future shared library load? (y or [n]) y\r\nBreakpoint 1 (ERR_unload_strings) pending.\r\n(gdb) b err_cleanup\r\nFunction \"err_cleanup\" not defined.\r\nMake breakpoint pending on future shared library load? (y or [n]) y\r\nBreakpoint 2 (err_cleanup) pending.\r\n(gdb) run speed kyber1024\r\nStarting program: /Users/ur20980/openssl-3/bin/openssl speed kyber1024\r\n[New Thread 0x3e03 of process 16783]\r\n\r\n<and it's hanging up here, no progress for the last 15 minutes (test normally finishess in less than 2 minutes)>\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529751752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T14:08:26Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28770508632","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T14:11:50Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529755419","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529755419","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529755419,"node_id":"IC_kwDOE_A9l85bLjcb","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T14:11:50Z","updated_at":"2023-05-01T14:11:50Z","author_association":"MEMBER","body":"FWIW, when I just built and tested on a remote OSX (ARM64) machine, everything worked just fine:\r\n\r\n```\r\n% ./.local/bin/openssl speed -provider-path _build/lib -provider oqsprovider -provider default -seconds 1 kyber1024\r\nDoing kyber1024 keygen's for 1s: 56173 kyber1024 KEM keygens in 1.00s\r\nDoing kyber1024 encaps's for 1s: 49864 kyber1024 KEM encaps in 1.00s\r\nDoing kyber1024 decaps's for 1s: 54981 kyber1024 KEM decaps in 1.01s\r\nversion: 3.2.0-dev\r\nbuilt on: Mon May  1 14:04:01 2023 UTC\r\noptions: bn(64,64)\r\ncompiler: cc -fPIC -arch arm64 -O3 -Wall -DL_ENDIAN -DOPENSSL_PIC -D_REENTRANT -DOPENSSL_BUILDING_OPENSSL -DNDEBUG\r\nCPUINFO: OPENSSL_armcap=0x187d\r\n                               keygen    encaps    decaps keygens/s  encaps/s  decaps/s\r\n                  kyber1024 0.000018s 0.000020s 0.000018s   56173.0   49864.0   54436.6\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529755419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T14:11:51Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28770551727","type":"IssueCommentEvent","actor":{"id":7422273,"login":"mattcaswell","display_login":"mattcaswell","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","avatar_url":"https://avatars.githubusercontent.com/u/7422273?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T14:14:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529758809","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529758809","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529758809,"node_id":"IC_kwDOE_A9l85bLkRZ","user":{"login":"mattcaswell","id":7422273,"node_id":"MDQ6VXNlcjc0MjIyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/7422273?v=4","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","html_url":"https://github.com/mattcaswell","followers_url":"https://api.github.com/users/mattcaswell/followers","following_url":"https://api.github.com/users/mattcaswell/following{/other_user}","gists_url":"https://api.github.com/users/mattcaswell/gists{/gist_id}","starred_url":"https://api.github.com/users/mattcaswell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattcaswell/subscriptions","organizations_url":"https://api.github.com/users/mattcaswell/orgs","repos_url":"https://api.github.com/users/mattcaswell/repos","events_url":"https://api.github.com/users/mattcaswell/events{/privacy}","received_events_url":"https://api.github.com/users/mattcaswell/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T14:14:05Z","updated_at":"2023-05-01T14:14:05Z","author_association":"NONE","body":"Hmm. Ok maybe `printf` is the way to go. Trying inserting `printf`s in `ERR_unload_strings()` one before and one after the `RUN_ONCE` to show the value of the `err_string_lock`. Then another one in `err_cleanup` to show when that is called in relation to `ERR_unload_strings()`.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529758809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T14:14:05Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28770578888","type":"IssueCommentEvent","actor":{"id":7422273,"login":"mattcaswell","display_login":"mattcaswell","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","avatar_url":"https://avatars.githubusercontent.com/u/7422273?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T14:15:26Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529762633","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529762633","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529762633,"node_id":"IC_kwDOE_A9l85bLlNJ","user":{"login":"mattcaswell","id":7422273,"node_id":"MDQ6VXNlcjc0MjIyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/7422273?v=4","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","html_url":"https://github.com/mattcaswell","followers_url":"https://api.github.com/users/mattcaswell/followers","following_url":"https://api.github.com/users/mattcaswell/following{/other_user}","gists_url":"https://api.github.com/users/mattcaswell/gists{/gist_id}","starred_url":"https://api.github.com/users/mattcaswell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattcaswell/subscriptions","organizations_url":"https://api.github.com/users/mattcaswell/orgs","repos_url":"https://api.github.com/users/mattcaswell/repos","events_url":"https://api.github.com/users/mattcaswell/events{/privacy}","received_events_url":"https://api.github.com/users/mattcaswell/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T14:15:26Z","updated_at":"2023-05-01T14:15:26Z","author_association":"NONE","body":"> FWIW, when I just built and tested on a remote OSX (ARM64) machine, everything worked just fine:\r\n\r\nIn @mouse07410's setup the legacy provider is somehow being loaded/unloaded (presumably via config) - and it is something to do with this which is causing the problem.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529762633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T14:15:27Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28770606941","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T14:16:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529765388","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529765388","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529765388,"node_id":"IC_kwDOE_A9l85bLl4M","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T14:16:51Z","updated_at":"2023-05-01T14:16:51Z","author_association":"MEMBER","body":"> > FWIW, when I just built and tested on a remote OSX (ARM64) machine, everything worked just fine:\r\n> \r\n> In @mouse07410's setup the legacy provider is somehow being loaded/unloaded (presumably via config) - and it is something to do with this which is causing the problem.\r\n\r\nAhh... So @mouse07410 , does the command line invocation I used work for you also on x86_64?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529765388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T14:16:51Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28770727632","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T14:22:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529770929","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529770929","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529770929,"node_id":"IC_kwDOE_A9l85bLnOx","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T14:22:54Z","updated_at":"2023-05-01T14:22:54Z","author_association":"MEMBER","body":"When running `OPENSSL_MODULES=_build/lib ./.local/bin/openssl speed -seconds 1 kyber1024` with a suitable `openssl.cnf` there's also no problem (on ARM64).","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529770929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T14:22:55Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28771111074","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T14:44:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529788738","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529788738","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529788738,"node_id":"IC_kwDOE_A9l85bLrlC","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T14:44:54Z","updated_at":"2023-05-01T14:44:54Z","author_association":"NONE","body":"> > FWIW, when I just built and tested on a remote OSX (ARM64) machine, everything worked just fine:\r\n> \r\n> In @mouse07410's setup the legacy provider is somehow being loaded/unloaded (presumably via config) - and it is something to do with this which is causing the problem.\r\n\r\nWhat does the legacy provider do? In other words, what algorithms will I miss if I don't include/load it?\r\n\r\n> (from @baentsch) when I just built and tested on a remote OSX (ARM64) machine, everything worked just fine...\r\n> .  .  .  does the command line invocation I used work for you also on x86_64?\r\n\r\nWhen I use _your_ command line (which, probably, excludes everything else), it works fine:\r\n```text\r\n$ OPENSSL_CONF=\"\" ~/openssl-3/bin/openssl speed -provider-path _build/lib -provider oqsprovider -provider default -seconds 1 kyber1024\r\nDoing kyber1024 keygen's for 1s: 50230 kyber1024 KEM keygens in 1.00s\r\nDoing kyber1024 encaps's for 1s: 52319 kyber1024 KEM encaps in 1.00s\r\nDoing kyber1024 decaps's for 1s: 65151 kyber1024 KEM decaps in 1.00s\r\nversion: 3.2.0-dev\r\nbuilt on: Sun Apr 16 17:44:32 2023 UTC\r\noptions: bn(64,64)\r\ncompiler: clang -fPIC -arch x86_64 -O3 -std=gnu18 -march=native -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -g -DL_ENDIAN -DOPENSSL_PIC -D_REENTRANT -DOPENSSL_BUILDING_OPENSSL -DZLIB -DZLIB_SHARED\r\nCPUINFO: OPENSSL_ia32cap=0x7ffaf3bfffebffff:0x40000008029c67af\r\n                               keygen    encaps    decaps keygens/s  encaps/s  decaps/s\r\n                  kyber1024 0.000020s 0.000019s 0.000015s   50230.0   52319.0   65151.0\r\n$\r\n```\r\n\r\nBut when I use \"fully-loaded\" OpenSSL configuration - it works fine and crashes afterwards. And yes - it certainly works on x86_64 as well, literally.\r\n\r\n> When running `OPENSSL_MODULES=_build/lib ./.local/bin/openssl speed -seconds 1 kyber1024` with a suitable `openssl.cnf` there's also no problem (on ARM64). The same when not using `OPENSSL_MODULES` but a hard-coded path to `oqsprovider.dylib` in `openssl.cnf`: No crash.\r\n\r\nI always have the path to `oqsprovider.dyliv` hard-coded in `openssl.cnf`:\r\n```text\r\n[openssl_init]\r\nproviders = provider_sect\r\nengines   = engine_section\r\n\r\n# List of providers to load\r\n[provider_sect]\r\ndefault = default_prov\r\nlegacy = legacy_prov\r\npkcs11 = pkcs11_prov\r\n#gost   = gost_prov\r\nbase = base_prov\r\ndefault = default_prov\r\noqs = oqs_prov\r\n\r\n[default_prov]\r\n activate = 1\r\n \r\n[legacy_prov]\r\n activate = 0\r\n\r\n[pkcs11_prov]\r\n  module = /Users/ur20980/openssl-3/lib/ossl-modules/pkcs11.dylib\r\n  pkcs11-module-path = /Library/OpenSC/lib/opensc-pkcs11.so\r\n  activate = 1\r\n\r\n[gost_prov]\r\n module = /Users/ur20980/openssl-3/lib/ossl-modules/gostprov.dylib\r\n activate = 0\r\n\r\n[base_prov]\r\n  activate = 1\r\n\r\n[oqs_prov]\r\n module = /Users/ur20980/openssl-3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n\r\n[default_prov]\r\n activate = 1\r\n```\r\n\r\nWhen I comment out the legacy provider - crash disappears.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529788738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T14:44:55Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28771220698","type":"IssueCommentEvent","actor":{"id":7422273,"login":"mattcaswell","display_login":"mattcaswell","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","avatar_url":"https://avatars.githubusercontent.com/u/7422273?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T14:51:16Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529793859","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529793859","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529793859,"node_id":"IC_kwDOE_A9l85bLs1D","user":{"login":"mattcaswell","id":7422273,"node_id":"MDQ6VXNlcjc0MjIyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/7422273?v=4","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","html_url":"https://github.com/mattcaswell","followers_url":"https://api.github.com/users/mattcaswell/followers","following_url":"https://api.github.com/users/mattcaswell/following{/other_user}","gists_url":"https://api.github.com/users/mattcaswell/gists{/gist_id}","starred_url":"https://api.github.com/users/mattcaswell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattcaswell/subscriptions","organizations_url":"https://api.github.com/users/mattcaswell/orgs","repos_url":"https://api.github.com/users/mattcaswell/repos","events_url":"https://api.github.com/users/mattcaswell/events{/privacy}","received_events_url":"https://api.github.com/users/mattcaswell/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T14:51:15Z","updated_at":"2023-05-01T14:51:15Z","author_association":"NONE","body":"> What does the legacy provider do? In other words, what algorithms will I miss if I don't include/load it?\r\n\r\nA complete list of algorithms in the legacy provider is here:\r\n\r\nhttps://www.openssl.org/docs/manmaster/man7/OSSL_PROVIDER-legacy.html","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529793859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T14:51:16Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28771254928","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":18,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T14:53:16Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529795528","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529795528","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529795528,"node_id":"IC_kwDOE_A9l85bLtPI","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T14:53:16Z","updated_at":"2023-05-01T14:53:16Z","author_association":"MEMBER","body":"> When I comment out the legacy provider - crash disappears.\r\n\r\nReverse test on my side (activating legacy provider):\r\n\r\n```\r\n% ./.local/bin/openssl list -providers           \r\nProviders:\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.2.0\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.2.0\r\n    status: active\r\n  oqsprovider\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n % ./.local/bin/openssl speed -seconds 1 kyber1024\r\nDoing kyber1024 keygen's for 1s: 56224 kyber1024 KEM keygens in 1.01s\r\nDoing kyber1024 encaps's for 1s: 50588 kyber1024 KEM encaps in 1.00s\r\nDoing kyber1024 decaps's for 1s: 55947 kyber1024 KEM decaps in 1.01s\r\nversion: 3.2.0-dev\r\nbuilt on: Mon May  1 14:04:01 2023 UTC\r\noptions: bn(64,64)\r\ncompiler: cc -fPIC -arch arm64 -O3 -Wall -DL_ENDIAN -DOPENSSL_PIC -D_REENTRANT -DOPENSSL_BUILDING_OPENSSL -DNDEBUG\r\nCPUINFO: OPENSSL_armcap=0x187d\r\n                               keygen    encaps    decaps keygens/s  encaps/s  decaps/s\r\n                  kyber1024 0.000018s 0.000020s 0.000018s   55667.3   50588.0   55393.1\r\n```\r\n\r\n--> Still everything OK; no crash","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529795528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T14:53:16Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28771349699","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T14:58:24Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529800300","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529800300","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529800300,"node_id":"IC_kwDOE_A9l85bLuZs","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T14:58:24Z","updated_at":"2023-05-01T14:58:24Z","author_association":"MEMBER","body":"One more thought/question: Are providers built for different OpenSSL versions meant to operate flawlessly? What if the legacy provider (binary) is for OpenSSL3.1.0 and is run in OpenSSL3.2-dev?","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529800300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T14:58:24Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28771399666","type":"IssueCommentEvent","actor":{"id":7422273,"login":"mattcaswell","display_login":"mattcaswell","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","avatar_url":"https://avatars.githubusercontent.com/u/7422273?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":20,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T15:00:40Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529803638","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529803638","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529803638,"node_id":"IC_kwDOE_A9l85bLvN2","user":{"login":"mattcaswell","id":7422273,"node_id":"MDQ6VXNlcjc0MjIyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/7422273?v=4","gravatar_id":"","url":"https://api.github.com/users/mattcaswell","html_url":"https://github.com/mattcaswell","followers_url":"https://api.github.com/users/mattcaswell/followers","following_url":"https://api.github.com/users/mattcaswell/following{/other_user}","gists_url":"https://api.github.com/users/mattcaswell/gists{/gist_id}","starred_url":"https://api.github.com/users/mattcaswell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattcaswell/subscriptions","organizations_url":"https://api.github.com/users/mattcaswell/orgs","repos_url":"https://api.github.com/users/mattcaswell/repos","events_url":"https://api.github.com/users/mattcaswell/events{/privacy}","received_events_url":"https://api.github.com/users/mattcaswell/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T15:00:40Z","updated_at":"2023-05-01T15:00:40Z","author_association":"NONE","body":"Yes that scenario is supposed to work.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529803638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T15:00:40Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28771756329","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":21,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T15:18:20Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529826136","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529826136","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529826136,"node_id":"IC_kwDOE_A9l85bL0tY","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T15:18:20Z","updated_at":"2023-05-01T15:18:20Z","author_association":"NONE","body":"> One more thought/question: Are providers built for different OpenSSL versions meant to operate flawlessly? What if the legacy provider (binary) is for OpenSSL3.1.0 and is run in OpenSSL3.2-dev?\r\n\r\nIn my case, I'm rebuilding providers - aka, _not_  reusing between 3.1.0 and 3.2.0-dev.\r\n\r\n> Maybe worth while deactivating PCKS#11 in your setup, @mouse07410 so we have the exact same set of providers (or let me know how/where to get the pkcs11_provider)?\r\n\r\nAfter disabling pkcs11-provider and re-enabling legacy provider, crash disappeared. _Problem: I might need legacy provider, I definitely need pkcs11-provider._\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529826136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T15:18:20Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28772540154","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":22,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T16:02:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529884756","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529884756","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529884756,"node_id":"IC_kwDOE_A9l85bMDBU","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T16:02:33Z","updated_at":"2023-05-01T16:02:33Z","author_association":"MEMBER","body":">  I definitely need pkcs11-provider\r\n\r\nCould you point to the source code for that? I could try to build&reproduce your setup (ideally on Linux) and see whether I can debug into this (t)here.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529884756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T16:02:34Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28773157410","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147","id":1688654913,"node_id":"I_kwDOE_A9l85kptRB","number":147,"title":"Cannot benchmark with \"openssl speed\"?","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":23,"created_at":"2023-04-28T14:26:10Z","updated_at":"2023-05-01T16:37:07Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis is not necessarily a bug - but something either under-specified (maybe for a dense person like yours truly), or something is broken.\r\n\r\nI wanted to get OpenSSL benchmark of Kyber1024. I seem unable to, and that applies also to ECDH@default and RSA...\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install OpenSSL-3.1.0\r\n2. Install this provider and add it to `openssl.cnf`\r\n3. Try `openssl speed -evp kyber1024`, `openssl speed -evp kyber1024 -provider oqs`, `openssl speed -provider oqs`, or similar.\r\n4. See that none of the `oqsprovider`-included PQ algorithms is present in the output.\r\n\r\nThere seems to be no way to benchmark any of those algorithms?\r\n\r\n**Expected behavior**\r\nSomething like what Botan library benchmark is giving me:\r\n```text\r\n.  .  .\r\nKyber-1024-r3 15625 keygen/sec; 0.06 ms/op 192.00 cycles/op (1 op in 0.06 ms)\r\nKyber-1024-r3 58410 KEM encrypt/sec; 0.02 ms/op 51.36 cycles/op (22574 ops in 386.47 ms)\r\nKyber-1024-r3 45146 KEM decrypt/sec; 0.02 ms/op 66.45 cycles/op (22574 ops in 500.01 ms)\r\nKyber-1024-90s-r3 24999 keygen/sec; 0.04 ms/op 120.00 cycles/op (1 op in 0.04 ms)\r\nKyber-1024-90s-r3 60275 KEM encrypt/sec; 0.02 ms/op 49.77 cycles/op (23427 ops in 388.67 ms)\r\nKyber-1024-90s-r3 46853 KEM decrypt/sec; 0.02 ms/op 64.03 cycles/op (23427 ops in 500.00 ms)\r\n.  .  .\r\n```\r\n\r\n**Screenshots**\r\nE.g.,\r\n```text\r\n$ openssl speed -provider oqsprovider kyber1024    \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed -provider oqs kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$ openssl speed kyber1024 \r\nspeed: Unknown algorithm kyber1024\r\n$\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1, Xcode-14.3\r\n - OpenSSL version 3.1.0 (Macports-installed)\r\n - Version [e.g. 0.4.0]\r\n\r\n**Additional context**\r\nIn `openssl.cnf`:\r\n```text\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\n\r\nList of KEM algorithms in OQS provider:\r\n```text\r\n$ openssl list -kem-algorithms -provider oqs\r\n  { 1.2.840.113549.1.1.1, 2.5.8.1.1, RSA, rsaEncryption } @ default\r\n  frodo640aes @ oqs\r\n  p256_frodo640aes @ oqs\r\n  x25519_frodo640aes @ oqs\r\n  frodo640shake @ oqs\r\n  p256_frodo640shake @ oqs\r\n  x25519_frodo640shake @ oqs\r\n  frodo976aes @ oqs\r\n  p384_frodo976aes @ oqs\r\n  x448_frodo976aes @ oqs\r\n  frodo976shake @ oqs\r\n  p384_frodo976shake @ oqs\r\n  x448_frodo976shake @ oqs\r\n  frodo1344aes @ oqs\r\n  p521_frodo1344aes @ oqs\r\n  frodo1344shake @ oqs\r\n  p521_frodo1344shake @ oqs\r\n  kyber512 @ oqs\r\n  p256_kyber512 @ oqs\r\n  x25519_kyber512 @ oqs\r\n  kyber768 @ oqs\r\n  p384_kyber768 @ oqs\r\n  x448_kyber768 @ oqs\r\n  kyber1024 @ oqs\r\n  p521_kyber1024 @ oqs\r\n  bikel1 @ oqs\r\n  p256_bikel1 @ oqs\r\n  x25519_bikel1 @ oqs\r\n  bikel3 @ oqs\r\n  p384_bikel3 @ oqs\r\n  x448_bikel3 @ oqs\r\n  bikel5 @ oqs\r\n  p521_bikel5 @ oqs\r\n  kyber90s512 @ oqs\r\n  p256_kyber90s512 @ oqs\r\n  x25519_kyber90s512 @ oqs\r\n  kyber90s768 @ oqs\r\n  p384_kyber90s768 @ oqs\r\n  x448_kyber90s768 @ oqs\r\n  kyber90s1024 @ oqs\r\n  p521_kyber90s1024 @ oqs\r\n  hqc128 @ oqs\r\n  p256_hqc128 @ oqs\r\n  x25519_hqc128 @ oqs\r\n  hqc192 @ oqs\r\n  p384_hqc192 @ oqs\r\n  x448_hqc192 @ oqs\r\n  hqc256 @ oqs\r\n  p521_hqc256 @ oqs\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529929247","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/147#issuecomment-1529929247","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/147","id":1529929247,"node_id":"IC_kwDOE_A9l85bMN4f","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T16:37:07Z","updated_at":"2023-05-01T16:37:07Z","author_association":"NONE","body":"> Could you point to the source code for that?\r\n\r\nYou bet!\r\n\r\nhttps://github.com/latchset/pkcs11-provider/","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1529929247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T16:37:07Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28775213741","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146","id":1687519445,"node_id":"PR_kwDOE_A9l85PVRaL","number":146,"title":"Add OQS_init and OQS_destroy & GithubCI on PRs","user":{"login":"bhess","id":149199,"node_id":"MDQ6VXNlcjE0OTE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/149199?v=4","gravatar_id":"","url":"https://api.github.com/users/bhess","html_url":"https://github.com/bhess","followers_url":"https://api.github.com/users/bhess/followers","following_url":"https://api.github.com/users/bhess/following{/other_user}","gists_url":"https://api.github.com/users/bhess/gists{/gist_id}","starred_url":"https://api.github.com/users/bhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhess/subscriptions","organizations_url":"https://api.github.com/users/bhess/orgs","repos_url":"https://api.github.com/users/bhess/repos","events_url":"https://api.github.com/users/bhess/events{/privacy}","received_events_url":"https://api.github.com/users/bhess/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-27T20:40:35Z","updated_at":"2023-05-01T18:31:03Z","closed_at":"2023-05-01T05:57:06Z","author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/pulls/146","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146","diff_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146.diff","patch_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146.patch","merged_at":"2023-05-01T05:57:06Z"},"body":"- Adds OQS_init() and OQS_destroy() on provider load / teardown (required after https://github.com/open-quantum-safe/liboqs/pull/1431)\r\n- Run GithubCI on PRs\r\n\r\nCloses #144 \r\n\r\n<!-- Please give a brief explanation of the purpose of this pull request. -->\r\n\r\n<!-- Does this PR resolve any issue?  If so, please reference it using automatic-closing keywords like \"Fixes #123.\" -->\r\n\r\n<!-- Once your pull request is ready for review and passing continuous integration tests, please convert from a draft PR to a normal PR, and request a review from one of the OQS core team members. -->\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1530050853","html_url":"https://github.com/open-quantum-safe/oqs-provider/pull/146#issuecomment-1530050853","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/146","id":1530050853,"node_id":"IC_kwDOE_A9l85bMrkl","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T18:31:02Z","updated_at":"2023-05-01T18:31:02Z","author_association":"NONE","body":"I don't know who this PR looked good to, but my compiler clearly thinks that `OQS_init()` and `OQS_destroy()` should better be defined and declared before use:\r\n\r\n```text\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n[ 22%] Building C object oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/clang -DOQSPROVIDER_VERSION_TEXT=\\\"0.5.0-dev\\\" -DOQS_PROVIDER_COMMIT=\"\\\" (fbd2538)\\\"\" -DUSE_ENCODING_LIB -Doqsprovider_EXPORTS -I/Users/ur20980/src/openssl/include -I/Users/ur20980/src/oqs-provider/_build/install/include -isystem /opt/local/include/oqs -O3 -std=gnu18 -march=native -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -I/opt/local/include -L/opt/local/lib -g -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX13.3.sdk -fPIC -Wunused-function -std=gnu11 -MD -MT oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o -MF CMakeFiles/oqsprovider.dir/oqsprov.c.o.d -o CMakeFiles/oqsprovider.dir/oqsprov.c.o -c /Users/ur20980/src/oqs-provider/oqsprov/oqsprov.c\r\nclang: warning: argument unused during compilation: '-L/opt/local/lib' [-Wunused-command-line-argument]\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov.c:555:4: error: call to undeclared function 'OQS_destroy'; ISO C99 and later do not support implicit function declarations [-Wimplicit-function-declaration]\r\n   OQS_destroy();\r\n   ^\r\n1 error generated.\r\ngmake[2]: *** [oqsprov/CMakeFiles/oqsprovider.dir/build.make:79: oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o] Error 1\r\ngmake[2]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\ngmake[1]: *** [CMakeFiles/Makefile2:155: oqsprov/CMakeFiles/oqsprovider.dir/all] Error 2\r\ngmake[1]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1530050853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T18:31:03Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28777570327","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests on OSX","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":62,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-05-01T20:39:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Updated\r\nTo make some details clear, as previous overly-generic description invited useless overly-generic observations, like \"could not replicate on Windows\".\r\n\r\n**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL _system-wide_, e.g., in `/opt/local/libexec/openssl3`. For this test I used OpenSSL-3.1.0, and used Macports to get the binary installed.\r\n2. Build and install `liboqs` _system-wide_. I used `liboqs` master, and installed it in `opt/local`: `/opt/local/lib` for the shared library, `/opt/local/include` for the header files.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `export OPENSSL_APP=/opt/local/libexec/openssl3/bin/openssl`, `export OPENSSL_MODULES=/opt/local/libexec/openssl3/lib/ossl-modules`\r\n5. _Optional?_ To make the environment closer to mine, install `pkcs11-provider` and GOST engine system-wide, and adjust `openssl.cnf` to point at them. \r\n6. _Further complication_ Install `oqs-provider` and make it available system-wide by adding it to `openssl.cnf`.\r\n7. Go to `_build` and do `ctest --output-on-failure`\r\n8. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1530213735","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1530213735","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1530213735,"node_id":"IC_kwDOE_A9l85bNTVn","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-05-01T20:39:38Z","updated_at":"2023-05-01T20:39:38Z","author_association":"NONE","body":"@mattcaswell I seem to have this problem with the OpenSSL-3.2.0-dev built from source/master as well. Which presumably has the fix merged...","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1530213735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-05-01T20:39:39Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
