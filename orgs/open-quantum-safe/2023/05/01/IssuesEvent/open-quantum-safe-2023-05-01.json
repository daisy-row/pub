{"id":"28763997780","type":"IssuesEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/144","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/144/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/144/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/144/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/144","id":1685520854,"node_id":"I_kwDOE_A9l85kdwHW","number":144,"title":"Improve test guards for downlevel OpenSSL versions","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-04-26T18:35:40Z","updated_at":"2023-05-01T05:57:07Z","closed_at":"2023-05-01T05:57:07Z","author_association":"MEMBER","active_lock_reason":null,"body":"              > Despite this passing CI tests on the branch, it has failed when merged to main: https://github.com/open-quantum-safe/oqs-provider/actions/runs/4809818002/jobs/8561583885\r\n> \r\n> Anyone have any ideas why?\r\n\r\nIt seems github CI does not run on PRs (but on main) Needs investigation.\r\n\r\nThe failing test is a CA test that _should_ only run on OpenSSL Master (as it fails expectedly on 3.0 which is tested in github CI). Probably needs an additional execution guard. If none of you has time for this, I'll Look into this when I am back.\r\n\r\n_Originally posted by @baentsch in https://github.com/open-quantum-safe/oqs-provider/issues/143#issuecomment-1523873593_\r\n            ","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/144/timeline","performed_via_github_app":null,"state_reason":"completed"}},"public":true,"created_at":"2023-05-01T05:57:08Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28767184284","type":"IssuesEvent","actor":{"id":89771619,"login":"cryptobsv","display_login":"cryptobsv","gravatar_id":"","url":"https://api.github.com/users/cryptobsv","avatar_url":"https://avatars.githubusercontent.com/u/89771619?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/145","id":1686489671,"node_id":"I_kwDOE_A9l85khcpH","number":145,"title":"security bits=-1","user":{"login":"cryptobsv","id":89771619,"node_id":"MDQ6VXNlcjg5NzcxNjE5","avatar_url":"https://avatars.githubusercontent.com/u/89771619?v=4","gravatar_id":"","url":"https://api.github.com/users/cryptobsv","html_url":"https://github.com/cryptobsv","followers_url":"https://api.github.com/users/cryptobsv/followers","following_url":"https://api.github.com/users/cryptobsv/following{/other_user}","gists_url":"https://api.github.com/users/cryptobsv/gists{/gist_id}","starred_url":"https://api.github.com/users/cryptobsv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cryptobsv/subscriptions","organizations_url":"https://api.github.com/users/cryptobsv/orgs","repos_url":"https://api.github.com/users/cryptobsv/repos","events_url":"https://api.github.com/users/cryptobsv/events{/privacy}","received_events_url":"https://api.github.com/users/cryptobsv/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-27T09:38:06Z","updated_at":"2023-05-01T10:18:26Z","closed_at":"2023-05-01T10:18:26Z","author_association":"NONE","active_lock_reason":null,"body":"I have generated a CA and a host certificate, both with sig algo dilithium5. When I start `openssl s_server` with option `-security_debug_verbose` I get:\r\n\r\n    Using default temp DH parameters\r\n    Security callback: Certificate chain EE key=, bits=256, security bits=256: yes\r\n    Security callback: Certificate chain CA digest=dilithium5, security bits=-1: no\r\n    error setting certificate\r\n    802BF3F4147F0000:error:0A00018E:SSL routines:SSL_CTX_use_certificate:ca md too weak:ssl/ssl_rsa.c:221\r\n\r\nThe certs look ok to me. I have tried this with falcon512 and with the branches `main` and `ossl-sigload`. I have straced `openssl` and verified that `oqs-provider` is being loaded. Probably, I am doing something wrong, but I have no idea what. Thanks!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/145/timeline","performed_via_github_app":null,"state_reason":"completed"}},"public":true,"created_at":"2023-05-01T10:18:27Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28775263389","type":"IssuesEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/152","id":1691167673,"node_id":"I_kwDOE_A9l85kzSu5","number":152,"title":"Missing definition of OQS_init() and OQS_destroy() breaks compilation","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-01T18:33:57Z","updated_at":"2023-05-01T18:33:57Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nCurrent master fails to build - commit fbd25381 is at fault.\r\n\r\nAlso, fails to clone qsc-key-encoder.git\r\n\r\n```\r\n$ ../oqsprov-build.sh \r\nmake: *** No rule to make target `clean'.  Stop.\r\nBuilding for source-based OpenSSL-3.2.x-dev...\r\n-- The C compiler identification is AppleClang 14.0.3.14030022\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Check for working C compiler: /opt/local/bin/clang - skipped\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Creating Debug build with OQS-Debug env vars enabled\r\n-- Build will store public keys in PKCS#8 structures\r\n-- Build will include external encoding library for SPKI/PKCS#8\r\n-- Found OpenSSL: /Users/ur20980/src/openssl/libcrypto.dylib (found suitable version \"3.2.0\", minimum required is \"3.0\")  \r\n-- Building commit fbd2538 in /Users/ur20980/src/oqs-provider\r\nCMake Warning at test/CMakeLists.txt:35 (message):\r\n  OpenSSL source build directory\r\n  '/Users/ur20980/src/oqs-provider/test/../openssl' not present.  Some\r\n  dependent tests will be skipped.\r\n\r\n\r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /Users/ur20980/src/oqs-provider/_build\r\n/opt/local/bin/cmake -S/Users/ur20980/src/oqs-provider -B/Users/ur20980/src/oqs-provider/_build --check-build-system CMakeFiles/Makefile.cmake 0\r\n/opt/local/bin/cmake -E cmake_progress_start /Users/ur20980/src/oqs-provider/_build/CMakeFiles /Users/ur20980/src/oqs-provider/_build//CMakeFiles/progress.marks\r\n/opt/local/bin/gmake  -f CMakeFiles/Makefile2 all\r\ngmake[1]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n/opt/local/bin/gmake  -f oqsprov/CMakeFiles/encoder.dir/build.make oqsprov/CMakeFiles/encoder.dir/depend\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\ncd /Users/ur20980/src/oqs-provider/_build && /opt/local/bin/cmake -E cmake_depends \"Unix Makefiles\" /Users/ur20980/src/oqs-provider /Users/ur20980/src/oqs-provider/oqsprov /Users/ur20980/src/oqs-provider/_build /Users/ur20980/src/oqs-provider/_build/oqsprov /Users/ur20980/src/oqs-provider/_build/oqsprov/CMakeFiles/encoder.dir/DependInfo.cmake --color=\r\ngmake[2]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\n/opt/local/bin/gmake  -f oqsprov/CMakeFiles/encoder.dir/build.make oqsprov/CMakeFiles/encoder.dir/build\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n[  4%] Creating directories for 'encoder'\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/cmake -Dcfgdir= -P /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/tmp/encoder-mkdirs.cmake\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/cmake -E touch /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/src/encoder-stamp/encoder-mkdir\r\n[  8%] Performing download step (git clone) for 'encoder'\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/src && /opt/local/bin/cmake -P /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/tmp/encoder-gitclone.cmake\r\nCloning into 'encoder'...\r\nerror: git-remote-https died of signal 11\r\nfatal: remote transport reported error\r\nCloning into 'encoder'...\r\nerror: git-remote-https died of signal 11\r\nfatal: remote transport reported error\r\nCloning into 'encoder'...\r\nerror: git-remote-https died of signal 11\r\nfatal: remote transport reported error\r\n-- Had to git clone more than once: 3 times.\r\nCMake Error at /Users/ur20980/src/oqs-provider/_build/oqsprov/encoder-prefix/tmp/encoder-gitclone.cmake:39 (message):\r\n  Failed to clone repository:\r\n  'https://github.com/Quantum-Safe-Collaboration/qsc-key-encoder.git'\r\n\r\n.  .  .\r\n\r\ngmake[2]: Entering directory '/Users/ur20980/src/oqs-provider/_build'\r\n[ 22%] Building C object oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o\r\ncd /Users/ur20980/src/oqs-provider/_build/oqsprov && /opt/local/bin/clang -DOQSPROVIDER_VERSION_TEXT=\\\"0.5.0-dev\\\" -DOQS_PROVIDER_COMMIT=\"\\\" (fbd2538)\\\"\" -DUSE_ENCODING_LIB -Doqsprovider_EXPORTS -I/Users/ur20980/src/openssl/include -I/Users/ur20980/src/oqs-provider/_build/install/include -isystem /opt/local/include/oqs -O3 -std=gnu18 -march=native -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -I/opt/local/include -L/opt/local/lib -g -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX13.3.sdk -fPIC -Wunused-function -std=gnu11 -MD -MT oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o -MF CMakeFiles/oqsprovider.dir/oqsprov.c.o.d -o CMakeFiles/oqsprovider.dir/oqsprov.c.o -c /Users/ur20980/src/oqs-provider/oqsprov/oqsprov.c\r\nclang: warning: argument unused during compilation: '-L/opt/local/lib' [-Wunused-command-line-argument]\r\n/Users/ur20980/src/oqs-provider/oqsprov/oqsprov.c:555:4: error: call to undeclared function 'OQS_destroy'; ISO C99 and later do not support implicit function declarations [-Wimplicit-function-declaration]\r\n   OQS_destroy();\r\n   ^\r\n1 error generated.\r\ngmake[2]: *** [oqsprov/CMakeFiles/oqsprovider.dir/build.make:79: oqsprov/CMakeFiles/oqsprovider.dir/oqsprov.c.o] Error 1\r\ngmake[2]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\ngmake[1]: *** [CMakeFiles/Makefile2:155: oqsprov/CMakeFiles/oqsprovider.dir/all] Error 2\r\ngmake[1]: Leaving directory '/Users/ur20980/src/oqs-provider/_build'\r\n\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `git clone https://github.com/open-quantum-safe/oqs-provider.git --recurse-submodules`\r\n2. `cmake -DCMAKE_BUILD_TYPE=Debug -DOPENSSL_ROOT_DIR=\"$HOME/src/openssl\" -DCMAKE_C_FLAGS=\"$CFLAGS -I/opt/local/include -L/opt/local/lib\" -DCMAKE_VERBOSE_MAKEFILE:BOOL=True -S . -B _build`\r\n3. `cmake --build _build`\r\n4. See error\r\n\r\n**Expected behavior**\r\nA normal clean build, like before.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.3.1\r\n - OpenSSL version 3.1.0 and 3.2.0-dev\r\n\r\n**Additional context**\r\nIMHO, it's not really nice to git-clone other repositories in the mid-build. Let's either define them as submodules, or add as a pre-requisite to the README.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/152/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2023-05-01T18:33:57Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
