{"id":"34232569427","type":"IssueCommentEvent","actor":{"id":5159151,"login":"Frauschi","display_login":"Frauschi","gravatar_id":"","url":"https://api.github.com/users/Frauschi","avatar_url":"https://avatars.githubusercontent.com/u/5159151?"},"repo":{"id":65514205,"name":"open-quantum-safe/liboqs","url":"https://api.github.com/repos/open-quantum-safe/liboqs"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1621","repository_url":"https://api.github.com/repos/open-quantum-safe/liboqs","labels_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1621/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1621/comments","events_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1621/events","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1621","id":2023261475,"node_id":"PR_kwDOA-eq3c5hBbND","number":1621,"title":"Add support for Zephyr RTOS","user":{"login":"Frauschi","id":5159151,"node_id":"MDQ6VXNlcjUxNTkxNTE=","avatar_url":"https://avatars.githubusercontent.com/u/5159151?v=4","gravatar_id":"","url":"https://api.github.com/users/Frauschi","html_url":"https://github.com/Frauschi","followers_url":"https://api.github.com/users/Frauschi/followers","following_url":"https://api.github.com/users/Frauschi/following{/other_user}","gists_url":"https://api.github.com/users/Frauschi/gists{/gist_id}","starred_url":"https://api.github.com/users/Frauschi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Frauschi/subscriptions","organizations_url":"https://api.github.com/users/Frauschi/orgs","repos_url":"https://api.github.com/users/Frauschi/repos","events_url":"https://api.github.com/users/Frauschi/events{/privacy}","received_events_url":"https://api.github.com/users/Frauschi/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2023-12-04T08:07:27Z","updated_at":"2023-12-17T21:29:07Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/pulls/1621","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1621","diff_url":"https://github.com/open-quantum-safe/liboqs/pull/1621.diff","patch_url":"https://github.com/open-quantum-safe/liboqs/pull/1621.patch","merged_at":null},"body":"Hi everybody,\r\n\r\nThis PR adds support for the [Zephyr RTOS](https://github.com/zephyrproject-rtos/zephyr), so liboqs can be used as a module (see [here](https://docs.zephyrproject.org/latest/develop/modules.html)). \r\n\r\nThe main changes to the existing library code are focussed on the CMake build environment to enable the library to be built with the Zephyr SDK. All changes should not influence existing builds outside the Zephyr environment. (However, some changes also improve the integration of liboqs directly in a CMake-based project without installing it system-wide.) \r\n\r\nOne bigger source code change is related to random number generation. Zephyr doesn't support any of the currently present RNG interfaces. To be most flexible, I added a generic `OQS_USE_EXTERNAL_RNG` option (disabled by default). In this case, an externally defined method `OQS_randombytes_external()` must be present during link time, which is then used to obtain random data. For Zephyr, I implemented that method to generate random data using their RNG interface. \r\n\r\nThe main Zephyr integration is all contained in the new `zephyr` folder in the root directory (common practice for Zephyr modules to have this folder). In that directory, there is a custom `CMakeLists.txt` to integrate the existing CMake infrastructure into Zephyr. Furthermore, a Kconfig file is provided to configure the build (and especially the algorithm selection). Finally, the new `OQS_randombytes_external` method is implemented in a small C source file here. \r\n\r\nAs this is my first PR for this project, I'm not sure if the changes are upstreamable in the current form. But I'm looking forward to your feedback.\r\n\r\nKind regards,\r\nTobi","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1621/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1859289685","html_url":"https://github.com/open-quantum-safe/liboqs/pull/1621#issuecomment-1859289685","issue_url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/1621","id":1859289685,"node_id":"IC_kwDOA-eq3c5u0oJV","user":{"login":"Frauschi","id":5159151,"node_id":"MDQ6VXNlcjUxNTkxNTE=","avatar_url":"https://avatars.githubusercontent.com/u/5159151?v=4","gravatar_id":"","url":"https://api.github.com/users/Frauschi","html_url":"https://github.com/Frauschi","followers_url":"https://api.github.com/users/Frauschi/followers","following_url":"https://api.github.com/users/Frauschi/following{/other_user}","gists_url":"https://api.github.com/users/Frauschi/gists{/gist_id}","starred_url":"https://api.github.com/users/Frauschi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Frauschi/subscriptions","organizations_url":"https://api.github.com/users/Frauschi/orgs","repos_url":"https://api.github.com/users/Frauschi/repos","events_url":"https://api.github.com/users/Frauschi/events{/privacy}","received_events_url":"https://api.github.com/users/Frauschi/received_events","type":"User","site_admin":false},"created_at":"2023-12-17T21:29:06Z","updated_at":"2023-12-17T21:29:06Z","author_association":"NONE","body":"> missing documentation for the new config variable\r\n\r\nI added documentation for the new option in `CONFIGURE.md` and also added a README for the Zephyr port in the `zephyr` directory. \r\n\r\n> It may be good to explain differences to [OQS_BUILD_ONLY_LIB](https://github.com/open-quantum-safe/liboqs/blob/main/CONFIGURE.md#OQS_BUILD_ONLY_LIB) and how it impacts [OQS_DIST_BUILD](https://github.com/open-quantum-safe/liboqs/blob/main/CONFIGURE.md#oqs_dist_build).\r\n\r\nI didn't mention these two explicitly, as they are not really related to the new option. With the explanation of the new option, however, I think this should also be clear to a potential user of `OQS_EMBEDDED_BUILD`. ","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/liboqs/issues/comments/1859289685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-12-17T21:29:08Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
