{"id":"28054209301","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-03-29T08:18:17Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL. For this test I used OpenSSL-3.1.0.\r\n2. Build and install liboqs. I used its current master.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `mkdir -p openssl/apps; ln -s /opt/local/bin/openssl openssl/apps`\r\n5. Go to `_build` and do `ctest --output-on-failure`\r\n6. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488142971","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1488142971","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1488142971,"node_id":"IC_kwDOE_A9l85Ys0J7","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-03-29T08:18:17Z","updated_at":"2023-03-29T08:18:17Z","author_association":"MEMBER","body":"Update: With the minimal change in https://github.com/open-quantum-safe/oqs-provider/pull/134 a complete build and test cycle (running `scripts/fullbuild.sh` and `scripts/runtests.sh`) passes successfully on OSX.\r\n\r\nTherefore, please provide full script set to reproduce the problem described. Also, please describe how OpenSSL3 and the various other providers were built/installed.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488142971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-03-29T08:18:18Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28054438369","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-03-29T08:27:11Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL. For this test I used OpenSSL-3.1.0.\r\n2. Build and install liboqs. I used its current master.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `mkdir -p openssl/apps; ln -s /opt/local/bin/openssl openssl/apps`\r\n5. Go to `_build` and do `ctest --output-on-failure`\r\n6. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488154952","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1488154952","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1488154952,"node_id":"IC_kwDOE_A9l85Ys3FI","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-03-29T08:27:11Z","updated_at":"2023-03-29T08:27:11Z","author_association":"MEMBER","body":"Further update excluding the OpenSSL version chosen as a contributor to the issue: `MAKE_PARAMS=-j OPENSSL_BRANCH=openssl-3.1.0 ./scripts/fullbuild.sh -F && ./scripts/runtests.sh -V` also passes without problems using \r\n\r\n```\r\nApple clang version 14.0.0 (clang-1400.0.29.202)\r\nTarget: arm64-apple-darwin22.2.0\r\nThread model: posix\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488154952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-03-29T08:27:11Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28054489900","type":"IssueCommentEvent","actor":{"id":149199,"login":"bhess","display_login":"bhess","gravatar_id":"","url":"https://api.github.com/users/bhess","avatar_url":"https://avatars.githubusercontent.com/u/149199?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/133","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/133/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/133/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/133/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/133","id":1643215427,"node_id":"I_kwDOE_A9l85h8XpD","number":133,"title":"Update qsc encoder","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-03-28T05:15:23Z","updated_at":"2023-03-29T08:29:13Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"RFC seems to be at version 01 (https://datatracker.ietf.org/doc/draft-uni-qsckeys/01/) while encoding supported seems to be at level \"00\". Not aware whether this has a functional difference, but the [available encoding strings](https://github.com/open-quantum-safe/oqs-provider/blob/main/ALGORITHMS.md#key-encodings) thus appear stale.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/133/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488157774","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/133#issuecomment-1488157774","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/133","id":1488157774,"node_id":"IC_kwDOE_A9l85Ys3xO","user":{"login":"bhess","id":149199,"node_id":"MDQ6VXNlcjE0OTE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/149199?v=4","gravatar_id":"","url":"https://api.github.com/users/bhess","html_url":"https://github.com/bhess","followers_url":"https://api.github.com/users/bhess/followers","following_url":"https://api.github.com/users/bhess/following{/other_user}","gists_url":"https://api.github.com/users/bhess/gists{/gist_id}","starred_url":"https://api.github.com/users/bhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhess/subscriptions","organizations_url":"https://api.github.com/users/bhess/orgs","repos_url":"https://api.github.com/users/bhess/repos","events_url":"https://api.github.com/users/bhess/events{/privacy}","received_events_url":"https://api.github.com/users/bhess/received_events","type":"User","site_admin":false},"created_at":"2023-03-29T08:29:12Z","updated_at":"2023-03-29T08:29:12Z","author_association":"NONE","body":"draft-uni-qsckeys(-01) is outdated and was split to individual drafts draft-uni-qsckeys-dilithium(-00), draft-uni-qsckeys-sphincsplus(-00), ...\r\n\r\nI don't think a reference to the old draft is needed.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488157774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-03-29T08:29:13Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28055786032","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-03-29T09:16:42Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL. For this test I used OpenSSL-3.1.0.\r\n2. Build and install liboqs. I used its current master.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `mkdir -p openssl/apps; ln -s /opt/local/bin/openssl openssl/apps`\r\n5. Go to `_build` and do `ctest --output-on-failure`\r\n6. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488232823","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1488232823","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1488232823,"node_id":"IC_kwDOE_A9l85YtKF3","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-03-29T09:16:42Z","updated_at":"2023-03-29T09:16:42Z","author_association":"MEMBER","body":"Finally, confirmation that OSX builds and tests OK via CI: https://app.circleci.com/pipelines/github/open-quantum-safe/oqs-provider/418/workflows/2b807d0b-0dbb-4c93-ada0-b41242e02c63/jobs/440. Thanks for triggering us to support OSX, @mouse07410 : Looks like you were the first person caring to use (or actually test :) oqs-provider on that platform!","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488232823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-03-29T09:16:43Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28062100007","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-03-29T13:15:48Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL. For this test I used OpenSSL-3.1.0.\r\n2. Build and install liboqs. I used its current master.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `mkdir -p openssl/apps; ln -s /opt/local/bin/openssl openssl/apps`\r\n5. Go to `_build` and do `ctest --output-on-failure`\r\n6. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488591649","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1488591649","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1488591649,"node_id":"IC_kwDOE_A9l85Yuhsh","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-03-29T13:15:48Z","updated_at":"2023-03-29T13:15:48Z","author_association":"NONE","body":"> . . . a complete build and test cycle (running scripts/fullbuild.sh and scripts/runtests.sh) passes successfully on OSX\r\n\r\nFirst, I'd rather **not** do a **full rebuild** of everything (OpenSSL, liboqs) merely for the pleasure of being able to run the tests locally. \r\n\r\nSo, while I do have a clone of the OpenSSL master (`$HOME/src/openssl/` 3.2.0-dev), I am building this provider for the system-wide (Macports-installed) OpenSSL-3.1.0, which is binaries-only. So, I am trying to test it against that.\r\n\r\n>  Would you be willing to share instructions or a script how you built everything on OSX?\r\n\r\nCertainly.\r\n\r\n```\r\n$ cmake -DOPENSSL_ROOT_DIR=\"/opt/local/libexec/openssl3\" -DCMAKE_C_FLAGS=\"$CFLAGS -I/opt/local/include -L/opt/local/lib \" -DCMAKE_VERBOSE_MAKEFILE:BOOL=True  -S . -B _build\r\n.  .  .\r\n$ cmake --build _build\r\n```\r\n\r\n> What code [then] triggers the load of gostprovider in the stack trace above?\r\n\r\nMy assumption is - this (in `/opt/local/lib/etc/openssl/openssl.cnf`):\r\n```\r\n[provider_sect]\r\n default = default_sect\r\n legacy = legacy_sect\r\n pkcs11 = pkcs11_sect\r\n gost   = gost_sect\r\n base = base_sect\r\n oqs = oqs_sect\r\n\r\n[default_sect]\r\n activate = 1\r\n\r\n[legacy_sect]\r\n activate = 1\r\n\r\n[pkcs11_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/pkcs11.dylib\r\n pkcs11-module-path = /Library/OpenSC/lib/opensc-pkcs11.so\r\n activate = 1\r\n\r\n[gost_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/gostprov.dylib\r\n activate = 1\r\n\r\n[base_sect]\r\n activate = 1\r\n\r\n[oqs_sect]\r\n module = /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n activate = 1\r\n```\r\nAs you see, GOST provider is activated by default. I'm not sure I fully understand the meaning/implication of `activate = 1` here, or, rather, what would happen if I change it to `activate = 0`. Would the corresponding provider still load automatically when needed?\r\n\r\n> Any suggestions as to which command line tools (I have ssh access only) exist on OSX for debugging into this (`gdb` style)? \r\n\r\nHere you got me. As far as I'm concerned, debugging on OSX is living hell. OSX Xcode includes `lldb`, but I never mastered its commands. One can install `gdb` (I do it via Macports, it provides executable named `ggdb` which you'd need to digitlly sign with codesigning key using `codesign` CLI command), but it wasn't a great help to me. YMMV. Just in case, here's how I sign executables:\r\n1. Get code-signing identity via `security find-identity -p codesigning -v` and copy the text looking like \"Apple Development: My Name (LKEUYAD994)\"\r\n2. Run `sudo codesign -s \"Apple Development: My Name (LKEUYAD994)\" --force /opt/local/bin/ggdb`\r\n\r\n-------------\r\n\r\nI think I know why the tests fail - insufficient configurability of the `oqs-provider`. Here's what I'm trying to do (after successful build), and how it fails:\r\n```\r\n$ OPENSSL_APP=/opt/local/bin/openssl OPENSSL_MODULES=/opt/local/lib/ossl-modules/ DYLD_LIBRARY_PATH=\"/opt/local/lib:$DYLD_LIBRARY_PATH\" LD_LIBRARY_PATH=/opt/local/lib scripts/runtests.sh \r\nNo OQS-OpenSSL111 interop test because of absence of docker\r\nOpenSSL app: /opt/local/bin/openssl\r\nVersion information:\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\nlist: unable to load provider oqsprovider\r\nHint: use -provider-path option or OPENSSL_MODULES environment variable.\r\n8096FA56F87F0000:error:12800067:DSO support routines:dlfcn_load:could not load the shared library:crypto/dso/dso_dlfcn.c:118:filename(_build/lib/oqsprovider.dylib): dlopen(_build/lib/oqsprovider.dylib, 0x0002): Library not loaded: @rpath/liboqs.2.dylib\r\n  Referenced from: <66672B79-87AB-3F61-9D83-E3580EE7C899> /Users/ur20980/src/oqs-provider/_build/lib/oqsprovider.0.5.0-dev.dylib\r\n  Reason: tried: '/System/Volumes/Preboot/Cryptexes/OS@rpath/liboqs.2.dylib' (no such file), '/usr/local/lib/liboqs.2.dylib' (no such file), '/usr/lib/liboqs.2.dylib' (no such file, not in dyld cache)\r\n8096FA56F87F0000:error:12800067:DSO support routines:DSO_load:could not load the shared library:crypto/dso/dso_lib.c:152:\r\n8096FA56F87F0000:error:07880025:common libcrypto routines:provider_init:reason(524325):crypto/provider_core.c:904:name=oqsprovider\r\nCert gen/verify, CMS sign/verify tests for all enabled algorithms commencing...\r\n-n .\r\nlist: unable to load provider oqsprovider\r\nHint: use -provider-path option or OPENSSL_MODULES environment variable.\r\n8096FA56F87F0000:error:12800067:DSO support routines:dlfcn_load:could not load the shared library:crypto/dso/dso_dlfcn.c:118:filename(/opt/local/lib/ossl-modules/oqsprovider.dylib): dlopen(/opt/local/lib/ossl-modules/oqsprovider.dylib, 0x0002): Library not loaded: @rpath/liboqs.2.dylib\r\n  Referenced from: <66672B79-87AB-3F61-9D83-E3580EE7C899> /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n  Reason: tried: '/System/Volumes/Preboot/Cryptexes/OS@rpath/liboqs.2.dylib' (no such file), '/usr/local/lib/liboqs.2.dylib' (no such file), '/usr/lib/liboqs.2.dylib' (no such file, not in dyld cache)\r\n8096FA56F87F0000:error:12800067:DSO support routines:DSO_load:could not load the shared library:crypto/dso/dso_lib.c:152:\r\n8096FA56F87F0000:error:07880025:common libcrypto routines:provider_init:reason(524325):crypto/provider_core.c:904:name=oqsprovider\r\n-n .\r\n.  .  .\r\nlist: unable to load provider oqsprovider\r\nHint: use -provider-path option or OPENSSL_MODULES environment variable.\r\n8096FA56F87F0000:error:12800067:DSO support routines:dlfcn_load:could not load the shared library:crypto/dso/dso_dlfcn.c:118:filename(/opt/local/lib/ossl-modules/oqsprovider.dylib): dlopen(/opt/local/lib/ossl-modules/oqsprovider.dylib, 0x0002): Library not loaded: @rpath/liboqs.2.dylib\r\n  Referenced from: <66672B79-87AB-3F61-9D83-E3580EE7C899> /opt/local/libexec/openssl3/lib/ossl-modules/oqsprovider.dylib\r\n  Reason: tried: '/System/Volumes/Preboot/Cryptexes/OS@rpath/liboqs.2.dylib' (no such file), '/usr/local/lib/liboqs.2.dylib' (no such file), '/usr/lib/liboqs.2.dylib' (no such file, not in dyld cache)\r\n8096FA56F87F0000:error:12800067:DSO support routines:DSO_load:could not load the shared library:crypto/dso/dso_lib.c:152:\r\n8096FA56F87F0000:error:07880025:common libcrypto routines:provider_init:reason(524325):crypto/provider_core.c:904:name=oqsprovider\r\nTest project /Users/ur20980/src/oqs-provider/_build\r\n    Start 1: oqs_signatures\r\n1/2 Test #1: oqs_signatures ...................Subprocess aborted***Exception:   0.01 sec\r\n    Start 2: oqs_kems\r\n2/2 Test #2: oqs_kems .........................Subprocess aborted***Exception:   0.01 sec\r\n\r\n0% tests passed, 2 tests failed out of 2\r\n\r\nTotal Test time (real) =   0.02 sec\r\n\r\nThe following tests FAILED:\r\n\t  1 - oqs_signatures (Subprocess aborted)\r\n\t  2 - oqs_kems (Subprocess aborted)\r\nErrors while running CTest\r\nOutput from these tests are in: /Users/ur20980/src/oqs-provider/_build/Testing/Temporary/LastTest.log\r\nUse \"--rerun-failed --output-on-failure\" to re-run the failed cases verbosely.\r\n\r\nAll oqsprovider tests passed.\r\n$ \r\n$ ll /opt/local/lib/liboqs*.dylib\r\n-rwxr-xr-x  1 root  wheel  9793096 Mar 26 14:26 /opt/local/lib/liboqs.0.8.0-dev.dylib*\r\nlrwxr-xr-x  1 root  wheel       22 Mar 10 17:05 /opt/local/lib/liboqs.2.dylib@ -> liboqs.0.8.0-dev.dylib\r\nlrwxr-xr-x  1 root  wheel       14 Mar 10 17:05 /opt/local/lib/liboqs.dylib@ -> liboqs.2.dylib\r\n$ \r\n```\r\nAlso, note that the script thinks the all tests \"passed\", despite evidence to the contrary.\r\n\r\n------------------\r\n\r\nAfter I decided to bite the bullet and put a copy of `liboqs.2.dylib` where the script can't fail to locate it:\r\n```\r\n$ sudo ln -s /opt/local/lib/liboqs.2.dylib /usr/local/lib/\r\n$ OPENSSL_APP=/opt/local/bin/openssl OPENSSL_MODULES=/opt/local/lib/ossl-modules/ DYLD_LIBRARY_PATH=\"/opt/local/lib:$DYLD_LIBRARY_PATH\" LD_LIBRARY_PATH=/opt/local/lib scripts/runtests.sh \r\nNo OQS-OpenSSL111 interop test because of absence of docker\r\nOpenSSL app: /opt/local/bin/openssl\r\nVersion information:\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n    build info: OQS Provider v.0.5.0-dev (c71c2ad) based on liboqs v.0.8.0-dev using qsc-key-encoder v.draft-00-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  oqsprovider\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n    build info: OQS Provider v.0.5.0-dev (c71c2ad) based on liboqs v.0.8.0-dev using qsc-key-encoder v.draft-00-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\nCert gen/verify, CMS sign/verify tests for all enabled algorithms commencing...\r\n-n .\r\nlocalalgtest dilithium2 failed. Exiting..\r\n$ \r\n```\r\nAlas, no more data here, I can only guess what it was trying to do, or what/why failed.\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488591649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-03-29T13:15:49Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28066128689","type":"IssueCommentEvent","actor":{"id":57787676,"login":"baentsch","display_login":"baentsch","gravatar_id":"","url":"https://api.github.com/users/baentsch","avatar_url":"https://avatars.githubusercontent.com/u/57787676?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-03-29T15:32:13Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL. For this test I used OpenSSL-3.1.0.\r\n2. Build and install liboqs. I used its current master.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `mkdir -p openssl/apps; ln -s /opt/local/bin/openssl openssl/apps`\r\n5. Go to `_build` and do `ctest --output-on-failure`\r\n6. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488851771","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1488851771","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1488851771,"node_id":"IC_kwDOE_A9l85YvhM7","user":{"login":"baentsch","id":57787676,"node_id":"MDQ6VXNlcjU3Nzg3Njc2","avatar_url":"https://avatars.githubusercontent.com/u/57787676?v=4","gravatar_id":"","url":"https://api.github.com/users/baentsch","html_url":"https://github.com/baentsch","followers_url":"https://api.github.com/users/baentsch/followers","following_url":"https://api.github.com/users/baentsch/following{/other_user}","gists_url":"https://api.github.com/users/baentsch/gists{/gist_id}","starred_url":"https://api.github.com/users/baentsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baentsch/subscriptions","organizations_url":"https://api.github.com/users/baentsch/orgs","repos_url":"https://api.github.com/users/baentsch/repos","events_url":"https://api.github.com/users/baentsch/events{/privacy}","received_events_url":"https://api.github.com/users/baentsch/received_events","type":"User","site_admin":false},"created_at":"2023-03-29T15:32:12Z","updated_at":"2023-03-29T15:32:12Z","author_association":"MEMBER","body":"Thanks very much for these thoughts, trials and very helpful comments!\r\n\r\n> First, I'd rather not do a full rebuild of everything (OpenSSL, liboqs) merely for the pleasure of being able to run the tests locally.\r\n\r\nCompletely understandable and logical. I just need(ed) a baseline to see whether oqsprovider works at all under OSX.\r\n\r\n> I am building this provider for the system-wide (Macports-installed) OpenSSL-3.1.0, which is binaries-only. So, I am trying to test it against that.\r\n\r\nVery good goal and one I'd (also) like to see achieved for sure.\r\n\r\n> what would happen if I change it to activate = 0. Would the corresponding provider still load automatically when needed?\r\n\r\nNo. But I'd argue it's not needed for this (oqsprovider) test. oqsprovider only needs the default provider to function properly (for classic/PQ hybrid algs). So setting all \"activate=0\" except for default and oqsprovider would be a(nother) baseline.\r\n\r\n> - insufficient configurability of the oqs-provider\r\n\r\nWell, we're relying on the configuration capabilities of openssl, namely OPENSSL_MODULES env var. The test scripts set a default (sensible for a local build) if nothing else is set (which may be more sensible in a setup without a local openssl build).\r\n\r\nBut then again, I'm all ears for suggestions what additional config options you'd find helpful.\r\n\r\n > Also, note that the script thinks the all tests \"passed\", despite evidence to the contrary.\r\n\r\nThat's a clear mistake -- not checking the retval of `ctest`. Noted for improvement.\r\n\r\n> The immediate cause of this failure is the insistence of the scripts to find openssl.cnf in the same directory as the openssl executable\r\n\r\nAgreed, the scripts should not set them \"hard\" via the `-conf` parameter (but instead rely on the standard OPENSSL_CONF env var -- which then needs to have contents needed for testing, i.e., something along the lines of \"scripts/openssl-ca.cnf\"). Noted as further point for improvement.\r\n\r\n```\r\nCertificate request self-signature did not match the contents\r\n8096FA56F87F0000:error:4000000D:lib(128):oqs_sig_verify:reason(13):/Users/ur20980/src/oqs-provider/oqsprov/oqs_sig.c:400:\r\n8096FA56F87F0000:error:06880006:asn1 encoding routines:ASN1_item_verify_ctx:EVP lib:crypto/asn1/a_verify.c:217:\r\n```\r\n\r\nThose are very helpful hints. But one I cannot understand (how it hits that error condition -- short of maybe being unable to get the file input). Did _any_ files get created in the `tmp` directory? The \"interop.log\" file should be a bit more informative...\r\n\r\nBTW, and talking about \"informative\": if/as debugging is a pain, if you build `oqsprovider` with `-DCMAKE_BUILD_TYPE=Debug` you can make it very chatty by enabling environment variables, the most relevant being listed [here](https://github.com/open-quantum-safe/oqs-provider/wiki/Debugging#environment-variables). \r\n\r\n--> Would you have time/inclination to give this a try in your setup (and run the tests with all of them set (at least OQSPROV=1 OQSKM=1 OQSKEY=1)? `interop.log` then should become telltale as to what the problem is.\r\n\r\nIn the mean time, I'll try to create a setup mirroring yours on the M1 I have remotely available....\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1488851771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-03-29T15:32:13Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28072692639","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-03-29T20:21:58Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL. For this test I used OpenSSL-3.1.0.\r\n2. Build and install liboqs. I used its current master.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `mkdir -p openssl/apps; ln -s /opt/local/bin/openssl openssl/apps`\r\n5. Go to `_build` and do `ctest --output-on-failure`\r\n6. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1489253331","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1489253331","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1489253331,"node_id":"IC_kwDOE_A9l85YxDPT","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-03-29T20:21:58Z","updated_at":"2023-03-29T20:21:58Z","author_association":"NONE","body":"Offhand - more details later.\r\n\r\n> Did _any_ files get created in the `tmp` directory? \r\n\r\nNone whatsoever.\r\n```bash\r\n$ pwd\r\n/Users/ur20980/src/oqs-provider\r\n$ ls -l tmp\r\ntotal 0\r\n$ \r\n```\r\n\r\n> The \"interop.log\" file should be a bit more informative...\r\n\r\nMy point exactly! ;-)\r\n\r\n> if/as debugging is a pain, if you build oqsprovider with -DCMAKE_BUILD_TYPE=Debug you can make it very chatty by enabling environment variables, the most relevant being listed [here](https://github.com/open-quantum-safe/oqs-provider/wiki/Debugging#environment-variables). \r\n--> Would you have time/inclination to give this a try in your setup (and run the tests with all of them set (at least OQSPROV=1 OQSKM=1 OQSKEY=1)? interop.log then should become telltale as to what the problem is.\r\n\r\nWill do my best.\r\n\r\n> In the mean time, I'll try to create a setup mirroring yours on the M1 I have remotely available....\r\n\r\nGreat! In the meanwhile, I'm observing exactly the same behavior on my Intel-based Macs. So, most likely it is **not** Apple Silicon-specific.","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1489253331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-03-29T20:21:58Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28074498732","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-03-29T21:56:07Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL. For this test I used OpenSSL-3.1.0.\r\n2. Build and install liboqs. I used its current master.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `mkdir -p openssl/apps; ln -s /opt/local/bin/openssl openssl/apps`\r\n5. Go to `_build` and do `ctest --output-on-failure`\r\n6. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1489380431","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1489380431","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1489380431,"node_id":"IC_kwDOE_A9l85YxiRP","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-03-29T21:56:07Z","updated_at":"2023-03-29T21:56:07Z","author_association":"NONE","body":"I tried to rebuild with `-DCMAKE_BUILD_TYPE=Debug`, and immediately hit this problem:\r\n```\r\n-- The C compiler identification is AppleClang 14.0.0.14000029\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Check for working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang - skipped\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Creating Debug build with OQS-Debug env vars enabled\r\n-- Build will store public keys in PKCS#8 structures\r\n-- Build will include external encoding library for SPKI/PKCS#8\r\n-- Found OpenSSL: /opt/local/libexec/openssl3/lib/libcrypto.dylib (found suitable version \"3.1.0\", minimum required is \"3.0\")  \r\n-- Building commit c71c2ad in /Users/ur20980/src/oqs-provider\r\n-- Configuring done\r\nCMake Error at test/CMakeLists.txt:46 (add_executable):\r\n  Cannot find source file:\r\n\r\n    /Users/ur20980/src/oqs-provider/openssl/test/helpers/ssltestlib.c\r\n\r\n  Tried extensions .c .C .c++ .cc .cpp .cxx .cu .mpp .m .M .mm .ixx .cppm .h\r\n  .hh .h++ .hm .hpp .hxx .in .txx .f .F .for .f77 .f90 .f95 .f03 .hip .ispc\r\n\r\n\r\nCMake Error at test/CMakeLists.txt:46 (add_executable):\r\n  No SOURCES given to target: oqs_test_groups\r\n\r\n\r\nCMake Error at test/CMakeLists.txt:66 (add_executable):\r\n  No SOURCES given to target: oqs_test_tlssig\r\n\r\n\r\nCMake Generate step failed.  Build files cannot be regenerated correctly.\r\nIf the above succeeded, you can buila with: cmake --build _buil\r\n```\r\n\r\nWhy shouldn't I be able to build a provider in debug mode without OpenSSL source available? not to mention that my OpenSSL source is master, and I'd rather not mess with either cloning another copy of OpenSSL, or reconfiguring the 3.2.0-dev build tree.\r\n\r\n> Would you have time/inclination to give this a try in your setup (and run the tests with all of them set (at least OQSPROV=1 OQSKM=1 OQSKEY=1)?\r\n\r\nIt doesn't tell a lot to me, but maybe it would be of use to you:\r\n```\r\n$ rm interop.log \r\n$ OQSPROV=1 OQSKM=1 OQSKEY=1 scripts/runtests.sh \r\nNo OQS-OpenSSL111 interop test because of absence of docker\r\nOpenSSL app: /opt/local/libexec/openssl3/bin/openssl\r\nVersion information:\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\nOQS PROV: successfully registered dilithium2 with NID 1250\r\nOQS PROV: successfully registered p256_dilithium2 with NID 1251\r\nOQS PROV: successfully registered rsa3072_dilithium2 with NID 1252\r\nOQS PROV: successfully registered dilithium3 with NID 1253\r\nOQS PROV: successfully registered p384_dilithium3 with NID 1254\r\nOQS PROV: successfully registered dilithium5 with NID 1255\r\nOQS PROV: successfully registered p521_dilithium5 with NID 1256\r\nOQS PROV: successfully registered dilithium2_aes with NID 1257\r\nOQS PROV: successfully registered p256_dilithium2_aes with NID 1258\r\nOQS PROV: successfully registered rsa3072_dilithium2_aes with NID 1259\r\nOQS PROV: successfully registered dilithium3_aes with NID 1260\r\nOQS PROV: successfully registered p384_dilithium3_aes with NID 1261\r\nOQS PROV: successfully registered dilithium5_aes with NID 1262\r\nOQS PROV: successfully registered p521_dilithium5_aes with NID 1263\r\nOQS PROV: successfully registered falcon512 with NID 1264\r\nOQS PROV: successfully registered p256_falcon512 with NID 1265\r\nOQS PROV: successfully registered rsa3072_falcon512 with NID 1266\r\nOQS PROV: successfully registered falcon1024 with NID 1267\r\nOQS PROV: successfully registered p521_falcon1024 with NID 1268\r\nOQS PROV: successfully registered sphincsharaka128frobust with NID 1269\r\nOQS PROV: successfully registered p256_sphincsharaka128frobust with NID 1270\r\nOQS PROV: successfully registered rsa3072_sphincsharaka128frobust with NID 1271\r\nOQS PROV: successfully registered sphincsharaka128fsimple with NID 1272\r\nOQS PROV: successfully registered p256_sphincsharaka128fsimple with NID 1273\r\nOQS PROV: successfully registered rsa3072_sphincsharaka128fsimple with NID 1274\r\nOQS PROV: successfully registered sphincssha256128frobust with NID 1275\r\nOQS PROV: successfully registered p256_sphincssha256128frobust with NID 1276\r\nOQS PROV: successfully registered rsa3072_sphincssha256128frobust with NID 1277\r\nOQS PROV: successfully registered sphincssha256128ssimple with NID 1278\r\nOQS PROV: successfully registered p256_sphincssha256128ssimple with NID 1279\r\nOQS PROV: successfully registered rsa3072_sphincssha256128ssimple with NID 1280\r\nOQS PROV: successfully registered sphincsshake256128fsimple with NID 1281\r\nOQS PROV: successfully registered p256_sphincsshake256128fsimple with NID 1282\r\nOQS PROV: successfully registered rsa3072_sphincsshake256128fsimple with NID 1283\r\nOQS PROV: Default or FIPS provider available.\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n    build info: OQS Provider v.0.5.0-dev (c71c2ad) based on liboqs v.0.8.0-dev using qsc-key-encoder v.draft-00-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  oqsprovider\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n    build info: OQS Provider v.0.5.0-dev (c71c2ad) based on liboqs v.0.8.0-dev using qsc-key-encoder v.draft-00-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\nCert gen/verify, CMS sign/verify tests for all enabled algorithms commencing...\r\n-n .\r\nlocalalgtest dilithium2 failed. Exiting..\r\n$ cat interop.log \r\n-----\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\nUnknown operation 1 requested from OQS provider\r\nUnknown operation 1 requested from OQS provider\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\n-----\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 5 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\nUnknown operation 2 requested from OQS provider\r\nCertificate request self-signature did not match the contents\r\n40C17D0102000000:error:4000000D:lib(128):oqs_sig_verify:reason(13):/Users/ur20980/src/oqs-provider/oqsprov/oqs_sig.c:400:\r\n40C17D0102000000:error:06880006:asn1 encoding routines:ASN1_item_verify_ctx:EVP lib:crypto/asn1/a_verify.c:217:\r\nUnknown operation 1 requested from OQS provider\r\nUnknown operation 1 requested from OQS provider\r\n$ ll tmp\r\ntotal 64\r\ndrwxr-xr-x   6 ur20980  staff   192 Mar 29 17:52 ./\r\ndrwxr-xr-x  19 ur20980  staff   608 Mar 29 17:54 ../\r\n-rw-r--r--   1 ur20980  staff  5458 Mar 29 17:54 dilithium2_CA.crt\r\n-rw-------   1 ur20980  staff  5295 Mar 29 17:54 dilithium2_CA.key\r\n-rw-r--r--   1 ur20980  staff  5238 Mar 29 17:54 dilithium2_srv.csr\r\n-rw-------   1 ur20980  staff  5295 Mar 29 17:54 dilithium2_srv.key\r\n$ \r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1489380431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-03-29T21:56:07Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
{"id":"28075157614","type":"IssueCommentEvent","actor":{"id":5923577,"login":"mouse07410","display_login":"mouse07410","gravatar_id":"","url":"https://api.github.com/users/mouse07410","avatar_url":"https://avatars.githubusercontent.com/u/5923577?"},"repo":{"id":334511511,"name":"open-quantum-safe/oqs-provider","url":"https://api.github.com/repos/open-quantum-safe/oqs-provider"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","repository_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider","labels_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/labels{/name}","comments_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/comments","events_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/events","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132","id":1642717023,"node_id":"I_kwDOE_A9l85h6d9f","number":132,"title":"Unable to run tests","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2023-03-27T19:52:52Z","updated_at":"2023-03-29T22:37:20Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n`ctest` crashes with `SIGTRAP`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Build or get installed OpenSSL. For this test I used OpenSSL-3.1.0.\r\n2. Build and install liboqs. I used its current master.\r\n3. Clone, build, and install this provider (don't forget to edit `openssl.cnf` as appropriate).\r\n4. `mkdir -p openssl/apps; ln -s /opt/local/bin/openssl openssl/apps`\r\n5. Go to `_build` and do `ctest --output-on-failure`\r\n6. Observe the error report.\r\n\r\n**Expected behavior**\r\nTests passing.\r\n\r\n**Screenshots**\r\n<img width=\"718\" alt=\"Screenshot 2023-03-27 at 3 49 24 PM\" src=\"https://user-images.githubusercontent.com/5923577/228050759-876766f2-d3de-4c42-bf1c-1f4dab9978a2.png\">\r\n\r\n**Crash report**\r\n```\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [17508]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [17500]\r\nResponsible:           Terminal [983]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-27 15:39:40.6519 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 66000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [17508]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x1012d0ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1015bf5b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x1015bd478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x101213738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x1012b2400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x1012b2208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x1012d1098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x1012bdfcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x1012d0408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1012d02f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x1012d0944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x1012bd048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x100f73678 OSSL_provider_init + 292\r\n29  libcrypto.3.dylib             \t       0x1012bbddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x1012bbc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x1012ba93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x101212c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x101212ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1012af1a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x100de7420 main + 80\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x0000000000000103   x1: 0x000000016f019b90   x2: 0x00000001a624dda0   x3: 0x0000000000000103\r\n    x4: 0x000000000000000a   x5: 0x0000000024200000   x6: 0x0000000000000000   x7: 0x0000000000000500\r\n    x8: 0x0000000000000103   x9: 0x0000000000000103  x10: 0x0000000000000103  x11: 0x0000600000fb8000\r\n   x12: 0x0000000000000010  x13: 0x00000000fffffcee  x14: 0x00000000000007fb  x15: 0x00000000a4188ffb\r\n   x16: 0x00000001a627d760  x17: 0x00000002066400a0  x18: 0x0000000000000000  x19: 0x0000000101438d58\r\n   x20: 0x0000000000000103  x21: 0x00000001a624dda0  x22: 0x000000016f019b90  x23: 0x0000000000000103\r\n   x24: 0x0000000000000103  x25: 0x0000000000000000  x26: 0x0000000000000002  x27: 0x0000000000000002\r\n   x28: 0x0000600000fa4000   fp: 0x000000016f019b80   lr: 0x00000001a627f710\r\n    sp: 0x000000016f019b50   pc: 0x00000001a6283108 cpsr: 0x60001000\r\n   far: 0x00000001ff2bc0b8  esr: 0xf2000001 (Breakpoint) brk 1\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura 13.2.1\r\n - OpenSSL version 3.1.0\r\n - This provider version: current master (0.5.0-dev)\r\n\r\n**Additional context**\r\nThis is on MacBook Pro - Apple Silicon M2 chip. Similar problem on Intel-based iMac (used same process as above).\r\n\r\n**Note:** commenting out, e.g., GOST provider in `openssl.cnf` did not help.\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\n$ openssl list -providers\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n  oqs\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n$ \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1489426366","html_url":"https://github.com/open-quantum-safe/oqs-provider/issues/132#issuecomment-1489426366","issue_url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/132","id":1489426366,"node_id":"IC_kwDOE_A9l85Yxte-","user":{"login":"mouse07410","id":5923577,"node_id":"MDQ6VXNlcjU5MjM1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5923577?v=4","gravatar_id":"","url":"https://api.github.com/users/mouse07410","html_url":"https://github.com/mouse07410","followers_url":"https://api.github.com/users/mouse07410/followers","following_url":"https://api.github.com/users/mouse07410/following{/other_user}","gists_url":"https://api.github.com/users/mouse07410/gists{/gist_id}","starred_url":"https://api.github.com/users/mouse07410/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mouse07410/subscriptions","organizations_url":"https://api.github.com/users/mouse07410/orgs","repos_url":"https://api.github.com/users/mouse07410/repos","events_url":"https://api.github.com/users/mouse07410/events{/privacy}","received_events_url":"https://api.github.com/users/mouse07410/received_events","type":"User","site_admin":false},"created_at":"2023-03-29T22:37:20Z","updated_at":"2023-03-29T22:37:20Z","author_association":"NONE","body":"After some messing around with scripts and disabling OQS provider in the $OPENSSL_CONF file:\r\n```\r\n$ OQSPROV=1 OQSKM=1 OQSKEY=1 scripts/runtests.sh\r\nNo OQS-OpenSSL111 interop test because of absence of docker\r\nOpenSSL app: /opt/local/libexec/openssl3/bin/openssl\r\nVersion information:\r\nOpenSSL 3.1.0 14 Mar 2023 (Library: OpenSSL 3.1.0 14 Mar 2023)\r\nOQS PROV: successfully registered dilithium2 with NID 1250\r\nOQS PROV: successfully registered p256_dilithium2 with NID 1251\r\nOQS PROV: successfully registered rsa3072_dilithium2 with NID 1252\r\nOQS PROV: successfully registered dilithium3 with NID 1253\r\nOQS PROV: successfully registered p384_dilithium3 with NID 1254\r\nOQS PROV: successfully registered dilithium5 with NID 1255\r\nOQS PROV: successfully registered p521_dilithium5 with NID 1256\r\nOQS PROV: successfully registered dilithium2_aes with NID 1257\r\nOQS PROV: successfully registered p256_dilithium2_aes with NID 1258\r\nOQS PROV: successfully registered rsa3072_dilithium2_aes with NID 1259\r\nOQS PROV: successfully registered dilithium3_aes with NID 1260\r\nOQS PROV: successfully registered p384_dilithium3_aes with NID 1261\r\nOQS PROV: successfully registered dilithium5_aes with NID 1262\r\nOQS PROV: successfully registered p521_dilithium5_aes with NID 1263\r\nOQS PROV: successfully registered falcon512 with NID 1264\r\nOQS PROV: successfully registered p256_falcon512 with NID 1265\r\nOQS PROV: successfully registered rsa3072_falcon512 with NID 1266\r\nOQS PROV: successfully registered falcon1024 with NID 1267\r\nOQS PROV: successfully registered p521_falcon1024 with NID 1268\r\nOQS PROV: successfully registered sphincsharaka128frobust with NID 1269\r\nOQS PROV: successfully registered p256_sphincsharaka128frobust with NID 1270\r\nOQS PROV: successfully registered rsa3072_sphincsharaka128frobust with NID 1271\r\nOQS PROV: successfully registered sphincsharaka128fsimple with NID 1272\r\nOQS PROV: successfully registered p256_sphincsharaka128fsimple with NID 1273\r\nOQS PROV: successfully registered rsa3072_sphincsharaka128fsimple with NID 1274\r\nOQS PROV: successfully registered sphincssha256128frobust with NID 1275\r\nOQS PROV: successfully registered p256_sphincssha256128frobust with NID 1276\r\nOQS PROV: successfully registered rsa3072_sphincssha256128frobust with NID 1277\r\nOQS PROV: successfully registered sphincssha256128ssimple with NID 1278\r\nOQS PROV: successfully registered p256_sphincssha256128ssimple with NID 1279\r\nOQS PROV: successfully registered rsa3072_sphincssha256128ssimple with NID 1280\r\nOQS PROV: successfully registered sphincsshake256128fsimple with NID 1281\r\nOQS PROV: successfully registered p256_sphincsshake256128fsimple with NID 1282\r\nOQS PROV: successfully registered rsa3072_sphincsshake256128fsimple with NID 1283\r\nOQS PROV: Default or FIPS provider available.\r\nProviders:\r\n  base\r\n    name: OpenSSL Base Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  default\r\n    name: OpenSSL Default Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  gost\r\n    name: OpenSSL GOST Provider\r\n    status: active\r\n  legacy\r\n    name: OpenSSL Legacy Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  oqsprovider\r\n    name: OpenSSL OQS Provider\r\n    version: 0.5.0-dev\r\n    status: active\r\n    build info: OQS Provider v.0.5.0-dev (c71c2ad) based on liboqs v.0.8.0-dev using qsc-key-encoder v.draft-00-dev\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\n  pkcs11\r\n    name: PKCS#11 Provider\r\n    version: 3.1.0\r\n    status: active\r\n    build info: 3.1.0\r\n    gettable provider parameters:\r\n      name: pointer to a UTF8 encoded string (arbitrary size)\r\n      version: pointer to a UTF8 encoded string (arbitrary size)\r\n      buildinfo: pointer to a UTF8 encoded string (arbitrary size)\r\n      status: integer (arbitrary size)\r\nCert gen/verify, CMS sign/verify tests for all enabled algorithms commencing...\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\n-n .\r\nTest project /Users/ur20980/src/oqs-provider/_build\r\n    Start 1: oqs_signatures\r\n1/2 Test #1: oqs_signatures ...................SIGTRAP***Exception:   0.01 sec\r\n    Start 2: oqs_kems\r\n2/2 Test #2: oqs_kems .........................SIGTRAP***Exception:   0.01 sec\r\n\r\n0% tests passed, 2 tests failed out of 2\r\n\r\nTotal Test time (real) =   0.01 sec\r\n\r\nThe following tests FAILED:\r\n\t  1 - oqs_signatures (SIGTRAP)\r\n\t  2 - oqs_kems (SIGTRAP)\r\nErrors while running CTest\r\nOutput from these tests are in: /Users/ur20980/src/oqs-provider/_build/Testing/Temporary/LastTest.log\r\nUse \"--rerun-failed --output-on-failure\" to re-run the failed cases verbosely.\r\n\r\nAll oqsprovider tests passed.\r\n$ \r\n$ ls tmp\r\ndemoCA\t\t\t\t\t\tp384_dilithium3_aes_rootCA.crt\r\ndgstsignfile\t\t\t\t\tp384_dilithium3_aes_rootCA.key\r\ndilithium2.crt\t\t\t\t\tp384_dilithium3_aes_srv.crt\r\ndilithium2.csr\t\t\t\t\tp384_dilithium3_aes_srv.csr\r\ndilithium2.key\t\t\t\t\tp384_dilithium3_aes_srv.key\r\ndilithium2_CA.crt\t\t\t\tp384_dilithium3_aes_srv.pubkey\r\ndilithium2_CA.key\t\t\t\tp384_dilithium3_rootCA.crt\r\ndilithium2_CA.srl\t\t\t\tp384_dilithium3_rootCA.key\r\ndilithium2_aes.crt\t\t\t\tp384_dilithium3_srv.crt\r\ndilithium2_aes.csr\t\t\t\tp384_dilithium3_srv.csr\r\ndilithium2_aes.key\t\t\t\tp384_dilithium3_srv.key\r\ndilithium2_aes_CA.crt\t\t\t\tp384_dilithium3_srv.pubkey\r\ndilithium2_aes_CA.key\t\t\t\tp521_dilithium5.crt\r\ndilithium2_aes_CA.srl\t\t\t\tp521_dilithium5.csr\r\ndilithium2_aes_rootCA.crt\t\t\tp521_dilithium5.key\r\ndilithium2_aes_rootCA.key\t\t\tp521_dilithium5_CA.crt\r\ndilithium2_aes_srv.crt\t\t\t\tp521_dilithium5_CA.key\r\ndilithium2_aes_srv.csr\t\t\t\tp521_dilithium5_CA.srl\r\ndilithium2_aes_srv.key\t\t\t\tp521_dilithium5_aes.crt\r\ndilithium2_aes_srv.pubkey\t\t\tp521_dilithium5_aes.csr\r\ndilithium2_rootCA.crt\t\t\t\tp521_dilithium5_aes.key\r\ndilithium2_rootCA.key\t\t\t\tp521_dilithium5_aes_CA.crt\r\ndilithium2_srv.crt\t\t\t\tp521_dilithium5_aes_CA.key\r\ndilithium2_srv.csr\t\t\t\tp521_dilithium5_aes_CA.srl\r\ndilithium2_srv.key\t\t\t\tp521_dilithium5_aes_rootCA.crt\r\ndilithium2_srv.pubkey\t\t\t\tp521_dilithium5_aes_rootCA.key\r\ndilithium3.crt\t\t\t\t\tp521_dilithium5_aes_srv.crt\r\ndilithium3.csr\t\t\t\t\tp521_dilithium5_aes_srv.csr\r\ndilithium3.key\t\t\t\t\tp521_dilithium5_aes_srv.key\r\ndilithium3_CA.crt\t\t\t\tp521_dilithium5_aes_srv.pubkey\r\ndilithium3_CA.key\t\t\t\tp521_dilithium5_rootCA.crt\r\ndilithium3_CA.srl\t\t\t\tp521_dilithium5_rootCA.key\r\ndilithium3_aes.crt\t\t\t\tp521_dilithium5_srv.crt\r\ndilithium3_aes.csr\t\t\t\tp521_dilithium5_srv.csr\r\ndilithium3_aes.key\t\t\t\tp521_dilithium5_srv.key\r\ndilithium3_aes_CA.crt\t\t\t\tp521_dilithium5_srv.pubkey\r\ndilithium3_aes_CA.key\t\t\t\tp521_falcon1024.crt\r\ndilithium3_aes_CA.srl\t\t\t\tp521_falcon1024.csr\r\ndilithium3_aes_rootCA.crt\t\t\tp521_falcon1024.key\r\ndilithium3_aes_rootCA.key\t\t\tp521_falcon1024_CA.crt\r\ndilithium3_aes_srv.crt\t\t\t\tp521_falcon1024_CA.key\r\ndilithium3_aes_srv.csr\t\t\t\tp521_falcon1024_CA.srl\r\ndilithium3_aes_srv.key\t\t\t\tp521_falcon1024_rootCA.crt\r\ndilithium3_aes_srv.pubkey\t\t\tp521_falcon1024_rootCA.key\r\ndilithium3_rootCA.crt\t\t\t\tp521_falcon1024_srv.crt\r\ndilithium3_rootCA.key\t\t\t\tp521_falcon1024_srv.csr\r\ndilithium3_srv.crt\t\t\t\tp521_falcon1024_srv.key\r\ndilithium3_srv.csr\t\t\t\tp521_falcon1024_srv.pubkey\r\ndilithium3_srv.key\t\t\t\trsa3072_dilithium2.crt\r\ndilithium3_srv.pubkey\t\t\t\trsa3072_dilithium2.csr\r\ndilithium5.crt\t\t\t\t\trsa3072_dilithium2.key\r\ndilithium5.csr\t\t\t\t\trsa3072_dilithium2_CA.crt\r\ndilithium5.key\t\t\t\t\trsa3072_dilithium2_CA.key\r\ndilithium5_CA.crt\t\t\t\trsa3072_dilithium2_CA.srl\r\ndilithium5_CA.key\t\t\t\trsa3072_dilithium2_aes.crt\r\ndilithium5_CA.srl\t\t\t\trsa3072_dilithium2_aes.csr\r\ndilithium5_aes.crt\t\t\t\trsa3072_dilithium2_aes.key\r\ndilithium5_aes.csr\t\t\t\trsa3072_dilithium2_aes_CA.crt\r\ndilithium5_aes.key\t\t\t\trsa3072_dilithium2_aes_CA.key\r\ndilithium5_aes_CA.crt\t\t\t\trsa3072_dilithium2_aes_CA.srl\r\ndilithium5_aes_CA.key\t\t\t\trsa3072_dilithium2_aes_rootCA.crt\r\ndilithium5_aes_CA.srl\t\t\t\trsa3072_dilithium2_aes_rootCA.key\r\ndilithium5_aes_rootCA.crt\t\t\trsa3072_dilithium2_aes_srv.crt\r\ndilithium5_aes_rootCA.key\t\t\trsa3072_dilithium2_aes_srv.csr\r\ndilithium5_aes_srv.crt\t\t\t\trsa3072_dilithium2_aes_srv.key\r\ndilithium5_aes_srv.csr\t\t\t\trsa3072_dilithium2_aes_srv.pubkey\r\ndilithium5_aes_srv.key\t\t\t\trsa3072_dilithium2_rootCA.crt\r\ndilithium5_aes_srv.pubkey\t\t\trsa3072_dilithium2_rootCA.key\r\ndilithium5_rootCA.crt\t\t\t\trsa3072_dilithium2_srv.crt\r\ndilithium5_rootCA.key\t\t\t\trsa3072_dilithium2_srv.csr\r\ndilithium5_srv.crt\t\t\t\trsa3072_dilithium2_srv.key\r\ndilithium5_srv.csr\t\t\t\trsa3072_dilithium2_srv.pubkey\r\ndilithium5_srv.key\t\t\t\trsa3072_falcon512.crt\r\ndilithium5_srv.pubkey\t\t\t\trsa3072_falcon512.csr\r\nfalcon1024.crt\t\t\t\t\trsa3072_falcon512.key\r\nfalcon1024.csr\t\t\t\t\trsa3072_falcon512_CA.crt\r\nfalcon1024.key\t\t\t\t\trsa3072_falcon512_CA.key\r\nfalcon1024_CA.crt\t\t\t\trsa3072_falcon512_CA.srl\r\nfalcon1024_CA.key\t\t\t\trsa3072_falcon512_rootCA.crt\r\nfalcon1024_CA.srl\t\t\t\trsa3072_falcon512_rootCA.key\r\nfalcon1024_rootCA.crt\t\t\t\trsa3072_falcon512_srv.crt\r\nfalcon1024_rootCA.key\t\t\t\trsa3072_falcon512_srv.csr\r\nfalcon1024_srv.crt\t\t\t\trsa3072_falcon512_srv.key\r\nfalcon1024_srv.csr\t\t\t\trsa3072_falcon512_srv.pubkey\r\nfalcon1024_srv.key\t\t\t\trsa3072_sphincsharaka128frobust.crt\r\nfalcon1024_srv.pubkey\t\t\t\trsa3072_sphincsharaka128frobust.csr\r\nfalcon512.crt\t\t\t\t\trsa3072_sphincsharaka128frobust.key\r\nfalcon512.csr\t\t\t\t\trsa3072_sphincsharaka128frobust_CA.crt\r\nfalcon512.key\t\t\t\t\trsa3072_sphincsharaka128frobust_CA.key\r\nfalcon512_CA.crt\t\t\t\trsa3072_sphincsharaka128frobust_CA.srl\r\nfalcon512_CA.key\t\t\t\trsa3072_sphincsharaka128frobust_rootCA.crt\r\nfalcon512_CA.srl\t\t\t\trsa3072_sphincsharaka128frobust_rootCA.key\r\nfalcon512_rootCA.crt\t\t\t\trsa3072_sphincsharaka128frobust_srv.crt\r\nfalcon512_rootCA.key\t\t\t\trsa3072_sphincsharaka128frobust_srv.csr\r\nfalcon512_srv.crt\t\t\t\trsa3072_sphincsharaka128frobust_srv.key\r\nfalcon512_srv.csr\t\t\t\trsa3072_sphincsharaka128frobust_srv.pubkey\r\nfalcon512_srv.key\t\t\t\trsa3072_sphincsharaka128fsimple.crt\r\nfalcon512_srv.pubkey\t\t\t\trsa3072_sphincsharaka128fsimple.csr\r\ninputfile\t\t\t\t\trsa3072_sphincsharaka128fsimple.key\r\np256_dilithium2.crt\t\t\t\trsa3072_sphincsharaka128fsimple_CA.crt\r\np256_dilithium2.csr\t\t\t\trsa3072_sphincsharaka128fsimple_CA.key\r\np256_dilithium2.key\t\t\t\trsa3072_sphincsharaka128fsimple_CA.srl\r\np256_dilithium2_CA.crt\t\t\t\trsa3072_sphincsharaka128fsimple_rootCA.crt\r\np256_dilithium2_CA.key\t\t\t\trsa3072_sphincsharaka128fsimple_rootCA.key\r\np256_dilithium2_CA.srl\t\t\t\trsa3072_sphincsharaka128fsimple_srv.crt\r\np256_dilithium2_aes.crt\t\t\t\trsa3072_sphincsharaka128fsimple_srv.csr\r\np256_dilithium2_aes.csr\t\t\t\trsa3072_sphincsharaka128fsimple_srv.key\r\np256_dilithium2_aes.key\t\t\t\trsa3072_sphincsharaka128fsimple_srv.pubkey\r\np256_dilithium2_aes_CA.crt\t\t\trsa3072_sphincssha256128frobust.crt\r\np256_dilithium2_aes_CA.key\t\t\trsa3072_sphincssha256128frobust.csr\r\np256_dilithium2_aes_CA.srl\t\t\trsa3072_sphincssha256128frobust.key\r\np256_dilithium2_aes_rootCA.crt\t\t\trsa3072_sphincssha256128frobust_CA.crt\r\np256_dilithium2_aes_rootCA.key\t\t\trsa3072_sphincssha256128frobust_CA.key\r\np256_dilithium2_aes_srv.crt\t\t\trsa3072_sphincssha256128frobust_CA.srl\r\np256_dilithium2_aes_srv.csr\t\t\trsa3072_sphincssha256128frobust_rootCA.crt\r\np256_dilithium2_aes_srv.key\t\t\trsa3072_sphincssha256128frobust_rootCA.key\r\np256_dilithium2_aes_srv.pubkey\t\t\trsa3072_sphincssha256128frobust_srv.crt\r\np256_dilithium2_rootCA.crt\t\t\trsa3072_sphincssha256128frobust_srv.csr\r\np256_dilithium2_rootCA.key\t\t\trsa3072_sphincssha256128frobust_srv.key\r\np256_dilithium2_srv.crt\t\t\t\trsa3072_sphincssha256128frobust_srv.pubkey\r\np256_dilithium2_srv.csr\t\t\t\trsa3072_sphincssha256128ssimple.crt\r\np256_dilithium2_srv.key\t\t\t\trsa3072_sphincssha256128ssimple.csr\r\np256_dilithium2_srv.pubkey\t\t\trsa3072_sphincssha256128ssimple.key\r\np256_falcon512.crt\t\t\t\trsa3072_sphincssha256128ssimple_CA.crt\r\np256_falcon512.csr\t\t\t\trsa3072_sphincssha256128ssimple_CA.key\r\np256_falcon512.key\t\t\t\trsa3072_sphincssha256128ssimple_CA.srl\r\np256_falcon512_CA.crt\t\t\t\trsa3072_sphincssha256128ssimple_rootCA.crt\r\np256_falcon512_CA.key\t\t\t\trsa3072_sphincssha256128ssimple_rootCA.key\r\np256_falcon512_CA.srl\t\t\t\trsa3072_sphincssha256128ssimple_srv.crt\r\np256_falcon512_rootCA.crt\t\t\trsa3072_sphincssha256128ssimple_srv.csr\r\np256_falcon512_rootCA.key\t\t\trsa3072_sphincssha256128ssimple_srv.key\r\np256_falcon512_srv.crt\t\t\t\trsa3072_sphincssha256128ssimple_srv.pubkey\r\np256_falcon512_srv.csr\t\t\t\trsa3072_sphincsshake256128fsimple.crt\r\np256_falcon512_srv.key\t\t\t\trsa3072_sphincsshake256128fsimple.csr\r\np256_falcon512_srv.pubkey\t\t\trsa3072_sphincsshake256128fsimple.key\r\np256_sphincsharaka128frobust.crt\t\trsa3072_sphincsshake256128fsimple_CA.crt\r\np256_sphincsharaka128frobust.csr\t\trsa3072_sphincsshake256128fsimple_CA.key\r\np256_sphincsharaka128frobust.key\t\trsa3072_sphincsshake256128fsimple_CA.srl\r\np256_sphincsharaka128frobust_CA.crt\t\trsa3072_sphincsshake256128fsimple_rootCA.crt\r\np256_sphincsharaka128frobust_CA.key\t\trsa3072_sphincsshake256128fsimple_rootCA.key\r\np256_sphincsharaka128frobust_CA.srl\t\trsa3072_sphincsshake256128fsimple_srv.crt\r\np256_sphincsharaka128frobust_rootCA.crt\t\trsa3072_sphincsshake256128fsimple_srv.csr\r\np256_sphincsharaka128frobust_rootCA.key\t\trsa3072_sphincsshake256128fsimple_srv.key\r\np256_sphincsharaka128frobust_srv.crt\t\trsa3072_sphincsshake256128fsimple_srv.pubkey\r\np256_sphincsharaka128frobust_srv.csr\t\tsigneddatafile\r\np256_sphincsharaka128frobust_srv.key\t\tsignedfile.cms\r\np256_sphincsharaka128frobust_srv.pubkey\t\tsphincsharaka128frobust.crt\r\np256_sphincsharaka128fsimple.crt\t\tsphincsharaka128frobust.csr\r\np256_sphincsharaka128fsimple.csr\t\tsphincsharaka128frobust.key\r\np256_sphincsharaka128fsimple.key\t\tsphincsharaka128frobust_CA.crt\r\np256_sphincsharaka128fsimple_CA.crt\t\tsphincsharaka128frobust_CA.key\r\np256_sphincsharaka128fsimple_CA.key\t\tsphincsharaka128frobust_CA.srl\r\np256_sphincsharaka128fsimple_CA.srl\t\tsphincsharaka128frobust_rootCA.crt\r\np256_sphincsharaka128fsimple_rootCA.crt\t\tsphincsharaka128frobust_rootCA.key\r\np256_sphincsharaka128fsimple_rootCA.key\t\tsphincsharaka128frobust_srv.crt\r\np256_sphincsharaka128fsimple_srv.crt\t\tsphincsharaka128frobust_srv.csr\r\np256_sphincsharaka128fsimple_srv.csr\t\tsphincsharaka128frobust_srv.key\r\np256_sphincsharaka128fsimple_srv.key\t\tsphincsharaka128frobust_srv.pubkey\r\np256_sphincsharaka128fsimple_srv.pubkey\t\tsphincsharaka128fsimple.crt\r\np256_sphincssha256128frobust.crt\t\tsphincsharaka128fsimple.csr\r\np256_sphincssha256128frobust.csr\t\tsphincsharaka128fsimple.key\r\np256_sphincssha256128frobust.key\t\tsphincsharaka128fsimple_CA.crt\r\np256_sphincssha256128frobust_CA.crt\t\tsphincsharaka128fsimple_CA.key\r\np256_sphincssha256128frobust_CA.key\t\tsphincsharaka128fsimple_CA.srl\r\np256_sphincssha256128frobust_CA.srl\t\tsphincsharaka128fsimple_rootCA.crt\r\np256_sphincssha256128frobust_rootCA.crt\t\tsphincsharaka128fsimple_rootCA.key\r\np256_sphincssha256128frobust_rootCA.key\t\tsphincsharaka128fsimple_srv.crt\r\np256_sphincssha256128frobust_srv.crt\t\tsphincsharaka128fsimple_srv.csr\r\np256_sphincssha256128frobust_srv.csr\t\tsphincsharaka128fsimple_srv.key\r\np256_sphincssha256128frobust_srv.key\t\tsphincsharaka128fsimple_srv.pubkey\r\np256_sphincssha256128frobust_srv.pubkey\t\tsphincssha256128frobust.crt\r\np256_sphincssha256128ssimple.crt\t\tsphincssha256128frobust.csr\r\np256_sphincssha256128ssimple.csr\t\tsphincssha256128frobust.key\r\np256_sphincssha256128ssimple.key\t\tsphincssha256128frobust_CA.crt\r\np256_sphincssha256128ssimple_CA.crt\t\tsphincssha256128frobust_CA.key\r\np256_sphincssha256128ssimple_CA.key\t\tsphincssha256128frobust_CA.srl\r\np256_sphincssha256128ssimple_CA.srl\t\tsphincssha256128frobust_rootCA.crt\r\np256_sphincssha256128ssimple_rootCA.crt\t\tsphincssha256128frobust_rootCA.key\r\np256_sphincssha256128ssimple_rootCA.key\t\tsphincssha256128frobust_srv.crt\r\np256_sphincssha256128ssimple_srv.crt\t\tsphincssha256128frobust_srv.csr\r\np256_sphincssha256128ssimple_srv.csr\t\tsphincssha256128frobust_srv.key\r\np256_sphincssha256128ssimple_srv.key\t\tsphincssha256128frobust_srv.pubkey\r\np256_sphincssha256128ssimple_srv.pubkey\t\tsphincssha256128ssimple.crt\r\np256_sphincsshake256128fsimple.crt\t\tsphincssha256128ssimple.csr\r\np256_sphincsshake256128fsimple.csr\t\tsphincssha256128ssimple.key\r\np256_sphincsshake256128fsimple.key\t\tsphincssha256128ssimple_CA.crt\r\np256_sphincsshake256128fsimple_CA.crt\t\tsphincssha256128ssimple_CA.key\r\np256_sphincsshake256128fsimple_CA.key\t\tsphincssha256128ssimple_CA.srl\r\np256_sphincsshake256128fsimple_CA.srl\t\tsphincssha256128ssimple_rootCA.crt\r\np256_sphincsshake256128fsimple_rootCA.crt\tsphincssha256128ssimple_rootCA.key\r\np256_sphincsshake256128fsimple_rootCA.key\tsphincssha256128ssimple_srv.crt\r\np256_sphincsshake256128fsimple_srv.crt\t\tsphincssha256128ssimple_srv.csr\r\np256_sphincsshake256128fsimple_srv.csr\t\tsphincssha256128ssimple_srv.key\r\np256_sphincsshake256128fsimple_srv.key\t\tsphincssha256128ssimple_srv.pubkey\r\np256_sphincsshake256128fsimple_srv.pubkey\tsphincsshake256128fsimple.crt\r\np384_dilithium3.crt\t\t\t\tsphincsshake256128fsimple.csr\r\np384_dilithium3.csr\t\t\t\tsphincsshake256128fsimple.key\r\np384_dilithium3.key\t\t\t\tsphincsshake256128fsimple_CA.crt\r\np384_dilithium3_CA.crt\t\t\t\tsphincsshake256128fsimple_CA.key\r\np384_dilithium3_CA.key\t\t\t\tsphincsshake256128fsimple_CA.srl\r\np384_dilithium3_CA.srl\t\t\t\tsphincsshake256128fsimple_rootCA.crt\r\np384_dilithium3_aes.crt\t\t\t\tsphincsshake256128fsimple_rootCA.key\r\np384_dilithium3_aes.csr\t\t\t\tsphincsshake256128fsimple_srv.crt\r\np384_dilithium3_aes.key\t\t\t\tsphincsshake256128fsimple_srv.csr\r\np384_dilithium3_aes_CA.crt\t\t\tsphincsshake256128fsimple_srv.key\r\np384_dilithium3_aes_CA.key\t\t\tsphincsshake256128fsimple_srv.pubkey\r\np384_dilithium3_aes_CA.srl\r\n$ \r\n```\r\n\r\n`interop.log`:  [interop.log.txt](https://github.com/open-quantum-safe/oqs-provider/files/11106124/interop.log.txt)\r\n\r\nCrash report for `oqs_test_kems`:\r\n```\r\n-------------------------------------\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               oqs_test_kems [61073]\r\nPath:                  /Users/USER/*/oqs_test_kems\r\nIdentifier:            oqs_test_kems\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        ctest [61071]\r\nResponsible:           Terminal [53861]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-03-29 18:01:07.2313 -0400\r\nOS Version:            macOS 13.2.1 (22D68)\r\nReport Version:        12\r\nAnonymous UUID:        161C054B-E964-CDD3-5EBC-5A9DBE3E2AE2\r\n\r\n\r\nTime Awake Since Boot: 240000 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BREAKPOINT (SIGTRAP)\r\nException Codes:       0x0000000000000001, 0x00000001a6283108\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 5 Trace/BPT trap: 5\r\nTerminating Process:   exc handler [61073]\r\n\r\nApplication Specific Information:\r\nBUG IN CLIENT OF LIBPLATFORM: Trying to recursively lock an os_once_t\r\nAbort Cause 259\r\n\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   libsystem_platform.dylib      \t       0x1a6283108 _os_once_gate_recursive_abort + 36\r\n1   libsystem_platform.dylib      \t       0x1a627f710 _os_once_gate_wait + 348\r\n2   libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n3   libcrypto.3.dylib             \t       0x105111fcc CRYPTO_THREAD_run_once + 12\r\n4   libcrypto.3.dylib             \t       0x105124ea4 ossl_obj_add_object + 236\r\n5   gostprov.dylib                \t       0x1054135b4 populate_gost_engine + 116\r\n6   gostprov.dylib                \t       0x105411478 OSSL_provider_init + 116\r\n7   libcrypto.3.dylib             \t       0x10510fddc provider_activate + 260\r\n8   libcrypto.3.dylib             \t       0x10510fc48 ossl_provider_activate + 56\r\n9   libcrypto.3.dylib             \t       0x10510e93c provider_conf_init + 608\r\n10  libcrypto.3.dylib             \t       0x105066c4c CONF_modules_load + 856\r\n11  libcrypto.3.dylib             \t       0x105066ee8 CONF_modules_load_file_ex + 120\r\n12  libcrypto.3.dylib             \t       0x105067738 ossl_config_int + 68\r\n13  libcrypto.3.dylib             \t       0x105106400 ossl_init_config_ossl_ + 16\r\n14  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n15  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n16  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n17  libcrypto.3.dylib             \t       0x105111fcc CRYPTO_THREAD_run_once + 12\r\n18  libcrypto.3.dylib             \t       0x105106208 OPENSSL_init_crypto + 1104\r\n19  libcrypto.3.dylib             \t       0x105125098 obj_lock_initialise_ossl_ + 20\r\n20  libsystem_pthread.dylib       \t       0x1a624ddec __pthread_once_handler + 76\r\n21  libsystem_platform.dylib      \t       0x1a627d7e0 _os_once_callout + 32\r\n22  libsystem_pthread.dylib       \t       0x1a624dd84 pthread_once + 100\r\n23  libcrypto.3.dylib             \t       0x105111fcc CRYPTO_THREAD_run_once + 12\r\n24  libcrypto.3.dylib             \t       0x105124408 OBJ_sn2nid + 112\r\n25  libcrypto.3.dylib             \t       0x1051242f4 OBJ_txt2obj + 216\r\n26  libcrypto.3.dylib             \t       0x105124944 OBJ_txt2nid + 20\r\n27  libcrypto.3.dylib             \t       0x105111048 core_obj_create + 36\r\n28  oqsprovider.0.5.0-dev.dylib   \t       0x104dff538 OSSL_provider_init + 280 (oqsprov.c:586)\r\n29  libcrypto.3.dylib             \t       0x10510fddc provider_activate + 260\r\n30  libcrypto.3.dylib             \t       0x10510fc48 ossl_provider_activate + 56\r\n31  libcrypto.3.dylib             \t       0x10510e93c provider_conf_init + 608\r\n32  libcrypto.3.dylib             \t       0x105066c4c CONF_modules_load + 856\r\n33  libcrypto.3.dylib             \t       0x105066ee8 CONF_modules_load_file_ex + 120\r\n34  libcrypto.3.dylib             \t       0x1051031a4 OSSL_LIB_CTX_load_config + 20\r\n35  oqs_test_kems                 \t       0x104c3b2e0 main + 84 (oqs_test_kems.c:153)\r\n36  dyld                          \t       0x1a5f27e50 start + 2544\r\n```","reactions":{"url":"https://api.github.com/repos/open-quantum-safe/oqs-provider/issues/comments/1489426366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-03-29T22:37:20Z","org":{"id":20689385,"login":"open-quantum-safe","gravatar_id":"","url":"https://api.github.com/orgs/open-quantum-safe","avatar_url":"https://avatars.githubusercontent.com/u/20689385?"}}
